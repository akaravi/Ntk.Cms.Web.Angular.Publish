"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[642],{30643:(Y,O,s)=>{s.d(O,{K:()=>_e});var D=s(8239),_=s(86889),i=s(54536),g=s(34511),m=s(60656),e=s(64537),v=s(94032),U=s(32607),I=s(56707),x=s(50727),Z=s(88692),A=s(20092),y=s(1379),P=s(9638),S=s(83704),T=s(88659),L=s(83331),R=s(39665),k=s(18033),F=s(64639),J=s(99482),N=s(56599),b=s(63181),K=s(75738),W=s(56014),G=s(81418);const B=["vform"];function C(l,c){if(1&l&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&l){const o=c.$implicit;e.Q6J("value",o.value),e.xp6(1),e.Oqu(o.description)}}function M(l,c){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function h(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-select",32,33),e.NdJ("ngModelChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.recordStatus=t)}),e.YNc(3,C,2,2,"mat-option",34),e.qZA(),e.TgZ(4,"mat-hint",11),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,M,5,3,"mat-error",12),e.qZA()}if(2&l){const o=e.MAs(2),n=e.oxw();e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.recordStatus?null:n.fieldsInfo.recordStatus.fieldTitle),e.MGl("ngClass","cms-RecordStatusEnum-selector-",n.dataModel.recordStatus,""),e.Q6J("ngModel",n.dataModel.recordStatus),e.xp6(2),e.Q6J("ngForOf",n.dataModelEnumRecordStatusResult.listItems),e.xp6(2),e.Oqu(e.lcZ(6,6,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function r(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.dataModel.title="")}),e._uU(1,"close"),e.qZA()}}function a(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.fieldsInfo.title?null:o.fieldsInfo.title.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function f(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",36,37),e.NdJ("ngModelChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.title=t)}),e.qZA(),e.YNc(5,r,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,a,5,4,"mat-error",12),e.qZA()}if(2&l){const o=e.MAs(4),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.title?null:n.fieldsInfo.title.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.title?null:n.fieldsInfo.title.fieldTitle),e.Q6J("ngModel",n.dataModel.title),e.xp6(2),e.Q6J("ngIf",n.dataModel.title),e.xp6(4),e.hij("",o.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function E(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.dataModel.titleResourceLanguage="")}),e._uU(1,"close"),e.qZA()}}function p(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.titleResourceLanguage?null:o.fieldsInfo.titleResourceLanguage.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function q(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"app-cms-user-selector",39),e.NdJ("optionChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.onActionSelectUser(t))})("optionLoadingChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.loading=t)}),e.qZA()}if(2&l){const o=e.oxw();e.Q6J("optionLoading",o.loading)("optionSelectForce",o.dataModel.linkUserId)("optionPlaceholder",o.translate.instant("TITLE.USER"))("optionDisabled",!(null!=o.fieldsInfo.linkUserId&&o.fieldsInfo.linkUserId.accessAddField))}}function H(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"app-cms-site-selector",39),e.NdJ("optionChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.onActionSelectSite(t))})("optionLoadingChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.loading=t)}),e.qZA()}if(2&l){const o=e.oxw();e.Q6J("optionLoading",o.loading)("optionSelectForce",o.dataModel.linkSiteId)("optionPlaceholder",o.translate.instant("TITLE.SITE"))("optionDisabled",!(null!=o.fieldsInfo.linkSiteId&&o.fieldsInfo.linkSiteId.accessAddField))}}function j(l,c){if(1&l&&(e._UZ(0,"img",40),e.ALo(1,"cmsthumbnail")),2&l){const o=e.oxw();e.s9C("src",e.lcZ(1,1,o.dataModel.linkFileContentIdSrc),e.LSH)}}function V(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.dataModel.linkFileContentId=null)}),e._uU(1,"close"),e.qZA()}}function $(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.dataModel.description="")}),e._uU(1,"close"),e.qZA()}}function z(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.description?null:o.fieldsInfo.description.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function X(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-slide-toggle",41),e.NdJ("ngModelChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.isApproved=t)}),e._uU(1),e.qZA()}if(2&l){const o=e.oxw();e.Q6J("ngModel",o.dataModel.isApproved)("disabled",!(null!=o.fieldsInfo.isApproved&&o.fieldsInfo.isApproved.accessAddField)),e.xp6(1),e.hij(" ",null==o.fieldsInfo.isApproved?null:o.fieldsInfo.isApproved.fieldTitle," ")}}function ee(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.dataModel.approvedResult="")}),e._uU(1,"close"),e.qZA()}}function te(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.fieldsInfo.approvedResult?null:o.fieldsInfo.approvedResult.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function oe(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",42,43),e.NdJ("ngModelChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.approvedResult=t)}),e.qZA(),e.YNc(5,ee,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,te,5,4,"mat-error",12),e.qZA()}if(2&l){const o=e.MAs(4),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.approvedResult?null:n.fieldsInfo.approvedResult.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.description?null:n.fieldsInfo.description.fieldTitle),e.Q6J("ngModel",n.dataModel.approvedResult),e.xp6(2),e.Q6J("ngIf",n.dataModel.approvedResult),e.xp6(4),e.hij("",o.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function ne(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function ie(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function le(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",44),e.NdJ("ngModelChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.approveCheckDate=t)}),e.qZA(),e.YNc(4,ne,2,0,"mat-icon",9),e.YNc(5,ie,2,0,"mat-icon",9),e._UZ(6,"mat-datepicker-toggle",45)(7,"mat-datepicker",46,47),e.qZA()}if(2&l){const o=e.MAs(8),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.approveCheckDate?null:n.fieldsInfo.approveCheckDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",o)("ngModel",n.dataModel.approveCheckDate),e.xp6(1),e.Q6J("ngIf",n.dataModel.approveCheckDate&&(null==n.fieldsInfo.approveCheckDate?null:n.fieldsInfo.approveCheckDate.accessAddField)),e.xp6(1),e.Q6J("ngIf",n.dataModel.approveCheckDate&&(null==n.fieldsInfo.approveCheckDate?null:n.fieldsInfo.approveCheckDate.accessAddField)),e.xp6(1),e.Q6J("for",o)}}function ae(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.dataModel.expireDate=null)}),e._uU(1,"close"),e.qZA()}}function re(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",48),e.NdJ("ngModelChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.expireDate=t)}),e.qZA(),e.YNc(4,ae,2,0,"mat-icon",9),e._UZ(5,"mat-datepicker-toggle",45)(6,"mat-datepicker",46,49),e.qZA()}if(2&l){const o=e.MAs(7),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.expireDate?null:n.fieldsInfo.expireDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",o)("ngModel",n.dataModel.expireDate),e.xp6(1),e.Q6J("ngIf",n.dataModel.expireDate&&(null==n.fieldsInfo.expireDate?null:n.fieldsInfo.expireDate.accessAddField)),e.xp6(1),e.Q6J("for",o)}}function se(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"div",27)(1,"button",50),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.onFormCancel())}),e._UZ(2,"i",51),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",52),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.onFormSubmit())}),e._UZ(6,"i",53),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&l){e.oxw();const o=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!o.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let _e=(()=>{var l;class c{constructor(n,t,d,u,w,de,ce,me,pe){(0,_.Z)(this,"data",void 0),(0,_.Z)(this,"dialogRef",void 0),(0,_.Z)(this,"coreEnumService",void 0),(0,_.Z)(this,"coreUserClaimContentService",void 0),(0,_.Z)(this,"publicHelper",void 0),(0,_.Z)(this,"cmsToastrService",void 0),(0,_.Z)(this,"cdr",void 0),(0,_.Z)(this,"translate",void 0),(0,_.Z)(this,"tokenHelper",void 0),(0,_.Z)(this,"requestLinkUserClaimTypeId",0),(0,_.Z)(this,"formGroup",void 0),(0,_.Z)(this,"fieldsInfo",new Map),(0,_.Z)(this,"selectFileTypeMainImage",["jpg","jpeg","png"]),(0,_.Z)(this,"fileManagerTree",void 0),(0,_.Z)(this,"appLanguage","fa"),(0,_.Z)(this,"loading",new m.O),(0,_.Z)(this,"dataModelResult",new g.y$4),(0,_.Z)(this,"dataModel",new g.NQc),(0,_.Z)(this,"tokenInfo",new g.OdC),(0,_.Z)(this,"ProfessionalData",!1),(0,_.Z)(this,"cmsApiStoreSubscribe",void 0),(0,_.Z)(this,"formInfo",new g.LEF),(0,_.Z)(this,"dataModelEnumRecordStatusResult",new g.y$4),(0,_.Z)(this,"fileManagerOpenForm",!1),this.data=n,this.dialogRef=t,this.coreEnumService=d,this.coreUserClaimContentService=u,this.publicHelper=w,this.cmsToastrService=de,this.cdr=ce,this.translate=me,this.tokenHelper=pe,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),n&&(this.requestLinkUserClaimTypeId=+n.linkUserClaimTypeId||0),this.requestLinkUserClaimTypeId>0&&(this.dataModel.linkUserClaimTypeId=this.requestLinkUserClaimTypeId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(Q=>{this.tokenInfo=Q,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(Q=>{this.tokenInfo=Q,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1})}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.ADD"),this.getEnumRecordStatus(),this.DataGetAccess()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAccess(){const n=this.constructor.name+"DataGetAccess";this.loading.Start(n),this.coreUserClaimContentService.ServiceViewModel().subscribe({next:t=>{t.isSuccess?this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access):this.cmsToastrService.typeErrorGetAccess(t.errorMessage),this.loading.Stop(n)},error:t=>{this.cmsToastrService.typeErrorGetAccess(t),this.loading.Stop(n)}})}getEnumRecordStatus(){var n=this;return(0,D.Z)(function*(){n.dataModelEnumRecordStatusResult=yield n.publicHelper.getEnumRecordStatus()})()}DataAddContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const n=this.constructor.name+"main";this.loading.Start(n),this.coreUserClaimContentService.ServiceAdd(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.loading.Stop(n)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.loading.Stop(n)}})}onActionFileSelected(n){this.dataModel.linkFileContentId=n.id,this.dataModel.linkFileContentIdSrc=n.downloadLinksrc}onActionSelectUser(n){!n||n.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_user"),this.translate.instant("MESSAGE.Information_user_is_not_clear")):this.dataModel.linkUserId=n.id}onActionSelectSite(n){!n||n.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_site"),this.translate.instant("MESSAGE.Information_site_is_not_clear")):this.dataModel.linkSiteId=n.id}onActionSelectClaimType(n){!n||n.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_category"),this.translate.instant("MESSAGE.type_of_information_documents_is_not_clear")):this.dataModel.linkUserClaimTypeId=n.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return l=c,(0,_.Z)(c,"\u0275fac",function(n){return new(n||l)(e.Y36(i.WI),e.Y36(i.so),e.Y36(g.FLW),e.Y36(g.qlG),e.Y36(v.i),e.Y36(U.e),e.Y36(e.sBO),e.Y36(I.sK),e.Y36(x.v))}),(0,_.Z)(c,"\u0275cmp",e.Xpm({type:l,selectors:[["app-core-userclaimcontent-add"]],viewQuery:function(n,t){if(1&n&&e.Gf(B,5),2&n){let d;e.iGM(d=e.CRH())&&(t.formGroup=d.first)}},decls:61,vars:47,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.titleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","end"],[4,"ngIf"],[3,"optionLoading","optionSelectForce","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange",4,"ngIf"],[3,"optionSelectForce","optionLoading","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name","dataModel.linkFileContentId","type","text","autocomplete","off",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","0",3,"ngModel","placeholder","ngModelChange"],["Description",""],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.recordStatus",3,"placeholder","ngModel","ngClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"optionLoading","optionSelectForce","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.approvedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],["matInput","","name","dataModel.approveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.expireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit","mat-raised-button","",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(n,t){if(1&n&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.YNc(6,h,8,8,"mat-form-field",5),e.YNc(7,f,11,6,"mat-form-field",5),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10),e.qZA(),e.TgZ(11,"input",7,8),e.NdJ("ngModelChange",function(u){return t.dataModel.titleResourceLanguage=u}),e.qZA(),e.YNc(13,E,2,0,"mat-icon",9),e.TgZ(14,"mat-icon",10),e._uU(15,"mode_edit"),e.qZA(),e.TgZ(16,"mat-hint",11),e._uU(17),e.qZA(),e.YNc(18,p,5,4,"mat-error",12),e.qZA(),e.YNc(19,q,1,4,"app-cms-user-selector",13),e.YNc(20,H,1,4,"app-cms-site-selector",13),e.TgZ(21,"app-core-userclaimtype-selector",14),e.NdJ("optionChange",function(u){return t.onActionSelectClaimType(u)})("optionLoadingChange",function(u){return t.loading=u}),e.qZA(),e.TgZ(22,"div",15),e.YNc(23,j,2,3,"img",16),e.qZA(),e.TgZ(24,"div",17)(25,"mat-form-field",6)(26,"mat-label",18),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"input",19,20),e.NdJ("ngModelChange",function(u){return t.dataModel.linkFileContentId=u})("click",function(){return t.fileManagerOpenForm=!0}),e.ALo(31,"translate"),e.qZA(),e.YNc(32,V,2,0,"mat-icon",9),e.TgZ(33,"mat-icon",21),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(34,"mode_edit"),e.qZA()(),e.TgZ(35,"cms-file-manager",22),e.NdJ("itemSelected",function(u){return t.onActionFileSelected(u)})("openFormChange",function(u){return t.fileManagerOpenForm=u}),e.qZA()(),e.TgZ(36,"mat-form-field",6)(37,"mat-label"),e._uU(38),e.qZA(),e.TgZ(39,"textarea",23,24),e.NdJ("ngModelChange",function(u){return t.dataModel.description=u}),e.qZA(),e.YNc(41,$,2,0,"mat-icon",9),e.TgZ(42,"mat-icon",10),e._uU(43,"mode_edit"),e.qZA(),e.TgZ(44,"mat-hint",11),e._uU(45),e.qZA(),e.YNc(46,z,5,4,"mat-error",12),e.qZA(),e._UZ(47,"hr"),e.TgZ(48,"div",6),e.YNc(49,X,2,3,"mat-slide-toggle",25),e.qZA(),e.YNc(50,oe,11,6,"mat-form-field",5),e.YNc(51,le,9,6,"mat-form-field",5),e.YNc(52,re,8,5,"mat-form-field",5),e.qZA(),e.TgZ(53,"div",26)(54,"div",27)(55,"small",28),e._uU(56),e.qZA(),e.TgZ(57,"small",29),e._uU(58),e.qZA()()(),e.TgZ(59,"div",30),e.YNc(60,se,9,7,"div",31),e.qZA()()),2&n){const d=e.MAs(12),u=e.MAs(40);e.xp6(3),e.hij(" ",t.formInfo.formTitle," "),e.xp6(2),e.Q6J("options",t.loading),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(3),e.Oqu(null==t.fieldsInfo.titleResourceLanguage?null:t.fieldsInfo.titleResourceLanguage.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.title?null:t.fieldsInfo.title.fieldTitle),e.Q6J("ngModel",t.dataModel.titleResourceLanguage)("disabled",!(null!=t.fieldsInfo.titleResourceLanguage&&t.fieldsInfo.titleResourceLanguage.accessAddField)),e.xp6(2),e.Q6J("ngIf",t.dataModel.titleResourceLanguage),e.xp6(4),e.hij("",d.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==d.errors?null:d.errors.required),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("optionSelectForce",t.dataModel.linkUserClaimTypeId)("optionLoading",t.loading)("optionPlaceholder",t.translate.instant("TITLE.DOCUMENT_CATEGORY"))("optionDisabled",!(null!=t.fieldsInfo.linkUserClaimTypeId&&t.fieldsInfo.linkUserClaimTypeId.accessAddField)||t.requestLinkUserClaimTypeId&&t.requestLinkUserClaimTypeId>0),e.xp6(2),e.Q6J("ngIf",(null==t.dataModel||null==t.dataModel.linkFileContentIdSrc?null:t.dataModel.linkFileContentIdSrc.length)>0),e.xp6(4),e.hij("",e.lcZ(28,43,"TITLE.Document_File")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(31,45,"TITLE.Original_File_ID")),e.Q6J("ngModel",t.dataModel.linkFileContentId),e.xp6(3),e.Q6J("ngIf",t.dataModel.linkFileContentId),e.xp6(3),e.Q6J("language",t.appLanguage)("isPopup",!0)("openForm",t.fileManagerOpenForm)("tree",t.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(3),e.Oqu(null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle),e.Q6J("ngModel",t.dataModel.description),e.xp6(2),e.Q6J("ngIf",t.dataModel.description),e.xp6(4),e.hij("",u.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==u.errors?null:u.errors.required),e.xp6(3),e.Q6J("ngIf",null==t.fieldsInfo.isApproved?null:t.fieldsInfo.isApproved.accessWatchField),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",(null==t.fieldsInfo.approveCheckDate?null:t.fieldsInfo.approveCheckDate.accessWatchField)&&t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",(null==t.fieldsInfo.expireDate?null:t.fieldsInfo.expireDate.accessWatchField)&&t.ProfessionalData),e.xp6(4),e.hij("",t.formInfo.formAlert," "),e.xp6(2),e.hij("",t.formInfo.formError," "),e.xp6(2),e.Q6J("ngIf",t.formInfo.formSubmitAllow&&!(null!=t.loading&&t.loading.display))}},dependencies:[Z.mk,Z.sg,Z.O5,A._Y,A.Fj,A.JJ,A.JL,A.Q7,A.wO,A.nD,A.On,A.F,y.ey,P.lW,S.Mq,S.hl,S.nW,T.KE,T.hX,T.bx,T.TO,T.R9,L.Hw,R.Nt,k.gD,F.Rr,J.HG,N.P,b.g,K.O,W.b,I.X$,G.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})),c})()},3193:(Y,O,s)=>{s.d(O,{D:()=>_e});var D=s(8239),_=s(86889),i=s(54536),g=s(34511),m=s(60656),e=s(64537),v=s(94032),U=s(32607),I=s(56707),x=s(50727),Z=s(88692),A=s(20092),y=s(1379),P=s(9638),S=s(83704),T=s(88659),L=s(83331),R=s(39665),k=s(18033),F=s(64639),J=s(99482),N=s(56599),b=s(63181),K=s(75738),W=s(56014),G=s(81418);const B=["vform"];function C(l,c){if(1&l&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&l){const o=c.$implicit;e.Q6J("value",o.value),e.xp6(1),e.Oqu(o.description)}}function M(l,c){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function h(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-select",34,35),e.NdJ("ngModelChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.recordStatus=t)}),e.YNc(3,C,2,2,"mat-option",36),e.qZA(),e.TgZ(4,"mat-hint",11),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,M,5,3,"mat-error",12),e.qZA()}if(2&l){const o=e.MAs(2),n=e.oxw();e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.recordStatus?null:n.fieldsInfo.recordStatus.fieldTitle),e.MGl("ngClass","cms-RecordStatusEnum-selector-",n.dataModel.recordStatus,""),e.Q6J("ngModel",n.dataModel.recordStatus),e.xp6(2),e.Q6J("ngForOf",n.dataModelEnumRecordStatusResult.listItems),e.xp6(2),e.Oqu(e.lcZ(6,6,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function r(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.dataModel.title="")}),e._uU(1,"close"),e.qZA()}}function a(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.fieldsInfo.title?null:o.fieldsInfo.title.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function f(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",38,39),e.NdJ("ngModelChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.title=t)}),e.qZA(),e.YNc(5,r,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,a,5,4,"mat-error",12),e.qZA()}if(2&l){const o=e.MAs(4),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.title?null:n.fieldsInfo.title.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.title?null:n.fieldsInfo.title.fieldTitle),e.Q6J("ngModel",n.dataModel.title),e.xp6(2),e.Q6J("ngIf",n.dataModel.title),e.xp6(4),e.hij("",o.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function E(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.dataModel.titleResourceLanguage="")}),e._uU(1,"close"),e.qZA()}}function p(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.titleResourceLanguage?null:o.fieldsInfo.titleResourceLanguage.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function q(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"app-cms-user-selector",41),e.NdJ("optionChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.onActionSelectUser(t))})("optionLoadingChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.loading=t)}),e.qZA()}if(2&l){const o=e.oxw();e.Q6J("optionSelectForce",o.dataModel.linkUserId)("optionPlaceholder",o.translate.instant("TITLE.USER"))("optionLoading",o.loading)("optionDisabled",!(null!=o.fieldsInfo.linkUserId&&o.fieldsInfo.linkUserId.accessEditField))}}function H(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"app-cms-site-selector",41),e.NdJ("optionChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.onActionSelectSite(t))})("optionLoadingChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.loading=t)}),e.qZA()}if(2&l){const o=e.oxw();e.Q6J("optionSelectForce",o.dataModel.linkSiteId)("optionPlaceholder",o.translate.instant("TITLE.SITE"))("optionLoading",o.loading)("optionDisabled",!(null!=o.fieldsInfo.linkSiteId&&o.fieldsInfo.linkSiteId.accessEditField))}}function j(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"app-core-userclaimtype-selector",42),e.NdJ("optionChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.onActionSelectClaimType(t))})("optionLoadingChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.loading=t)}),e.qZA()}if(2&l){const o=e.oxw();e.Q6J("optionSelectForce",o.dataModel.linkUserClaimTypeId)("optionLoading",o.loading)("optionPlaceholder",o.translate.instant("TITLE.DOCUMENT_CATEGORY"))("optionDisabled",!(null!=o.fieldsInfo.linkUserClaimTypeId&&o.fieldsInfo.linkUserClaimTypeId.accessEditField))}}function V(l,c){if(1&l&&(e._UZ(0,"img",43),e.ALo(1,"cmsthumbnail")),2&l){const o=e.oxw();e.s9C("src",e.lcZ(1,1,o.dataModel.linkFileContentIdSrc),e.LSH)}}function $(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.dataModel.linkFileContentId=null)}),e._uU(1,"close"),e.qZA()}}function z(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.dataModel.description="")}),e._uU(1,"close"),e.qZA()}}function X(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.description?null:o.fieldsInfo.description.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function ee(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-slide-toggle",44),e.NdJ("ngModelChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.isApproved=t)}),e._uU(1),e.qZA()}if(2&l){const o=e.oxw();e.Q6J("ngModel",o.dataModel.isApproved)("disabled",!(null!=o.fieldsInfo.isApproved&&o.fieldsInfo.isApproved.accessEditField)),e.xp6(1),e.hij(" ",null==o.fieldsInfo.isApproved?null:o.fieldsInfo.isApproved.fieldTitle," ")}}function te(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.dataModel.approvedResult="")}),e._uU(1,"close"),e.qZA()}}function oe(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.approvedResult?null:o.fieldsInfo.approvedResult.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function ne(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function ie(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function le(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",45),e.NdJ("ngModelChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.approveCheckDate=t)}),e.qZA(),e.YNc(4,ne,2,0,"mat-icon",9),e.YNc(5,ie,2,0,"mat-icon",9),e._UZ(6,"mat-datepicker-toggle",46)(7,"mat-datepicker",47,48),e.qZA()}if(2&l){const o=e.MAs(8),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.approveCheckDate?null:n.fieldsInfo.approveCheckDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",o)("ngModel",n.dataModel.approveCheckDate),e.xp6(1),e.Q6J("ngIf",n.dataModel.approveCheckDate&&(null==n.fieldsInfo.approveCheckDate?null:n.fieldsInfo.approveCheckDate.accessEditField)),e.xp6(1),e.Q6J("ngIf",n.dataModel.approveCheckDate&&(null==n.fieldsInfo.approveCheckDate?null:n.fieldsInfo.approveCheckDate.accessEditField)),e.xp6(1),e.Q6J("for",o)}}function ae(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.dataModel.expireDate=null)}),e._uU(1,"close"),e.qZA()}}function re(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",49),e.NdJ("ngModelChange",function(t){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.expireDate=t)}),e.qZA(),e.YNc(4,ae,2,0,"mat-icon",9),e._UZ(5,"mat-datepicker-toggle",46)(6,"mat-datepicker",47,50),e.qZA()}if(2&l){const o=e.MAs(7),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.expireDate?null:n.fieldsInfo.expireDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",o)("ngModel",n.dataModel.expireDate),e.xp6(1),e.Q6J("ngIf",n.dataModel.expireDate&&(null==n.fieldsInfo.expireDate?null:n.fieldsInfo.expireDate.accessEditField)),e.xp6(1),e.Q6J("for",o)}}function se(l,c){if(1&l){const o=e.EpF();e.TgZ(0,"div",29)(1,"button",51),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.onFormCancel())}),e._UZ(2,"i",52),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",53),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.onFormSubmit())}),e._UZ(6,"i",54),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&l){e.oxw();const o=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!o.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let _e=(()=>{var l;class c{constructor(n,t,d,u,w,de,ce,me,pe){(0,_.Z)(this,"data",void 0),(0,_.Z)(this,"dialogRef",void 0),(0,_.Z)(this,"coreEnumService",void 0),(0,_.Z)(this,"coreUserClaimContentService",void 0),(0,_.Z)(this,"publicHelper",void 0),(0,_.Z)(this,"cmsToastrService",void 0),(0,_.Z)(this,"cdr",void 0),(0,_.Z)(this,"translate",void 0),(0,_.Z)(this,"tokenHelper",void 0),(0,_.Z)(this,"requestId",0),(0,_.Z)(this,"formGroup",void 0),(0,_.Z)(this,"fieldsInfo",new Map),(0,_.Z)(this,"selectFileTypeMainImage",["jpg","jpeg","png"]),(0,_.Z)(this,"cmsApiStoreSubscribe",void 0),(0,_.Z)(this,"tokenInfo",new g.OdC),(0,_.Z)(this,"ProfessionalData",!1),(0,_.Z)(this,"fileManagerTree",void 0),(0,_.Z)(this,"appLanguage","fa"),(0,_.Z)(this,"loading",new m.O),(0,_.Z)(this,"dataModelResult",new g.y$4),(0,_.Z)(this,"dataModel",new g.NQc),(0,_.Z)(this,"formInfo",new g.LEF),(0,_.Z)(this,"dataModelEnumRecordStatusResult",new g.y$4),(0,_.Z)(this,"fileManagerOpenForm",!1),this.data=n,this.dialogRef=t,this.coreEnumService=d,this.coreUserClaimContentService=u,this.publicHelper=w,this.cmsToastrService=de,this.cdr=ce,this.translate=me,this.tokenHelper=pe,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),n&&(this.requestId=+n.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(Q=>{this.tokenInfo=Q,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:Q=>{this.tokenInfo=Q,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1}})}ngOnInit(){if(!(this.requestId>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.formTitle=this.translate.instant("TITLE.Edit"),this.DataGetOneContent(),this.getEnumRecordStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumRecordStatus(){var n=this;return(0,D.Z)(function*(){n.dataModelEnumRecordStatusResult=yield n.publicHelper.getEnumRecordStatus()})()}DataGetOneContent(){if(this.requestId<=0)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.formAlert=this.translate.instant("MESSAGE.Receiving_Information_From_The_Server"),this.formInfo.formError="";const n=this.constructor.name+"main";this.loading.Start(n),this.coreUserClaimContentService.setAccessLoad(),this.coreUserClaimContentService.setAccessDataType(g.dR.Editor),this.coreUserClaimContentService.ServiceGetOneById(this.requestId).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModel=t.item,t.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+t.item.id,this.formInfo.formAlert=""):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.loading.Stop(n)},error:t=>{this.cmsToastrService.typeError(t),this.loading.Stop(n)}})}DataEditContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const n=this.constructor.name+"main";this.loading.Start(n,this.translate.instant("MESSAGE.sending_information_to_the_server")),this.coreUserClaimContentService.ServiceEdit(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.loading.Stop(n)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.loading.Stop(n)}})}onActionFileSelected(n){this.dataModel.linkFileContentId=n.id,this.dataModel.linkFileContentIdSrc=n.downloadLinksrc}onActionSelectUser(n){!n||n.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_user"),this.translate.instant("MESSAGE.Information_user_is_not_clear")):this.dataModel.linkUserId=n.id}onActionSelectSite(n){!n||n.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_site"),this.translate.instant("MESSAGE.Information_site_is_not_clear")):this.dataModel.linkSiteId=n.id}onActionSelectClaimType(n){!n||n.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_category"),this.translate.instant("MESSAGE.type_of_information_documents_is_not_clear")):this.dataModel.linkUserClaimTypeId=n.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return l=c,(0,_.Z)(c,"\u0275fac",function(n){return new(n||l)(e.Y36(i.WI),e.Y36(i.so),e.Y36(g.FLW),e.Y36(g.qlG),e.Y36(v.i),e.Y36(U.e),e.Y36(e.sBO),e.Y36(I.sK),e.Y36(x.v))}),(0,_.Z)(c,"\u0275cmp",e.Xpm({type:l,selectors:[["app-core-userclaim-edit"]],viewQuery:function(n,t){if(1&n&&e.Gf(B,5),2&n){let d;e.iGM(d=e.CRH())&&(t.formGroup=d.first)}},decls:71,vars:49,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.titleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","end"],[4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionLoading","optionDisabled","optionChange","optionLoadingChange",4,"ngIf"],[3,"optionSelectForce","optionLoading","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange",4,"ngIf"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name"," dataModel.linkFileContentId","type","text","autocomplete","off",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.description","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["Description",""],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["matInput","","name","dataModel.approvedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.recordStatus",3,"placeholder","ngModel","ngClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"optionSelectForce","optionPlaceholder","optionLoading","optionDisabled","optionChange","optionLoadingChange"],[3,"optionSelectForce","optionLoading","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.approveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.expireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit","mat-raised-button","",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(n,t){if(1&n&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.YNc(6,h,8,8,"mat-form-field",5),e.YNc(7,f,11,6,"mat-form-field",5),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10),e.qZA(),e.TgZ(11,"input",7,8),e.NdJ("ngModelChange",function(u){return t.dataModel.titleResourceLanguage=u}),e.qZA(),e.YNc(13,E,2,0,"mat-icon",9),e.TgZ(14,"mat-icon",10),e._uU(15,"mode_edit"),e.qZA(),e.TgZ(16,"mat-hint",11),e._uU(17),e.qZA(),e.YNc(18,p,5,4,"mat-error",12),e.qZA(),e.YNc(19,q,1,4,"app-cms-user-selector",13),e.YNc(20,H,1,4,"app-cms-site-selector",13),e.YNc(21,j,1,4,"app-core-userclaimtype-selector",14),e.TgZ(22,"div",15),e.YNc(23,V,2,3,"img",16),e.qZA(),e.TgZ(24,"div",17)(25,"mat-form-field",6)(26,"mat-label",18),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"input",19,20),e.NdJ("ngModelChange",function(u){return t.dataModel.linkFileContentId=u})("click",function(){return t.fileManagerOpenForm=!0}),e.ALo(31,"translate"),e.qZA(),e.YNc(32,$,2,0,"mat-icon",9),e.TgZ(33,"mat-icon",21),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(34,"mode_edit"),e.qZA()(),e.TgZ(35,"cms-file-manager",22),e.NdJ("itemSelected",function(u){return t.onActionFileSelected(u)})("openFormChange",function(u){return t.fileManagerOpenForm=u}),e.qZA()(),e.TgZ(36,"mat-form-field",6)(37,"mat-label"),e._uU(38),e.qZA(),e.TgZ(39,"textarea",23,24),e.NdJ("ngModelChange",function(u){return t.dataModel.description=u}),e.qZA(),e.YNc(41,z,2,0,"mat-icon",9),e.TgZ(42,"mat-icon",10),e._uU(43,"mode_edit"),e.qZA(),e.TgZ(44,"mat-hint",11),e._uU(45),e.qZA(),e.YNc(46,X,5,4,"mat-error",12),e.qZA(),e._UZ(47,"hr"),e.TgZ(48,"div",6),e.YNc(49,ee,2,3,"mat-slide-toggle",25),e.qZA(),e.TgZ(50,"mat-form-field",6)(51,"mat-label"),e._uU(52),e.qZA(),e.TgZ(53,"textarea",26,27),e.NdJ("ngModelChange",function(u){return t.dataModel.approvedResult=u}),e.qZA(),e.YNc(55,te,2,0,"mat-icon",9),e.TgZ(56,"mat-icon",10),e._uU(57,"mode_edit"),e.qZA(),e.TgZ(58,"mat-hint",11),e._uU(59),e.qZA(),e.YNc(60,oe,5,4,"mat-error",12),e.qZA(),e.YNc(61,le,9,6,"mat-form-field",5),e.YNc(62,re,8,5,"mat-form-field",5),e.qZA(),e.TgZ(63,"div",28)(64,"div",29)(65,"small",30),e._uU(66),e.qZA(),e.TgZ(67,"small",31),e._uU(68),e.qZA()()(),e.TgZ(69,"div",32),e.YNc(70,se,9,7,"div",33),e.qZA()()),2&n){const d=e.MAs(12),u=e.MAs(40),w=e.MAs(54);e.xp6(3),e.hij(" ",t.formInfo.formTitle," "),e.xp6(2),e.Q6J("options",t.loading),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(3),e.Oqu(null==t.fieldsInfo.titleResourceLanguage?null:t.fieldsInfo.titleResourceLanguage.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.titleResourceLanguage?null:t.fieldsInfo.titleResourceLanguage.fieldTitle),e.Q6J("ngModel",t.dataModel.titleResourceLanguage)("disabled",!(null!=t.fieldsInfo.titleResourceLanguage&&t.fieldsInfo.titleResourceLanguage.accessEditField)),e.xp6(2),e.Q6J("ngIf",t.dataModel.titleResourceLanguage),e.xp6(4),e.hij("",d.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==d.errors?null:d.errors.required),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(2),e.Q6J("ngIf",(null==t.dataModel||null==t.dataModel.linkFileContentIdSrc?null:t.dataModel.linkFileContentIdSrc.length)>0),e.xp6(4),e.hij("",e.lcZ(28,45,"TITLE.Document_File")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(31,47,"TITLE.Original_File_ID")),e.Q6J("ngModel",t.dataModel.linkFileContentId),e.xp6(3),e.Q6J("ngIf",t.dataModel.linkFileContentId),e.xp6(3),e.Q6J("language",t.appLanguage)("isPopup",!0)("openForm",t.fileManagerOpenForm)("tree",t.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(3),e.Oqu(null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle),e.Q6J("ngModel",t.dataModel.description),e.xp6(2),e.Q6J("ngIf",t.dataModel.description),e.xp6(4),e.hij("",u.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==u.errors?null:u.errors.required),e.xp6(3),e.Q6J("ngIf",null==t.fieldsInfo.isApproved?null:t.fieldsInfo.isApproved.accessWatchField),e.xp6(3),e.Oqu(null==t.fieldsInfo.approvedResult?null:t.fieldsInfo.approvedResult.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle),e.Q6J("ngModel",t.dataModel.approvedResult),e.xp6(2),e.Q6J("ngIf",t.dataModel.approvedResult),e.xp6(4),e.hij("",w.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==w.errors?null:w.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.fieldsInfo.approveCheckDate?null:t.fieldsInfo.approveCheckDate.accessWatchField),e.xp6(1),e.Q6J("ngIf",null==t.fieldsInfo.expireDate?null:t.fieldsInfo.expireDate.accessWatchField),e.xp6(4),e.hij("",t.formInfo.formAlert," "),e.xp6(2),e.hij("",t.formInfo.formError," "),e.xp6(2),e.Q6J("ngIf",t.formInfo.formSubmitAllow&&!(null!=t.loading&&t.loading.display))}},dependencies:[Z.mk,Z.sg,Z.O5,A._Y,A.Fj,A.JJ,A.JL,A.Q7,A.wO,A.nD,A.On,A.F,y.ey,P.lW,S.Mq,S.hl,S.nW,T.KE,T.hX,T.bx,T.TO,T.R9,L.Hw,R.Nt,k.gD,F.Rr,J.HG,N.P,b.g,K.O,W.b,I.X$,G.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})),c})()},56014:(Y,O,s)=>{s.d(O,{b:()=>B});var D=s(8239),_=s(86889),i=s(64537),g=s(20092),m=s(34511),e=s(57445),v=s(51927),U=s(83151),I=s(42147),x=s(61528),Z=s(27969),A=s(60656),y=s(32607),P=s(56707),S=s(88692),T=s(61637),L=s(1379),R=s(88659),k=s(83331),F=s(39665),J=s(81418);function N(C,M){if(1&C&&(i._UZ(0,"img",8),i.ALo(1,"cmsthumbnail")),2&C){const h=i.oxw();i.s9C("src",i.lcZ(1,1,h.dataModelSelect.linkMainImageIdSrc),i.LSH)}}function b(C,M){if(1&C&&(i._UZ(0,"img",8),i.ALo(1,"cmsthumbnail")),2&C){const h=i.oxw().$implicit;i.s9C("src",i.lcZ(1,1,h.linkMainImageIdSrc),i.LSH)}}function K(C,M){if(1&C&&(i.TgZ(0,"mat-option",9),i.YNc(1,b,2,3,"img",2),i.TgZ(2,"span"),i._uU(3),i.qZA()()),2&C){const h=M.$implicit,r=i.oxw();i.Q6J("value",h)("disabled",r.optionDisabled),i.xp6(1),i.Q6J("ngIf",h.linkMainImageIdSrc),i.xp6(2),i.Oqu(r.displayOption(h))}}function W(C,M){if(1&C){const h=i.EpF();i.TgZ(0,"mat-icon",10),i.NdJ("click",function(){i.CHM(h);const a=i.oxw();return i.KtG(a.onActionSelectClear())}),i._uU(1,"close"),i.qZA()}}const G=["*"];let B=(()=>{var C;class M{constructor(r,a,f,E,p){(0,_.Z)(this,"coreEnumService",void 0),(0,_.Z)(this,"cmsToastrService",void 0),(0,_.Z)(this,"cdr",void 0),(0,_.Z)(this,"translate",void 0),(0,_.Z)(this,"categoryService",void 0),(0,_.Z)(this,"dataModelResult",new m.y$4),(0,_.Z)(this,"dataModelSelect",new m.OoK),(0,_.Z)(this,"formControl",new g.NI),(0,_.Z)(this,"filteredOptions",void 0),(0,_.Z)(this,"optionDisabled",!1),(0,_.Z)(this,"optionSelectFirstItem",!1),(0,_.Z)(this,"optionPlaceholder",""),(0,_.Z)(this,"optionChange",new i.vpe),(0,_.Z)(this,"optionReload",()=>this.onActionReload()),(0,_.Z)(this,"loading",new A.O),this.coreEnumService=r,this.cmsToastrService=a,this.cdr=f,this.translate=E,this.categoryService=p,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(r){this.onActionSelectForce(r)}get optionLoading(){return this.loading}set optionLoading(r){this.loading=r}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,v.O)(""),(0,U.b)(1500),(0,I.x)(),(0,x.w)(r=>"string"==typeof r||"number"==typeof r?this.DataGetAll(r||""):[]))}displayFn(r){return r?r.titleML:void 0}displayOption(r){return r?r.titleML:void 0}DataGetAll(r){var a=this;return(0,D.Z)(function*(){const f=new m.Hay;f.rowPerPage=20,f.accessLoad=!0;let E=new m.AO3;E.propertyName="Title",E.value=r,E.searchType=m.J6G.Contains,E.clauseType=m.ppe.Or,f.filters.push(E),r&&"number"==typeof+r&&+r>0&&(E=new m.AO3,E.propertyName="Id",E.value=r,E.searchType=m.J6G.Equal,E.clauseType=m.ppe.Or,f.filters.push(E));const p=a.constructor.name+"main";return a.loading.Start(p),yield(0,e.z)(a.categoryService.ServiceGetAll(f)).then(q=>(a.dataModelResult=q,a.optionSelectFirstItem&&(!a.dataModelSelect||!a.dataModelSelect.id||a.dataModelSelect.id<=0)&&a.dataModelResult.listItems.length>0&&(a.optionSelectFirstItem=!1,setTimeout(()=>{a.formControl.setValue(a.dataModelResult.listItems[0])},1e3),a.onActionSelect(a.dataModelResult.listItems[0])),a.loading.Stop(p),q.listItems))})()}onActionSelect(r){this.optionDisabled||(this.dataModelSelect=r,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(r){return this.filteredOptions.pipe((0,Z.U)(a=>(a.find(f=>f.id===r.id)||a.push(r),a)))}onActionSelectForce(r){if("number"==typeof r&&r>0){if(this.dataModelSelect&&this.dataModelSelect.id===r)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(a=>a.id===r)){const a=this.dataModelResult.listItems.find(f=>f.id===r);return this.dataModelSelect=a,void this.formControl.setValue(a)}this.categoryService.ServiceGetOneById(r).subscribe({next:a=>{a.isSuccess?(this.filteredOptions=this.push(a.item),this.dataModelSelect=a.item,this.formControl.setValue(a.item),this.optionChange.emit(a.item)):this.cmsToastrService.typeErrorMessage(a.errorMessage)}})}else{if(typeof r==typeof m.OoK)return this.filteredOptions=this.push(r),this.dataModelSelect=r,void this.formControl.setValue(r);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new m.OoK,this.loadOptions()}}return C=M,(0,_.Z)(M,"\u0275fac",function(r){return new(r||C)(i.Y36(m.FLW),i.Y36(y.e),i.Y36(i.sBO),i.Y36(P.sK),i.Y36(m.kf3))}),(0,_.Z)(M,"\u0275cmp",i.Xpm({type:C,selectors:[["app-core-userclaimtype-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:G,decls:11,vars:10,consts:[[1,"ntk-full-width"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(r,a){if(1&r&&(i.F$t(),i.TgZ(0,"mat-form-field",0)(1,"span",1),i.YNc(2,N,2,3,"img",2),i._uU(3," \xa0"),i.qZA(),i._UZ(4,"input",3),i.TgZ(5,"mat-autocomplete",4,5),i.NdJ("optionSelected",function(E){return a.onActionSelect(E.option.value)}),i.YNc(7,K,4,4,"mat-option",6),i.ALo(8,"async"),i.qZA(),i.YNc(9,W,2,0,"mat-icon",7),i.Hsn(10),i.qZA()),2&r){const f=i.MAs(6);i.xp6(2),i.Q6J("ngIf",a.dataModelSelect&&(null==a.dataModelSelect?null:a.dataModelSelect.linkMainImageIdSrc)),i.xp6(2),i.s9C("placeholder",a.optionPlaceholder),i.Q6J("formControl",a.formControl)("matAutocomplete",f),i.uIk("disabled",!!a.optionDisabled||null),i.xp6(1),i.Q6J("displayWith",a.displayFn),i.xp6(2),i.Q6J("ngForOf",i.lcZ(8,8,a.filteredOptions)),i.xp6(2),i.Q6J("ngIf",null==a.dataModelSelect?null:a.dataModelSelect.id)}},dependencies:[S.sg,S.O5,g.Fj,g.JJ,g.oH,T.XC,L.ey,T.ZL,R.KE,R.qo,R.R9,k.Hw,F.Nt,S.Ov,J.v]})),M})()},56939:(Y,O,s)=>{s.d(O,{V:()=>i});var D=s(86889),_=s(64537);let i=(()=>{var g;class m{transform(v,U){if(!v||!U||0===U.length)return"";const I=U.find(x=>x.id===v);return I?I.titleML&&0!==I.titleML.length?I.titleML:I.title:v}}return g=m,(0,D.Z)(m,"\u0275fac",function(v){return new(v||g)}),(0,D.Z)(m,"\u0275pipe",_.Yjl({name:"cmstitle",type:g,pure:!0})),m})()},63181:(Y,O,s)=>{s.d(O,{g:()=>B});var D=s(8239),_=s(86889),i=s(64537),g=s(20092),m=s(34511),e=s(57445),v=s(51927),U=s(83151),I=s(42147),x=s(61528),Z=s(27969),A=s(60656),y=s(56707),P=s(88692),S=s(61637),T=s(1379),L=s(88659),R=s(83331),k=s(39665),F=s(75738),J=s(81418);function N(C,M){if(1&C&&(i._UZ(0,"img",9),i.ALo(1,"cmsthumbnail")),2&C){const h=i.oxw();i.s9C("src",i.lcZ(1,1,null==h.dataModelSelect?null:h.dataModelSelect.linkMainImageIdSrc),i.LSH)}}function b(C,M){if(1&C&&(i._UZ(0,"img",9),i.ALo(1,"cmsthumbnail")),2&C){const h=i.oxw().$implicit;i.s9C("src",i.lcZ(1,1,h.linkMainImageIdSrc),i.LSH)}}function K(C,M){if(1&C&&(i.TgZ(0,"mat-option",10),i.YNc(1,b,2,3,"img",11),i.TgZ(2,"span"),i._uU(3),i.qZA()()),2&C){const h=M.$implicit,r=i.oxw();i.Q6J("value",h)("disabled",r.optionDisabled),i.xp6(1),i.Q6J("ngIf",h.linkMainImageIdSrc),i.xp6(2),i.Oqu(r.displayOption(h))}}function W(C,M){if(1&C){const h=i.EpF();i.TgZ(0,"mat-icon",12),i.NdJ("click",function(){i.CHM(h);const a=i.oxw();return i.KtG(a.onActionSelectClear())}),i._uU(1,"close"),i.qZA()}}const G=["*"];let B=(()=>{var C;class M{constructor(r,a,f,E){(0,_.Z)(this,"coreEnumService",void 0),(0,_.Z)(this,"cdr",void 0),(0,_.Z)(this,"translate",void 0),(0,_.Z)(this,"categoryService",void 0),(0,_.Z)(this,"id",++M.nextId),(0,_.Z)(this,"dataModelResult",new m.y$4),(0,_.Z)(this,"dataModelSelect",new m.NCo),(0,_.Z)(this,"loading",new A.O),(0,_.Z)(this,"formControl",new g.NI),(0,_.Z)(this,"filteredOptions",void 0),(0,_.Z)(this,"optionDisabled",!1),(0,_.Z)(this,"optionSelectFirstItem",!1),(0,_.Z)(this,"optionPlaceholder",""),(0,_.Z)(this,"optionChange",new i.vpe),(0,_.Z)(this,"optionReload",()=>this.onActionReload()),this.coreEnumService=r,this.cdr=a,this.translate=f,this.categoryService=E,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}get optionLoading(){return this.loading}set optionLoading(r){this.loading=r}set optionSelectForce(r){this.onActionSelectForce(r)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,v.O)(""),(0,U.b)(1500),(0,I.x)(),(0,x.w)(r=>this.DataGetAll("string"==typeof r||"number"==typeof r?r:"")))}displayFn(r){let a="";return r&&(r.username&&r.username.length>0&&(a=a+" "+r.username),r.name&&r.name.length>0&&(a=a+" "+r.name),r.lastName&&r.lastName.length>0&&(a=a+" "+r.lastName),a=a+"#:"+r.id),a}displayOption(r){let a="";return r&&(r.username&&r.username.length>0&&(a=a+" "+r.username),r.name&&r.name.length>0&&(a=a+" "+r.name),r.lastName&&r.lastName.length>0&&(a=a+" "+r.lastName),a=a+"#:"+r.id),a}DataGetAll(r){var a=this;return(0,D.Z)(function*(){const f=new m.Hay;if(f.rowPerPage=20,f.accessLoad=!0,r&&r.length>0){let p=new m.AO3;p=new m.AO3,p.propertyName="username",p.value=r,p.searchType=m.J6G.Contains,p.clauseType=m.ppe.Or,f.filters.push(p),p=new m.AO3,p.propertyName="name",p.value=r,p.searchType=m.J6G.Contains,p.clauseType=m.ppe.Or,f.filters.push(p),p=new m.AO3,p.propertyName="email",p.value=r,p.searchType=m.J6G.Contains,p.clauseType=m.ppe.Or,f.filters.push(p),p=new m.AO3,p.propertyName="lastname",p.value=r,p.searchType=m.J6G.Contains,p.clauseType=m.ppe.Or,f.filters.push(p),r&&"number"==typeof+r&&+r>0&&(p=new m.AO3,p.propertyName="Id",p.value=r,p.searchType=m.J6G.Equal,p.clauseType=m.ppe.Or,f.filters.push(p))}const E=a.constructor.name+"main";return a.loading.Start(E),yield(0,e.z)(a.categoryService.ServiceGetAll(f)).then(p=>(a.dataModelResult=p,a.optionSelectFirstItem&&(!a.dataModelSelect||!a.dataModelSelect.id||a.dataModelSelect.id<=0)&&a.dataModelResult.listItems.length>0&&(a.optionSelectFirstItem=!1,setTimeout(()=>{a.formControl.setValue(a.dataModelResult.listItems[0])},1e3),a.onActionSelect(a.dataModelResult.listItems[0])),a.loading.Stop(E),p.listItems))})()}onActionSelect(r){this.optionDisabled||(this.dataModelSelect=r,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(r){return this.filteredOptions.pipe((0,Z.U)(a=>(a.find(f=>f.id===r.id)||a.push(r),a)))}onActionSelectForce(r){if("number"==typeof r&&r>0){if(this.dataModelSelect&&this.dataModelSelect.id===r)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(a=>a.id===r)){const a=this.dataModelResult.listItems.find(f=>f.id===r);return this.dataModelSelect=a,void this.formControl.setValue(a)}this.categoryService.ServiceGetOneById(r).subscribe(a=>{a.isSuccess&&(this.filteredOptions=this.push(a.item),this.dataModelSelect=a.item,this.formControl.setValue(a.item),this.optionChange.emit(a.item))})}else{if(typeof r==typeof m.NCo)return this.filteredOptions=this.push(r),this.dataModelSelect=r,void this.formControl.setValue(r);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new m.NCo,this.loadOptions()}}return C=M,(0,_.Z)(M,"nextId",0),(0,_.Z)(M,"\u0275fac",function(r){return new(r||C)(i.Y36(m.FLW),i.Y36(i.sBO),i.Y36(y.sK),i.Y36(m.k$Z))}),(0,_.Z)(M,"\u0275cmp",i.Xpm({type:C,selectors:[["app-cms-user-selector"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:G,decls:12,vars:11,consts:[[1,"ntk-full-width"],[3,"options"],["matPrefix",""],["class","ntk-hover-zoom","style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(r,a){if(1&r&&(i.F$t(),i.TgZ(0,"mat-form-field",0),i._UZ(1,"app-progress-spinner",1),i.TgZ(2,"span",2),i.YNc(3,N,2,3,"img",3),i._uU(4," \xa0"),i.qZA(),i._UZ(5,"input",4),i.TgZ(6,"mat-autocomplete",5,6),i.NdJ("optionSelected",function(E){return a.onActionSelect(E.option.value)}),i.YNc(8,K,4,4,"mat-option",7),i.ALo(9,"async"),i.qZA(),i.YNc(10,W,2,0,"mat-icon",8),i.Hsn(11),i.qZA()),2&r){const f=i.MAs(7);i.xp6(1),i.Q6J("options",a.loading),i.xp6(2),i.Q6J("ngIf",a.dataModelSelect&&(null==a.dataModelSelect?null:a.dataModelSelect.linkMainImageIdSrc)),i.xp6(2),i.s9C("placeholder",a.optionPlaceholder),i.Q6J("formControl",a.formControl)("matAutocomplete",f),i.uIk("disabled",!!a.optionDisabled||null),i.xp6(1),i.Q6J("displayWith",a.displayFn),i.xp6(2),i.Q6J("ngForOf",i.lcZ(9,9,a.filteredOptions)),i.xp6(2),i.Q6J("ngIf",null==a.dataModelSelect?null:a.dataModelSelect.id)}},dependencies:[P.sg,P.O5,g.Fj,g.JJ,g.oH,S.XC,T.ey,S.ZL,L.KE,L.qo,L.R9,R.Hw,k.Nt,F.O,P.Ov,J.v],encapsulation:2})),M})()}}]);