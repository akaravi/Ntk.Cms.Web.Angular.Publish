(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[108],{56239:()=>{window.libpannellum=function(Ot,y,p){"use strict";function T(vt){var v,n,B,lt,j,L,Yt,X,A,st,Vt,Ct,Dt,R,Kt,It,F=y.createElement("canvas");function jt(u,f){return 1==u.level&&1!=f.level?-1:1==f.level&&1!=u.level?1:f.timestamp-u.timestamp}function At(u,f){return u.level!=f.level?u.level-f.level:u.diff-f.diff}function pt(u,f,J,S,K,m){this.vertices=u,this.side=f,this.level=J,this.x=S,this.y=K,this.path=m.replace("%s",f).replace("%l",J).replace("%x",S).replace("%y",K)}function x(u,f,J,S,K){if(function U(u,f){var J=qt(u,f.slice(0,3)),S=qt(u,f.slice(3,6)),K=qt(u,f.slice(6,9)),m=qt(u,f.slice(9,12)),Y=J[0]+S[0]+K[0]+m[0];if(-4==Y||4==Y)return!1;var k=J[1]+S[1]+K[1]+m[1];return-4!=k&&4!=k&&4!=J[2]+S[2]+K[2]+m[2]}(u,f.vertices)){var m=f.vertices,Y=m[0]+m[3]+m[6]+m[9],k=m[1]+m[4]+m[7]+m[10],W=m[2]+m[5]+m[8]+m[11],G=Math.sqrt(Y*Y+k*k+W*W),Zt=Math.asin(W/G),Nt=Math.atan2(k,Y)-S;Nt+=Nt>Math.PI?-2*Math.PI:Nt<-Math.PI?2*Math.PI:0,Nt=Math.abs(Nt),f.diff=Math.acos(Math.sin(J)*Math.sin(Zt)+Math.cos(J)*Math.cos(Zt)*Math.cos(Nt));for(var Bt=!1,Ut=0;Ut<v.nodeCache.length;Ut++)if(v.nodeCache[Ut].path==f.path){Bt=!0,v.nodeCache[Ut].timestamp=v.nodeCacheTimestamp++,v.nodeCache[Ut].diff=f.diff,v.currentNodes.push(v.nodeCache[Ut]);break}if(Bt||(f.timestamp=v.nodeCacheTimestamp++,v.currentNodes.push(f),v.nodeCache.push(f)),f.level<v.level){var yt=A.cubeResolution*Math.pow(2,f.level-A.maxLevel),ut=Math.ceil(yt*A.invTileResolution)-1,mt=yt%A.tileResolution*2,ft=2*yt%A.tileResolution;0===ft&&(ft=A.tileResolution),0===mt&&(mt=2*A.tileResolution);var wt=.5;(f.x==ut||f.y==ut)&&(wt=1-A.tileResolution/(A.tileResolution+ft));var Rt,dt=1-wt,at=[],Tt=wt,ot=wt,_t=wt,Et=dt,gt=dt,ht=dt;ft<A.tileResolution&&(f.x==ut&&f.y!=ut?(ot=.5,gt=.5,("d"==f.side||"u"==f.side)&&(_t=.5,ht=.5)):f.x!=ut&&f.y==ut&&(Tt=.5,Et=.5,("l"==f.side||"r"==f.side)&&(_t=.5,ht=.5))),mt<=A.tileResolution&&(f.x==ut&&(Tt=0,Et=1,("l"==f.side||"r"==f.side)&&(_t=0,ht=1)),f.y==ut&&(ot=0,gt=1,("d"==f.side||"u"==f.side)&&(_t=0,ht=1))),Rt=new pt([m[0],m[1],m[2],m[0]*Tt+m[3]*Et,m[1]*wt+m[4]*dt,m[2]*_t+m[5]*ht,m[0]*Tt+m[6]*Et,m[1]*ot+m[7]*gt,m[2]*_t+m[8]*ht,m[0]*wt+m[9]*dt,m[1]*ot+m[10]*gt,m[2]*_t+m[11]*ht],f.side,f.level+1,2*f.x,2*f.y,A.fullpath),at.push(Rt),f.x==ut&&mt<=A.tileResolution||(Rt=new pt([m[0]*Tt+m[3]*Et,m[1]*wt+m[4]*dt,m[2]*_t+m[5]*ht,m[3],m[4],m[5],m[3]*wt+m[6]*dt,m[4]*ot+m[7]*gt,m[5]*_t+m[8]*ht,m[0]*Tt+m[6]*Et,m[1]*ot+m[7]*gt,m[2]*_t+m[8]*ht],f.side,f.level+1,2*f.x+1,2*f.y,A.fullpath),at.push(Rt)),!(f.x==ut&&mt<=A.tileResolution)&&!(f.y==ut&&mt<=A.tileResolution)&&(Rt=new pt([m[0]*Tt+m[6]*Et,m[1]*ot+m[7]*gt,m[2]*_t+m[8]*ht,m[3]*wt+m[6]*dt,m[4]*ot+m[7]*gt,m[5]*_t+m[8]*ht,m[6],m[7],m[8],m[9]*Tt+m[6]*Et,m[10]*wt+m[7]*dt,m[11]*_t+m[8]*ht],f.side,f.level+1,2*f.x+1,2*f.y+1,A.fullpath),at.push(Rt)),f.y==ut&&mt<=A.tileResolution||(Rt=new pt([m[0]*wt+m[9]*dt,m[1]*ot+m[10]*gt,m[2]*_t+m[11]*ht,m[0]*Tt+m[6]*Et,m[1]*ot+m[7]*gt,m[2]*_t+m[8]*ht,m[9]*Tt+m[6]*Et,m[10]*wt+m[7]*dt,m[11]*_t+m[8]*ht,m[9],m[10],m[11]],f.side,f.level+1,2*f.x,2*f.y+1,A.fullpath),at.push(Rt));for(var P=0;P<at.length;P++)x(u,at[P],J,S,K)}}}function xt(u,f,J){var S=Math.sin(f),K=Math.cos(f);return"x"==J?[u[0],K*u[1]+S*u[2],K*u[2]-S*u[1],u[3],K*u[4]+S*u[5],K*u[5]-S*u[4],u[6],K*u[7]+S*u[8],K*u[8]-S*u[7]]:"y"==J?[K*u[0]-S*u[2],u[1],K*u[2]+S*u[0],K*u[3]-S*u[5],u[4],K*u[5]+S*u[3],K*u[6]-S*u[8],u[7],K*u[8]+S*u[6]]:"z"==J?[K*u[0]+S*u[1],K*u[1]-S*u[0],u[2],K*u[3]+S*u[4],K*u[4]-S*u[3],u[5],K*u[6]+S*u[7],K*u[7]-S*u[6],u[8]]:void 0}function Wt(u){return[u[0],u[4],u[8],u[12],u[1],u[5],u[9],u[13],u[2],u[6],u[10],u[14],u[3],u[7],u[11],u[15]]}F.style.width=F.style.height="100%",vt.appendChild(F),this.init=function(u,f,J,S,K,m,Y,k){if(f===p&&(f="equirectangular"),"equirectangular"!=f&&"cubemap"!=f&&"multires"!=f)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(st=f,A=u,Vt=J,It=k||{},v){if(B&&(n.detachShader(v,B),n.deleteShader(B)),lt&&(n.detachShader(v,lt),n.deleteShader(lt)),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),v.texture&&n.deleteTexture(v.texture),v.nodeCache)for(var W=0;W<v.nodeCache.length;W++)n.deleteTexture(v.nodeCache[W].texture);n.deleteProgram(v),v=p}X=p;var G,rt,Zt=!1;if("cubemap"==st)for(G=0;G<6;G++)A[G].width>0?(rt===p&&(rt=A[G].width),rt!=A[G].width&&console.log("Cube faces have inconsistent widths: "+rt+" vs. "+A[G].width)):Zt=!0;function Nt(P){if(Zt){var it=P*P*4,Ft=new Uint8ClampedArray(it),V=k.backgroundColor?k.backgroundColor:[0,0,0];V[0]*=255,V[1]*=255,V[2]*=255;for(var z=0;z<it;z++)Ft[z++]=V[0],Ft[z++]=V[1],Ft[z++]=V[2];var O=new ImageData(Ft,P,P);for(G=0;G<6;G++)0==A[G].width&&(A[G]=O)}}if("cubemap"==st&&rt&rt-1&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(n||(n=F.getContext("experimental-webgl",{alpha:!1,depth:!1})),n&&1286==n.getError()&&Xt()),n||!("multires"==st&&A.hasOwnProperty("fallbackPath")||"cubemap"==st)||!("WebkitAppearance"in y.documentElement.style)&&!navigator.userAgent.match(/Trident.*rv[ :]*11\./)&&-1===navigator.appVersion.indexOf("MSIE 10")){if(!n)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};"cubemap"==st&&Nt(rt),A.fullpath=A.basePath?A.basePath+A.path:A.path,A.invTileResolution=1/A.tileResolution;var wt=[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1];for(Yt=[],G=0;G<6;G++)Yt[G]=wt.slice(12*G,12*G+12),wt=[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1];var dt=0;if("equirectangular"==st){if(dt=n.getParameter(n.MAX_TEXTURE_SIZE),Math.max(A.width/2,A.height)>dt)throw console.log("Error: The image is too big; it's "+A.width+"px wide, but this device's maximum supported size is "+2*dt+"px."),{type:"webgl size error",width:A.width,maxWidth:2*dt}}else if("cubemap"==st&&rt>n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+rt+"px wide, but this device's maximum supported size is "+dt+"px."),{type:"webgl size error",width:rt,maxWidth:dt};k!==p&&(k.horizonPitch!==p||k.horizonRoll!==p)&&(X=[k.horizonPitch==p?0:k.horizonPitch,k.horizonRoll==p?0:k.horizonRoll]);var at=n.TEXTURE_2D;if(n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),n.getShaderPrecisionFormat){var Pt=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);Pt&&Pt.precision<1&&(Q=Q.replace("highp","mediump"))}B=n.createShader(n.VERTEX_SHADER);var Rt=t;"multires"==st&&(Rt=g),n.shaderSource(B,Rt),n.compileShader(B),lt=n.createShader(n.FRAGMENT_SHADER);var Tt=tt;"cubemap"==st?(at=n.TEXTURE_CUBE_MAP,Tt=e):"multires"==st&&(Tt=kt),n.shaderSource(lt,Tt),n.compileShader(lt),v=n.createProgram(),n.attachShader(v,B),n.attachShader(v,lt),n.linkProgram(v),n.getShaderParameter(B,n.COMPILE_STATUS)||console.log(n.getShaderInfoLog(B)),n.getShaderParameter(lt,n.COMPILE_STATUS)||console.log(n.getShaderInfoLog(lt)),n.getProgramParameter(v,n.LINK_STATUS)||console.log(n.getProgramInfoLog(v)),n.useProgram(v),v.drawInProgress=!1;var ot=k.backgroundColor?k.backgroundColor:[0,0,0];if(n.clearColor(ot[0],ot[1],ot[2],1),n.clear(n.COLOR_BUFFER_BIT),v.texCoordLocation=n.getAttribLocation(v,"a_texCoord"),n.enableVertexAttribArray(v.texCoordLocation),"multires"!=st){if(Ct||(Ct=n.createBuffer()),n.bindBuffer(n.ARRAY_BUFFER,Ct),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),n.STATIC_DRAW),n.vertexAttribPointer(v.texCoordLocation,2,n.FLOAT,!1,0,0),v.aspectRatio=n.getUniformLocation(v,"u_aspectRatio"),n.uniform1f(v.aspectRatio,n.drawingBufferWidth/n.drawingBufferHeight),v.psi=n.getUniformLocation(v,"u_psi"),v.theta=n.getUniformLocation(v,"u_theta"),v.f=n.getUniformLocation(v,"u_f"),v.h=n.getUniformLocation(v,"u_h"),v.v=n.getUniformLocation(v,"u_v"),v.vo=n.getUniformLocation(v,"u_vo"),v.rot=n.getUniformLocation(v,"u_rot"),n.uniform1f(v.h,S/(2*Math.PI)),n.uniform1f(v.v,K/Math.PI),n.uniform1f(v.vo,m/Math.PI*2),"equirectangular"==st&&(v.backgroundColor=n.getUniformLocation(v,"u_backgroundColor"),n.uniform4fv(v.backgroundColor,ot.concat([1]))),v.texture=n.createTexture(),n.bindTexture(at,v.texture),"cubemap"==st)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A[1]),n.texImage2D(n.TEXTURE_CUBE_MAP_NEGATIVE_X,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A[3]),n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_Y,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A[4]),n.texImage2D(n.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A[5]),n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_Z,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A[0]),n.texImage2D(n.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A[2]);else if(A.width<=dt)n.uniform1i(n.getUniformLocation(v,"u_splitImage"),0),n.texImage2D(at,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A);else{n.uniform1i(n.getUniformLocation(v,"u_splitImage"),1);var _t=y.createElement("canvas");_t.width=A.width/2,_t.height=A.height;var Et=_t.getContext("2d");Et.drawImage(A,0,0);var gt=Et.getImageData(0,0,A.width/2,A.height);n.texImage2D(at,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,gt),v.texture2=n.createTexture(),n.activeTexture(n.TEXTURE1),n.bindTexture(at,v.texture2),n.uniform1i(n.getUniformLocation(v,"u_image1"),1),Et.drawImage(A,-A.width/2,0),gt=Et.getImageData(0,0,A.width/2,A.height),n.texImage2D(at,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,gt),n.texParameteri(at,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(at,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(at,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(at,n.TEXTURE_MAG_FILTER,n.LINEAR),n.activeTexture(n.TEXTURE0)}n.texParameteri(at,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(at,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(at,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(at,n.TEXTURE_MAG_FILTER,n.LINEAR)}else v.vertPosLocation=n.getAttribLocation(v,"a_vertCoord"),n.enableVertexAttribArray(v.vertPosLocation),Dt||(Dt=n.createBuffer()),R||(R=n.createBuffer()),Kt||(Kt=n.createBuffer()),n.bindBuffer(n.ARRAY_BUFFER,R),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,Kt),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),n.STATIC_DRAW),v.perspUniform=n.getUniformLocation(v,"u_perspMatrix"),v.cubeUniform=n.getUniformLocation(v,"u_cubeMatrix"),v.level=-1,v.currentNodes=[],v.nodeCache=[],v.nodeCacheTimestamp=0;var ht=n.getError();if(0!==ht)throw console.log("Error: Something went wrong with WebGL!",ht),{type:"webgl error"};Y()}else{var Bt;L&&vt.removeChild(L),(L=y.createElement("div")).className="pnlm-world",Bt=A.basePath?A.basePath+A.fallbackPath:A.fallbackPath;var Ut=["f","r","b","l","u","d"],yt=0,ut=function(){var P=y.createElement("canvas");P.className="pnlm-face pnlm-"+Ut[this.side]+"face",L.appendChild(P);var it=P.getContext("2d");P.style.width=this.width+4+"px",P.style.height=this.height+4+"px",P.width=this.width+4,P.height=this.height+4,it.drawImage(this,2,2);var z,O,Ft=it.getImageData(0,0,P.width,P.height),V=Ft.data;for(z=2;z<P.width-2;z++)for(O=0;O<4;O++)V[4*(z+P.width)+O]=V[4*(z+2*P.width)+O],V[4*(z+P.width*(P.height-2))+O]=V[4*(z+P.width*(P.height-3))+O];for(z=2;z<P.height-2;z++)for(O=0;O<4;O++)V[4*(z*P.width+1)+O]=V[4*(z*P.width+2)+O],V[4*((z+1)*P.width-2)+O]=V[4*((z+1)*P.width-3)+O];for(O=0;O<4;O++)V[4*(P.width+1)+O]=V[4*(2*P.width+2)+O],V[4*(2*P.width-2)+O]=V[4*(3*P.width-3)+O],V[4*(P.width*(P.height-2)+1)+O]=V[4*(P.width*(P.height-3)+2)+O],V[4*(P.width*(P.height-1)-2)+O]=V[4*(P.width*(P.height-2)-3)+O];for(z=1;z<P.width-1;z++)for(O=0;O<4;O++)V[4*z+O]=V[4*(z+P.width)+O],V[4*(z+P.width*(P.height-1))+O]=V[4*(z+P.width*(P.height-2))+O];for(z=1;z<P.height-1;z++)for(O=0;O<4;O++)V[z*P.width*4+O]=V[4*(z*P.width+1)+O],V[4*((z+1)*P.width-1)+O]=V[4*((z+1)*P.width-2)+O];for(O=0;O<4;O++)V[O]=V[4*(P.width+1)+O],V[4*(P.width-1)+O]=V[4*(2*P.width-2)+O],V[P.width*(P.height-1)*4+O]=V[4*(P.width*(P.height-2)+1)+O],V[4*(P.width*P.height-1)+O]=V[4*(P.width*(P.height-1)-2)+O];it.putImageData(Ft,0,0),mt.call(this)},mt=function(){this.width>0?(j===p&&(j=this.width),j!=this.width&&console.log("Fallback faces have inconsistent widths: "+j+" vs. "+this.width)):Zt=!0,6==++yt&&(j=this.width,vt.appendChild(L),Y())};for(Zt=!1,G=0;G<6;G++){var ft=new Image;ft.crossOrigin=It.crossOrigin?It.crossOrigin:"anonymous",ft.side=G,ft.onload=ut,ft.onerror=mt,ft.src="multires"==st?Bt.replace("%s",Ut[G])+"."+A.extension:A[G].src}Nt(j)}},this.destroy=function(){if(vt!==p&&(F!==p&&vt.contains(F)&&vt.removeChild(F),L!==p&&vt.contains(L)&&vt.removeChild(L)),n){var u=n.getExtension("WEBGL_lose_context");u&&u.loseContext()}},this.resize=function(){var u=Ot.devicePixelRatio||1;F.width=F.clientWidth*u,F.height=F.clientHeight*u,n&&(1286==n.getError()&&Xt(),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),"multires"!=st&&n.uniform1f(v.aspectRatio,F.clientWidth/F.clientHeight))},this.resize(),this.setPose=function(u,f){X=[u,f]},this.render=function(u,f,J,S){var K,m,Y,k=0;if(S===p&&(S={}),S.roll&&(k=S.roll),X!==p){var W=X[0],G=X[1],Zt=u,rt=f,Nt=Math.cos(G)*Math.sin(u)*Math.sin(W)+Math.cos(u)*(Math.cos(W)*Math.cos(f)+Math.sin(G)*Math.sin(W)*Math.sin(f)),Bt=-Math.sin(u)*Math.sin(G)+Math.cos(u)*Math.cos(G)*Math.sin(f),Ut=Math.cos(G)*Math.cos(W)*Math.sin(u)+Math.cos(u)*(-Math.cos(f)*Math.sin(W)+Math.cos(W)*Math.sin(G)*Math.sin(f));u=Math.asin(Math.max(Math.min(Ut,1),-1)),f=Math.atan2(Bt,Nt);var yt=[Math.cos(Zt)*(Math.sin(G)*Math.sin(W)*Math.cos(rt)-Math.cos(W)*Math.sin(rt)),Math.cos(Zt)*Math.cos(G)*Math.cos(rt),Math.cos(Zt)*(Math.cos(W)*Math.sin(G)*Math.cos(rt)+Math.sin(rt)*Math.sin(W))],ut=[-Math.cos(u)*Math.sin(f),Math.cos(u)*Math.cos(f)],mt=Math.acos(Math.max(Math.min((yt[0]*ut[0]+yt[1]*ut[1])/(Math.sqrt(yt[0]*yt[0]+yt[1]*yt[1]+yt[2]*yt[2])*Math.sqrt(ut[0]*ut[0]+ut[1]*ut[1])),1),-1));yt[2]<0&&(mt=2*Math.PI-mt),k+=mt}if(n||"multires"!=st&&"cubemap"!=st){if("multires"!=st){var Rt=2*Math.atan(Math.tan(.5*J)/(n.drawingBufferWidth/n.drawingBufferHeight));K=1/Math.tan(.5*Rt),n.uniform1f(v.psi,f),n.uniform1f(v.theta,u),n.uniform1f(v.rot,k),n.uniform1f(v.f,K),!0===Vt&&"equirectangular"==st&&(n.bindTexture(n.TEXTURE_2D,v.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A)),n.drawArrays(n.TRIANGLES,0,6)}else{var Tt=function ee(u,f,J,S){var K=2*Math.atan(Math.tan(u/2)*n.drawingBufferHeight/n.drawingBufferWidth),m=1/Math.tan(K/2);return[m/f,0,0,0,0,m,0,0,0,0,(S+J)/(J-S),2*S*J/(J-S),0,0,-1,0]}(J,n.drawingBufferWidth/n.drawingBufferHeight,.1,100);!function St(u){for(var f=1;f<A.maxLevel&&n.drawingBufferWidth>A.tileResolution*Math.pow(2,f-1)*Math.tan(u/2)*.707;)f++;v.level=f}(J);var ot=[1,0,0,0,1,0,0,0,1];ot=xt(ot,-k,"z"),ot=xt(ot,-u,"x"),ot=function nt(u){return[u[0],u[1],u[2],0,u[3],u[4],u[5],0,u[6],u[7],u[8],0,0,0,0,1]}(ot=xt(ot,f,"y")),n.uniformMatrix4fv(v.perspUniform,!1,new Float32Array(Wt(Tt))),n.uniformMatrix4fv(v.cubeUniform,!1,new Float32Array(Wt(ot)));var _t=function Gt(u,f){return[u[0]*f[0],u[0]*f[1],u[0]*f[2],0,u[5]*f[4],u[5]*f[5],u[5]*f[6],0,u[10]*f[8],u[10]*f[9],u[10]*f[10],u[11],-f[8],-f[9],-f[10],0]}(Tt,ot);if(v.nodeCache.sort(jt),v.nodeCache.length>200&&v.nodeCache.length>v.currentNodes.length+50)for(var Et=v.nodeCache.splice(200,v.nodeCache.length-200),gt=0;gt<Et.length;gt++)n.deleteTexture(Et[gt].texture);v.currentNodes=[];var ht=["f","b","u","d","l","r"];for(Y=0;Y<6;Y++)x(_t,new pt(Yt[Y],ht[Y],1,0,0,A.fullpath),u,f,J);for(v.currentNodes.sort(At),m=Ht.length-1;m>=0;m--)-1===v.currentNodes.indexOf(Ht[m].node)&&(Ht[m].node.textureLoad=!1,Ht.splice(m,1));if(0===Ht.length)for(m=0;m<v.currentNodes.length;m++){var it=v.currentNodes[m];if(!it.texture&&!it.textureLoad){it.textureLoad=!0,setTimeout(Lt,0,it);break}}!function ct(){if(!v.drawInProgress){v.drawInProgress=!0,n.clear(n.COLOR_BUFFER_BIT);for(var u=0;u<v.currentNodes.length;u++)v.currentNodes[u].textureLoaded>1&&(n.bindBuffer(n.ARRAY_BUFFER,Dt),n.bufferData(n.ARRAY_BUFFER,new Float32Array(v.currentNodes[u].vertices),n.STATIC_DRAW),n.vertexAttribPointer(v.vertPosLocation,3,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,R),n.vertexAttribPointer(v.texCoordLocation,2,n.FLOAT,!1,0,0),n.bindTexture(n.TEXTURE_2D,v.currentNodes[u].texture),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0));v.drawInProgress=!1}}()}if(S.returnImage!==p)return F.toDataURL("image/png")}else{var ft={f:"translate3d(-"+(2+(Y=j/2))+"px, -"+(Y+2)+"px, -"+Y+"px)",b:"translate3d("+(Y+2)+"px, -"+(Y+2)+"px, "+Y+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(Y+2)+"px, -"+Y+"px, "+(Y+2)+"px) rotateX(270deg)",d:"translate3d(-"+(Y+2)+"px, "+Y+"px, -"+(Y+2)+"px) rotateX(90deg)",l:"translate3d(-"+Y+"px, -"+(Y+2)+"px, "+(Y+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+Y+"px, -"+(Y+2)+"px, -"+(Y+2)+"px) rotateY(270deg)"},wt=(K=1/Math.tan(J/2))*F.clientWidth/2+"px",dt="perspective("+wt+") translateZ("+wt+") rotateX("+u+"rad) rotateY("+f+"rad) ",at=Object.keys(ft);for(m=0;m<6;m++){var Pt=L.querySelector(".pnlm-"+at[m]+"face");Pt&&(Pt.style.webkitTransform=dt+ft[at[m]],Pt.style.transform=dt+ft[at[m]])}}},this.isLoading=function(){if(n&&"multires"==st)for(var u=0;u<v.currentNodes.length;u++)if(!v.currentNodes[u].textureLoaded)return!0;return!1},this.getCanvas=function(){return F};var Ht=[],Mt=function(){var J,u=4,f={};function S(){var k=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=J||"anonymous";var W=function(){k.image.width>0&&k.image.height>0?(function ie(u,f){n.bindTexture(n.TEXTURE_2D,f),n.texImage2D(n.TEXTURE_2D,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,u),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null)}(k.image,k.texture),k.callback(k.texture,!0)):k.callback(k.texture,!1),function m(k){if(Ht.length){var W=Ht.shift();k.loadTexture(W.src,W.texture,W.callback)}else f[u++]=k}(k)};this.image.addEventListener("load",W),this.image.addEventListener("error",W)}function K(k,W,G,Zt){this.node=k,this.src=W,this.texture=G,this.callback=Zt}S.prototype.loadTexture=function(k,W,G){this.texture=W,this.callback=G,this.image.src=k};for(var Y=0;Y<u;Y++)f[Y]=new S;return function(k,W,G,Zt){J=Zt;var rt=n.createTexture();return u?f[--u].loadTexture(W,rt,G):Ht.push(new K(k,W,rt,G)),rt}}();function Lt(u){Mt(u,u.path+"."+A.extension,function(f,J){u.texture=f,u.textureLoaded=J?2:1},It.crossOrigin)}function qt(u,f){var J=function D(u,f){return[u[0]*f[0]+u[1]*f[1]+u[2]*f[2],u[4]*f[0]+u[5]*f[1]+u[6]*f[2],u[11]+u[8]*f[0]+u[9]*f[1]+u[10]*f[2],1/(u[12]*f[0]+u[13]*f[1]+u[14]*f[2])]}(u,f),S=J[0]*J[3],K=J[1]*J[3],m=J[2]*J[3],Y=[0,0,0];return S<-1&&(Y[0]=-1),S>1&&(Y[0]=1),K<-1&&(Y[1]=-1),K>1&&(Y[1]=1),(m<-1||m>1)&&(Y[2]=1),Y}function Xt(){console.log("Reducing canvas size due to error 1286!"),F.width=Math.round(F.width/2),F.height=Math.round(F.height/2)}}var t=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),g=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),Q=["precision highp float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image0;","uniform sampler2D u_image1;","uniform bool u_splitImage;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join("\n"),e=Q+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join("\n"),tt=Q+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else {","if(u_splitImage) {","if(coord.x < 0.0)","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","else","gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","} else {","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}","}","}"].join("\n"),kt=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function(vt,F,v,n){return new T(vt,F,v,n)}}}(window,document)},52633:()=>{window.pannellum=function(Ot,y,p){"use strict";function T(t,g){var e,tt,kt,X,Ct,Dt,At,pt,x,Q=this,vt=!1,F=Date.now(),v=0,n=0,B=-1,lt=0,j=0,L=new Array(10),Yt=!1,A=!1,Vt=!1,R={yaw:0,pitch:0,hfov:0},Kt=!1,It=!1,jt=0,ct=0,b={},et={},xt=[],nt=!1,Wt=1e-6,ee=!1,ie=!1,Ht={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:p,maxPitch:p,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:p,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function ht(i){return i<.5?2*i*i:(4-2*i)*i-1},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."}};(t="string"==typeof t?y.getElementById(t):t).classList.add("pnlm-container"),t.tabIndex=0;var Mt=y.createElement("div");Mt.className="pnlm-ui",t.appendChild(Mt);var Lt=y.createElement("div");Lt.className="pnlm-render-container",t.appendChild(Lt);var St=y.createElement("div");St.className="pnlm-dragfix",Mt.appendChild(St);var Gt=y.createElement("span");Gt.className="pnlm-about-msg",Gt.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a>',Mt.appendChild(Gt),St.addEventListener("contextmenu",function k(i){var a=W(i);Gt.style.left=a.x+"px",Gt.style.top=a.y+"px",clearTimeout(k.t1),clearTimeout(k.t2),Gt.style.display="block",Gt.style.opacity=1,k.t1=setTimeout(function(){Gt.style.opacity=0},2e3),k.t2=setTimeout(function(){Gt.style.display="none"},2500),i.preventDefault()});var D={},qt=y.createElement("div");qt.className="pnlm-sprite pnlm-hot-spot-debug-indicator",Mt.appendChild(qt),D.container=y.createElement("div"),D.container.className="pnlm-panorama-info",D.title=y.createElement("div"),D.title.className="pnlm-title-box",D.container.appendChild(D.title),D.author=y.createElement("div"),D.author.className="pnlm-author-box",D.container.appendChild(D.author),Mt.appendChild(D.container),D.load={},D.load.box=y.createElement("div"),D.load.box.className="pnlm-load-box",D.load.boxp=y.createElement("p"),D.load.box.appendChild(D.load.boxp),D.load.lbox=y.createElement("div"),D.load.lbox.className="pnlm-lbox",D.load.lbox.innerHTML='<div class="pnlm-loading"></div>',D.load.box.appendChild(D.load.lbox),D.load.lbar=y.createElement("div"),D.load.lbar.className="pnlm-lbar",D.load.lbarFill=y.createElement("div"),D.load.lbarFill.className="pnlm-lbar-fill",D.load.lbar.appendChild(D.load.lbarFill),D.load.box.appendChild(D.load.lbar),D.load.msg=y.createElement("p"),D.load.msg.className="pnlm-lmsg",D.load.box.appendChild(D.load.msg),Mt.appendChild(D.load.box),D.errorMsg=y.createElement("div"),D.errorMsg.className="pnlm-error-msg pnlm-info-box",Mt.appendChild(D.errorMsg);var U={};U.container=y.createElement("div"),U.container.className="pnlm-controls-container",Mt.appendChild(U.container),U.load=y.createElement("div"),U.load.className="pnlm-load-button",U.load.addEventListener("click",function(){E(),H()}),Mt.appendChild(U.load),U.zoom=y.createElement("div"),U.zoom.className="pnlm-zoom-controls pnlm-controls",U.zoomIn=y.createElement("div"),U.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",U.zoomIn.addEventListener("click",function o(){X&&(r(e.hfov-5),it())}),U.zoom.appendChild(U.zoomIn),U.zoomOut=y.createElement("div"),U.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",U.zoomOut.addEventListener("click",function h(){X&&(r(e.hfov+5),it())}),U.zoom.appendChild(U.zoomOut),U.container.appendChild(U.zoom),U.fullscreen=y.createElement("div"),U.fullscreen.addEventListener("click",s),U.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(y.fullscreenEnabled||y.mozFullScreenEnabled||y.webkitFullscreenEnabled||y.msFullscreenEnabled)&&U.container.appendChild(U.fullscreen),U.orientation=y.createElement("div"),U.orientation.addEventListener("click",function(i){It?me():fe()}),U.orientation.addEventListener("mousedown",function(i){i.stopPropagation()}),U.orientation.addEventListener("touchstart",function(i){i.stopPropagation()}),U.orientation.addEventListener("pointerdown",function(i){i.stopPropagation()}),U.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var Xt=!1;Ot.DeviceOrientationEvent&&"https:"==location.protocol&&navigator.userAgent.toLowerCase().indexOf("mobi")>=0&&(U.container.appendChild(U.orientation),Xt=!0);var u=y.createElement("div");function f(){var i=y.createElement("div");if(i.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1!=i.getElementsByTagName("i").length){var a,c;if(pt=e.hfov,x=e.pitch,"cubemap"==e.type){for(Ct=[],a=0;a<6;a++)Ct.push(new Image),Ct[a].crossOrigin=e.crossOrigin;D.load.lbox.style.display="block",D.load.lbar.style.display="none"}else if("multires"==e.type){var w=JSON.parse(JSON.stringify(e.multiRes));e.basePath&&e.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(e.multiRes.basePath)?w.basePath=e.basePath+e.multiRes.basePath:e.multiRes.basePath?w.basePath=e.multiRes.basePath:e.basePath&&(w.basePath=e.basePath),Ct=w}else if(!0===e.dynamic)Ct=e.panorama;else{if(e.panorama===p)return void m(e.strings.noPanoramaError);Ct=new Image}if("cubemap"==e.type){var M=6,I=function(){0==--M&&S()},q=function(N){var $=y.createElement("a");$.href=N.target.src,$.textContent=$.href,m(e.strings.fileAccessError.replace("%s",$.outerHTML))};for(a=0;a<Ct.length;a++)"null"==(c=e.cubeMap[a])?(console.log("Will use background instead of missing cubemap face "+a),I()):(e.basePath&&!J(c)&&(c=e.basePath+c),Ct[a].onload=I,Ct[a].onerror=q,Ct[a].src=ne(c))}else if("multires"==e.type)S();else if(c="",e.basePath&&(c=e.basePath),!0!==e.dynamic){c=J(e.panorama)?e.panorama:c+e.panorama,Ct.onload=function(){Ot.URL.revokeObjectURL(this.src),S()};var Z=new XMLHttpRequest;Z.onloadend=function(){if(200!=Z.status){var N=y.createElement("a");N.href=c,N.textContent=N.href,m(e.strings.fileAccessError.replace("%s",N.outerHTML))}(function K(i){var a=new FileReader;a.addEventListener("loadend",function(){var c=a.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var w=c.indexOf("\xff\xc2");(w<0||w>65536)&&m(e.strings.iOS8WebGLError)}var M=c.indexOf("<x:xmpmeta");if(M>-1&&!0!==e.ignoreGPanoXMP){var I=c.substring(M,c.indexOf("</x:xmpmeta>")+12),q=function(N){var $;return I.indexOf(N+'="')>=0?$=($=I.substring(I.indexOf(N+'="')+N.length+2)).substring(0,$.indexOf('"')):I.indexOf(N+">")>=0&&($=($=I.substring(I.indexOf(N+">")+N.length+1)).substring(0,$.indexOf("<"))),$!==p?Number($):null},Z={fullWidth:q("GPano:FullPanoWidthPixels"),croppedWidth:q("GPano:CroppedAreaImageWidthPixels"),fullHeight:q("GPano:FullPanoHeightPixels"),croppedHeight:q("GPano:CroppedAreaImageHeightPixels"),topPixels:q("GPano:CroppedAreaTopPixels"),heading:q("GPano:PoseHeadingDegrees"),horizonPitch:q("GPano:PosePitchDegrees"),horizonRoll:q("GPano:PoseRollDegrees")};null!==Z.fullWidth&&null!==Z.croppedWidth&&null!==Z.fullHeight&&null!==Z.croppedHeight&&null!==Z.topPixels&&(xt.indexOf("haov")<0&&(e.haov=Z.croppedWidth/Z.fullWidth*360),xt.indexOf("vaov")<0&&(e.vaov=Z.croppedHeight/Z.fullHeight*180),xt.indexOf("vOffset")<0&&(e.vOffset=-180*((Z.topPixels+Z.croppedHeight/2)/Z.fullHeight-.5)),null!==Z.heading&&xt.indexOf("northOffset")<0&&(e.northOffset=Z.heading,!1!==e.compass&&(e.compass=!0)),null!==Z.horizonPitch&&null!==Z.horizonRoll&&(xt.indexOf("horizonPitch")<0&&(e.horizonPitch=Z.horizonPitch),xt.indexOf("horizonRoll")<0&&(e.horizonRoll=Z.horizonRoll)))}Ct.src=Ot.URL.createObjectURL(i)}),a.readAsBinaryString!==p?a.readAsBinaryString(i):a.readAsText(i)})(this.response),D.load.msg.innerHTML=""},Z.onprogress=function(N){var Qt,Jt,bt;N.lengthComputable?(D.load.lbarFill.style.width=N.loaded/N.total*100+"%",N.total>1e6?(Qt="MB",Jt=(N.loaded/1e6).toFixed(2),bt=(N.total/1e6).toFixed(2)):N.total>1e3?(Qt="kB",Jt=(N.loaded/1e3).toFixed(1),bt=(N.total/1e3).toFixed(1)):(Qt="B",Jt=N.loaded,bt=N.total),D.load.msg.innerHTML=Jt+" / "+bt+" "+Qt):(D.load.lbox.style.display="block",D.load.lbar.style.display="none")};try{Z.open("GET",c,!0)}catch{m(e.strings.malformedURLError)}Z.responseType="blob",Z.setRequestHeader("Accept","image/*,*/*;q=0.9"),Z.withCredentials="use-credentials"===e.crossOrigin,Z.send()}e.draggable&&Mt.classList.add("pnlm-grab"),Mt.classList.remove("pnlm-grabbing"),nt=!0===e.dynamicUpdate,e.dynamic&&nt&&(Ct=e.panorama,S())}else m()}function J(i){return new RegExp("^(?:[a-z]+:)?//","i").test(i)||"/"==i[0]||"blob:"==i.slice(0,5)}function S(){tt||(tt=new libpannellum.renderer(Lt)),Vt||(Vt=!0,St.addEventListener("mousedown",G,!1),y.addEventListener("mousemove",Nt,!1),y.addEventListener("mouseup",Bt,!1),e.mouseZoom&&(Mt.addEventListener("mousewheel",Pt,!1),Mt.addEventListener("DOMMouseScroll",Pt,!1)),e.doubleClickZoom&&St.addEventListener("dblclick",Zt,!1),t.addEventListener("mozfullscreenchange",d,!1),t.addEventListener("webkitfullscreenchange",d,!1),t.addEventListener("msfullscreenchange",d,!1),t.addEventListener("fullscreenchange",d,!1),Ot.addEventListener("resize",P,!1),Ot.addEventListener("orientationchange",P,!1),e.disableKeyboardCtrl||(t.addEventListener("keydown",Rt,!1),t.addEventListener("keyup",ot,!1),t.addEventListener("blur",Tt,!1)),y.addEventListener("mouseleave",Bt,!1),""===y.documentElement.style.pointerAction&&""===y.documentElement.style.touchAction?(St.addEventListener("pointerdown",wt,!1),St.addEventListener("pointermove",dt,!1),St.addEventListener("pointerup",at,!1),St.addEventListener("pointerleave",at,!1)):(St.addEventListener("touchstart",Ut,!1),St.addEventListener("touchmove",yt,!1),St.addEventListener("touchend",ut,!1)),Ot.navigator.pointerEnabled&&(t.style.touchAction="none")),function _e(){try{var i={};e.horizonPitch!==p&&(i.horizonPitch=e.horizonPitch*Math.PI/180),e.horizonRoll!==p&&(i.horizonRoll=e.horizonRoll*Math.PI/180),e.backgroundColor!==p&&(i.backgroundColor=e.backgroundColor),tt.init(Ct,e.type,e.dynamic,e.haov*Math.PI/180,e.vaov*Math.PI/180,e.vOffset*Math.PI/180,ue,i),!0!==e.dynamic&&(Ct=p)}catch(a){if("webgl error"==a.type||"no webgl"==a.type)m();else{if("webgl size error"!=a.type)throw m(e.strings.unknownError),a;m(e.strings.textureSizeError.replace("%s",a.width).replace("%s",a.maxWidth))}}}(),r(e.hfov),setTimeout(function(){},500)}function m(i){i===p&&(i=e.strings.genericWebGLError),D.errorMsg.innerHTML="<p>"+i+"</p>",U.load.style.display="none",D.load.box.style.display="none",D.errorMsg.style.display="table",A=!0,X=p,Lt.style.display="none",zt("error",i)}function W(i){var a=t.getBoundingClientRect(),c={};return c.x=(i.clientX||i.pageX)-a.left,c.y=(i.clientY||i.pageY)-a.top,c}function G(i){if(i.preventDefault(),t.focus(),X&&e.draggable){var a=W(i);if(e.hotSpotDebug){var c=rt(i);console.log("Pitch: "+c[0]+", Yaw: "+c[1]+", Center Pitch: "+e.pitch+", Center Yaw: "+e.yaw+", HFOV: "+e.hfov)}C(),me(),e.roll=0,R.hfov=0,vt=!0,F=Date.now(),v=a.x,n=a.y,lt=e.yaw,j=e.pitch,Mt.classList.add("pnlm-grabbing"),Mt.classList.remove("pnlm-grab"),zt("mousedown",i),it()}}function Zt(i){if(e.minHfov===e.hfov)Q.setHfov(pt,1e3);else{var a=rt(i);Q.lookAt(a[0],a[1],e.minHfov,1e3)}}function rt(i){var a=W(i),c=tt.getCanvas(),w=c.clientWidth,M=c.clientHeight,I=a.x/w*2-1,q=(1-a.y/M*2)*M/w,Z=1/Math.tan(e.hfov*Math.PI/360),N=Math.sin(e.pitch*Math.PI/180),$=Math.cos(e.pitch*Math.PI/180),Qt=Z*$-q*N,Jt=Math.sqrt(I*I+Qt*Qt),bt=180*Math.atan((q*$+Z*N)/Jt)/Math.PI,te=180*Math.atan2(I/Jt,Qt/Jt)/Math.PI+e.yaw;return te<-180&&(te+=360),te>180&&(te-=360),[bt,te]}function Nt(i){if(vt&&X){F=Date.now();var a=tt.getCanvas(),c=a.clientWidth,w=a.clientHeight,M=W(i),I=180*(Math.atan(v/c*2-1)-Math.atan(M.x/c*2-1))/Math.PI*e.hfov/90+lt;R.yaw=(I-e.yaw)%360*.2,e.yaw=I;var q=2*Math.atan(Math.tan(e.hfov/360*Math.PI)*w/c)*180/Math.PI,Z=180*(Math.atan(M.y/w*2-1)-Math.atan(n/w*2-1))/Math.PI*q/90+j;R.pitch=.2*(Z-e.pitch),e.pitch=Z}}function Bt(i){vt&&(vt=!1,Date.now()-F>15&&(R.pitch=R.yaw=0),Mt.classList.add("pnlm-grab"),Mt.classList.remove("pnlm-grabbing"),F=Date.now(),zt("mouseup",i))}function Ut(i){if(X&&e.draggable){C(),me(),e.roll=0,R.hfov=0;var a=W(i.targetTouches[0]);if(v=a.x,n=a.y,2==i.targetTouches.length){var c=W(i.targetTouches[1]);v+=.5*(c.x-a.x),n+=.5*(c.y-a.y),B=Math.sqrt((a.x-c.x)*(a.x-c.x)+(a.y-c.y)*(a.y-c.y))}vt=!0,F=Date.now(),lt=e.yaw,j=e.pitch,zt("touchstart",i),it()}}function yt(i){if(e.draggable&&(i.preventDefault(),X&&(F=Date.now()),vt&&X)){var a=W(i.targetTouches[0]),c=a.x,w=a.y;if(2==i.targetTouches.length&&-1!=B){var M=W(i.targetTouches[1]);c+=.5*(M.x-a.x),w+=.5*(M.y-a.y);var I=Math.sqrt((a.x-M.x)*(a.x-M.x)+(a.y-M.y)*(a.y-M.y));r(e.hfov+.1*(B-I)),B=I}var q=e.hfov/360*e.touchPanSpeedCoeffFactor,Z=(v-c)*q+lt;R.yaw=(Z-e.yaw)%360*.2,e.yaw=Z;var N=(w-n)*q+j;R.pitch=.2*(N-e.pitch),e.pitch=N}}function ut(){vt=!1,Date.now()-F>150&&(R.pitch=R.yaw=0),B=-1,F=Date.now(),zt("touchend",event)}u.className="pnlm-compass pnlm-controls pnlm-control",Mt.appendChild(u),_(g.firstScene?g.firstScene:g.default&&g.default.firstScene?g.default.firstScene:null),E(!0);var mt=[],ft=[];function wt(i){if("touch"==i.pointerType){if(!X||!e.draggable)return;mt.push(i.pointerId),ft.push({clientX:i.clientX,clientY:i.clientY}),i.targetTouches=ft,Ut(i),i.preventDefault()}}function dt(i){if("touch"==i.pointerType){if(!e.draggable)return;for(var a=0;a<mt.length;a++)if(i.pointerId==mt[a])return ft[a].clientX=i.clientX,ft[a].clientY=i.clientY,i.targetTouches=ft,yt(i),void i.preventDefault()}}function at(i){if("touch"==i.pointerType){for(var a=!1,c=0;c<mt.length;c++)i.pointerId==mt[c]&&(mt[c]=p),mt[c]&&(a=!0);a||(mt=[],ft=[],ut()),i.preventDefault()}}function Pt(i){!X||"fullscreenonly"==e.mouseZoom&&!Yt||(i.preventDefault(),C(),F=Date.now(),i.wheelDeltaY?(r(e.hfov-.05*i.wheelDeltaY),R.hfov=i.wheelDelta<0?1:-1):i.wheelDelta?(r(e.hfov-.05*i.wheelDelta),R.hfov=i.wheelDelta<0?1:-1):i.detail&&(r(e.hfov+1.5*i.detail),R.hfov=i.detail>0?1:-1),it())}function Rt(i){C(),F=Date.now(),me(),e.roll=0;var a=i.which||i.keycode;e.capturedKeyNumbers.indexOf(a)<0||(i.preventDefault(),27==a?Yt&&s():_t(a,!0))}function Tt(){for(var i=0;i<10;i++)L[i]=!1}function ot(i){var a=i.which||i.keycode;e.capturedKeyNumbers.indexOf(a)<0||(i.preventDefault(),_t(a,!1))}function _t(i,a){var c=!1;switch(i){case 109:case 189:case 17:case 173:L[0]!=a&&(c=!0),L[0]=a;break;case 107:case 187:case 16:case 61:L[1]!=a&&(c=!0),L[1]=a;break;case 38:L[2]!=a&&(c=!0),L[2]=a;break;case 87:L[6]!=a&&(c=!0),L[6]=a;break;case 40:L[3]!=a&&(c=!0),L[3]=a;break;case 83:L[7]!=a&&(c=!0),L[7]=a;break;case 37:L[4]!=a&&(c=!0),L[4]=a;break;case 65:L[8]!=a&&(c=!0),L[8]=a;break;case 39:L[5]!=a&&(c=!0),L[5]=a;break;case 68:L[9]!=a&&(c=!0),L[9]=a}c&&a&&(Dt=typeof performance<"u"&&performance.now()?performance.now():Date.now(),it())}function gt(i){var a=b[i],c=Math.min(1,Math.max((Date.now()-a.startTime)/1e3/(a.duration/1e3),0)),w=a.startPosition+e.animationTimingFunction(c)*(a.endPosition-a.startPosition);(a.endPosition>a.startPosition&&w>=a.endPosition||a.endPosition<a.startPosition&&w<=a.endPosition||a.endPosition===a.startPosition)&&(w=a.endPosition,R[i]=0,delete b[i]),e[i]=w}function P(){d("resize")}function it(){Kt||(Kt=!0,Ft())}function Ft(){if(!ie)if(function V(){var i;if(X){var a=tt.getCanvas();!1!==e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),i=e.yaw;var c=0;if(e.avoidShowingBackground){var M=e.hfov/2,I=180*Math.atan2(Math.tan(M/180*Math.PI),a.width/a.height)/Math.PI;e.vaov>e.haov?Math.min(Math.cos((e.pitch-M)/180*Math.PI),Math.cos((e.pitch+M)/180*Math.PI)):c=M*(1-Math.min(Math.cos((e.pitch-I)/180*Math.PI),Math.cos((e.pitch+I)/180*Math.PI)))}var Z=e.maxYaw-e.minYaw,N=-180,$=180;Z<360&&(N=e.minYaw+e.hfov/2+c,$=e.maxYaw-e.hfov/2-c,Z<e.hfov&&(N=$=(N+$)/2),e.yaw=Math.max(N,Math.min($,e.yaw))),!1===e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),!1!==e.autoRotate&&i!=e.yaw&&Dt!==p&&(e.autoRotate*=-1);var Qt=2*Math.atan(Math.tan(e.hfov/180*Math.PI*.5)/(a.width/a.height))/Math.PI*180,Jt=e.minPitch+Qt/2,bt=e.maxPitch-Qt/2;e.maxPitch-e.minPitch<Qt&&(Jt=bt=(Jt+bt)/2),isNaN(Jt)&&(Jt=-90),isNaN(bt)&&(bt=90),e.pitch=Math.max(Jt,Math.min(bt,e.pitch)),tt.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{roll:e.roll*Math.PI/180}),se(),e.compass&&(u.style.transform="rotate("+(-e.yaw-e.northOffset)+"deg)",u.style.webkitTransform="rotate("+(-e.yaw-e.northOffset)+"deg)")}}(),At&&clearTimeout(At),vt||!0===It)requestAnimationFrame(Ft);else if(L[0]||L[1]||L[2]||L[3]||L[4]||L[5]||L[6]||L[7]||L[8]||L[9]||e.autoRotate||b.pitch||b.yaw||b.hfov||Math.abs(R.yaw)>.01||Math.abs(R.pitch)>.01||Math.abs(R.hfov)>.01)(function Et(){if(X){var M,i=!1,a=e.pitch,c=e.yaw,w=e.hfov;M=typeof performance<"u"&&performance.now()?performance.now():Date.now(),Dt===p&&(Dt=M);var I=(M-Dt)*e.hfov/1700;if(I=Math.min(I,1),L[0]&&!0===e.keyboardZoom&&(r(e.hfov+(.8*R.hfov+.5)*I),i=!0),L[1]&&!0===e.keyboardZoom&&(r(e.hfov+(.8*R.hfov-.2)*I),i=!0),(L[2]||L[6])&&(e.pitch+=(.8*R.pitch+.2)*I,i=!0),(L[3]||L[7])&&(e.pitch+=(.8*R.pitch-.2)*I,i=!0),(L[4]||L[8])&&(e.yaw+=(.8*R.yaw-.2)*I,i=!0),(L[5]||L[9])&&(e.yaw+=(.8*R.yaw+.2)*I,i=!0),i&&(F=Date.now()),e.autoRotate){if(M-Dt>.001){var q=(M-Dt)/1e3,Z=(R.yaw/q*I-.2*e.autoRotate)*q;Z=(-e.autoRotate>0?1:-1)*Math.min(Math.abs(e.autoRotate*q),Math.abs(Z)),e.yaw+=Z}e.autoRotateStopDelay&&(e.autoRotateStopDelay-=M-Dt,e.autoRotateStopDelay<=0&&(e.autoRotateStopDelay=!1,ct=e.autoRotate,e.autoRotate=0))}if(b.pitch&&(gt("pitch"),a=e.pitch),b.yaw&&(gt("yaw"),c=e.yaw),b.hfov&&(gt("hfov"),w=e.hfov),I>0&&!e.autoRotate){var N=1-e.friction;!L[4]&&!L[5]&&!L[8]&&!L[9]&&!b.yaw&&(e.yaw+=R.yaw*I*N),!L[2]&&!L[3]&&!L[6]&&!L[7]&&!b.pitch&&(e.pitch+=R.pitch*I*N),!L[0]&&!L[1]&&!b.hfov&&r(e.hfov+R.hfov*I*N)}if(Dt=M,I>0){R.yaw=.8*R.yaw+(e.yaw-c)/I*.2,R.pitch=.8*R.pitch+(e.pitch-a)/I*.2,R.hfov=.8*R.hfov+(e.hfov-w)/I*.2;var $=e.autoRotate?Math.abs(e.autoRotate):5;R.yaw=Math.min($,Math.max(R.yaw,-$)),R.pitch=Math.min($,Math.max(R.pitch,-$)),R.hfov=Math.min($,Math.max(R.hfov,-$))}L[0]&&L[1]&&(R.hfov=0),(L[2]||L[6])&&(L[3]||L[7])&&(R.pitch=0),(L[4]||L[8])&&(L[5]||L[9])&&(R.yaw=0)}})(),e.autoRotateInactivityDelay>=0&&ct&&Date.now()-F>e.autoRotateInactivityDelay&&!e.autoRotate&&(e.autoRotate=ct,Q.lookAt(x,p,pt,3e3)),requestAnimationFrame(Ft);else if(tt&&(tt.isLoading()||!0===e.dynamic&&nt))requestAnimationFrame(Ft);else{zt("animatefinished",{pitch:Q.getPitch(),yaw:Q.getYaw(),hfov:Q.getHfov()}),Kt=!1,Dt=p;var i=e.autoRotateInactivityDelay-(Date.now()-F);i>0?At=setTimeout(function(){e.autoRotate=ct,Q.lookAt(x,p,pt,3e3),it()},i):e.autoRotateInactivityDelay>=0&&ct&&(e.autoRotate=ct,Q.lookAt(x,p,pt,3e3),it())}}function z(i,a,c,w){this.w=i,this.x=a,this.y=c,this.z=w}function ae(i){var a=function ce(i,a,c){var w=function O(i,a,c){var w=[a?a*Math.PI/180/2:0,c?c*Math.PI/180/2:0,i?i*Math.PI/180/2:0],M=[Math.cos(w[0]),Math.cos(w[1]),Math.cos(w[2])],I=[Math.sin(w[0]),Math.sin(w[1]),Math.sin(w[2])];return new z(M[0]*M[1]*M[2]-I[0]*I[1]*I[2],I[0]*M[1]*M[2]-M[0]*I[1]*I[2],M[0]*I[1]*M[2]+I[0]*M[1]*I[2],M[0]*M[1]*I[2]+I[0]*I[1]*M[2])}(i,a,c);w=w.multiply(new z(Math.sqrt(.5),-Math.sqrt(.5),0,0));var M=Ot.orientation?-Ot.orientation*Math.PI/180/2:0;return w.multiply(new z(Math.cos(M),0,-Math.sin(M),0))}(i.alpha,i.beta,i.gamma).toEulerAngles();"number"==typeof It&&It<10?It+=1:10===It?(jt=a[2]/Math.PI*180+e.yaw,It=!0,requestAnimationFrame(Ft)):(e.pitch=a[0]/Math.PI*180,e.roll=-a[1]/Math.PI*180,e.yaw=-a[2]/Math.PI*180+jt)}function ue(){if(e.sceneFadeDuration&&tt.fadeImg!==p){tt.fadeImg.style.opacity=0;var i=tt.fadeImg;delete tt.fadeImg,setTimeout(function(){Lt.removeChild(i),zt("scenechangefadedone")},e.sceneFadeDuration)}u.style.display=e.compass?"inline":"none",function de(){ee||(e.hotSpots?(e.hotSpots=e.hotSpots.sort(function(i,a){return i.pitch<a.pitch}),e.hotSpots.forEach(le)):e.hotSpots=[],ee=!0,se())}(),D.load.box.style.display="none",kt!==p&&(Lt.removeChild(kt),kt=p),X=!0,zt("load"),it()}function le(i){i.pitch=Number(i.pitch)||0,i.yaw=Number(i.yaw)||0;var a=y.createElement("div");a.className="pnlm-hotspot-base",a.className+=i.cssClass?" "+i.cssClass:" pnlm-hotspot pnlm-sprite pnlm-"+oe(i.type);var w,c=y.createElement("span");if(i.text&&(c.innerHTML=oe(i.text)),i.video){var M=y.createElement("video"),I=i.video;e.basePath&&!J(I)&&(I=e.basePath+I),M.src=ne(I),M.controls=!0,M.style.width=i.width+"px",Lt.appendChild(a),c.appendChild(M)}else if(i.image){var q=i.image;e.basePath&&!J(q)&&(q=e.basePath+q),(w=y.createElement("a")).href=ne(i.URL?i.URL:q,!0),w.target="_blank",c.appendChild(w);var Z=y.createElement("img");Z.src=ne(q),Z.style.width=i.width+"px",Z.style.paddingTop="5px",Lt.appendChild(a),w.appendChild(Z),c.style.maxWidth="initial"}else if(i.URL){if((w=y.createElement("a")).href=ne(i.URL,!0),i.attributes)for(var N in i.attributes)w.setAttribute(N,i.attributes[N]);else w.target="_blank";Lt.appendChild(w),a.className+=" pnlm-pointer",c.className+=" pnlm-pointer",w.appendChild(a)}else i.sceneId&&(a.onclick=a.ontouchend=function(){return a.clicked||(a.clicked=!0,$t(i.sceneId,i.targetPitch,i.targetYaw,i.targetHfov)),!1},a.className+=" pnlm-pointer",c.className+=" pnlm-pointer"),Lt.appendChild(a);i.createTooltipFunc?i.createTooltipFunc(a,i.createTooltipArgs):(i.text||i.video||i.image)&&(a.classList.add("pnlm-tooltip"),a.appendChild(c),c.style.width=c.scrollWidth-20+"px",c.style.marginLeft=-(c.scrollWidth-a.offsetWidth)/2+"px",c.style.marginTop=-c.scrollHeight-12+"px"),i.clickHandlerFunc&&(a.addEventListener("click",function($){i.clickHandlerFunc($,i.clickHandlerArgs)},"false"),a.className+=" pnlm-pointer",c.className+=" pnlm-pointer"),i.div=a}function re(i){var a=Math.sin(i.pitch*Math.PI/180),c=Math.cos(i.pitch*Math.PI/180),w=Math.sin(e.pitch*Math.PI/180),M=Math.cos(e.pitch*Math.PI/180),I=Math.cos((-i.yaw+e.yaw)*Math.PI/180),q=a*w+c*I*M;if(i.yaw<=90&&i.yaw>-90&&q<=0||(i.yaw>90||i.yaw<=-90)&&q<=0)i.div.style.visibility="hidden";else{var Z=Math.sin((-i.yaw+e.yaw)*Math.PI/180),N=Math.tan(e.hfov*Math.PI/360);i.div.style.visibility="visible";var $=tt.getCanvas(),Qt=$.clientWidth,Jt=$.clientHeight,bt=[-Qt/N*Z*c/q/2,-Qt/N*(a*M-c*I*w)/q/2],te=Math.sin(e.roll*Math.PI/180),ge=Math.cos(e.roll*Math.PI/180);(bt=[bt[0]*ge-bt[1]*te,bt[0]*te+bt[1]*ge])[0]+=(Qt-i.div.offsetWidth)/2,bt[1]+=(Jt-i.div.offsetHeight)/2;var he="translate("+bt[0]+"px, "+bt[1]+"px) translateZ(9999px) rotate("+e.roll+"deg)";i.scale&&(he+=" scale("+pt/e.hfov/q+")"),i.div.style.webkitTransform=he,i.div.style.MozTransform=he,i.div.style.transform=he}}function se(){e.hotSpots.forEach(re)}function _(i){e={};var a,c,w=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];for(a in xt=[],Ht)Ht.hasOwnProperty(a)&&(e[a]=Ht[a]);for(a in g.default)if(g.default.hasOwnProperty(a))if("strings"==a)for(c in g.default.strings)g.default.strings.hasOwnProperty(c)&&(e.strings[c]=oe(g.default.strings[c]));else e[a]=g.default[a],w.indexOf(a)>=0&&xt.push(a);if(null!==i&&""!==i&&g.scenes&&g.scenes[i]){var M=g.scenes[i];for(a in M)if(M.hasOwnProperty(a))if("strings"==a)for(c in M.strings)M.strings.hasOwnProperty(c)&&(e.strings[c]=oe(M.strings[c]));else e[a]=M[a],w.indexOf(a)>=0&&xt.push(a);e.scene=i}for(a in g)if(g.hasOwnProperty(a))if("strings"==a)for(c in g.strings)g.strings.hasOwnProperty(c)&&(e.strings[c]=oe(g.strings[c]));else e[a]=g[a],w.indexOf(a)>=0&&xt.push(a)}function E(i){if((i=i||!1)&&"preview"in e){var a=e.preview;e.basePath&&!J(a)&&(a=e.basePath+a),(kt=y.createElement("div")).className="pnlm-preview-img",kt.style.backgroundImage="url('"+function Ce(i){return ne(i).replace(/"/g,"%22").replace(/'/g,"%27")}(a)+"')",Lt.appendChild(kt)}var c=e.title,w=e.author;for(var M in i&&("previewTitle"in e&&(e.title=e.previewTitle),"previewAuthor"in e&&(e.author=e.previewAuthor)),e.hasOwnProperty("title")||(D.title.innerHTML=""),e.hasOwnProperty("author")||(D.author.innerHTML=""),!e.hasOwnProperty("title")&&!e.hasOwnProperty("author")&&(D.container.style.display="none"),U.load.innerHTML="<p>"+e.strings.loadButtonLabel+"</p>",D.load.boxp.innerHTML=e.strings.loadingLabel,e)if(e.hasOwnProperty(M))switch(M){case"title":D.title.innerHTML=oe(e[M]),D.container.style.display="inline";break;case"author":var I=oe(e[M]);if(e.authorURL){var q=y.createElement("a");q.href=ne(e.authorURL,!0),q.target="_blank",q.innerHTML=oe(e[M]),I=q.outerHTML}D.author.innerHTML=e.strings.bylineLabel.replace("%s",I),D.container.style.display="inline";break;case"fallback":var Z=y.createElement("a");Z.href=ne(e[M],!0),Z.target="_blank",Z.textContent="Click here to view this panorama in an alternative viewer.";var N=y.createElement("p");N.textContent="Your browser does not support WebGL.",N.appendChild(y.createElement("br")),N.appendChild(Z),D.errorMsg.innerHTML="",D.errorMsg.appendChild(N);break;case"hfov":r(Number(e[M]));break;case"autoLoad":!0===e[M]&&tt===p&&(D.load.box.style.display="inline",U.load.style.display="none",f());break;case"showZoomCtrl":U.zoom.style.display=e[M]&&0!=e.showControls?"block":"none";break;case"showFullscreenCtrl":U.fullscreen.style.display=e[M]&&0!=e.showControls&&("fullscreen"in y||"mozFullScreen"in y||"webkitIsFullScreen"in y||"msFullscreenElement"in y)?"block":"none";break;case"hotSpotDebug":qt.style.display=e[M]?"block":"none";break;case"showControls":e[M]||(U.orientation.style.display="none",U.zoom.style.display="none",U.fullscreen.style.display="none");break;case"orientationOnByDefault":e[M]&&fe()}i&&(c?e.title=c:delete e.title,w?e.author=w:delete e.author)}function s(){if(X&&!A)if(Yt)y.exitFullscreen?y.exitFullscreen():y.mozCancelFullScreen?y.mozCancelFullScreen():y.webkitCancelFullScreen?y.webkitCancelFullScreen():y.msExitFullscreen&&y.msExitFullscreen();else try{t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen()}catch{}}function d(i){y.fullscreenElement||y.fullscreen||y.mozFullScreen||y.webkitIsFullScreen||y.msFullscreenElement?(U.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),Yt=!0):(U.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),Yt=!1),"resize"!==i&&zt("fullscreenchange",Yt),tt.resize(),r(e.hfov),it()}function l(i){var a=e.minHfov;if("multires"==e.type&&tt&&!e.multiResMinHfov&&(a=Math.min(a,tt.getCanvas().width/(e.multiRes.cubeResolution/90*.9))),a>e.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),e.hfov;var c=e.hfov;if(c=i<a?a:i>e.maxHfov?e.maxHfov:i,e.avoidShowingBackground&&tt){var w=tt.getCanvas();c=Math.min(c,360*Math.atan(Math.tan((e.maxPitch-e.minPitch)/360*Math.PI)/w.height*w.width)/Math.PI)}return c}function r(i){e.hfov=l(i),zt("zoomchange",e.hfov)}function C(){b={},ct=e.autoRotate?e.autoRotate:ct,e.autoRotate=!1}function H(){(function Y(){A&&(D.load.box.style.display="none",D.errorMsg.style.display="none",A=!1,Lt.style.display="block",zt("errorcleared"))})(),X=!1,U.load.style.display="none",D.load.box.style.display="inline",f()}function $t(i,a,c,w,M){var I,q,Z,N;if(X||(M=!0),X=!1,b={},e.sceneFadeDuration&&!M){var $=tt.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{returnImage:!0});if($!==p)return(I=new Image).className="pnlm-fade-img",I.style.transition="opacity "+e.sceneFadeDuration/1e3+"s",I.style.width="100%",I.style.height="100%",I.onload=function(){$t(i,a,c,w,!0)},I.src=$,Lt.appendChild(I),void(tt.fadeImg=I)}q="same"===a?e.pitch:a,Z="same"===c?e.yaw:"sameAzimuth"===c?e.yaw+(e.northOffset||0)-(g.scenes[i].northOffset||0):c,N="same"===w?e.hfov:w,function pe(){var i=e.hotSpots;if(ee=!1,delete e.hotSpots,i)for(var a=0;a<i.length;a++){var c=i[a].div;if(c){for(;c.parentNode&&c.parentNode!=Lt;)c=c.parentNode;Lt.removeChild(c)}delete i[a].div}}(),_(i),R.yaw=R.pitch=R.hfov=0,E(),q!==p&&(e.pitch=q),Z!==p&&(e.yaw=Z),N!==p&&(e.hfov=N),zt("scenechange",i),H()}function me(){Ot.removeEventListener("deviceorientation",ae),U.orientation.classList.remove("pnlm-orientation-button-active"),It=!1}function fe(){"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(i){"granted"==i&&(It=1,Ot.addEventListener("deviceorientation",ae),U.orientation.classList.add("pnlm-orientation-button-active"))}):(It=1,Ot.addEventListener("deviceorientation",ae),U.orientation.classList.add("pnlm-orientation-button-active"))}function oe(i){return g.escapeHTML?String(i).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(i).split("\n").join("<br>")}function ne(i,a){try{var c=decodeURIComponent(function ve(i){return i.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(a,c){return"colon"===(c=c.toLowerCase())?":":"#"===c.charAt(0)?"x"===c.charAt(1)?String.fromCharCode(parseInt(c.substring(2),16)):String.fromCharCode(+c.substring(1)):""})}(i)).replace(/[^\w:]/g,"").toLowerCase()}catch{return"about:blank"}return 0===c.indexOf("javascript:")||0===c.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):a&&0===c.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):i}function zt(i){if(i in et)for(var a=et[i].length;a>0;a--)et[i][et[i].length-a].apply(null,[].slice.call(arguments,1))}z.prototype.multiply=function(i){return new z(this.w*i.w-this.x*i.x-this.y*i.y-this.z*i.z,this.x*i.w+this.w*i.x+this.y*i.z-this.z*i.y,this.y*i.w+this.w*i.y+this.z*i.x-this.x*i.z,this.z*i.w+this.w*i.z+this.x*i.y-this.y*i.x)},z.prototype.toEulerAngles=function(){return[Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Math.asin(2*(this.w*this.y-this.z*this.x)),Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z))]},this.isLoaded=function(){return Boolean(X)},this.getPitch=function(){return e.pitch},this.setPitch=function(i,a,c,w){return F=Date.now(),Math.abs(i-e.pitch)<=Wt?("function"==typeof c&&c(w),this):((a=a==p?1e3:Number(a))?(b.pitch={startTime:Date.now(),startPosition:e.pitch,endPosition:i,duration:a},"function"==typeof c&&setTimeout(function(){c(w)},a)):e.pitch=i,it(),this)},this.getPitchBounds=function(){return[e.minPitch,e.maxPitch]},this.setPitchBounds=function(i){return e.minPitch=Math.max(-90,Math.min(i[0],90)),e.maxPitch=Math.max(-90,Math.min(i[1],90)),this},this.getYaw=function(){return(e.yaw+540)%360-180},this.setYaw=function(i,a,c,w){return F=Date.now(),Math.abs(i-e.yaw)<=Wt?("function"==typeof c&&c(w),this):(i=(i+180)%360-180,(a=a==p?1e3:Number(a))?(e.yaw-i>180?i+=360:i-e.yaw>180&&(i-=360),b.yaw={startTime:Date.now(),startPosition:e.yaw,endPosition:i,duration:a},"function"==typeof c&&setTimeout(function(){c(w)},a)):e.yaw=i,it(),this)},this.getYawBounds=function(){return[e.minYaw,e.maxYaw]},this.setYawBounds=function(i){return e.minYaw=Math.max(-360,Math.min(i[0],360)),e.maxYaw=Math.max(-360,Math.min(i[1],360)),this},this.getHfov=function(){return e.hfov},this.setHfov=function(i,a,c,w){return F=Date.now(),Math.abs(i-e.hfov)<=Wt?("function"==typeof c&&c(w),this):((a=a==p?1e3:Number(a))?(b.hfov={startTime:Date.now(),startPosition:e.hfov,endPosition:l(i),duration:a},"function"==typeof c&&setTimeout(function(){c(w)},a)):r(i),it(),this)},this.getHfovBounds=function(){return[e.minHfov,e.maxHfov]},this.setHfovBounds=function(i){return e.minHfov=Math.max(0,i[0]),e.maxHfov=Math.max(0,i[1]),this},this.lookAt=function(i,a,c,w,M,I){return w=w==p?1e3:Number(w),i!==p&&Math.abs(i-e.pitch)>Wt&&(this.setPitch(i,w,M,I),M=p),a!==p&&Math.abs(a-e.yaw)>Wt&&(this.setYaw(a,w,M,I),M=p),c!==p&&Math.abs(c-e.hfov)>Wt&&(this.setHfov(c,w,M,I),M=p),"function"==typeof M&&M(I),this},this.getNorthOffset=function(){return e.northOffset},this.setNorthOffset=function(i){return e.northOffset=Math.min(360,Math.max(0,i)),it(),this},this.getHorizonRoll=function(){return e.horizonRoll},this.setHorizonRoll=function(i){return e.horizonRoll=Math.min(90,Math.max(-90,i)),tt.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),it(),this},this.getHorizonPitch=function(){return e.horizonPitch},this.setHorizonPitch=function(i){return e.horizonPitch=Math.min(90,Math.max(-90,i)),tt.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),it(),this},this.startAutoRotate=function(i,a){return a=a===p?x:a,e.autoRotate=i=i||ct||1,Q.lookAt(a,p,pt,3e3),it(),this},this.stopAutoRotate=function(){return ct=e.autoRotate?e.autoRotate:ct,e.autoRotate=!1,e.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){C(),R={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return tt},this.setUpdate=function(i){return nt=!0===i,tt===p?S():it(),this},this.mouseEventToCoords=function(i){return rt(i)},this.loadScene=function(i,a,c,w){return!1!==X&&$t(i,a,c,w),this},this.getScene=function(){return e.scene},this.addScene=function(i,a){return g.scenes[i]=a,this},this.removeScene=function(i){return!(e.scene===i||!g.scenes.hasOwnProperty(i)||(delete g.scenes[i],0))},this.toggleFullscreen=function(){return s(),this},this.getConfig=function(){return e},this.getContainer=function(){return t},this.addHotSpot=function(i,a){if(a===p&&e.scene===p)e.hotSpots.push(i);else{var c=a!==p?a:e.scene;if(!g.scenes.hasOwnProperty(c))throw"Invalid scene ID!";g.scenes[c].hasOwnProperty("hotSpots")||(g.scenes[c].hotSpots=[],c==e.scene&&(e.hotSpots=g.scenes[c].hotSpots)),g.scenes[c].hotSpots.push(i)}return(a===p||e.scene==a)&&(le(i),X&&re(i)),this},this.removeHotSpot=function(i,a){if(a===p||e.scene==a){if(!e.hotSpots)return!1;for(var c=0;c<e.hotSpots.length;c++)if(e.hotSpots[c].hasOwnProperty("id")&&e.hotSpots[c].id===i){for(var w=e.hotSpots[c].div;w.parentNode!=Lt;)w=w.parentNode;return Lt.removeChild(w),delete e.hotSpots[c].div,e.hotSpots.splice(c,1),!0}}else{if(!g.scenes.hasOwnProperty(a))return!1;if(!g.scenes[a].hasOwnProperty("hotSpots"))return!1;for(var M=0;M<g.scenes[a].hotSpots.length;M++)if(g.scenes[a].hotSpots[M].hasOwnProperty("id")&&g.scenes[a].hotSpots[M].id===i)return g.scenes[a].hotSpots.splice(M,1),!0}},this.resize=function(){tt&&P()},this.isLoaded=function(){return X},this.isOrientationSupported=function(){return Xt||!1},this.stopOrientation=function(){me()},this.startOrientation=function(){Xt&&fe()},this.isOrientationActive=function(){return Boolean(It)},this.on=function(i,a){return et[i]=et[i]||[],et[i].push(a),this},this.off=function(i,a){if(!i)return et={},this;if(a){var c=et[i].indexOf(a);c>=0&&et[i].splice(c,1),0==et[i].length&&delete et[i]}else delete et[i];return this},this.destroy=function(){ie=!0,clearTimeout(At),tt&&tt.destroy(),Vt&&(y.removeEventListener("mousemove",Nt,!1),y.removeEventListener("mouseup",Bt,!1),t.removeEventListener("mozfullscreenchange",d,!1),t.removeEventListener("webkitfullscreenchange",d,!1),t.removeEventListener("msfullscreenchange",d,!1),t.removeEventListener("fullscreenchange",d,!1),Ot.removeEventListener("resize",P,!1),Ot.removeEventListener("orientationchange",P,!1),t.removeEventListener("keydown",Rt,!1),t.removeEventListener("keyup",ot,!1),t.removeEventListener("blur",Tt,!1),y.removeEventListener("mouseleave",Bt,!1)),t.innerHTML="",t.classList.remove("pnlm-container")}}return{viewer:function(t,g){return new T(t,g)}}}(window,document)},81447:(Ot,y,p)=>{"use strict";p.d(y,{t:()=>t});var T=p(86889);class t{constructor(){(0,T.Z)(this,"lat",void 0),(0,T.Z)(this,"lon",void 0)}}},87753:(Ot,y,p)=>{"use strict";p.d(y,{H:()=>se});var T=p(86889),t=p(64537),g=p(80418),Q=p(34511),F=(p(56239),p(52633),p(60656)),v=p(32607),n=p(94032),B=p(56707),lt=p(88692),j=p(20092),L=p(1379),Yt=p(9638),X=p(88659),A=p(83331),st=p(39665),Vt=p(18033),Ct=p(56558),Dt=p(2940),R=p(99482),Kt=p(75738),It=p(81418);const jt=["container"];function At(_,E){if(1&_&&(t.TgZ(0,"table",6)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&_){const s=t.oxw();t.xp6(12),t.Oqu(s.postionView.viewerGetYaw),t.xp6(2),t.Oqu(s.postionView.viewerGetPitch),t.xp6(2),t.Oqu(s.postionView.clickGetYaw),t.xp6(2),t.Oqu(s.postionView.clickGetPitch)}}function ct(_,E){if(1&_){const s=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(s);const o=t.oxw();return t.KtG(o.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&_&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function pt(_,E){if(1&_){const s=t.EpF();t.TgZ(0,"mat-icon",49),t.NdJ("click",function(){t.CHM(s);const o=t.oxw(2);return t.KtG(o.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function x(_,E){if(1&_){const s=t.EpF();t.TgZ(0,"mat-icon",49),t.NdJ("click",function(){t.CHM(s);const o=t.oxw(2);return t.KtG(o.dataDetailModel.description="")}),t._uU(1,"close"),t.qZA()}}function b(_,E){if(1&_){const s=t.EpF();t.TgZ(0,"mat-icon",50),t.NdJ("click",function(){t.CHM(s);const o=t.oxw(2);return t.KtG(o.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function et(_,E){if(1&_&&(t._UZ(0,"img",51),t.ALo(1,"cmsthumbnail")),2&_){const s=t.oxw(2);t.s9C("src",t.lcZ(1,1,s.dataDetailModel.panorama),t.LSH)}}function xt(_,E){if(1&_){const s=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){t.CHM(s);const o=t.oxw(2);return t.KtG(o.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&_&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function nt(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function Wt(_,E){if(1&_&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&_){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.sceneId||"N/A"," ")}}function ee(_,E){if(1&_){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",55),t.NdJ("ngModelChange",function(o){t.CHM(s);const h=t.oxw().$implicit;return t.KtG(h.sceneId=o)}),t.qZA()(),t.BQk()}if(2&_){const s=t.oxw().$implicit,d=t.oxw(2);t.xp6(2),t.Q6J("disabled",d.editdisabled)("ngModel",s.sceneId)}}function ie(_,E){if(1&_&&(t.TgZ(0,"mat-cell"),t.YNc(1,Wt,3,1,"ng-container",52),t.YNc(2,ee,3,2,"ng-container",52),t.qZA()),2&_){const s=E.$implicit,d=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!d.editHotspot.guid||!s.guid||s.guid!==d.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",d.editHotspot.guid&&s.guid&&s.guid===d.editHotspot.guid)}}function Ht(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function Mt(_,E){if(1&_&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&_){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.pitch||"N/A"," ")}}function Lt(_,E){if(1&_){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",56),t.NdJ("ngModelChange",function(o){t.CHM(s);const h=t.oxw().$implicit;return t.KtG(h.pitch=o)}),t.qZA()(),t.BQk()}if(2&_){const s=t.oxw().$implicit,d=t.oxw(2);t.xp6(2),t.Q6J("disabled",d.editdisabled)("ngModel",s.pitch)}}function St(_,E){if(1&_&&(t.TgZ(0,"mat-cell"),t.YNc(1,Mt,3,1,"ng-container",52),t.YNc(2,Lt,3,2,"ng-container",52),t.qZA()),2&_){const s=E.$implicit,d=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!d.editHotspot.guid||!s.guid||s.guid!==d.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",d.editHotspot.guid&&s.guid&&s.guid===d.editHotspot.guid)}}function Gt(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function D(_,E){if(1&_&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&_){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.yaw||"N/A"," ")}}function qt(_,E){if(1&_){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",58),t.NdJ("ngModelChange",function(o){t.CHM(s);const h=t.oxw().$implicit;return t.KtG(h.yaw=o)}),t.qZA()(),t.BQk()}if(2&_){const s=t.oxw().$implicit,d=t.oxw(2);t.xp6(2),t.Q6J("disabled",d.editdisabled)("ngModel",s.yaw)}}function U(_,E){if(1&_&&(t.TgZ(0,"mat-cell"),t.YNc(1,D,3,1,"ng-container",52),t.YNc(2,qt,3,2,"ng-container",52),t.qZA()),2&_){const s=E.$implicit,d=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!d.editHotspot.guid||!s.guid||s.guid!==d.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",d.editHotspot.guid&&s.guid&&s.guid===d.editHotspot.guid)}}function Xt(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function u(_,E){if(1&_&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&_){const s=t.oxw().$implicit;t.xp6(2),t.Oqu(s.type)}}function f(_,E){if(1&_){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"mat-select",59),t.NdJ("ngModelChange",function(o){t.CHM(s);const h=t.oxw().$implicit;return t.KtG(h.type=o)}),t.TgZ(3,"mat-option",60),t._uU(4,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&_){const s=t.oxw().$implicit,d=t.oxw(2);t.xp6(2),t.Q6J("disabled",d.editdisabled)("ngModel",s.type),t.xp6(1),t.Q6J("value","info")}}function J(_,E){if(1&_&&(t.TgZ(0,"mat-cell"),t.YNc(1,u,3,1,"ng-container",52),t.YNc(2,f,5,3,"ng-container",52),t.qZA()),2&_){const s=E.$implicit,d=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!d.editHotspot.guid||!s.guid||s.guid!==d.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",d.editHotspot.guid&&s.guid&&s.guid===d.editHotspot.guid)}}function S(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function K(_,E){if(1&_&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&_){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.targetYaw||"N/A"," ")}}function m(_,E){if(1&_){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",61),t.NdJ("ngModelChange",function(o){t.CHM(s);const h=t.oxw().$implicit;return t.KtG(h.targetYaw=o)}),t.qZA()(),t.BQk()}if(2&_){const s=t.oxw().$implicit,d=t.oxw(2);t.xp6(2),t.Q6J("disabled",d.editdisabled)("ngModel",s.targetYaw)}}function Y(_,E){if(1&_&&(t.TgZ(0,"mat-cell"),t.YNc(1,K,3,1,"ng-container",52),t.YNc(2,m,3,2,"ng-container",52),t.qZA()),2&_){const s=E.$implicit,d=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!d.editHotspot.guid||!s.guid||s.guid!==d.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",d.editHotspot.guid&&s.guid&&s.guid===d.editHotspot.guid)}}function k(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function W(_,E){if(1&_&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&_){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.targetPitch||"N/A"," ")}}function G(_,E){if(1&_){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",62),t.NdJ("ngModelChange",function(o){t.CHM(s);const h=t.oxw().$implicit;return t.KtG(h.targetPitch=o)}),t.qZA()(),t.BQk()}if(2&_){const s=t.oxw().$implicit,d=t.oxw(2);t.xp6(2),t.Q6J("disabled",d.editdisabled)("ngModel",s.targetPitch)}}function Zt(_,E){if(1&_&&(t.TgZ(0,"mat-cell"),t.YNc(1,W,3,1,"ng-container",52),t.YNc(2,G,3,2,"ng-container",52),t.qZA()),2&_){const s=E.$implicit,d=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!d.editHotspot.guid||!s.guid||s.guid!==d.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",d.editHotspot.guid&&s.guid&&s.guid===d.editHotspot.guid)}}function rt(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function Nt(_,E){if(1&_&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&_){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.text||"N/A"," ")}}function Bt(_,E){if(1&_){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",63),t.NdJ("ngModelChange",function(o){t.CHM(s);const h=t.oxw().$implicit;return t.KtG(h.text=o)}),t.qZA()(),t.BQk()}if(2&_){const s=t.oxw().$implicit,d=t.oxw(2);t.xp6(2),t.Q6J("disabled",d.editdisabled)("ngModel",s.text)}}function Ut(_,E){if(1&_&&(t.TgZ(0,"mat-cell"),t.YNc(1,Nt,3,1,"ng-container",52),t.YNc(2,Bt,3,2,"ng-container",52),t.qZA()),2&_){const s=E.$implicit,d=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!d.editHotspot.guid||!s.guid||s.guid!==d.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",d.editHotspot.guid&&s.guid&&s.guid===d.editHotspot.guid)}}function yt(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function ut(_,E){if(1&_&&(t.ynx(0),t.TgZ(1,"p",64),t._uU(2),t.qZA(),t.BQk()),2&_){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.url||"N/A"," ")}}function mt(_,E){if(1&_){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",65),t.NdJ("ngModelChange",function(o){t.CHM(s);const h=t.oxw().$implicit;return t.KtG(h.url=o)}),t.qZA()(),t.BQk()}if(2&_){const s=t.oxw().$implicit,d=t.oxw(2);t.xp6(2),t.Q6J("disabled",d.editdisabled)("ngModel",s.url)}}function ft(_,E){if(1&_&&(t.TgZ(0,"mat-cell"),t.YNc(1,ut,3,1,"ng-container",52),t.YNc(2,mt,3,2,"ng-container",52),t.qZA()),2&_){const s=E.$implicit,d=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!d.editHotspot.guid||!s.guid||s.guid!==d.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",d.editHotspot.guid&&s.guid&&s.guid===d.editHotspot.guid)}}function wt(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function dt(_,E){if(1&_){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",67),t.NdJ("click",function(){t.CHM(s);const o=t.oxw().$implicit,h=t.oxw(2);return t.KtG(h.editROw(o))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",67),t.NdJ("click",function(){t.CHM(s);const o=t.oxw().$implicit,h=t.oxw(2);return t.KtG(h.removeROw(o))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function at(_,E){if(1&_){const s=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(s);const o=t.oxw(4);return t.KtG(o.onActionPannellumClickLastPoint())}),t._uU(1,"\u062b\u0628\u062a \u0646\u0642\u0637\u0647"),t.qZA()}if(2&_){const s=t.oxw(4);t.Q6J("disabled",s.editdisabled)}}function Pt(_,E){if(1&_){const s=t.EpF();t.ynx(0),t.TgZ(1,"button",68),t.NdJ("click",function(){t.CHM(s);const o=t.oxw(3);return t.KtG(o.updateEdit())}),t._uU(2,"Update"),t.qZA(),t.TgZ(3,"button",69),t.NdJ("click",function(){t.CHM(s);const o=t.oxw(3);return t.KtG(o.cancelEdit())}),t._uU(4,"Cancel"),t.qZA(),t.YNc(5,at,2,1,"button",70),t.BQk()}if(2&_){const s=t.oxw(3);t.xp6(1),t.Q6J("disabled",s.editdisabled),t.xp6(2),t.Q6J("disabled",s.editdisabled),t.xp6(2),t.Q6J("ngIf",s.postionView)}}function Rt(_,E){if(1&_&&(t.TgZ(0,"mat-cell")(1,"span",66),t.YNc(2,dt,5,0,"ng-container",52),t.YNc(3,Pt,6,3,"ng-container",52),t.qZA()()),2&_){const s=E.$implicit,d=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!d.editHotspot.guid||!s.guid||s.guid!==d.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",d.editHotspot.guid&&s.guid&&s.guid===d.editHotspot.guid)}}function Tt(_,E){1&_&&t._UZ(0,"mat-header-row")}function ot(_,E){1&_&&t._UZ(0,"mat-row")}function _t(_,E){if(1&_){const s=t.EpF();t.TgZ(0,"mat-icon",49),t.NdJ("click",function(){t.CHM(s);const o=t.oxw(2);return t.KtG(o.dataDetailModel.configDataJson="")}),t._uU(1,"close"),t.qZA()}}function Et(_,E){if(1&_){const s=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"mat-form-field",10)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",11,12),t.NdJ("ngModelChange",function(o){t.CHM(s);const h=t.oxw();return t.KtG(h.dataDetailModel.title=o)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,pt,2,0,"mat-icon",13),t.TgZ(10,"mat-icon",14),t._uU(11,"mode_edit"),t.qZA()(),t.TgZ(12,"mat-form-field",10)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",15,16),t.NdJ("ngModelChange",function(o){t.CHM(s);const h=t.oxw();return t.KtG(h.dataDetailModel.description=o)}),t.ALo(18,"translate"),t.qZA(),t.YNc(19,x,2,0,"mat-icon",13),t.TgZ(20,"mat-icon",14),t._uU(21,"mode_edit"),t.qZA()(),t.TgZ(22,"mat-form-field",17)(23,"input",18,19),t.NdJ("ngModelChange",function(o){t.CHM(s);const h=t.oxw();return t.KtG(h.dataDetailModel.linkFileId=o)})("click",function(){t.CHM(s);const o=t.oxw();return t.KtG(o.fileManagerOpenFormReport=!0)}),t.ALo(25,"translate"),t.qZA(),t.YNc(26,b,2,0,"mat-icon",20),t.TgZ(27,"mat-icon",21),t.NdJ("click",function(){t.CHM(s);const o=t.oxw();return t.KtG(o.fileManagerOpenFormReport=!0)}),t._uU(28,"mode_edit"),t.qZA()(),t.TgZ(29,"cms-file-manager",22),t.NdJ("itemSelected",function(o){t.CHM(s);const h=t.oxw();return t.KtG(h.onActionFileSelect(o))})("openFormChange",function(o){t.CHM(s);const h=t.oxw();return t.KtG(h.fileManagerOpenFormReport=o)}),t.qZA(),t.TgZ(30,"a",23),t.ALo(31,"cmsthumbnail"),t.YNc(32,et,2,3,"img",24),t.qZA(),t._UZ(33,"hr"),t.TgZ(34,"h5"),t._uU(35,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u062a\u0648\u0631"),t.qZA(),t.TgZ(36,"p"),t._uU(37,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(38,"div",25)(39,"div",26),t.YNc(40,xt,3,3,"button",27),t.qZA(),t.TgZ(41,"mat-table",28,29),t.ynx(43,30),t.YNc(44,nt,2,0,"mat-header-cell",31),t.YNc(45,ie,3,2,"mat-cell",32),t.BQk(),t.ynx(46,33),t.YNc(47,Ht,2,0,"mat-header-cell",31),t.YNc(48,St,3,2,"mat-cell",32),t.BQk(),t.ynx(49,34),t.YNc(50,Gt,2,0,"mat-header-cell",31),t.YNc(51,U,3,2,"mat-cell",32),t.BQk(),t.ynx(52,35),t.YNc(53,Xt,2,0,"mat-header-cell",31),t.YNc(54,J,3,2,"mat-cell",32),t.BQk(),t.ynx(55,36),t.YNc(56,S,2,0,"mat-header-cell",31),t.YNc(57,Y,3,2,"mat-cell",32),t.BQk(),t.ynx(58,37),t.YNc(59,k,2,0,"mat-header-cell",31),t.YNc(60,Zt,3,2,"mat-cell",32),t.BQk(),t.ynx(61,38),t.YNc(62,rt,2,0,"mat-header-cell",31),t.YNc(63,Ut,3,2,"mat-cell",32),t.BQk(),t.ynx(64,39),t.YNc(65,yt,2,0,"mat-header-cell",31),t.YNc(66,ft,3,2,"mat-cell",32),t.BQk(),t.ynx(67,40),t.YNc(68,wt,2,0,"mat-header-cell",31),t.YNc(69,Rt,4,2,"mat-cell",32),t.BQk(),t.YNc(70,Tt,1,0,"mat-header-row",41),t.YNc(71,ot,1,0,"mat-row",42),t.qZA()(),t.TgZ(72,"mat-form-field",43)(73,"mat-label"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"input",44,16),t.NdJ("ngModelChange",function(o){t.CHM(s);const h=t.oxw();return t.KtG(h.dataDetailModel.configDataJson=o)}),t.ALo(78,"translate"),t.qZA(),t.YNc(79,_t,2,0,"mat-icon",13),t.TgZ(80,"mat-icon",14),t._uU(81,"mode_edit"),t.qZA()(),t.TgZ(82,"div",26)(83,"button",45),t.NdJ("click",function(){t.CHM(s);const o=t.oxw();return t.KtG(o.onActionSubmitView360())}),t._UZ(84,"i",46),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.TgZ(87,"button",47),t.NdJ("click",function(){t.CHM(s);const o=t.oxw();return t.KtG(o.onActionCancellView360())}),t._UZ(88,"i",48),t._uU(89),t.ALo(90,"translate"),t.qZA()(),t._UZ(91,"br"),t.qZA()()}if(2&_){const s=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,32,"TITLE.Photography_Place")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,34,"TITLE.Photography_Place")),t.Q6J("ngModel",s.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",s.dataDetailModel.title),t.xp6(5),t.Oqu(t.lcZ(15,36,"TITLE.DESCRIPTION")),t.xp6(2),t.s9C("placeholder",t.lcZ(18,38,"TITLE.DESCRIPTION")),t.Q6J("ngModel",s.dataDetailModel.description),t.xp6(3),t.Q6J("ngIf",s.dataDetailModel.description),t.xp6(4),t.s9C("placeholder",t.lcZ(25,40,"TITLE.View_360_File_ID")),t.Q6J("ngModel",s.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",s.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",s.appLanguage)("isPopup",!0)("openForm",s.fileManagerOpenFormReport)("tree",s.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",s.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(31,42,s.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==s.dataDetailModel||null==s.dataDetailModel.panorama?null:s.dataDetailModel.panorama.length)>0),t.xp6(8),t.Q6J("ngIf",s.postionView),t.xp6(1),t.Q6J("dataSource",s.tableHotSpotdataSource),t.xp6(29),t.Q6J("matHeaderRowDef",s.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",s.tableHotspotDisplayedColumns),t.xp6(3),t.Oqu(t.lcZ(75,44,"TITLE.configDataJson")),t.xp6(2),t.s9C("placeholder",t.lcZ(78,46,"TITLE.configDataJson")),t.Q6J("ngModel",s.dataDetailModel.configDataJson),t.xp6(3),t.Q6J("ngIf",s.dataDetailModel.configDataJson),t.xp6(6),t.hij(" ",t.lcZ(86,48,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(90,50,"ACTION.CANCEL")," ")}}function gt(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&_&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function ht(_,E){if(1&_&&t._UZ(0,"img",51),2&_){const s=t.oxw(2).$implicit;t.s9C("src",s.panorama,t.LSH)}}function P(_,E){if(1&_&&(t.ynx(0),t.TgZ(1,"a",23),t.YNc(2,ht,1,1,"img",24),t.qZA(),t.BQk()),2&_){const s=t.oxw().$implicit;t.xp6(1),t.s9C("href",s.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==s||null==s.panorama?null:s.panorama.length)>0)}}function it(_,E){if(1&_&&(t.TgZ(0,"mat-cell"),t.YNc(1,P,3,2,"ng-container",52),t.qZA()),2&_){const s=E.$implicit;t.xp6(1),t.Q6J("ngIf",s.panorama)}}function Ft(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&_&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function V(_,E){if(1&_&&(t.ynx(0),t._uU(1),t.BQk()),2&_){const s=t.oxw().$implicit;t.xp6(1),t.hij(" ",s.title," ")}}function z(_,E){if(1&_&&(t.TgZ(0,"mat-cell"),t.YNc(1,V,2,1,"ng-container",52),t.qZA()),2&_){const s=E.$implicit;t.xp6(1),t.Q6J("ngIf",s.title)}}function O(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&_&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.DESCRIPTION")," "))}function ce(_,E){if(1&_&&(t.ynx(0),t._uU(1),t.BQk()),2&_){const s=t.oxw().$implicit;t.xp6(1),t.hij(" ",s.description," ")}}function ae(_,E){if(1&_&&(t.TgZ(0,"mat-cell"),t.YNc(1,ce,2,1,"ng-container",52),t.qZA()),2&_){const s=E.$implicit;t.xp6(1),t.Q6J("ngIf",s.description)}}function _e(_,E){1&_&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&_&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function ue(_,E){if(1&_){const s=t.EpF();t.TgZ(0,"mat-cell",78)(1,"small")(2,"mat-icon",79),t.NdJ("click",function(){const h=t.CHM(s).renderIndex,l=t.oxw(2);return t.KtG(l.onActionOptionEditView360(h))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",80),t.NdJ("click",function(){const h=t.CHM(s).renderIndex,l=t.oxw(2);return t.KtG(l.onActionOptionRemoveView360(h))}),t._uU(7,"delete"),t.qZA()()()}}function le(_,E){1&_&&t._UZ(0,"mat-header-row")}function de(_,E){1&_&&t._UZ(0,"mat-row")}function pe(_,E){if(1&_&&(t.TgZ(0,"div",8)(1,"mat-table",72),t.ynx(2,73),t.YNc(3,gt,3,3,"mat-header-cell",31),t.YNc(4,it,2,1,"mat-cell",32),t.BQk(),t.ynx(5,74),t.YNc(6,Ft,3,3,"mat-header-cell",31),t.YNc(7,z,2,1,"mat-cell",32),t.BQk(),t.ynx(8,75),t.YNc(9,O,3,3,"mat-header-cell",31),t.YNc(10,ae,2,1,"mat-cell",32),t.BQk(),t.ynx(11,40),t.YNc(12,_e,4,6,"mat-header-cell",31),t.YNc(13,ue,8,0,"mat-cell",76),t.BQk(),t.YNc(14,le,1,0,"mat-header-row",77),t.YNc(15,de,1,0,"mat-row",42),t.qZA()()),2&_){const s=t.oxw();t.xp6(1),t.Q6J("dataSource",s.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",s.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.tabledisplayedColumns)}}class re{constructor(){(0,T.Z)(this,"viewerGetYaw",void 0),(0,T.Z)(this,"viewerGetPitch",void 0),(0,T.Z)(this,"clickGetYaw",void 0),(0,T.Z)(this,"clickGetPitch",void 0)}}let se=(()=>{var _;class E{constructor(d,o,h){(0,T.Z)(this,"cmsToastrService",void 0),(0,T.Z)(this,"publicHelper",void 0),(0,T.Z)(this,"translate",void 0),(0,T.Z)(this,"id",++E.nextId),(0,T.Z)(this,"privateDataModel",[]),(0,T.Z)(this,"dataDetailModel",new Q.zK_),(0,T.Z)(this,"dataModelChange",new t.vpe),(0,T.Z)(this,"formInfo",new Q.LEF),(0,T.Z)(this,"loading",new F.O),(0,T.Z)(this,"loadingOption",new F.O),(0,T.Z)(this,"tabledataSource",new g.by),(0,T.Z)(this,"tableHotSpotdataSource",new g.by),(0,T.Z)(this,"tabledisplayedColumns",["panorama","Title","Description","Action"]),(0,T.Z)(this,"tableHotspotDisplayedColumns",["sceneId","type","text","url","pitch","yaw","Action"]),(0,T.Z)(this,"selectFileTypeReport",["jpeg","jpg"]),(0,T.Z)(this,"fileManagerTree",void 0),(0,T.Z)(this,"appLanguage","fa"),(0,T.Z)(this,"showAddView360",!1),(0,T.Z)(this,"fileManagerOpenFormReport",!1),(0,T.Z)(this,"container",void 0),(0,T.Z)(this,"viewer",void 0),(0,T.Z)(this,"options",void 0),(0,T.Z)(this,"postionView",void 0),(0,T.Z)(this,"selectIndex",-1),(0,T.Z)(this,"editHotspot",void 0),(0,T.Z)(this,"oldHotspot",void 0),(0,T.Z)(this,"editdisabled",void 0),this.cmsToastrService=d,this.publicHelper=o,this.translate=h,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}set dataModel(d){d||(d=[]),this.privateDataModel=d,this.privateDataModel.forEach(o=>{o.hotSpots||(o.hotSpots=[]),o.hotSpots.forEach(h=>{h.guid=this.getGuid()})}),this.tabledataSource.data=this.privateDataModel,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Edit")}ngAfterViewInit(){this.container.nativeElement.style.display="none"}getGuid(){return Math.floor(1e3*Math.random())+""}actionPannellumImageLoad(d,o){const h={type:"equirectangular",panorama:d,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};o&&o.length>0&&(h.hotSpots=o);const l=Object.assign({},h,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,l),this.container.nativeElement.style.display="block"}actionPrivateDataModelOptimaze(){const d=[];this.privateDataModel||(this.privateDataModel=[]),this.privateDataModel.forEach(o=>{o.hotSpots||(o.hotSpots=[]),o.hotSpots.forEach(h=>{h.type&&h.type.length>0&&d.push(h)}),o.hotSpots=d})}onActionPannellumClick(d){if(!this.viewer)return;this.postionView=new re,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const o=this.viewer.mouseEventToCoords(d);!o||0==o.length||(this.postionView.clickGetYaw=o[1],this.postionView.clickGetPitch=o[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(d){d&&d.id&&0!==d.id?(this.dataDetailModel.linkFileId=d.id,this.dataDetailModel.panorama=d.downloadLinksrc,this.dataDetailModel.preview=d.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.privateDataModel||(this.privateDataModel=[]),this.selectIndex>=0?this.privateDataModel[this.selectIndex]=this.dataDetailModel:this.privateDataModel.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new Q.zK_,this.showAddView360=!this.showAddView360}onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new Q.zK_),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new Q.aCC;const d=new Q.aCC;d.type="info",d.guid=this.getGuid(),this.dataDetailModel.hotSpots.push(d),this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots,this.editROw(d),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(d){d<0||!this.privateDataModel||0===this.privateDataModel.length||(this.privateDataModel.splice(d,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}onActionOptionEditView360(d){d<0||!this.privateDataModel||0===this.privateDataModel.length||(this.dataDetailModel=this.privateDataModel[d],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new Q.aCC,this.editHotspot=new Q.aCC,this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots,this.selectIndex=d,this.showAddView360=!this.showAddView360)}editROw(d){this.editHotspot=d&&d.guid?d:new Q.aCC,this.oldHotspot={...this.editHotspot}}removeROw(d){const o=this.dataDetailModel.hotSpots.findIndex(h=>h.guid==d.guid);o>=0&&(this.dataDetailModel.hotSpots.splice(o,1),this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots)}updateEdit(){this.editdisabled=!0;const d=this.dataDetailModel.hotSpots.findIndex(o=>o.guid==this.oldHotspot.guid);d>=0&&(this.dataDetailModel.hotSpots[d]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new Q.aCC,this.editHotspot=new Q.aCC}cancelEdit(){this.editHotspot=new Q.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots)}}return _=E,(0,T.Z)(E,"nextId",0),(0,T.Z)(E,"\u0275fac",function(d){return new(d||_)(t.Y36(v.e),t.Y36(n.i),t.Y36(B.sK))}),(0,T.Z)(E,"\u0275cmp",t.Xpm({type:_,selectors:[["app-cms-360-image-list"]],viewQuery:function(d,o){if(1&d&&t.Gf(jt,5),2&d){let h;t.iGM(h=t.CRH())&&(o.container=h.first)}},inputs:{dataModel:"dataModel"},outputs:{dataModelChange:"dataModelChange"},decls:8,vars:6,consts:[[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","grid-row-ltr-center",4,"ngIf"],["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px 0px;",3,"click",4,"ngIf"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],[1,"grid-row-ltr-center"],["type","button","mat-button","",1,"btn","btn-primary","font-size-h6","px-3","py-2",2,"margin","10px 0px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"ntk-full-width","mb-1"],["matInput","","name","dataDetailModel.title","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["matInput","","name","dataDetailModel.description","type","text","minlength","3","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Description",""],[1,"ntk-full-width"],["matInput","","name","dataDetailModel.linkFileId","type","text",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","sceneId"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","type"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"ntk-full-width","mb-1",2,"visibility","hidden"],["matInput","","name","dataDetailModel.configDataJson","type","text","minlength","0","maxlength","10000","required","",3,"ngModel","placeholder","ngModelChange"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[4,"ngIf"],[1,"text-truncate"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647","name","sceneId",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","placeholder","pitch","name","pitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr-center"],["matInput","","type","number","placeholder","yaw","name","yaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","type",3,"disabled","ngModel","ngModelChange"],[3,"value"],["matInput","","placeholder","targetYaw","name","targetYaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetPitch","name","targetPitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","text","name","text",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","mat-raised-button","","color","accent",1,"mb-2",3,"disabled","click"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","Description"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red",3,"click"]],template:function(d,o){1&d&&(t.TgZ(0,"div",0,1),t.NdJ("click",function(l){return o.onActionPannellumClick(l)}),t.qZA(),t.YNc(2,At,19,4,"table",2),t._UZ(3,"br"),t.YNc(4,ct,3,3,"button",3),t.YNc(5,Et,92,52,"div",4),t._UZ(6,"app-progress-spinner",5),t.YNc(7,pe,16,3,"div",4)),2&d&&(t.Q6J("id",o.id),t.xp6(2),t.Q6J("ngIf",o.postionView),t.xp6(2),t.Q6J("ngIf",!o.showAddView360),t.xp6(1),t.Q6J("ngIf",o.showAddView360),t.xp6(1),t.Q6J("options",o.loadingOption),t.xp6(1),t.Q6J("ngIf",!o.showAddView360))},dependencies:[lt.O5,j.Fj,j.wV,j.JJ,j.Q7,j.wO,j.nD,j.On,L.ey,Yt.lW,X.KE,X.hX,X.R9,A.Hw,st.Nt,Vt.gD,Ct.YE,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,Dt.gM,R.HG,Kt.O,B.X$,It.v],encapsulation:2})),E})()},24014:(Ot,y,p)=>{"use strict";p.d(y,{g:()=>d});var T=p(86889),t=p(64537),g=p(80418),Q=p(34511),F=(p(56239),p(52633),p(60656)),v=p(32607),n=p(94032),B=p(56707),lt=p(88692),j=p(20092),L=p(1379),Yt=p(9638),X=p(88659),A=p(83331),st=p(39665),Vt=p(18033),Ct=p(56558),Dt=p(2940),R=p(99482),Kt=p(75738),It=p(81418);const jt=["container"];function At(o,h){if(1&o&&(t.TgZ(0,"table",7)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&o){const l=t.oxw();t.xp6(12),t.Oqu(l.postionView.viewerGetYaw),t.xp6(2),t.Oqu(l.postionView.viewerGetPitch),t.xp6(2),t.Oqu(l.postionView.clickGetYaw),t.xp6(2),t.Oqu(l.postionView.clickGetPitch)}}function ct(o,h){if(1&o){const l=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function pt(o,h){if(1&o){const l=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.onActionImportFile360View())}),t._uU(1," \u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u06a9\u0633 \u0647\u0627\u06cc 360\n"),t.qZA()}}function x(o,h){if(1&o){const l=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.actionPannellumTourLoad())}),t._uU(1," \u0646\u0645\u0627\u06cc\u0634 \u062a\u0648\u0631\n"),t.qZA()}}function b(o,h){if(1&o){const l=t.EpF();t.TgZ(0,"mat-icon",47),t.NdJ("click",function(){t.CHM(l);const C=t.oxw(2);return t.KtG(C.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function et(o,h){if(1&o){const l=t.EpF();t.TgZ(0,"mat-icon",48),t.NdJ("click",function(){t.CHM(l);const C=t.oxw(2);return t.KtG(C.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function xt(o,h){if(1&o&&(t._UZ(0,"img",49),t.ALo(1,"cmsthumbnail")),2&o){const l=t.oxw(2);t.s9C("src",t.lcZ(1,1,l.dataDetailModel.panorama),t.LSH)}}function nt(o,h){if(1&o){const l=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(l);const C=t.oxw(2);return t.KtG(C.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function Wt(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function ee(o,h){if(1&o&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.Oqu(l.type)}}function ie(o,h){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"mat-select",53),t.NdJ("ngModelChange",function(C){t.CHM(l);const H=t.oxw().$implicit;return t.KtG(H.type=C)}),t.TgZ(3,"mat-option",54),t._uU(4,"\u0635\u062d\u0646\u0647"),t.qZA(),t.TgZ(5,"mat-option",54),t._uU(6,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("disabled",r.editdisabled)("ngModel",l.type),t.xp6(1),t.Q6J("value","scene"),t.xp6(2),t.Q6J("value","info")}}function Ht(o,h){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,ee,3,1,"ng-container",50),t.YNc(2,ie,7,4,"ng-container",50),t.qZA()),2&o){const l=h.$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!r.editHotspot.guid||!l.guid||l.guid!==r.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",r.editHotspot.guid&&l.guid&&l.guid===r.editHotspot.guid)}}function Mt(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function Lt(o,h){if(1&o&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.sceneId||"N/A"," ")}}function St(o,h){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",56),t.NdJ("ngModelChange",function(C){t.CHM(l);const H=t.oxw().$implicit;return t.KtG(H.sceneId=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("disabled",r.editdisabled)("ngModel",l.sceneId)}}function Gt(o,h){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,Lt,3,1,"ng-container",50),t.YNc(2,St,3,2,"ng-container",50),t.qZA()),2&o){const l=h.$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!r.editHotspot.guid||!l.guid||l.guid!==r.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",r.editHotspot.guid&&l.guid&&l.guid===r.editHotspot.guid&&"scene"===l.type)}}function D(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function qt(o,h){if(1&o&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.Oqu(l.sceneId)}}function U(o,h){if(1&o&&(t.TgZ(0,"mat-option",54),t._uU(1),t.qZA()),2&o){const l=h.$implicit;t.Q6J("value",l.linkFileId),t.xp6(1),t.Oqu(l.title)}}function Xt(o,h){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"mat-select",57),t.NdJ("ngModelChange",function(C){t.CHM(l);const H=t.oxw().$implicit;return t.KtG(H.sceneId=C)}),t.YNc(3,U,2,2,"mat-option",58),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("disabled",r.editdisabled)("ngModel",l.sceneId),t.xp6(1),t.Q6J("ngForOf",r.scenesList)}}function u(o,h){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,qt,3,1,"ng-container",50),t.YNc(2,Xt,4,3,"ng-container",50),t.qZA()),2&o){const l=h.$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!r.editHotspot.guid||!l.guid||l.guid!==r.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",r.editHotspot.guid&&l.guid&&l.guid===r.editHotspot.guid&&"scene"===l.type)}}function f(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function J(o,h){if(1&o&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.pitch||"N/A"," ")}}function S(o,h){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",59),t.NdJ("ngModelChange",function(C){t.CHM(l);const H=t.oxw().$implicit;return t.KtG(H.pitch=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("disabled",r.editdisabled)("ngModel",l.pitch)}}function K(o,h){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,J,3,1,"ng-container",50),t.YNc(2,S,3,2,"ng-container",50),t.qZA()),2&o){const l=h.$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!r.editHotspot.guid||!l.guid||l.guid!==r.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",r.editHotspot.guid&&l.guid&&l.guid===r.editHotspot.guid)}}function m(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function Y(o,h){if(1&o&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.yaw||"N/A"," ")}}function k(o,h){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",60),t.NdJ("ngModelChange",function(C){t.CHM(l);const H=t.oxw().$implicit;return t.KtG(H.yaw=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("disabled",r.editdisabled)("ngModel",l.yaw)}}function W(o,h){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,Y,3,1,"ng-container",50),t.YNc(2,k,3,2,"ng-container",50),t.qZA()),2&o){const l=h.$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!r.editHotspot.guid||!l.guid||l.guid!==r.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",r.editHotspot.guid&&l.guid&&l.guid===r.editHotspot.guid)}}function G(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function Zt(o,h){if(1&o&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.targetYaw||"N/A"," ")}}function rt(o,h){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",61),t.NdJ("ngModelChange",function(C){t.CHM(l);const H=t.oxw().$implicit;return t.KtG(H.targetYaw=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("disabled",r.editdisabled)("ngModel",l.targetYaw)}}function Nt(o,h){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,Zt,3,1,"ng-container",50),t.YNc(2,rt,3,2,"ng-container",50),t.qZA()),2&o){const l=h.$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!r.editHotspot.guid||!l.guid||l.guid!==r.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",r.editHotspot.guid&&l.guid&&l.guid===r.editHotspot.guid)}}function Bt(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function Ut(o,h){if(1&o&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.targetPitch||"N/A"," ")}}function yt(o,h){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",62),t.NdJ("ngModelChange",function(C){t.CHM(l);const H=t.oxw().$implicit;return t.KtG(H.targetPitch=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("disabled",r.editdisabled)("ngModel",l.targetPitch)}}function ut(o,h){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,Ut,3,1,"ng-container",50),t.YNc(2,yt,3,2,"ng-container",50),t.qZA()),2&o){const l=h.$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!r.editHotspot.guid||!l.guid||l.guid!==r.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",r.editHotspot.guid&&l.guid&&l.guid===r.editHotspot.guid)}}function mt(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function ft(o,h){if(1&o&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.text||"N/A"," ")}}function wt(o,h){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",63),t.NdJ("ngModelChange",function(C){t.CHM(l);const H=t.oxw().$implicit;return t.KtG(H.text=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("disabled",r.editdisabled)("ngModel",l.text)}}function dt(o,h){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,ft,3,1,"ng-container",50),t.YNc(2,wt,3,2,"ng-container",50),t.qZA()),2&o){const l=h.$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!r.editHotspot.guid||!l.guid||l.guid!==r.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",r.editHotspot.guid&&l.guid&&l.guid===r.editHotspot.guid)}}function at(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function Pt(o,h){if(1&o&&(t.ynx(0),t.TgZ(1,"p",64),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.url||"N/A"," ")}}function Rt(o,h){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",65),t.NdJ("ngModelChange",function(C){t.CHM(l);const H=t.oxw().$implicit;return t.KtG(H.url=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("disabled",r.editdisabled)("ngModel",l.url)}}function Tt(o,h){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,Pt,3,1,"ng-container",50),t.YNc(2,Rt,3,2,"ng-container",50),t.qZA()),2&o){const l=h.$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!r.editHotspot.guid||!l.guid||l.guid!==r.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",r.editHotspot.guid&&l.guid&&l.guid===r.editHotspot.guid)}}function ot(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function _t(o,h){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",67),t.NdJ("click",function(){t.CHM(l);const C=t.oxw().$implicit,H=t.oxw(2);return t.KtG(H.editROw(C))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",67),t.NdJ("click",function(){t.CHM(l);const C=t.oxw().$implicit,H=t.oxw(2);return t.KtG(H.removeROw(C))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function Et(o,h){if(1&o){const l=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(l);const C=t.oxw(4);return t.KtG(C.onActionPannellumClickLastPoint())}),t._uU(1,"\u062b\u0628\u062a \u0646\u0642\u0637\u0647"),t.qZA()}if(2&o){const l=t.oxw(4);t.Q6J("disabled",l.editdisabled)}}function gt(o,h){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"button",68),t.NdJ("click",function(){t.CHM(l);const C=t.oxw(3);return t.KtG(C.updateEdit())}),t._uU(2,"Update"),t.qZA(),t.TgZ(3,"button",69),t.NdJ("click",function(){t.CHM(l);const C=t.oxw(3);return t.KtG(C.cancelEdit())}),t._uU(4,"Cancel"),t.qZA(),t.YNc(5,Et,2,1,"button",70),t.BQk()}if(2&o){const l=t.oxw(3);t.xp6(1),t.Q6J("disabled",l.editdisabled),t.xp6(2),t.Q6J("disabled",l.editdisabled),t.xp6(2),t.Q6J("ngIf",l.postionView)}}function ht(o,h){if(1&o&&(t.TgZ(0,"mat-cell")(1,"span",66),t.YNc(2,_t,5,0,"ng-container",50),t.YNc(3,gt,6,3,"ng-container",50),t.qZA()()),2&o){const l=h.$implicit,r=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!r.editHotspot.guid||!l.guid||l.guid!==r.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",r.editHotspot.guid&&l.guid&&l.guid===r.editHotspot.guid)}}function P(o,h){1&o&&t._UZ(0,"mat-header-row")}function it(o,h){1&o&&t._UZ(0,"mat-row")}function Ft(o,h){if(1&o){const l=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"mat-form-field",11)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",12,13),t.NdJ("ngModelChange",function(C){t.CHM(l);const H=t.oxw();return t.KtG(H.dataDetailModel.title=C)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,b,2,0,"mat-icon",14),t.TgZ(10,"mat-icon",15),t._uU(11,"mode_edit"),t.qZA()(),t.TgZ(12,"mat-form-field",16)(13,"input",17,18),t.NdJ("ngModelChange",function(C){t.CHM(l);const H=t.oxw();return t.KtG(H.dataDetailModel.linkFileId=C)})("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.fileManagerOpenFormReport=!0)}),t.ALo(15,"translate"),t.qZA(),t.YNc(16,et,2,0,"mat-icon",19),t.TgZ(17,"mat-icon",20),t.NdJ("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.fileManagerOpenFormReport=!0)}),t._uU(18,"mode_edit"),t.qZA()(),t.TgZ(19,"cms-file-manager",21),t.NdJ("itemSelected",function(C){t.CHM(l);const H=t.oxw();return t.KtG(H.onActionFileSelect(C))})("openFormChange",function(C){t.CHM(l);const H=t.oxw();return t.KtG(H.fileManagerOpenFormReport=C)}),t.qZA(),t.TgZ(20,"a",22),t.ALo(21,"cmsthumbnail"),t.YNc(22,xt,2,3,"img",23),t.qZA(),t._UZ(23,"hr"),t.TgZ(24,"h5"),t._uU(25,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u062a\u0648\u0631"),t.qZA(),t.TgZ(26,"p"),t._uU(27,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(28,"div",24)(29,"div",25),t.YNc(30,nt,3,3,"button",26),t.qZA(),t.TgZ(31,"mat-table",27,28),t.ynx(33,29),t.YNc(34,Wt,2,0,"mat-header-cell",30),t.YNc(35,Ht,3,2,"mat-cell",31),t.BQk(),t.ynx(36,32),t.YNc(37,Mt,2,0,"mat-header-cell",30),t.YNc(38,Gt,3,2,"mat-cell",31),t.BQk(),t.ynx(39,33),t.YNc(40,D,2,0,"mat-header-cell",30),t.YNc(41,u,3,2,"mat-cell",31),t.BQk(),t.ynx(42,34),t.YNc(43,f,2,0,"mat-header-cell",30),t.YNc(44,K,3,2,"mat-cell",31),t.BQk(),t.ynx(45,35),t.YNc(46,m,2,0,"mat-header-cell",30),t.YNc(47,W,3,2,"mat-cell",31),t.BQk(),t.ynx(48,36),t.YNc(49,G,2,0,"mat-header-cell",30),t.YNc(50,Nt,3,2,"mat-cell",31),t.BQk(),t.ynx(51,37),t.YNc(52,Bt,2,0,"mat-header-cell",30),t.YNc(53,ut,3,2,"mat-cell",31),t.BQk(),t.ynx(54,38),t.YNc(55,mt,2,0,"mat-header-cell",30),t.YNc(56,dt,3,2,"mat-cell",31),t.BQk(),t.ynx(57,39),t.YNc(58,at,2,0,"mat-header-cell",30),t.YNc(59,Tt,3,2,"mat-cell",31),t.BQk(),t.ynx(60,40),t.YNc(61,ot,2,0,"mat-header-cell",30),t.YNc(62,ht,4,2,"mat-cell",31),t.BQk(),t.YNc(63,P,1,0,"mat-header-row",41),t.YNc(64,it,1,0,"mat-row",42),t.qZA()(),t.TgZ(65,"div",25)(66,"button",43),t.NdJ("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.onActionSubmitView360())}),t._UZ(67,"i",44),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"button",45),t.NdJ("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.onActionCancellView360())}),t._UZ(71,"i",46),t._uU(72),t.ALo(73,"translate"),t.qZA()(),t._UZ(74,"br"),t.qZA()()}if(2&o){const l=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,24,"TITLE.Photography_Place")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,26,"TITLE.Photography_Place")),t.Q6J("ngModel",l.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.title),t.xp6(4),t.s9C("placeholder",t.lcZ(15,28,"TITLE.View_360_File_ID")),t.Q6J("ngModel",l.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",l.appLanguage)("isPopup",!0)("openForm",l.fileManagerOpenFormReport)("tree",l.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",l.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(21,30,l.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==l.dataDetailModel||null==l.dataDetailModel.panorama?null:l.dataDetailModel.panorama.length)>0),t.xp6(8),t.Q6J("ngIf",l.postionView),t.xp6(1),t.Q6J("dataSource",l.tableHotSpotdataSource),t.xp6(32),t.Q6J("matHeaderRowDef",l.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",l.tableHotspotDisplayedColumns),t.xp6(4),t.hij(" ",t.lcZ(69,32,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(73,34,"ACTION.CANCEL")," ")}}function V(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function z(o,h){if(1&o&&t._UZ(0,"img",49),2&o){const l=t.oxw(2).$implicit;t.s9C("src",l.panorama,t.LSH)}}function O(o,h){if(1&o&&(t.ynx(0),t.TgZ(1,"a",22),t.YNc(2,z,1,1,"img",23),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(1),t.s9C("href",l.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==l||null==l.panorama?null:l.panorama.length)>0)}}function ce(o,h){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,O,3,2,"ng-container",50),t.qZA()),2&o){const l=h.$implicit;t.xp6(1),t.Q6J("ngIf",l.panorama)}}function ae(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function _e(o,h){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(1),t.hij(" ",l.title," ")}}function ue(o,h){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,_e,2,1,"ng-container",50),t.qZA()),2&o){const l=h.$implicit;t.xp6(1),t.Q6J("ngIf",l.title)}}function le(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1," \u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647 "),t.qZA())}function de(o,h){if(1&o&&(t.TgZ(0,"mat-cell"),t.ynx(1),t._uU(2),t.BQk(),t.qZA()),2&o){const l=h.$implicit;t.xp6(2),t.hij(" ",l.linkFileId," ")}}function pe(o,h){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&o&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function re(o,h){if(1&o){const l=t.EpF();t.TgZ(0,"mat-cell",78)(1,"small")(2,"mat-icon",79),t.NdJ("click",function(){const H=t.CHM(l).renderIndex,$t=t.oxw(2);return t.KtG($t.onActionOptionEditView360(H))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",80),t.NdJ("click",function(){const H=t.CHM(l).renderIndex,$t=t.oxw(2);return t.KtG($t.onActionOptionRemoveView360(H))}),t._uU(7,"delete"),t.qZA()()()}}function se(o,h){1&o&&t._UZ(0,"mat-header-row")}function _(o,h){1&o&&t._UZ(0,"mat-row")}function E(o,h){if(1&o&&(t.TgZ(0,"div",9)(1,"mat-table",72),t.ynx(2,73),t.YNc(3,V,3,3,"mat-header-cell",30),t.YNc(4,ce,2,1,"mat-cell",31),t.BQk(),t.ynx(5,74),t.YNc(6,ae,3,3,"mat-header-cell",30),t.YNc(7,ue,2,1,"mat-cell",31),t.BQk(),t.ynx(8,75),t.YNc(9,le,2,0,"mat-header-cell",30),t.YNc(10,de,3,1,"mat-cell",31),t.BQk(),t.ynx(11,40),t.YNc(12,pe,4,6,"mat-header-cell",30),t.YNc(13,re,8,0,"mat-cell",76),t.BQk(),t.YNc(14,se,1,0,"mat-header-row",77),t.YNc(15,_,1,0,"mat-row",42),t.qZA()()),2&o){const l=t.oxw();t.xp6(1),t.Q6J("dataSource",l.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",l.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",l.tabledisplayedColumns)}}class s{constructor(){(0,T.Z)(this,"viewerGetYaw",void 0),(0,T.Z)(this,"viewerGetPitch",void 0),(0,T.Z)(this,"clickGetYaw",void 0),(0,T.Z)(this,"clickGetPitch",void 0)}}let d=(()=>{var o;class h{constructor(r,C,H){(0,T.Z)(this,"cmsToastrService",void 0),(0,T.Z)(this,"publicHelper",void 0),(0,T.Z)(this,"translate",void 0),(0,T.Z)(this,"id",++h.nextId),(0,T.Z)(this,"scenesList",[]),(0,T.Z)(this,"dataDetailModel",new Q.$lU),(0,T.Z)(this,"privateDataModel",void 0),(0,T.Z)(this,"dataModelChange",new t.vpe),(0,T.Z)(this,"privateDataImageModel",void 0),(0,T.Z)(this,"formInfo",new Q.LEF),(0,T.Z)(this,"loading",new F.O),(0,T.Z)(this,"loadingOption",new F.O),(0,T.Z)(this,"tabledataSource",new g.by),(0,T.Z)(this,"tableHotSpotdataSource",new g.by),(0,T.Z)(this,"tabledisplayedColumns",["linkFileId","panorama","Title","Action"]),(0,T.Z)(this,"tableHotspotDisplayedColumns",["sceneIdSelector","type","text","url","pitch","yaw","Action"]),(0,T.Z)(this,"selectFileTypeReport",["jpeg","jpg"]),(0,T.Z)(this,"fileManagerTree",void 0),(0,T.Z)(this,"appLanguage","fa"),(0,T.Z)(this,"showAddView360",!1),(0,T.Z)(this,"fileManagerOpenFormReport",!1),(0,T.Z)(this,"container",void 0),(0,T.Z)(this,"viewer",void 0),(0,T.Z)(this,"options",void 0),(0,T.Z)(this,"postionView",void 0),(0,T.Z)(this,"selectIndex",-1),(0,T.Z)(this,"editHotspot",void 0),(0,T.Z)(this,"oldHotspot",void 0),(0,T.Z)(this,"editdisabled",void 0),this.cmsToastrService=r,this.publicHelper=C,this.translate=H,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}getGuid(){return Math.floor(1e3*Math.random())+""}set dataModel(r){r||(r=new Q.veq),r.defaultValue||(r.defaultValue=new Q.vyA),r.scenes||(r.scenes=new Map),this.scenesList=[],Object.keys(r.scenes).map(C=>{r.scenes[C].guid=this.getGuid(),this.scenesList.push(r.scenes[C])}),this.scenesList.forEach(C=>{C.hotSpots||(C.hotSpots=[]),C.hotSpots.forEach(H=>{H.guid=this.getGuid()})}),this.privateDataModel=r,this.tabledataSource.data=this.scenesList,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}set dataImageModel(r){r||(r=[]),this.privateDataImageModel=r}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Edit")}ngAfterViewInit(){this.container.nativeElement.style.display="none"}actionPannellumImageLoad(r,C){const H={type:"equirectangular",panorama:r,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};C&&C.length>0&&(H.hotSpots=C);const $t=Object.assign({},H,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,$t),this.container.nativeElement.style.display="block"}actionPannellumTourLoad(){this.actionPrivateDataModelOptimaze();const r={};r.default=this.privateDataModel.defaultValue,this.privateDataModel&&this.privateDataModel.scenes&&(r.scenes=this.privateDataModel.scenes);const C=Object.assign({},r,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,C),this.container.nativeElement.style.display="block"}onActionPannellumClick(r){if(!this.viewer)return;this.postionView=new s,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const C=this.viewer.mouseEventToCoords(r);!C||0==C.length||(this.postionView.clickGetYaw=C[1],this.postionView.clickGetPitch=C[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(r){r&&r.id&&0!==r.id?(this.dataDetailModel.linkFileId=r.id,this.dataDetailModel.panorama=r.downloadLinksrc,this.dataDetailModel.preview=r.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.scenesList||(this.scenesList=[]),this.selectIndex>=0?this.scenesList[this.selectIndex]=this.dataDetailModel:this.scenesList.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}actionPrivateDataModelOptimaze(){this.privateDataModel.defaultValue||(this.privateDataModel.defaultValue=new Q.vyA),this.privateDataModel.scenes=new Map,this.scenesList||(this.scenesList=[]),this.scenesList.forEach(r=>{if(r.title&&r.title.length>0){const C=[];r.hotSpots||(r.hotSpots=[]),r.hotSpots.forEach(H=>{H.type&&H.type.length>0&&C.push(H)}),r.hotSpots=C,this.privateDataModel.scenes[r.linkFileId]=r,this.privateDataModel.scenes[r.linkFileId].hfov=110}}),(!this.privateDataModel.defaultValue.firstScene||0==this.privateDataModel.defaultValue.firstScene.length)&&(this.privateDataModel.scenes&&this.scenesList&&this.scenesList.length>0&&(this.privateDataModel.defaultValue.firstScene=this.scenesList[0].linkFileId+""),this.privateDataModel.defaultValue.sceneFadeDuration=1e3)}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new Q.$lU,this.showAddView360=!this.showAddView360,this.tableHotSpotdataSource.data=[]}onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new Q.$lU),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new Q.aCC;const r=new Q.aCC;r.guid=this.getGuid(),this.dataDetailModel.hotSpots.push(r),this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots,this.editROw(r),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(r){r<0||!this.scenesList||0===this.scenesList.length||(this.scenesList.splice(r,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}onActionOptionEditView360(r){r<0||!this.scenesList||0===this.scenesList.length||(this.dataDetailModel=this.scenesList[r],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new Q.aCC,this.editHotspot=new Q.aCC,this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots,this.selectIndex=r,this.showAddView360=!this.showAddView360)}editROw(r){this.editHotspot=r&&r.guid?r:new Q.aCC,this.oldHotspot={...this.editHotspot}}removeROw(r){const C=this.dataDetailModel.hotSpots.findIndex(H=>H.guid==r.guid);C>=0&&(this.dataDetailModel.hotSpots.splice(C,1),this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots)}updateEdit(){this.editdisabled=!0;const r=this.dataDetailModel.hotSpots.findIndex(C=>C.guid==this.oldHotspot.guid);r>=0&&(this.dataDetailModel.hotSpots[r]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new Q.aCC,this.editHotspot=new Q.aCC}cancelEdit(){this.editHotspot=new Q.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots)}onActionImportFile360View(){this.privateDataImageModel&&this.privateDataImageModel.length>0&&(this.actionPrivateDataModelOptimaze(),this.privateDataImageModel.forEach(r=>{if(!this.privateDataModel.scenes[r.linkFileId]&&r.linkFileId>0){const C=new Q.$lU;C.guid=this.getGuid(),C.linkFileId=r.linkFileId,C.title=r.title,C.hotSpots=r.hotSpots,C.panorama=r.panorama,C.preview=r.preview,C.hfov=110,this.privateDataModel.scenes[r.linkFileId]=C}}),this.dataModel=this.privateDataModel)}}return o=h,(0,T.Z)(h,"nextId",0),(0,T.Z)(h,"\u0275fac",function(r){return new(r||o)(t.Y36(v.e),t.Y36(n.i),t.Y36(B.sK))}),(0,T.Z)(h,"\u0275cmp",t.Xpm({type:o,selectors:[["app-cms-360-tour-list"]],viewQuery:function(r,C){if(1&r&&t.Gf(jt,5),2&r){let H;t.iGM(H=t.CRH())&&(C.container=H.first)}},inputs:{dataModel:"dataModel",dataImageModel:"dataImageModel"},outputs:{dataModelChange:"dataModelChange"},decls:10,vars:8,consts:[[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","grid-row-ltr-center",4,"ngIf"],["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px;",3,"click",4,"ngIf"],["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px ",3,"click",4,"ngIf"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],[1,"grid-row-ltr-center"],["type","button","mat-button","",1,"btn","btn-primary","font-size-h6","px-3","py-2",2,"margin","10px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"ntk-full-width","mb-1"],["matInput","","name","dataDetailModel.title","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],[1,"ntk-full-width"],["matInput","","name","dataDetailModel.linkFileId","type","text",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","type"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sceneId"],["matColumnDef","sceneIdSelector"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[4,"ngIf"],[1,"text-truncate","grid-row-ltr-center"],["appearance","outline",2,"width","100%"],["placeholder","Select","name","type",3,"disabled","ngModel","ngModelChange"],[3,"value"],[1,"text-truncate"],["matInput","","placeholder","sceneId","name","sceneId",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","sceneId",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","placeholder","pitch","name","pitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","placeholder","yaw","name","yaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetYaw","name","targetYaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetPitch","name","targetPitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","text","name","text",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","mat-raised-button","","color","accent",1,"mb-2",3,"disabled","click"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","linkFileId"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red",3,"click"]],template:function(r,C){1&r&&(t.TgZ(0,"div",0,1),t.NdJ("click",function($t){return C.onActionPannellumClick($t)}),t.qZA(),t.YNc(2,At,19,4,"table",2),t._UZ(3,"br"),t.YNc(4,ct,3,3,"button",3),t.YNc(5,pt,2,0,"button",4),t.YNc(6,x,2,0,"button",4),t.YNc(7,Ft,75,36,"div",5),t._UZ(8,"app-progress-spinner",6),t.YNc(9,E,16,3,"div",5)),2&r&&(t.Q6J("id",C.id),t.xp6(2),t.Q6J("ngIf",C.postionView),t.xp6(2),t.Q6J("ngIf",!C.showAddView360),t.xp6(1),t.Q6J("ngIf",C.privateDataImageModel&&C.privateDataImageModel.length>0),t.xp6(1),t.Q6J("ngIf",C.privateDataModel&&C.privateDataModel&&C.privateDataModel.scenes&&C.scenesList&&C.scenesList.length>0),t.xp6(1),t.Q6J("ngIf",C.showAddView360),t.xp6(1),t.Q6J("options",C.loadingOption),t.xp6(1),t.Q6J("ngIf",!C.showAddView360))},dependencies:[lt.sg,lt.O5,j.Fj,j.wV,j.JJ,j.Q7,j.wO,j.nD,j.On,L.ey,Yt.lW,X.KE,X.hX,X.R9,A.Hw,st.Nt,Vt.gD,Ct.YE,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,Dt.gM,R.HG,Kt.O,B.X$,It.v],encapsulation:2})),h})()},76609:(Ot,y,p)=>{"use strict";p.d(y,{D:()=>jt});var T=p(8239),t=p(86889),g=p(64537),Q=p(20092),e=p(34511),tt=p(57445),kt=p(51927),vt=p(83151),F=p(42147),v=p(61528),n=p(27969),B=p(60656),lt=p(56707),j=p(88692),L=p(61637),Yt=p(1379),X=p(88659),A=p(83331),st=p(39665),Vt=p(75738),Ct=p(81418);function Dt(At,ct){if(1&At&&(g._UZ(0,"img",9),g.ALo(1,"cmsthumbnail")),2&At){const pt=g.oxw().$implicit;g.s9C("src",g.lcZ(1,1,pt.linkImageIdSrc),g.LSH)}}function R(At,ct){if(1&At&&(g.TgZ(0,"mat-option",7),g.YNc(1,Dt,2,3,"img",8),g.TgZ(2,"span"),g._uU(3),g.qZA()()),2&At){const pt=ct.$implicit,x=g.oxw();g.Q6J("value",pt)("disabled",x.optionDisabled),g.xp6(1),g.Q6J("ngIf",pt.linkImageIdSrc),g.xp6(2),g.Oqu(x.displayOption(pt))}}function Kt(At,ct){if(1&At){const pt=g.EpF();g.TgZ(0,"mat-icon",10),g.NdJ("click",function(){g.CHM(pt);const b=g.oxw();return g.KtG(b.onActionSelectClear())}),g._uU(1,"close"),g.qZA()}}const It=["*"];let jt=(()=>{var At;class ct{constructor(x,b,et,xt){(0,t.Z)(this,"coreEnumService",void 0),(0,t.Z)(this,"translate",void 0),(0,t.Z)(this,"cdr",void 0),(0,t.Z)(this,"categoryService",void 0),(0,t.Z)(this,"id",++ct.nextId),(0,t.Z)(this,"dataModelResult",new e.y$4),(0,t.Z)(this,"dataModelSelect",new e.Dp$),(0,t.Z)(this,"formControl",new Q.NI),(0,t.Z)(this,"filteredOptions",void 0),(0,t.Z)(this,"optionDisabled",!1),(0,t.Z)(this,"optionSelectFirstItem",!1),(0,t.Z)(this,"optionPlaceholder",""),(0,t.Z)(this,"optionChange",new g.vpe),(0,t.Z)(this,"optionReload",()=>this.onActionReload()),(0,t.Z)(this,"loading",new B.O),this.coreEnumService=x,this.translate=b,this.cdr=et,this.categoryService=xt,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(x){this.onActionSelectForce(x)}get optionLoading(){return this.loading}set optionLoading(x){this.loading=x}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,kt.O)(""),(0,vt.b)(1500),(0,F.x)(),(0,v.w)(x=>this.DataGetAll("string"==typeof x||"number"==typeof x?x:"")))}displayFn(x){return x&&x.virtual_Parent&&x.virtual_Parent.title.length>0&&x.virtual_Parent.virtual_Parent&&x.virtual_Parent.virtual_Parent.title.length>0&&x.virtual_Parent.virtual_Parent.virtual_Parent&&x.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?x.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+x.virtual_Parent.virtual_Parent.titleML+" > "+x.virtual_Parent.titleML+" > "+x.titleML:x&&x.virtual_Parent&&x.virtual_Parent.title.length>0&&x.virtual_Parent.virtual_Parent&&x.virtual_Parent.virtual_Parent.title.length>0?x.virtual_Parent.virtual_Parent.titleML+" > "+x.virtual_Parent.titleML+" > "+x.titleML:x&&x.virtual_Parent&&x.virtual_Parent.title.length>0?x.virtual_Parent.titleML+" > "+x.titleML:x?x.titleML:void 0}displayOption(x){return x&&x.virtual_Parent&&x.virtual_Parent.title.length>0&&x.virtual_Parent.virtual_Parent&&x.virtual_Parent.virtual_Parent.title.length>0&&x.virtual_Parent.virtual_Parent.virtual_Parent&&x.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?x.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+x.virtual_Parent.virtual_Parent.titleML+" > "+x.virtual_Parent.titleML+" > "+x.titleML:x&&x.virtual_Parent&&x.virtual_Parent.title.length>0&&x.virtual_Parent.virtual_Parent&&x.virtual_Parent.virtual_Parent.title.length>0?x.virtual_Parent.virtual_Parent.titleML+" > "+x.virtual_Parent.titleML+" > "+x.titleML:x&&x.virtual_Parent&&x.virtual_Parent.title.length>0?x.virtual_Parent.titleML+" > "+x.titleML:x?x.titleML:void 0}DataGetAll(x){var b=this;return(0,T.Z)(function*(){const et=new e.Hay;if(et.rowPerPage=20,et.accessLoad=!0,x&&x.length>0){let nt=new e.AO3;nt=new e.AO3,nt.propertyName="Symbol",nt.value=x,nt.searchType=e.J6G.Contains,nt.clauseType=e.ppe.Or,et.filters.push(nt),nt=new e.AO3,nt.propertyName="Title",nt.value=x,nt.searchType=e.J6G.Contains,nt.clauseType=e.ppe.Or,et.filters.push(nt),x&&"number"==typeof+x&&+x>0&&(nt=new e.AO3,nt.propertyName="Id",nt.value=x,nt.searchType=e.J6G.Equal,nt.clauseType=e.ppe.Or,et.filters.push(nt))}const xt=b.constructor.name+"main";return b.loading.Start(xt),yield(0,tt.z)(b.categoryService.ServiceGetAll(et)).then(nt=>(b.dataModelResult=nt,b.optionSelectFirstItem&&(!b.dataModelSelect||!b.dataModelSelect.id||b.dataModelSelect.id<=0)&&b.dataModelResult.listItems.length>0&&(b.optionSelectFirstItem=!1,setTimeout(()=>{b.formControl.setValue(b.dataModelResult.listItems[0])},1e3),b.onActionSelect(b.dataModelResult.listItems[0])),b.loading.Stop(xt),nt.listItems))})()}onActionSelect(x){this.optionDisabled||(this.dataModelSelect=x,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(x){return this.filteredOptions.pipe((0,n.U)(b=>(b.find(et=>et.id===x.id)||b.push(x),b)))}onActionSelectForce(x){if("number"==typeof x&&x>0){if(this.dataModelSelect&&this.dataModelSelect.id===x)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(b=>b.id===x)){const b=this.dataModelResult.listItems.find(et=>et.id===x);return this.dataModelSelect=b,void this.formControl.setValue(b)}this.categoryService.ServiceGetOneIncludeParent(x).subscribe(b=>{b.isSuccess&&(this.filteredOptions=this.push(b.item),this.dataModelSelect=b.item,this.formControl.setValue(b.item),this.optionChange.emit(b.item))})}else{if(typeof x==typeof e.Dp$)return this.filteredOptions=this.push(x),this.dataModelSelect=x,void this.formControl.setValue(x);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new e.Dp$,this.loadOptions()}}return At=ct,(0,t.Z)(ct,"nextId",0),(0,t.Z)(ct,"\u0275fac",function(x){return new(x||At)(g.Y36(e.FLW),g.Y36(lt.sK),g.Y36(g.sBO),g.Y36(e.XRW))}),(0,t.Z)(ct,"\u0275cmp",g.Xpm({type:At,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:It,decls:9,vars:10,consts:[[1,"ntk-full-width"],[3,"options"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(x,b){if(1&x&&(g.F$t(),g.TgZ(0,"mat-form-field",0),g._UZ(1,"app-progress-spinner",1)(2,"input",2),g.TgZ(3,"mat-autocomplete",3,4),g.NdJ("optionSelected",function(xt){return b.onActionSelect(xt.option.value)}),g.YNc(5,R,4,4,"mat-option",5),g.ALo(6,"async"),g.qZA(),g.YNc(7,Kt,2,0,"mat-icon",6),g.Hsn(8),g.qZA()),2&x){const et=g.MAs(4);g.xp6(1),g.Q6J("options",b.loading),g.xp6(1),g.s9C("placeholder",b.optionPlaceholder),g.Q6J("formControl",b.formControl)("matAutocomplete",et),g.uIk("disabled",!!b.optionDisabled||null),g.xp6(1),g.Q6J("displayWith",b.displayFn),g.xp6(2),g.Q6J("ngForOf",g.lcZ(6,8,b.filteredOptions)),g.xp6(2),g.Q6J("ngIf",null==b.dataModelSelect?null:b.dataModelSelect.id)}},dependencies:[j.sg,j.O5,Q.Fj,Q.JJ,Q.oH,L.XC,Yt.ey,L.ZL,X.KE,X.R9,A.Hw,st.Nt,Vt.O,j.Ov,Ct.v],encapsulation:2})),ct})()},17407:(Ot,y,p)=>{"use strict";p.d(y,{r:()=>vt});var T=p(86889),t=p(64537),g=p(64216),e=p(92340),tt=p(32607),kt=p(27128);let vt=(()=>{var F;class v{set optonCenter(B){this.map&&B&&B.lat&&B.lon&&0!==B.lat&&0!==B.lon&&this.map.setView(new g.LatLng(B.lat,B.lon),this.zoom)}set optionCurrentPoint(B){this.onActionCurrentPoint(B)}constructor(B){(0,T.Z)(this,"cmsToastrService",void 0),(0,T.Z)(this,"id",++v.nextId),(0,T.Z)(this,"map$",new t.vpe),(0,T.Z)(this,"zoom$",new t.vpe),(0,T.Z)(this,"options",{layers:[(0,g.tileLayer)(e.N.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]}),(0,T.Z)(this,"map",void 0),(0,T.Z)(this,"zoom",void 0),(0,T.Z)(this,"destroy",!1),this.cmsToastrService=B}ngOnInit(){const L=g.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});g.Marker.prototype.options.icon=L}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(B){setTimeout(()=>{this.map&&!this.destroy&&B.invalidateSize()},500),this.map=B,this.map$.emit(B),this.zoom=B.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(B){this.zoom=B.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(B=!0){this.getPosition().then(lt=>{this.map.setView(new g.LatLng(lt.lat,lt.lon),this.zoom)})}getPosition(){return new Promise((B,lt)=>{navigator.geolocation.getCurrentPosition(j=>{B({lon:j.coords.longitude,lat:j.coords.latitude})},j=>{this.cmsToastrService.typeErrorGetPosition()})})}}return F=v,(0,T.Z)(v,"nextId",0),(0,T.Z)(v,"\u0275fac",function(B){return new(B||F)(t.Y36(tt.e))}),(0,T.Z)(v,"\u0275cmp",t.Xpm({type:F,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletOptions","leafletMapReady","leafletMapZoomEnd"]],template:function(B,lt){1&B&&(t.TgZ(0,"div",0),t.NdJ("leafletMapReady",function(L){return lt.onMapReady(L)})("leafletMapZoomEnd",function(L){return lt.onMapZoomEnd(L)}),t.qZA()),2&B&&t.Q6J("leafletOptions",lt.options)},dependencies:[kt.je],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})),v})()}}]);