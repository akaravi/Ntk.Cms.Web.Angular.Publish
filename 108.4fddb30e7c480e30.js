(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[108],{56239:()=>{window.libpannellum=function(Rt,L,d){"use strict";function w(vt){var v,n,B,lt,j,y,Yt,X,A,st,zt,Ct,Dt,N,qt,It,F=L.createElement("canvas");function jt(u,f){return 1==u.level&&1!=f.level?-1:1==f.level&&1!=u.level?1:f.timestamp-u.timestamp}function At(u,f){return u.level!=f.level?u.level-f.level:u.diff-f.diff}function pt(u,f,J,S,K,h){this.vertices=u,this.side=f,this.level=J,this.x=S,this.y=K,this.path=h.replace("%s",f).replace("%l",J).replace("%x",S).replace("%y",K)}function x(u,f,J,S,K){if(function k(u,f){var J=Vt(u,f.slice(0,3)),S=Vt(u,f.slice(3,6)),K=Vt(u,f.slice(6,9)),h=Vt(u,f.slice(9,12)),Y=J[0]+S[0]+K[0]+h[0];if(-4==Y||4==Y)return!1;var H=J[1]+S[1]+K[1]+h[1];return-4!=H&&4!=H&&4!=J[2]+S[2]+K[2]+h[2]}(u,f.vertices)){var h=f.vertices,Y=h[0]+h[3]+h[6]+h[9],H=h[1]+h[4]+h[7]+h[10],q=h[2]+h[5]+h[8]+h[11],G=Math.sqrt(Y*Y+H*H+q*q),Zt=Math.asin(q/G),St=Math.atan2(H,Y)-S;St+=St>Math.PI?-2*Math.PI:St<-Math.PI?2*Math.PI:0,St=Math.abs(St),f.diff=Math.acos(Math.sin(J)*Math.sin(Zt)+Math.cos(J)*Math.cos(Zt)*Math.cos(St));for(var Bt=!1,Ut=0;Ut<v.nodeCache.length;Ut++)if(v.nodeCache[Ut].path==f.path){Bt=!0,v.nodeCache[Ut].timestamp=v.nodeCacheTimestamp++,v.nodeCache[Ut].diff=f.diff,v.currentNodes.push(v.nodeCache[Ut]);break}if(Bt||(f.timestamp=v.nodeCacheTimestamp++,v.currentNodes.push(f),v.nodeCache.push(f)),f.level<v.level){var Lt=A.cubeResolution*Math.pow(2,f.level-A.maxLevel),ut=Math.ceil(Lt*A.invTileResolution)-1,mt=Lt%A.tileResolution*2,ft=2*Lt%A.tileResolution;0===ft&&(ft=A.tileResolution),0===mt&&(mt=2*A.tileResolution);var wt=.5;(f.x==ut||f.y==ut)&&(wt=1-A.tileResolution/(A.tileResolution+ft));var Ot,dt=1-wt,at=[],Tt=wt,ot=wt,_t=wt,Et=dt,gt=dt,ht=dt;ft<A.tileResolution&&(f.x==ut&&f.y!=ut?(ot=.5,gt=.5,("d"==f.side||"u"==f.side)&&(_t=.5,ht=.5)):f.x!=ut&&f.y==ut&&(Tt=.5,Et=.5,("l"==f.side||"r"==f.side)&&(_t=.5,ht=.5))),mt<=A.tileResolution&&(f.x==ut&&(Tt=0,Et=1,("l"==f.side||"r"==f.side)&&(_t=0,ht=1)),f.y==ut&&(ot=0,gt=1,("d"==f.side||"u"==f.side)&&(_t=0,ht=1))),Ot=new pt([h[0],h[1],h[2],h[0]*Tt+h[3]*Et,h[1]*wt+h[4]*dt,h[2]*_t+h[5]*ht,h[0]*Tt+h[6]*Et,h[1]*ot+h[7]*gt,h[2]*_t+h[8]*ht,h[0]*wt+h[9]*dt,h[1]*ot+h[10]*gt,h[2]*_t+h[11]*ht],f.side,f.level+1,2*f.x,2*f.y,A.fullpath),at.push(Ot),f.x==ut&&mt<=A.tileResolution||(Ot=new pt([h[0]*Tt+h[3]*Et,h[1]*wt+h[4]*dt,h[2]*_t+h[5]*ht,h[3],h[4],h[5],h[3]*wt+h[6]*dt,h[4]*ot+h[7]*gt,h[5]*_t+h[8]*ht,h[0]*Tt+h[6]*Et,h[1]*ot+h[7]*gt,h[2]*_t+h[8]*ht],f.side,f.level+1,2*f.x+1,2*f.y,A.fullpath),at.push(Ot)),!(f.x==ut&&mt<=A.tileResolution)&&!(f.y==ut&&mt<=A.tileResolution)&&(Ot=new pt([h[0]*Tt+h[6]*Et,h[1]*ot+h[7]*gt,h[2]*_t+h[8]*ht,h[3]*wt+h[6]*dt,h[4]*ot+h[7]*gt,h[5]*_t+h[8]*ht,h[6],h[7],h[8],h[9]*Tt+h[6]*Et,h[10]*wt+h[7]*dt,h[11]*_t+h[8]*ht],f.side,f.level+1,2*f.x+1,2*f.y+1,A.fullpath),at.push(Ot)),f.y==ut&&mt<=A.tileResolution||(Ot=new pt([h[0]*wt+h[9]*dt,h[1]*ot+h[10]*gt,h[2]*_t+h[11]*ht,h[0]*Tt+h[6]*Et,h[1]*ot+h[7]*gt,h[2]*_t+h[8]*ht,h[9]*Tt+h[6]*Et,h[10]*wt+h[7]*dt,h[11]*_t+h[8]*ht,h[9],h[10],h[11]],f.side,f.level+1,2*f.x,2*f.y+1,A.fullpath),at.push(Ot));for(var b=0;b<at.length;b++)x(u,at[b],J,S,K)}}}function xt(u,f,J){var S=Math.sin(f),K=Math.cos(f);return"x"==J?[u[0],K*u[1]+S*u[2],K*u[2]-S*u[1],u[3],K*u[4]+S*u[5],K*u[5]-S*u[4],u[6],K*u[7]+S*u[8],K*u[8]-S*u[7]]:"y"==J?[K*u[0]-S*u[2],u[1],K*u[2]+S*u[0],K*u[3]-S*u[5],u[4],K*u[5]+S*u[3],K*u[6]-S*u[8],u[7],K*u[8]+S*u[6]]:"z"==J?[K*u[0]+S*u[1],K*u[1]-S*u[0],u[2],K*u[3]+S*u[4],K*u[4]-S*u[3],u[5],K*u[6]+S*u[7],K*u[7]-S*u[6],u[8]]:void 0}function Wt(u){return[u[0],u[4],u[8],u[12],u[1],u[5],u[9],u[13],u[2],u[6],u[10],u[14],u[3],u[7],u[11],u[15]]}F.style.width=F.style.height="100%",vt.appendChild(F),this.init=function(u,f,J,S,K,h,Y,H){if(f===d&&(f="equirectangular"),"equirectangular"!=f&&"cubemap"!=f&&"multires"!=f)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(st=f,A=u,zt=J,It=H||{},v){if(B&&(n.detachShader(v,B),n.deleteShader(B)),lt&&(n.detachShader(v,lt),n.deleteShader(lt)),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),v.texture&&n.deleteTexture(v.texture),v.nodeCache)for(var q=0;q<v.nodeCache.length;q++)n.deleteTexture(v.nodeCache[q].texture);n.deleteProgram(v),v=d}X=d;var G,rt,Zt=!1;if("cubemap"==st)for(G=0;G<6;G++)A[G].width>0?(rt===d&&(rt=A[G].width),rt!=A[G].width&&console.log("Cube faces have inconsistent widths: "+rt+" vs. "+A[G].width)):Zt=!0;function St(b){if(Zt){var it=b*b*4,Ft=new Uint8ClampedArray(it),V=H.backgroundColor?H.backgroundColor:[0,0,0];V[0]*=255,V[1]*=255,V[2]*=255;for(var z=0;z<it;z++)Ft[z++]=V[0],Ft[z++]=V[1],Ft[z++]=V[2];var O=new ImageData(Ft,b,b);for(G=0;G<6;G++)0==A[G].width&&(A[G]=O)}}if("cubemap"==st&&rt&rt-1&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(n||(n=F.getContext("experimental-webgl",{alpha:!1,depth:!1})),n&&1286==n.getError()&&Xt()),n||!("multires"==st&&A.hasOwnProperty("fallbackPath")||"cubemap"==st)||!("WebkitAppearance"in L.documentElement.style)&&!navigator.userAgent.match(/Trident.*rv[ :]*11\./)&&-1===navigator.appVersion.indexOf("MSIE 10")){if(!n)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};"cubemap"==st&&St(rt),A.fullpath=A.basePath?A.basePath+A.path:A.path,A.invTileResolution=1/A.tileResolution;var wt=[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1];for(Yt=[],G=0;G<6;G++)Yt[G]=wt.slice(12*G,12*G+12),wt=[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1];var dt=0;if("equirectangular"==st){if(dt=n.getParameter(n.MAX_TEXTURE_SIZE),Math.max(A.width/2,A.height)>dt)throw console.log("Error: The image is too big; it's "+A.width+"px wide, but this device's maximum supported size is "+2*dt+"px."),{type:"webgl size error",width:A.width,maxWidth:2*dt}}else if("cubemap"==st&&rt>n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+rt+"px wide, but this device's maximum supported size is "+dt+"px."),{type:"webgl size error",width:rt,maxWidth:dt};H!==d&&(H.horizonPitch!==d||H.horizonRoll!==d)&&(X=[H.horizonPitch==d?0:H.horizonPitch,H.horizonRoll==d?0:H.horizonRoll]);var at=n.TEXTURE_2D;if(n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),n.getShaderPrecisionFormat){var bt=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);bt&&bt.precision<1&&(Q=Q.replace("highp","mediump"))}B=n.createShader(n.VERTEX_SHADER);var Ot=t;"multires"==st&&(Ot=g),n.shaderSource(B,Ot),n.compileShader(B),lt=n.createShader(n.FRAGMENT_SHADER);var Tt=tt;"cubemap"==st?(at=n.TEXTURE_CUBE_MAP,Tt=e):"multires"==st&&(Tt=kt),n.shaderSource(lt,Tt),n.compileShader(lt),v=n.createProgram(),n.attachShader(v,B),n.attachShader(v,lt),n.linkProgram(v),n.getShaderParameter(B,n.COMPILE_STATUS)||console.log(n.getShaderInfoLog(B)),n.getShaderParameter(lt,n.COMPILE_STATUS)||console.log(n.getShaderInfoLog(lt)),n.getProgramParameter(v,n.LINK_STATUS)||console.log(n.getProgramInfoLog(v)),n.useProgram(v),v.drawInProgress=!1;var ot=H.backgroundColor?H.backgroundColor:[0,0,0];if(n.clearColor(ot[0],ot[1],ot[2],1),n.clear(n.COLOR_BUFFER_BIT),v.texCoordLocation=n.getAttribLocation(v,"a_texCoord"),n.enableVertexAttribArray(v.texCoordLocation),"multires"!=st){if(Ct||(Ct=n.createBuffer()),n.bindBuffer(n.ARRAY_BUFFER,Ct),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),n.STATIC_DRAW),n.vertexAttribPointer(v.texCoordLocation,2,n.FLOAT,!1,0,0),v.aspectRatio=n.getUniformLocation(v,"u_aspectRatio"),n.uniform1f(v.aspectRatio,n.drawingBufferWidth/n.drawingBufferHeight),v.psi=n.getUniformLocation(v,"u_psi"),v.theta=n.getUniformLocation(v,"u_theta"),v.f=n.getUniformLocation(v,"u_f"),v.h=n.getUniformLocation(v,"u_h"),v.v=n.getUniformLocation(v,"u_v"),v.vo=n.getUniformLocation(v,"u_vo"),v.rot=n.getUniformLocation(v,"u_rot"),n.uniform1f(v.h,S/(2*Math.PI)),n.uniform1f(v.v,K/Math.PI),n.uniform1f(v.vo,h/Math.PI*2),"equirectangular"==st&&(v.backgroundColor=n.getUniformLocation(v,"u_backgroundColor"),n.uniform4fv(v.backgroundColor,ot.concat([1]))),v.texture=n.createTexture(),n.bindTexture(at,v.texture),"cubemap"==st)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A[1]),n.texImage2D(n.TEXTURE_CUBE_MAP_NEGATIVE_X,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A[3]),n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_Y,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A[4]),n.texImage2D(n.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A[5]),n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_Z,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A[0]),n.texImage2D(n.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A[2]);else if(A.width<=dt)n.uniform1i(n.getUniformLocation(v,"u_splitImage"),0),n.texImage2D(at,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A);else{n.uniform1i(n.getUniformLocation(v,"u_splitImage"),1);var _t=L.createElement("canvas");_t.width=A.width/2,_t.height=A.height;var Et=_t.getContext("2d");Et.drawImage(A,0,0);var gt=Et.getImageData(0,0,A.width/2,A.height);n.texImage2D(at,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,gt),v.texture2=n.createTexture(),n.activeTexture(n.TEXTURE1),n.bindTexture(at,v.texture2),n.uniform1i(n.getUniformLocation(v,"u_image1"),1),Et.drawImage(A,-A.width/2,0),gt=Et.getImageData(0,0,A.width/2,A.height),n.texImage2D(at,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,gt),n.texParameteri(at,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(at,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(at,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(at,n.TEXTURE_MAG_FILTER,n.LINEAR),n.activeTexture(n.TEXTURE0)}n.texParameteri(at,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(at,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(at,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(at,n.TEXTURE_MAG_FILTER,n.LINEAR)}else v.vertPosLocation=n.getAttribLocation(v,"a_vertCoord"),n.enableVertexAttribArray(v.vertPosLocation),Dt||(Dt=n.createBuffer()),N||(N=n.createBuffer()),qt||(qt=n.createBuffer()),n.bindBuffer(n.ARRAY_BUFFER,N),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,qt),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),n.STATIC_DRAW),v.perspUniform=n.getUniformLocation(v,"u_perspMatrix"),v.cubeUniform=n.getUniformLocation(v,"u_cubeMatrix"),v.level=-1,v.currentNodes=[],v.nodeCache=[],v.nodeCacheTimestamp=0;var ht=n.getError();if(0!==ht)throw console.log("Error: Something went wrong with WebGL!",ht),{type:"webgl error"};Y()}else{var Bt;y&&vt.removeChild(y),(y=L.createElement("div")).className="pnlm-world",Bt=A.basePath?A.basePath+A.fallbackPath:A.fallbackPath;var Ut=["f","r","b","l","u","d"],Lt=0,ut=function(){var b=L.createElement("canvas");b.className="pnlm-face pnlm-"+Ut[this.side]+"face",y.appendChild(b);var it=b.getContext("2d");b.style.width=this.width+4+"px",b.style.height=this.height+4+"px",b.width=this.width+4,b.height=this.height+4,it.drawImage(this,2,2);var z,O,Ft=it.getImageData(0,0,b.width,b.height),V=Ft.data;for(z=2;z<b.width-2;z++)for(O=0;O<4;O++)V[4*(z+b.width)+O]=V[4*(z+2*b.width)+O],V[4*(z+b.width*(b.height-2))+O]=V[4*(z+b.width*(b.height-3))+O];for(z=2;z<b.height-2;z++)for(O=0;O<4;O++)V[4*(z*b.width+1)+O]=V[4*(z*b.width+2)+O],V[4*((z+1)*b.width-2)+O]=V[4*((z+1)*b.width-3)+O];for(O=0;O<4;O++)V[4*(b.width+1)+O]=V[4*(2*b.width+2)+O],V[4*(2*b.width-2)+O]=V[4*(3*b.width-3)+O],V[4*(b.width*(b.height-2)+1)+O]=V[4*(b.width*(b.height-3)+2)+O],V[4*(b.width*(b.height-1)-2)+O]=V[4*(b.width*(b.height-2)-3)+O];for(z=1;z<b.width-1;z++)for(O=0;O<4;O++)V[4*z+O]=V[4*(z+b.width)+O],V[4*(z+b.width*(b.height-1))+O]=V[4*(z+b.width*(b.height-2))+O];for(z=1;z<b.height-1;z++)for(O=0;O<4;O++)V[z*b.width*4+O]=V[4*(z*b.width+1)+O],V[4*((z+1)*b.width-1)+O]=V[4*((z+1)*b.width-2)+O];for(O=0;O<4;O++)V[O]=V[4*(b.width+1)+O],V[4*(b.width-1)+O]=V[4*(2*b.width-2)+O],V[b.width*(b.height-1)*4+O]=V[4*(b.width*(b.height-2)+1)+O],V[4*(b.width*b.height-1)+O]=V[4*(b.width*(b.height-1)-2)+O];it.putImageData(Ft,0,0),mt.call(this)},mt=function(){this.width>0?(j===d&&(j=this.width),j!=this.width&&console.log("Fallback faces have inconsistent widths: "+j+" vs. "+this.width)):Zt=!0,6==++Lt&&(j=this.width,vt.appendChild(y),Y())};for(Zt=!1,G=0;G<6;G++){var ft=new Image;ft.crossOrigin=It.crossOrigin?It.crossOrigin:"anonymous",ft.side=G,ft.onload=ut,ft.onerror=mt,ft.src="multires"==st?Bt.replace("%s",Ut[G])+"."+A.extension:A[G].src}St(j)}},this.destroy=function(){if(vt!==d&&(F!==d&&vt.contains(F)&&vt.removeChild(F),y!==d&&vt.contains(y)&&vt.removeChild(y)),n){var u=n.getExtension("WEBGL_lose_context");u&&u.loseContext()}},this.resize=function(){var u=Rt.devicePixelRatio||1;F.width=F.clientWidth*u,F.height=F.clientHeight*u,n&&(1286==n.getError()&&Xt(),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),"multires"!=st&&n.uniform1f(v.aspectRatio,F.clientWidth/F.clientHeight))},this.resize(),this.setPose=function(u,f){X=[u,f]},this.render=function(u,f,J,S){var K,h,Y,H=0;if(S===d&&(S={}),S.roll&&(H=S.roll),X!==d){var q=X[0],G=X[1],Zt=u,rt=f,St=Math.cos(G)*Math.sin(u)*Math.sin(q)+Math.cos(u)*(Math.cos(q)*Math.cos(f)+Math.sin(G)*Math.sin(q)*Math.sin(f)),Bt=-Math.sin(u)*Math.sin(G)+Math.cos(u)*Math.cos(G)*Math.sin(f),Ut=Math.cos(G)*Math.cos(q)*Math.sin(u)+Math.cos(u)*(-Math.cos(f)*Math.sin(q)+Math.cos(q)*Math.sin(G)*Math.sin(f));u=Math.asin(Math.max(Math.min(Ut,1),-1)),f=Math.atan2(Bt,St);var Lt=[Math.cos(Zt)*(Math.sin(G)*Math.sin(q)*Math.cos(rt)-Math.cos(q)*Math.sin(rt)),Math.cos(Zt)*Math.cos(G)*Math.cos(rt),Math.cos(Zt)*(Math.cos(q)*Math.sin(G)*Math.cos(rt)+Math.sin(rt)*Math.sin(q))],ut=[-Math.cos(u)*Math.sin(f),Math.cos(u)*Math.cos(f)],mt=Math.acos(Math.max(Math.min((Lt[0]*ut[0]+Lt[1]*ut[1])/(Math.sqrt(Lt[0]*Lt[0]+Lt[1]*Lt[1]+Lt[2]*Lt[2])*Math.sqrt(ut[0]*ut[0]+ut[1]*ut[1])),1),-1));Lt[2]<0&&(mt=2*Math.PI-mt),H+=mt}if(n||"multires"!=st&&"cubemap"!=st){if("multires"!=st){var Ot=2*Math.atan(Math.tan(.5*J)/(n.drawingBufferWidth/n.drawingBufferHeight));K=1/Math.tan(.5*Ot),n.uniform1f(v.psi,f),n.uniform1f(v.theta,u),n.uniform1f(v.rot,H),n.uniform1f(v.f,K),!0===zt&&"equirectangular"==st&&(n.bindTexture(n.TEXTURE_2D,v.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,A)),n.drawArrays(n.TRIANGLES,0,6)}else{var Tt=function ee(u,f,J,S){var K=2*Math.atan(Math.tan(u/2)*n.drawingBufferHeight/n.drawingBufferWidth),h=1/Math.tan(K/2);return[h/f,0,0,0,0,h,0,0,0,0,(S+J)/(J-S),2*S*J/(J-S),0,0,-1,0]}(J,n.drawingBufferWidth/n.drawingBufferHeight,.1,100);!function Nt(u){for(var f=1;f<A.maxLevel&&n.drawingBufferWidth>A.tileResolution*Math.pow(2,f-1)*Math.tan(u/2)*.707;)f++;v.level=f}(J);var ot=[1,0,0,0,1,0,0,0,1];ot=xt(ot,-H,"z"),ot=xt(ot,-u,"x"),ot=function nt(u){return[u[0],u[1],u[2],0,u[3],u[4],u[5],0,u[6],u[7],u[8],0,0,0,0,1]}(ot=xt(ot,f,"y")),n.uniformMatrix4fv(v.perspUniform,!1,new Float32Array(Wt(Tt))),n.uniformMatrix4fv(v.cubeUniform,!1,new Float32Array(Wt(ot)));var _t=function Gt(u,f){return[u[0]*f[0],u[0]*f[1],u[0]*f[2],0,u[5]*f[4],u[5]*f[5],u[5]*f[6],0,u[10]*f[8],u[10]*f[9],u[10]*f[10],u[11],-f[8],-f[9],-f[10],0]}(Tt,ot);if(v.nodeCache.sort(jt),v.nodeCache.length>200&&v.nodeCache.length>v.currentNodes.length+50)for(var Et=v.nodeCache.splice(200,v.nodeCache.length-200),gt=0;gt<Et.length;gt++)n.deleteTexture(Et[gt].texture);v.currentNodes=[];var ht=["f","b","u","d","l","r"];for(Y=0;Y<6;Y++)x(_t,new pt(Yt[Y],ht[Y],1,0,0,A.fullpath),u,f,J);for(v.currentNodes.sort(At),h=Ht.length-1;h>=0;h--)-1===v.currentNodes.indexOf(Ht[h].node)&&(Ht[h].node.textureLoad=!1,Ht.splice(h,1));if(0===Ht.length)for(h=0;h<v.currentNodes.length;h++){var it=v.currentNodes[h];if(!it.texture&&!it.textureLoad){it.textureLoad=!0,setTimeout(yt,0,it);break}}!function ct(){if(!v.drawInProgress){v.drawInProgress=!0,n.clear(n.COLOR_BUFFER_BIT);for(var u=0;u<v.currentNodes.length;u++)v.currentNodes[u].textureLoaded>1&&(n.bindBuffer(n.ARRAY_BUFFER,Dt),n.bufferData(n.ARRAY_BUFFER,new Float32Array(v.currentNodes[u].vertices),n.STATIC_DRAW),n.vertexAttribPointer(v.vertPosLocation,3,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,N),n.vertexAttribPointer(v.texCoordLocation,2,n.FLOAT,!1,0,0),n.bindTexture(n.TEXTURE_2D,v.currentNodes[u].texture),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0));v.drawInProgress=!1}}()}if(S.returnImage!==d)return F.toDataURL("image/png")}else{var ft={f:"translate3d(-"+(2+(Y=j/2))+"px, -"+(Y+2)+"px, -"+Y+"px)",b:"translate3d("+(Y+2)+"px, -"+(Y+2)+"px, "+Y+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(Y+2)+"px, -"+Y+"px, "+(Y+2)+"px) rotateX(270deg)",d:"translate3d(-"+(Y+2)+"px, "+Y+"px, -"+(Y+2)+"px) rotateX(90deg)",l:"translate3d(-"+Y+"px, -"+(Y+2)+"px, "+(Y+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+Y+"px, -"+(Y+2)+"px, -"+(Y+2)+"px) rotateY(270deg)"},wt=(K=1/Math.tan(J/2))*F.clientWidth/2+"px",dt="perspective("+wt+") translateZ("+wt+") rotateX("+u+"rad) rotateY("+f+"rad) ",at=Object.keys(ft);for(h=0;h<6;h++){var bt=y.querySelector(".pnlm-"+at[h]+"face");bt&&(bt.style.webkitTransform=dt+ft[at[h]],bt.style.transform=dt+ft[at[h]])}}},this.isLoading=function(){if(n&&"multires"==st)for(var u=0;u<v.currentNodes.length;u++)if(!v.currentNodes[u].textureLoaded)return!0;return!1},this.getCanvas=function(){return F};var Ht=[],Mt=function(){var J,u=4,f={};function S(){var H=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=J||"anonymous";var q=function(){H.image.width>0&&H.image.height>0?(function ie(u,f){n.bindTexture(n.TEXTURE_2D,f),n.texImage2D(n.TEXTURE_2D,0,n.RGB,n.RGB,n.UNSIGNED_BYTE,u),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.bindTexture(n.TEXTURE_2D,null)}(H.image,H.texture),H.callback(H.texture,!0)):H.callback(H.texture,!1),function h(H){if(Ht.length){var q=Ht.shift();H.loadTexture(q.src,q.texture,q.callback)}else f[u++]=H}(H)};this.image.addEventListener("load",q),this.image.addEventListener("error",q)}function K(H,q,G,Zt){this.node=H,this.src=q,this.texture=G,this.callback=Zt}S.prototype.loadTexture=function(H,q,G){this.texture=q,this.callback=G,this.image.src=H};for(var Y=0;Y<u;Y++)f[Y]=new S;return function(H,q,G,Zt){J=Zt;var rt=n.createTexture();return u?f[--u].loadTexture(q,rt,G):Ht.push(new K(H,q,rt,G)),rt}}();function yt(u){Mt(u,u.path+"."+A.extension,function(f,J){u.texture=f,u.textureLoaded=J?2:1},It.crossOrigin)}function Vt(u,f){var J=function D(u,f){return[u[0]*f[0]+u[1]*f[1]+u[2]*f[2],u[4]*f[0]+u[5]*f[1]+u[6]*f[2],u[11]+u[8]*f[0]+u[9]*f[1]+u[10]*f[2],1/(u[12]*f[0]+u[13]*f[1]+u[14]*f[2])]}(u,f),S=J[0]*J[3],K=J[1]*J[3],h=J[2]*J[3],Y=[0,0,0];return S<-1&&(Y[0]=-1),S>1&&(Y[0]=1),K<-1&&(Y[1]=-1),K>1&&(Y[1]=1),(h<-1||h>1)&&(Y[2]=1),Y}function Xt(){console.log("Reducing canvas size due to error 1286!"),F.width=Math.round(F.width/2),F.height=Math.round(F.height/2)}}var t=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),g=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),Q=["precision highp float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image0;","uniform sampler2D u_image1;","uniform bool u_splitImage;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join("\n"),e=Q+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join("\n"),tt=Q+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else {","if(u_splitImage) {","if(coord.x < 0.0)","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","else","gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","} else {","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}","}","}"].join("\n"),kt=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function(vt,F,v,n){return new w(vt,F,v,n)}}}(window,document)},52633:()=>{window.pannellum=function(Rt,L,d){"use strict";function w(t,g){var e,tt,kt,X,Ct,Dt,At,pt,x,Q=this,vt=!1,F=Date.now(),v=0,n=0,B=-1,lt=0,j=0,y=new Array(10),Yt=!1,A=!1,zt=!1,N={yaw:0,pitch:0,hfov:0},qt=!1,It=!1,jt=0,ct=0,P={},et={},xt=[],nt=!1,Wt=1e-6,ee=!1,ie=!1,Ht={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:d,maxPitch:d,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:d,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function ht(i){return i<.5?2*i*i:(4-2*i)*i-1},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."}};(t="string"==typeof t?L.getElementById(t):t).classList.add("pnlm-container"),t.tabIndex=0;var Mt=L.createElement("div");Mt.className="pnlm-ui",t.appendChild(Mt);var yt=L.createElement("div");yt.className="pnlm-render-container",t.appendChild(yt);var Nt=L.createElement("div");Nt.className="pnlm-dragfix",Mt.appendChild(Nt);var Gt=L.createElement("span");Gt.className="pnlm-about-msg",Gt.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a>',Mt.appendChild(Gt),Nt.addEventListener("contextmenu",function H(i){var a=q(i);Gt.style.left=a.x+"px",Gt.style.top=a.y+"px",clearTimeout(H.t1),clearTimeout(H.t2),Gt.style.display="block",Gt.style.opacity=1,H.t1=setTimeout(function(){Gt.style.opacity=0},2e3),H.t2=setTimeout(function(){Gt.style.display="none"},2500),i.preventDefault()});var D={},Vt=L.createElement("div");Vt.className="pnlm-sprite pnlm-hot-spot-debug-indicator",Mt.appendChild(Vt),D.container=L.createElement("div"),D.container.className="pnlm-panorama-info",D.title=L.createElement("div"),D.title.className="pnlm-title-box",D.container.appendChild(D.title),D.author=L.createElement("div"),D.author.className="pnlm-author-box",D.container.appendChild(D.author),Mt.appendChild(D.container),D.load={},D.load.box=L.createElement("div"),D.load.box.className="pnlm-load-box",D.load.boxp=L.createElement("p"),D.load.box.appendChild(D.load.boxp),D.load.lbox=L.createElement("div"),D.load.lbox.className="pnlm-lbox",D.load.lbox.innerHTML='<div class="pnlm-loading"></div>',D.load.box.appendChild(D.load.lbox),D.load.lbar=L.createElement("div"),D.load.lbar.className="pnlm-lbar",D.load.lbarFill=L.createElement("div"),D.load.lbarFill.className="pnlm-lbar-fill",D.load.lbar.appendChild(D.load.lbarFill),D.load.box.appendChild(D.load.lbar),D.load.msg=L.createElement("p"),D.load.msg.className="pnlm-lmsg",D.load.box.appendChild(D.load.msg),Mt.appendChild(D.load.box),D.errorMsg=L.createElement("div"),D.errorMsg.className="pnlm-error-msg pnlm-info-box",Mt.appendChild(D.errorMsg);var k={};k.container=L.createElement("div"),k.container.className="pnlm-controls-container",Mt.appendChild(k.container),k.load=L.createElement("div"),k.load.className="pnlm-load-button",k.load.addEventListener("click",function(){c(),C()}),Mt.appendChild(k.load),k.zoom=L.createElement("div"),k.zoom.className="pnlm-zoom-controls pnlm-controls",k.zoomIn=L.createElement("div"),k.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",k.zoomIn.addEventListener("click",function m(){X&&(l(e.hfov-5),it())}),k.zoom.appendChild(k.zoomIn),k.zoomOut=L.createElement("div"),k.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",k.zoomOut.addEventListener("click",function o(){X&&(l(e.hfov+5),it())}),k.zoom.appendChild(k.zoomOut),k.container.appendChild(k.zoom),k.fullscreen=L.createElement("div"),k.fullscreen.addEventListener("click",E),k.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(L.fullscreenEnabled||L.mozFullScreenEnabled||L.webkitFullscreenEnabled||L.msFullscreenEnabled)&&k.container.appendChild(k.fullscreen),k.orientation=L.createElement("div"),k.orientation.addEventListener("click",function(i){It?Kt():fe()}),k.orientation.addEventListener("mousedown",function(i){i.stopPropagation()}),k.orientation.addEventListener("touchstart",function(i){i.stopPropagation()}),k.orientation.addEventListener("pointerdown",function(i){i.stopPropagation()}),k.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var Xt=!1;Rt.DeviceOrientationEvent&&"https:"==location.protocol&&navigator.userAgent.toLowerCase().indexOf("mobi")>=0&&(k.container.appendChild(k.orientation),Xt=!0);var u=L.createElement("div");function f(){var i=L.createElement("div");if(i.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1!=i.getElementsByTagName("i").length){var a,_;if(pt=e.hfov,x=e.pitch,"cubemap"==e.type){for(Ct=[],a=0;a<6;a++)Ct.push(new Image),Ct[a].crossOrigin=e.crossOrigin;D.load.lbox.style.display="block",D.load.lbar.style.display="none"}else if("multires"==e.type){var T=JSON.parse(JSON.stringify(e.multiRes));e.basePath&&e.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(e.multiRes.basePath)?T.basePath=e.basePath+e.multiRes.basePath:e.multiRes.basePath?T.basePath=e.multiRes.basePath:e.basePath&&(T.basePath=e.basePath),Ct=T}else if(!0===e.dynamic)Ct=e.panorama;else{if(e.panorama===d)return void h(e.strings.noPanoramaError);Ct=new Image}if("cubemap"==e.type){var M=6,I=function(){0==--M&&S()},W=function(U){var $=L.createElement("a");$.href=U.target.src,$.textContent=$.href,h(e.strings.fileAccessError.replace("%s",$.outerHTML))};for(a=0;a<Ct.length;a++)"null"==(_=e.cubeMap[a])?(console.log("Will use background instead of missing cubemap face "+a),I()):(e.basePath&&!J(_)&&(_=e.basePath+_),Ct[a].onload=I,Ct[a].onerror=W,Ct[a].src=ae(_))}else if("multires"==e.type)S();else if(_="",e.basePath&&(_=e.basePath),!0!==e.dynamic){_=J(e.panorama)?e.panorama:_+e.panorama,Ct.onload=function(){Rt.URL.revokeObjectURL(this.src),S()};var Z=new XMLHttpRequest;Z.onloadend=function(){if(200!=Z.status){var U=L.createElement("a");U.href=_,U.textContent=U.href,h(e.strings.fileAccessError.replace("%s",U.outerHTML))}(function K(i){var a=new FileReader;a.addEventListener("loadend",function(){var _=a.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var T=_.indexOf("\xff\xc2");(T<0||T>65536)&&h(e.strings.iOS8WebGLError)}var M=_.indexOf("<x:xmpmeta");if(M>-1&&!0!==e.ignoreGPanoXMP){var I=_.substring(M,_.indexOf("</x:xmpmeta>")+12),W=function(U){var $;return I.indexOf(U+'="')>=0?$=($=I.substring(I.indexOf(U+'="')+U.length+2)).substring(0,$.indexOf('"')):I.indexOf(U+">")>=0&&($=($=I.substring(I.indexOf(U+">")+U.length+1)).substring(0,$.indexOf("<"))),$!==d?Number($):null},Z={fullWidth:W("GPano:FullPanoWidthPixels"),croppedWidth:W("GPano:CroppedAreaImageWidthPixels"),fullHeight:W("GPano:FullPanoHeightPixels"),croppedHeight:W("GPano:CroppedAreaImageHeightPixels"),topPixels:W("GPano:CroppedAreaTopPixels"),heading:W("GPano:PoseHeadingDegrees"),horizonPitch:W("GPano:PosePitchDegrees"),horizonRoll:W("GPano:PoseRollDegrees")};null!==Z.fullWidth&&null!==Z.croppedWidth&&null!==Z.fullHeight&&null!==Z.croppedHeight&&null!==Z.topPixels&&(xt.indexOf("haov")<0&&(e.haov=Z.croppedWidth/Z.fullWidth*360),xt.indexOf("vaov")<0&&(e.vaov=Z.croppedHeight/Z.fullHeight*180),xt.indexOf("vOffset")<0&&(e.vOffset=-180*((Z.topPixels+Z.croppedHeight/2)/Z.fullHeight-.5)),null!==Z.heading&&xt.indexOf("northOffset")<0&&(e.northOffset=Z.heading,!1!==e.compass&&(e.compass=!0)),null!==Z.horizonPitch&&null!==Z.horizonRoll&&(xt.indexOf("horizonPitch")<0&&(e.horizonPitch=Z.horizonPitch),xt.indexOf("horizonRoll")<0&&(e.horizonRoll=Z.horizonRoll)))}Ct.src=Rt.URL.createObjectURL(i)}),a.readAsBinaryString!==d?a.readAsBinaryString(i):a.readAsText(i)})(this.response),D.load.msg.innerHTML=""},Z.onprogress=function(U){var Qt,Jt,Pt;U.lengthComputable?(D.load.lbarFill.style.width=U.loaded/U.total*100+"%",U.total>1e6?(Qt="MB",Jt=(U.loaded/1e6).toFixed(2),Pt=(U.total/1e6).toFixed(2)):U.total>1e3?(Qt="kB",Jt=(U.loaded/1e3).toFixed(1),Pt=(U.total/1e3).toFixed(1)):(Qt="B",Jt=U.loaded,Pt=U.total),D.load.msg.innerHTML=Jt+" / "+Pt+" "+Qt):(D.load.lbox.style.display="block",D.load.lbar.style.display="none")};try{Z.open("GET",_,!0)}catch{h(e.strings.malformedURLError)}Z.responseType="blob",Z.setRequestHeader("Accept","image/*,*/*;q=0.9"),Z.withCredentials="use-credentials"===e.crossOrigin,Z.send()}e.draggable&&Mt.classList.add("pnlm-grab"),Mt.classList.remove("pnlm-grabbing"),nt=!0===e.dynamicUpdate,e.dynamic&&nt&&(Ct=e.panorama,S())}else h()}function J(i){return new RegExp("^(?:[a-z]+:)?//","i").test(i)||"/"==i[0]||"blob:"==i.slice(0,5)}function S(){tt||(tt=new libpannellum.renderer(yt)),zt||(zt=!0,Nt.addEventListener("mousedown",G,!1),L.addEventListener("mousemove",St,!1),L.addEventListener("mouseup",Bt,!1),e.mouseZoom&&(Mt.addEventListener("mousewheel",bt,!1),Mt.addEventListener("DOMMouseScroll",bt,!1)),e.doubleClickZoom&&Nt.addEventListener("dblclick",Zt,!1),t.addEventListener("mozfullscreenchange",r,!1),t.addEventListener("webkitfullscreenchange",r,!1),t.addEventListener("msfullscreenchange",r,!1),t.addEventListener("fullscreenchange",r,!1),Rt.addEventListener("resize",b,!1),Rt.addEventListener("orientationchange",b,!1),e.disableKeyboardCtrl||(t.addEventListener("keydown",Ot,!1),t.addEventListener("keyup",ot,!1),t.addEventListener("blur",Tt,!1)),L.addEventListener("mouseleave",Bt,!1),""===L.documentElement.style.pointerAction&&""===L.documentElement.style.touchAction?(Nt.addEventListener("pointerdown",wt,!1),Nt.addEventListener("pointermove",dt,!1),Nt.addEventListener("pointerup",at,!1),Nt.addEventListener("pointerleave",at,!1)):(Nt.addEventListener("touchstart",Ut,!1),Nt.addEventListener("touchmove",Lt,!1),Nt.addEventListener("touchend",ut,!1)),Rt.navigator.pointerEnabled&&(t.style.touchAction="none")),function ue(){try{var i={};e.horizonPitch!==d&&(i.horizonPitch=e.horizonPitch*Math.PI/180),e.horizonRoll!==d&&(i.horizonRoll=e.horizonRoll*Math.PI/180),e.backgroundColor!==d&&(i.backgroundColor=e.backgroundColor),tt.init(Ct,e.type,e.dynamic,e.haov*Math.PI/180,e.vaov*Math.PI/180,e.vOffset*Math.PI/180,de,i),!0!==e.dynamic&&(Ct=d)}catch(a){if("webgl error"==a.type||"no webgl"==a.type)h();else{if("webgl size error"!=a.type)throw h(e.strings.unknownError),a;h(e.strings.textureSizeError.replace("%s",a.width).replace("%s",a.maxWidth))}}}(),l(e.hfov),setTimeout(function(){},500)}function h(i){i===d&&(i=e.strings.genericWebGLError),D.errorMsg.innerHTML="<p>"+i+"</p>",k.load.style.display="none",D.load.box.style.display="none",D.errorMsg.style.display="table",A=!0,X=d,yt.style.display="none",$t("error",i)}function q(i){var a=t.getBoundingClientRect(),_={};return _.x=(i.clientX||i.pageX)-a.left,_.y=(i.clientY||i.pageY)-a.top,_}function G(i){if(i.preventDefault(),t.focus(),X&&e.draggable){var a=q(i);if(e.hotSpotDebug){var _=rt(i);console.log("Pitch: "+_[0]+", Yaw: "+_[1]+", Center Pitch: "+e.pitch+", Center Yaw: "+e.yaw+", HFOV: "+e.hfov)}s(),Kt(),e.roll=0,N.hfov=0,vt=!0,F=Date.now(),v=a.x,n=a.y,lt=e.yaw,j=e.pitch,Mt.classList.add("pnlm-grabbing"),Mt.classList.remove("pnlm-grab"),$t("mousedown",i),it()}}function Zt(i){if(e.minHfov===e.hfov)Q.setHfov(pt,1e3);else{var a=rt(i);Q.lookAt(a[0],a[1],e.minHfov,1e3)}}function rt(i){var a=q(i),_=tt.getCanvas(),T=_.clientWidth,M=_.clientHeight,I=a.x/T*2-1,W=(1-a.y/M*2)*M/T,Z=1/Math.tan(e.hfov*Math.PI/360),U=Math.sin(e.pitch*Math.PI/180),$=Math.cos(e.pitch*Math.PI/180),Qt=Z*$-W*U,Jt=Math.sqrt(I*I+Qt*Qt),Pt=180*Math.atan((W*$+Z*U)/Jt)/Math.PI,te=180*Math.atan2(I/Jt,Qt/Jt)/Math.PI+e.yaw;return te<-180&&(te+=360),te>180&&(te-=360),[Pt,te]}function St(i){if(vt&&X){F=Date.now();var a=tt.getCanvas(),_=a.clientWidth,T=a.clientHeight,M=q(i),I=180*(Math.atan(v/_*2-1)-Math.atan(M.x/_*2-1))/Math.PI*e.hfov/90+lt;N.yaw=(I-e.yaw)%360*.2,e.yaw=I;var W=2*Math.atan(Math.tan(e.hfov/360*Math.PI)*T/_)*180/Math.PI,Z=180*(Math.atan(M.y/T*2-1)-Math.atan(n/T*2-1))/Math.PI*W/90+j;N.pitch=.2*(Z-e.pitch),e.pitch=Z}}function Bt(i){vt&&(vt=!1,Date.now()-F>15&&(N.pitch=N.yaw=0),Mt.classList.add("pnlm-grab"),Mt.classList.remove("pnlm-grabbing"),F=Date.now(),$t("mouseup",i))}function Ut(i){if(X&&e.draggable){s(),Kt(),e.roll=0,N.hfov=0;var a=q(i.targetTouches[0]);if(v=a.x,n=a.y,2==i.targetTouches.length){var _=q(i.targetTouches[1]);v+=.5*(_.x-a.x),n+=.5*(_.y-a.y),B=Math.sqrt((a.x-_.x)*(a.x-_.x)+(a.y-_.y)*(a.y-_.y))}vt=!0,F=Date.now(),lt=e.yaw,j=e.pitch,$t("touchstart",i),it()}}function Lt(i){if(e.draggable&&(i.preventDefault(),X&&(F=Date.now()),vt&&X)){var a=q(i.targetTouches[0]),_=a.x,T=a.y;if(2==i.targetTouches.length&&-1!=B){var M=q(i.targetTouches[1]);_+=.5*(M.x-a.x),T+=.5*(M.y-a.y);var I=Math.sqrt((a.x-M.x)*(a.x-M.x)+(a.y-M.y)*(a.y-M.y));l(e.hfov+.1*(B-I)),B=I}var W=e.hfov/360*e.touchPanSpeedCoeffFactor,Z=(v-_)*W+lt;N.yaw=(Z-e.yaw)%360*.2,e.yaw=Z;var U=(T-n)*W+j;N.pitch=.2*(U-e.pitch),e.pitch=U}}function ut(){vt=!1,Date.now()-F>150&&(N.pitch=N.yaw=0),B=-1,F=Date.now(),$t("touchend",event)}u.className="pnlm-compass pnlm-controls pnlm-control",Mt.appendChild(u),oe(g.firstScene?g.firstScene:g.default&&g.default.firstScene?g.default.firstScene:null),c(!0);var mt=[],ft=[];function wt(i){if("touch"==i.pointerType){if(!X||!e.draggable)return;mt.push(i.pointerId),ft.push({clientX:i.clientX,clientY:i.clientY}),i.targetTouches=ft,Ut(i),i.preventDefault()}}function dt(i){if("touch"==i.pointerType){if(!e.draggable)return;for(var a=0;a<mt.length;a++)if(i.pointerId==mt[a])return ft[a].clientX=i.clientX,ft[a].clientY=i.clientY,i.targetTouches=ft,Lt(i),void i.preventDefault()}}function at(i){if("touch"==i.pointerType){for(var a=!1,_=0;_<mt.length;_++)i.pointerId==mt[_]&&(mt[_]=d),mt[_]&&(a=!0);a||(mt=[],ft=[],ut()),i.preventDefault()}}function bt(i){!X||"fullscreenonly"==e.mouseZoom&&!Yt||(i.preventDefault(),s(),F=Date.now(),i.wheelDeltaY?(l(e.hfov-.05*i.wheelDeltaY),N.hfov=i.wheelDelta<0?1:-1):i.wheelDelta?(l(e.hfov-.05*i.wheelDelta),N.hfov=i.wheelDelta<0?1:-1):i.detail&&(l(e.hfov+1.5*i.detail),N.hfov=i.detail>0?1:-1),it())}function Ot(i){s(),F=Date.now(),Kt(),e.roll=0;var a=i.which||i.keycode;e.capturedKeyNumbers.indexOf(a)<0||(i.preventDefault(),27==a?Yt&&E():_t(a,!0))}function Tt(){for(var i=0;i<10;i++)y[i]=!1}function ot(i){var a=i.which||i.keycode;e.capturedKeyNumbers.indexOf(a)<0||(i.preventDefault(),_t(a,!1))}function _t(i,a){var _=!1;switch(i){case 109:case 189:case 17:case 173:y[0]!=a&&(_=!0),y[0]=a;break;case 107:case 187:case 16:case 61:y[1]!=a&&(_=!0),y[1]=a;break;case 38:y[2]!=a&&(_=!0),y[2]=a;break;case 87:y[6]!=a&&(_=!0),y[6]=a;break;case 40:y[3]!=a&&(_=!0),y[3]=a;break;case 83:y[7]!=a&&(_=!0),y[7]=a;break;case 37:y[4]!=a&&(_=!0),y[4]=a;break;case 65:y[8]!=a&&(_=!0),y[8]=a;break;case 39:y[5]!=a&&(_=!0),y[5]=a;break;case 68:y[9]!=a&&(_=!0),y[9]=a}_&&a&&(Dt=typeof performance<"u"&&performance.now()?performance.now():Date.now(),it())}function gt(i){var a=P[i],_=Math.min(1,Math.max((Date.now()-a.startTime)/1e3/(a.duration/1e3),0)),T=a.startPosition+e.animationTimingFunction(_)*(a.endPosition-a.startPosition);(a.endPosition>a.startPosition&&T>=a.endPosition||a.endPosition<a.startPosition&&T<=a.endPosition||a.endPosition===a.startPosition)&&(T=a.endPosition,N[i]=0,delete P[i]),e[i]=T}function b(){r("resize")}function it(){qt||(qt=!0,Ft())}function Ft(){if(!ie)if(function V(){var i;if(X){var a=tt.getCanvas();!1!==e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),i=e.yaw;var _=0;if(e.avoidShowingBackground){var M=e.hfov/2,I=180*Math.atan2(Math.tan(M/180*Math.PI),a.width/a.height)/Math.PI;e.vaov>e.haov?Math.min(Math.cos((e.pitch-M)/180*Math.PI),Math.cos((e.pitch+M)/180*Math.PI)):_=M*(1-Math.min(Math.cos((e.pitch-I)/180*Math.PI),Math.cos((e.pitch+I)/180*Math.PI)))}var Z=e.maxYaw-e.minYaw,U=-180,$=180;Z<360&&(U=e.minYaw+e.hfov/2+_,$=e.maxYaw-e.hfov/2-_,Z<e.hfov&&(U=$=(U+$)/2),e.yaw=Math.max(U,Math.min($,e.yaw))),!1===e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),!1!==e.autoRotate&&i!=e.yaw&&Dt!==d&&(e.autoRotate*=-1);var Qt=2*Math.atan(Math.tan(e.hfov/180*Math.PI*.5)/(a.width/a.height))/Math.PI*180,Jt=e.minPitch+Qt/2,Pt=e.maxPitch-Qt/2;e.maxPitch-e.minPitch<Qt&&(Jt=Pt=(Jt+Pt)/2),isNaN(Jt)&&(Jt=-90),isNaN(Pt)&&(Pt=90),e.pitch=Math.max(Jt,Math.min(Pt,e.pitch)),tt.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{roll:e.roll*Math.PI/180}),ce(),e.compass&&(u.style.transform="rotate("+(-e.yaw-e.northOffset)+"deg)",u.style.webkitTransform="rotate("+(-e.yaw-e.northOffset)+"deg)")}}(),At&&clearTimeout(At),vt||!0===It)requestAnimationFrame(Ft);else if(y[0]||y[1]||y[2]||y[3]||y[4]||y[5]||y[6]||y[7]||y[8]||y[9]||e.autoRotate||P.pitch||P.yaw||P.hfov||Math.abs(N.yaw)>.01||Math.abs(N.pitch)>.01||Math.abs(N.hfov)>.01)(function Et(){if(X){var M,i=!1,a=e.pitch,_=e.yaw,T=e.hfov;M=typeof performance<"u"&&performance.now()?performance.now():Date.now(),Dt===d&&(Dt=M);var I=(M-Dt)*e.hfov/1700;if(I=Math.min(I,1),y[0]&&!0===e.keyboardZoom&&(l(e.hfov+(.8*N.hfov+.5)*I),i=!0),y[1]&&!0===e.keyboardZoom&&(l(e.hfov+(.8*N.hfov-.2)*I),i=!0),(y[2]||y[6])&&(e.pitch+=(.8*N.pitch+.2)*I,i=!0),(y[3]||y[7])&&(e.pitch+=(.8*N.pitch-.2)*I,i=!0),(y[4]||y[8])&&(e.yaw+=(.8*N.yaw-.2)*I,i=!0),(y[5]||y[9])&&(e.yaw+=(.8*N.yaw+.2)*I,i=!0),i&&(F=Date.now()),e.autoRotate){if(M-Dt>.001){var W=(M-Dt)/1e3,Z=(N.yaw/W*I-.2*e.autoRotate)*W;Z=(-e.autoRotate>0?1:-1)*Math.min(Math.abs(e.autoRotate*W),Math.abs(Z)),e.yaw+=Z}e.autoRotateStopDelay&&(e.autoRotateStopDelay-=M-Dt,e.autoRotateStopDelay<=0&&(e.autoRotateStopDelay=!1,ct=e.autoRotate,e.autoRotate=0))}if(P.pitch&&(gt("pitch"),a=e.pitch),P.yaw&&(gt("yaw"),_=e.yaw),P.hfov&&(gt("hfov"),T=e.hfov),I>0&&!e.autoRotate){var U=1-e.friction;!y[4]&&!y[5]&&!y[8]&&!y[9]&&!P.yaw&&(e.yaw+=N.yaw*I*U),!y[2]&&!y[3]&&!y[6]&&!y[7]&&!P.pitch&&(e.pitch+=N.pitch*I*U),!y[0]&&!y[1]&&!P.hfov&&l(e.hfov+N.hfov*I*U)}if(Dt=M,I>0){N.yaw=.8*N.yaw+(e.yaw-_)/I*.2,N.pitch=.8*N.pitch+(e.pitch-a)/I*.2,N.hfov=.8*N.hfov+(e.hfov-T)/I*.2;var $=e.autoRotate?Math.abs(e.autoRotate):5;N.yaw=Math.min($,Math.max(N.yaw,-$)),N.pitch=Math.min($,Math.max(N.pitch,-$)),N.hfov=Math.min($,Math.max(N.hfov,-$))}y[0]&&y[1]&&(N.hfov=0),(y[2]||y[6])&&(y[3]||y[7])&&(N.pitch=0),(y[4]||y[8])&&(y[5]||y[9])&&(N.yaw=0)}})(),e.autoRotateInactivityDelay>=0&&ct&&Date.now()-F>e.autoRotateInactivityDelay&&!e.autoRotate&&(e.autoRotate=ct,Q.lookAt(x,d,pt,3e3)),requestAnimationFrame(Ft);else if(tt&&(tt.isLoading()||!0===e.dynamic&&nt))requestAnimationFrame(Ft);else{$t("animatefinished",{pitch:Q.getPitch(),yaw:Q.getYaw(),hfov:Q.getHfov()}),qt=!1,Dt=d;var i=e.autoRotateInactivityDelay-(Date.now()-F);i>0?At=setTimeout(function(){e.autoRotate=ct,Q.lookAt(x,d,pt,3e3),it()},i):e.autoRotateInactivityDelay>=0&&ct&&(e.autoRotate=ct,Q.lookAt(x,d,pt,3e3),it())}}function z(i,a,_,T){this.w=i,this.x=a,this.y=_,this.z=T}function le(i){var a=function _e(i,a,_){var T=function O(i,a,_){var T=[a?a*Math.PI/180/2:0,_?_*Math.PI/180/2:0,i?i*Math.PI/180/2:0],M=[Math.cos(T[0]),Math.cos(T[1]),Math.cos(T[2])],I=[Math.sin(T[0]),Math.sin(T[1]),Math.sin(T[2])];return new z(M[0]*M[1]*M[2]-I[0]*I[1]*I[2],I[0]*M[1]*M[2]-M[0]*I[1]*I[2],M[0]*I[1]*M[2]+I[0]*M[1]*I[2],M[0]*M[1]*I[2]+I[0]*I[1]*M[2])}(i,a,_);T=T.multiply(new z(Math.sqrt(.5),-Math.sqrt(.5),0,0));var M=Rt.orientation?-Rt.orientation*Math.PI/180/2:0;return T.multiply(new z(Math.cos(M),0,-Math.sin(M),0))}(i.alpha,i.beta,i.gamma).toEulerAngles();"number"==typeof It&&It<10?It+=1:10===It?(jt=a[2]/Math.PI*180+e.yaw,It=!0,requestAnimationFrame(Ft)):(e.pitch=a[0]/Math.PI*180,e.roll=-a[1]/Math.PI*180,e.yaw=-a[2]/Math.PI*180+jt)}function de(){if(e.sceneFadeDuration&&tt.fadeImg!==d){tt.fadeImg.style.opacity=0;var i=tt.fadeImg;delete tt.fadeImg,setTimeout(function(){yt.removeChild(i),$t("scenechangefadedone")},e.sceneFadeDuration)}u.style.display=e.compass?"inline":"none",function pe(){ee||(e.hotSpots?(e.hotSpots=e.hotSpots.sort(function(i,a){return i.pitch<a.pitch}),e.hotSpots.forEach(re)):e.hotSpots=[],ee=!0,ce())}(),D.load.box.style.display="none",kt!==d&&(yt.removeChild(kt),kt=d),X=!0,$t("load"),it()}function re(i){i.pitch=Number(i.pitch)||0,i.yaw=Number(i.yaw)||0;var a=L.createElement("div");a.className="pnlm-hotspot-base",a.className+=i.cssClass?" "+i.cssClass:" pnlm-hotspot pnlm-sprite pnlm-"+ne(i.type);var T,_=L.createElement("span");if(i.text&&(_.innerHTML=ne(i.text)),i.video){var M=L.createElement("video"),I=i.video;e.basePath&&!J(I)&&(I=e.basePath+I),M.src=ae(I),M.controls=!0,M.style.width=i.width+"px",yt.appendChild(a),_.appendChild(M)}else if(i.image){var W=i.image;e.basePath&&!J(W)&&(W=e.basePath+W),(T=L.createElement("a")).href=ae(i.URL?i.URL:W,!0),T.target="_blank",_.appendChild(T);var Z=L.createElement("img");Z.src=ae(W),Z.style.width=i.width+"px",Z.style.paddingTop="5px",yt.appendChild(a),T.appendChild(Z),_.style.maxWidth="initial"}else if(i.URL){if((T=L.createElement("a")).href=ae(i.URL,!0),i.attributes)for(var U in i.attributes)T.setAttribute(U,i.attributes[U]);else T.target="_blank";yt.appendChild(T),a.className+=" pnlm-pointer",_.className+=" pnlm-pointer",T.appendChild(a)}else i.sceneId&&(a.onclick=a.ontouchend=function(){return a.clicked||(a.clicked=!0,R(i.sceneId,i.targetPitch,i.targetYaw,i.targetHfov)),!1},a.className+=" pnlm-pointer",_.className+=" pnlm-pointer"),yt.appendChild(a);i.createTooltipFunc?i.createTooltipFunc(a,i.createTooltipArgs):(i.text||i.video||i.image)&&(a.classList.add("pnlm-tooltip"),a.appendChild(_),_.style.width=_.scrollWidth-20+"px",_.style.marginLeft=-(_.scrollWidth-a.offsetWidth)/2+"px",_.style.marginTop=-_.scrollHeight-12+"px"),i.clickHandlerFunc&&(a.addEventListener("click",function($){i.clickHandlerFunc($,i.clickHandlerArgs)},"false"),a.className+=" pnlm-pointer",_.className+=" pnlm-pointer"),i.div=a}function se(i){var a=Math.sin(i.pitch*Math.PI/180),_=Math.cos(i.pitch*Math.PI/180),T=Math.sin(e.pitch*Math.PI/180),M=Math.cos(e.pitch*Math.PI/180),I=Math.cos((-i.yaw+e.yaw)*Math.PI/180),W=a*T+_*I*M;if(i.yaw<=90&&i.yaw>-90&&W<=0||(i.yaw>90||i.yaw<=-90)&&W<=0)i.div.style.visibility="hidden";else{var Z=Math.sin((-i.yaw+e.yaw)*Math.PI/180),U=Math.tan(e.hfov*Math.PI/360);i.div.style.visibility="visible";var $=tt.getCanvas(),Qt=$.clientWidth,Jt=$.clientHeight,Pt=[-Qt/U*Z*_/W/2,-Qt/U*(a*M-_*I*T)/W/2],te=Math.sin(e.roll*Math.PI/180),ge=Math.cos(e.roll*Math.PI/180);(Pt=[Pt[0]*ge-Pt[1]*te,Pt[0]*te+Pt[1]*ge])[0]+=(Qt-i.div.offsetWidth)/2,Pt[1]+=(Jt-i.div.offsetHeight)/2;var he="translate("+Pt[0]+"px, "+Pt[1]+"px) translateZ(9999px) rotate("+e.roll+"deg)";i.scale&&(he+=" scale("+pt/e.hfov/W+")"),i.div.style.webkitTransform=he,i.div.style.MozTransform=he,i.div.style.transform=he}}function ce(){e.hotSpots.forEach(se)}function oe(i){e={};var a,_,T=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];for(a in xt=[],Ht)Ht.hasOwnProperty(a)&&(e[a]=Ht[a]);for(a in g.default)if(g.default.hasOwnProperty(a))if("strings"==a)for(_ in g.default.strings)g.default.strings.hasOwnProperty(_)&&(e.strings[_]=ne(g.default.strings[_]));else e[a]=g.default[a],T.indexOf(a)>=0&&xt.push(a);if(null!==i&&""!==i&&g.scenes&&g.scenes[i]){var M=g.scenes[i];for(a in M)if(M.hasOwnProperty(a))if("strings"==a)for(_ in M.strings)M.strings.hasOwnProperty(_)&&(e.strings[_]=ne(M.strings[_]));else e[a]=M[a],T.indexOf(a)>=0&&xt.push(a);e.scene=i}for(a in g)if(g.hasOwnProperty(a))if("strings"==a)for(_ in g.strings)g.strings.hasOwnProperty(_)&&(e.strings[_]=ne(g.strings[_]));else e[a]=g[a],T.indexOf(a)>=0&&xt.push(a)}function c(i){if((i=i||!1)&&"preview"in e){var a=e.preview;e.basePath&&!J(a)&&(a=e.basePath+a),(kt=L.createElement("div")).className="pnlm-preview-img",kt.style.backgroundImage="url('"+function Ce(i){return ae(i).replace(/"/g,"%22").replace(/'/g,"%27")}(a)+"')",yt.appendChild(kt)}var _=e.title,T=e.author;for(var M in i&&("previewTitle"in e&&(e.title=e.previewTitle),"previewAuthor"in e&&(e.author=e.previewAuthor)),e.hasOwnProperty("title")||(D.title.innerHTML=""),e.hasOwnProperty("author")||(D.author.innerHTML=""),!e.hasOwnProperty("title")&&!e.hasOwnProperty("author")&&(D.container.style.display="none"),k.load.innerHTML="<p>"+e.strings.loadButtonLabel+"</p>",D.load.boxp.innerHTML=e.strings.loadingLabel,e)if(e.hasOwnProperty(M))switch(M){case"title":D.title.innerHTML=ne(e[M]),D.container.style.display="inline";break;case"author":var I=ne(e[M]);if(e.authorURL){var W=L.createElement("a");W.href=ae(e.authorURL,!0),W.target="_blank",W.innerHTML=ne(e[M]),I=W.outerHTML}D.author.innerHTML=e.strings.bylineLabel.replace("%s",I),D.container.style.display="inline";break;case"fallback":var Z=L.createElement("a");Z.href=ae(e[M],!0),Z.target="_blank",Z.textContent="Click here to view this panorama in an alternative viewer.";var U=L.createElement("p");U.textContent="Your browser does not support WebGL.",U.appendChild(L.createElement("br")),U.appendChild(Z),D.errorMsg.innerHTML="",D.errorMsg.appendChild(U);break;case"hfov":l(Number(e[M]));break;case"autoLoad":!0===e[M]&&tt===d&&(D.load.box.style.display="inline",k.load.style.display="none",f());break;case"showZoomCtrl":k.zoom.style.display=e[M]&&0!=e.showControls?"block":"none";break;case"showFullscreenCtrl":k.fullscreen.style.display=e[M]&&0!=e.showControls&&("fullscreen"in L||"mozFullScreen"in L||"webkitIsFullScreen"in L||"msFullscreenElement"in L)?"block":"none";break;case"hotSpotDebug":Vt.style.display=e[M]?"block":"none";break;case"showControls":e[M]||(k.orientation.style.display="none",k.zoom.style.display="none",k.fullscreen.style.display="none");break;case"orientationOnByDefault":e[M]&&fe()}i&&(_?e.title=_:delete e.title,T?e.author=T:delete e.author)}function E(){if(X&&!A)if(Yt)L.exitFullscreen?L.exitFullscreen():L.mozCancelFullScreen?L.mozCancelFullScreen():L.webkitCancelFullScreen?L.webkitCancelFullScreen():L.msExitFullscreen&&L.msExitFullscreen();else try{t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen()}catch{}}function r(i){L.fullscreenElement||L.fullscreen||L.mozFullScreen||L.webkitIsFullScreen||L.msFullscreenElement?(k.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),Yt=!0):(k.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),Yt=!1),"resize"!==i&&$t("fullscreenchange",Yt),tt.resize(),l(e.hfov),it()}function p(i){var a=e.minHfov;if("multires"==e.type&&tt&&!e.multiResMinHfov&&(a=Math.min(a,tt.getCanvas().width/(e.multiRes.cubeResolution/90*.9))),a>e.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),e.hfov;var _=e.hfov;if(_=i<a?a:i>e.maxHfov?e.maxHfov:i,e.avoidShowingBackground&&tt){var T=tt.getCanvas();_=Math.min(_,360*Math.atan(Math.tan((e.maxPitch-e.minPitch)/360*Math.PI)/T.height*T.width)/Math.PI)}return _}function l(i){e.hfov=p(i),$t("zoomchange",e.hfov)}function s(){P={},ct=e.autoRotate?e.autoRotate:ct,e.autoRotate=!1}function C(){(function Y(){A&&(D.load.box.style.display="none",D.errorMsg.style.display="none",A=!1,yt.style.display="block",$t("errorcleared"))})(),X=!1,k.load.style.display="none",D.load.box.style.display="inline",f()}function R(i,a,_,T,M){var I,W,Z,U;if(X||(M=!0),X=!1,P={},e.sceneFadeDuration&&!M){var $=tt.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{returnImage:!0});if($!==d)return(I=new Image).className="pnlm-fade-img",I.style.transition="opacity "+e.sceneFadeDuration/1e3+"s",I.style.width="100%",I.style.height="100%",I.onload=function(){R(i,a,_,T,!0)},I.src=$,yt.appendChild(I),void(tt.fadeImg=I)}W="same"===a?e.pitch:a,Z="same"===_?e.yaw:"sameAzimuth"===_?e.yaw+(e.northOffset||0)-(g.scenes[i].northOffset||0):_,U="same"===T?e.hfov:T,function me(){var i=e.hotSpots;if(ee=!1,delete e.hotSpots,i)for(var a=0;a<i.length;a++){var _=i[a].div;if(_){for(;_.parentNode&&_.parentNode!=yt;)_=_.parentNode;yt.removeChild(_)}delete i[a].div}}(),oe(i),N.yaw=N.pitch=N.hfov=0,c(),W!==d&&(e.pitch=W),Z!==d&&(e.yaw=Z),U!==d&&(e.hfov=U),$t("scenechange",i),C()}function Kt(){Rt.removeEventListener("deviceorientation",le),k.orientation.classList.remove("pnlm-orientation-button-active"),It=!1}function fe(){"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(i){"granted"==i&&(It=1,Rt.addEventListener("deviceorientation",le),k.orientation.classList.add("pnlm-orientation-button-active"))}):(It=1,Rt.addEventListener("deviceorientation",le),k.orientation.classList.add("pnlm-orientation-button-active"))}function ne(i){return g.escapeHTML?String(i).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(i).split("\n").join("<br>")}function ae(i,a){try{var _=decodeURIComponent(function ve(i){return i.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(a,_){return"colon"===(_=_.toLowerCase())?":":"#"===_.charAt(0)?"x"===_.charAt(1)?String.fromCharCode(parseInt(_.substring(2),16)):String.fromCharCode(+_.substring(1)):""})}(i)).replace(/[^\w:]/g,"").toLowerCase()}catch{return"about:blank"}return 0===_.indexOf("javascript:")||0===_.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):a&&0===_.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):i}function $t(i){if(i in et)for(var a=et[i].length;a>0;a--)et[i][et[i].length-a].apply(null,[].slice.call(arguments,1))}z.prototype.multiply=function(i){return new z(this.w*i.w-this.x*i.x-this.y*i.y-this.z*i.z,this.x*i.w+this.w*i.x+this.y*i.z-this.z*i.y,this.y*i.w+this.w*i.y+this.z*i.x-this.x*i.z,this.z*i.w+this.w*i.z+this.x*i.y-this.y*i.x)},z.prototype.toEulerAngles=function(){return[Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Math.asin(2*(this.w*this.y-this.z*this.x)),Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z))]},this.isLoaded=function(){return Boolean(X)},this.getPitch=function(){return e.pitch},this.setPitch=function(i,a,_,T){return F=Date.now(),Math.abs(i-e.pitch)<=Wt?("function"==typeof _&&_(T),this):((a=a==d?1e3:Number(a))?(P.pitch={startTime:Date.now(),startPosition:e.pitch,endPosition:i,duration:a},"function"==typeof _&&setTimeout(function(){_(T)},a)):e.pitch=i,it(),this)},this.getPitchBounds=function(){return[e.minPitch,e.maxPitch]},this.setPitchBounds=function(i){return e.minPitch=Math.max(-90,Math.min(i[0],90)),e.maxPitch=Math.max(-90,Math.min(i[1],90)),this},this.getYaw=function(){return(e.yaw+540)%360-180},this.setYaw=function(i,a,_,T){return F=Date.now(),Math.abs(i-e.yaw)<=Wt?("function"==typeof _&&_(T),this):(i=(i+180)%360-180,(a=a==d?1e3:Number(a))?(e.yaw-i>180?i+=360:i-e.yaw>180&&(i-=360),P.yaw={startTime:Date.now(),startPosition:e.yaw,endPosition:i,duration:a},"function"==typeof _&&setTimeout(function(){_(T)},a)):e.yaw=i,it(),this)},this.getYawBounds=function(){return[e.minYaw,e.maxYaw]},this.setYawBounds=function(i){return e.minYaw=Math.max(-360,Math.min(i[0],360)),e.maxYaw=Math.max(-360,Math.min(i[1],360)),this},this.getHfov=function(){return e.hfov},this.setHfov=function(i,a,_,T){return F=Date.now(),Math.abs(i-e.hfov)<=Wt?("function"==typeof _&&_(T),this):((a=a==d?1e3:Number(a))?(P.hfov={startTime:Date.now(),startPosition:e.hfov,endPosition:p(i),duration:a},"function"==typeof _&&setTimeout(function(){_(T)},a)):l(i),it(),this)},this.getHfovBounds=function(){return[e.minHfov,e.maxHfov]},this.setHfovBounds=function(i){return e.minHfov=Math.max(0,i[0]),e.maxHfov=Math.max(0,i[1]),this},this.lookAt=function(i,a,_,T,M,I){return T=T==d?1e3:Number(T),i!==d&&Math.abs(i-e.pitch)>Wt&&(this.setPitch(i,T,M,I),M=d),a!==d&&Math.abs(a-e.yaw)>Wt&&(this.setYaw(a,T,M,I),M=d),_!==d&&Math.abs(_-e.hfov)>Wt&&(this.setHfov(_,T,M,I),M=d),"function"==typeof M&&M(I),this},this.getNorthOffset=function(){return e.northOffset},this.setNorthOffset=function(i){return e.northOffset=Math.min(360,Math.max(0,i)),it(),this},this.getHorizonRoll=function(){return e.horizonRoll},this.setHorizonRoll=function(i){return e.horizonRoll=Math.min(90,Math.max(-90,i)),tt.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),it(),this},this.getHorizonPitch=function(){return e.horizonPitch},this.setHorizonPitch=function(i){return e.horizonPitch=Math.min(90,Math.max(-90,i)),tt.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),it(),this},this.startAutoRotate=function(i,a){return a=a===d?x:a,e.autoRotate=i=i||ct||1,Q.lookAt(a,d,pt,3e3),it(),this},this.stopAutoRotate=function(){return ct=e.autoRotate?e.autoRotate:ct,e.autoRotate=!1,e.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){s(),N={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return tt},this.setUpdate=function(i){return nt=!0===i,tt===d?S():it(),this},this.mouseEventToCoords=function(i){return rt(i)},this.loadScene=function(i,a,_,T){return!1!==X&&R(i,a,_,T),this},this.getScene=function(){return e.scene},this.addScene=function(i,a){return g.scenes[i]=a,this},this.removeScene=function(i){return!(e.scene===i||!g.scenes.hasOwnProperty(i)||(delete g.scenes[i],0))},this.toggleFullscreen=function(){return E(),this},this.getConfig=function(){return e},this.getContainer=function(){return t},this.addHotSpot=function(i,a){if(a===d&&e.scene===d)e.hotSpots.push(i);else{var _=a!==d?a:e.scene;if(!g.scenes.hasOwnProperty(_))throw"Invalid scene ID!";g.scenes[_].hasOwnProperty("hotSpots")||(g.scenes[_].hotSpots=[],_==e.scene&&(e.hotSpots=g.scenes[_].hotSpots)),g.scenes[_].hotSpots.push(i)}return(a===d||e.scene==a)&&(re(i),X&&se(i)),this},this.removeHotSpot=function(i,a){if(a===d||e.scene==a){if(!e.hotSpots)return!1;for(var _=0;_<e.hotSpots.length;_++)if(e.hotSpots[_].hasOwnProperty("id")&&e.hotSpots[_].id===i){for(var T=e.hotSpots[_].div;T.parentNode!=yt;)T=T.parentNode;return yt.removeChild(T),delete e.hotSpots[_].div,e.hotSpots.splice(_,1),!0}}else{if(!g.scenes.hasOwnProperty(a))return!1;if(!g.scenes[a].hasOwnProperty("hotSpots"))return!1;for(var M=0;M<g.scenes[a].hotSpots.length;M++)if(g.scenes[a].hotSpots[M].hasOwnProperty("id")&&g.scenes[a].hotSpots[M].id===i)return g.scenes[a].hotSpots.splice(M,1),!0}},this.resize=function(){tt&&b()},this.isLoaded=function(){return X},this.isOrientationSupported=function(){return Xt||!1},this.stopOrientation=function(){Kt()},this.startOrientation=function(){Xt&&fe()},this.isOrientationActive=function(){return Boolean(It)},this.on=function(i,a){return et[i]=et[i]||[],et[i].push(a),this},this.off=function(i,a){if(!i)return et={},this;if(a){var _=et[i].indexOf(a);_>=0&&et[i].splice(_,1),0==et[i].length&&delete et[i]}else delete et[i];return this},this.destroy=function(){ie=!0,clearTimeout(At),tt&&tt.destroy(),zt&&(L.removeEventListener("mousemove",St,!1),L.removeEventListener("mouseup",Bt,!1),t.removeEventListener("mozfullscreenchange",r,!1),t.removeEventListener("webkitfullscreenchange",r,!1),t.removeEventListener("msfullscreenchange",r,!1),t.removeEventListener("fullscreenchange",r,!1),Rt.removeEventListener("resize",b,!1),Rt.removeEventListener("orientationchange",b,!1),t.removeEventListener("keydown",Ot,!1),t.removeEventListener("keyup",ot,!1),t.removeEventListener("blur",Tt,!1),L.removeEventListener("mouseleave",Bt,!1)),t.innerHTML="",t.classList.remove("pnlm-container")}}return{viewer:function(t,g){return new w(t,g)}}}(window,document)},81447:(Rt,L,d)=>{"use strict";d.d(L,{t:()=>t});var w=d(86889);class t{constructor(){(0,w.Z)(this,"lat",void 0),(0,w.Z)(this,"lon",void 0)}}},87753:(Rt,L,d)=>{"use strict";d.d(L,{H:()=>oe});var w=d(86889),t=d(64537),g=d(80418),Q=d(34511),F=(d(56239),d(52633),d(60656)),v=d(32607),n=d(94032),B=d(56707),lt=d(88692),j=d(20092),y=d(1379),Yt=d(9638),X=d(88659),A=d(83331),st=d(39665),zt=d(18033),Ct=d(56558),Dt=d(2940),N=d(99482),qt=d(75738),It=d(81418);const jt=["container"];function At(c,E){if(1&c){const r=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function ct(c,E){if(1&c){const r=t.EpF();t.TgZ(0,"mat-icon",48),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function pt(c,E){if(1&c){const r=t.EpF();t.TgZ(0,"mat-icon",48),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.dataDetailModel.description="")}),t._uU(1,"close"),t.qZA()}}function x(c,E){if(1&c){const r=t.EpF();t.TgZ(0,"mat-icon",49),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function P(c,E){if(1&c&&(t._UZ(0,"img",50),t.ALo(1,"cmsthumbnail")),2&c){const r=t.oxw(2);t.s9C("src",t.lcZ(1,1,r.dataDetailModel.panorama),t.LSH)}}function et(c,E){if(1&c&&(t.TgZ(0,"table",51)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&c){const r=t.oxw(2);t.xp6(12),t.Oqu(r.postionView.viewerGetYaw),t.xp6(2),t.Oqu(r.postionView.viewerGetPitch),t.xp6(2),t.Oqu(r.postionView.clickGetYaw),t.xp6(2),t.Oqu(r.postionView.clickGetPitch)}}function xt(c,E){if(1&c){const r=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function nt(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function Wt(c,E){if(1&c&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&c){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.sceneId||"N/A"," ")}}function ee(c,E){if(1&c){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",55),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw().$implicit;return t.KtG(p.sceneId=o)}),t.qZA()(),t.BQk()}if(2&c){const r=t.oxw().$implicit,m=t.oxw(2);t.xp6(2),t.Q6J("disabled",m.editdisabled)("ngModel",r.sceneId)}}function ie(c,E){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,Wt,3,1,"ng-container",52),t.YNc(2,ee,3,2,"ng-container",52),t.qZA()),2&c){const r=E.$implicit,m=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!m.editHotspot.guid||!r.guid||r.guid!==m.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",m.editHotspot.guid&&r.guid&&r.guid===m.editHotspot.guid)}}function Ht(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function Mt(c,E){if(1&c&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&c){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.pitch||"N/A"," ")}}function yt(c,E){if(1&c){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",56),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw().$implicit;return t.KtG(p.pitch=o)}),t.qZA()(),t.BQk()}if(2&c){const r=t.oxw().$implicit,m=t.oxw(2);t.xp6(2),t.Q6J("disabled",m.editdisabled)("ngModel",r.pitch)}}function Nt(c,E){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,Mt,3,1,"ng-container",52),t.YNc(2,yt,3,2,"ng-container",52),t.qZA()),2&c){const r=E.$implicit,m=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!m.editHotspot.guid||!r.guid||r.guid!==m.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",m.editHotspot.guid&&r.guid&&r.guid===m.editHotspot.guid)}}function Gt(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function D(c,E){if(1&c&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&c){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.yaw||"N/A"," ")}}function Vt(c,E){if(1&c){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",58),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw().$implicit;return t.KtG(p.yaw=o)}),t.qZA()(),t.BQk()}if(2&c){const r=t.oxw().$implicit,m=t.oxw(2);t.xp6(2),t.Q6J("disabled",m.editdisabled)("ngModel",r.yaw)}}function k(c,E){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,D,3,1,"ng-container",52),t.YNc(2,Vt,3,2,"ng-container",52),t.qZA()),2&c){const r=E.$implicit,m=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!m.editHotspot.guid||!r.guid||r.guid!==m.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",m.editHotspot.guid&&r.guid&&r.guid===m.editHotspot.guid)}}function Xt(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function u(c,E){if(1&c&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&c){const r=t.oxw().$implicit;t.xp6(2),t.Oqu(r.type)}}function f(c,E){if(1&c){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"mat-select",59),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw().$implicit;return t.KtG(p.type=o)}),t.TgZ(3,"mat-option",60),t._uU(4,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&c){const r=t.oxw().$implicit,m=t.oxw(2);t.xp6(2),t.Q6J("disabled",m.editdisabled)("ngModel",r.type),t.xp6(1),t.Q6J("value","info")}}function J(c,E){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,u,3,1,"ng-container",52),t.YNc(2,f,5,3,"ng-container",52),t.qZA()),2&c){const r=E.$implicit,m=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!m.editHotspot.guid||!r.guid||r.guid!==m.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",m.editHotspot.guid&&r.guid&&r.guid===m.editHotspot.guid)}}function S(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function K(c,E){if(1&c&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&c){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.targetYaw||"N/A"," ")}}function h(c,E){if(1&c){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",61),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw().$implicit;return t.KtG(p.targetYaw=o)}),t.qZA()(),t.BQk()}if(2&c){const r=t.oxw().$implicit,m=t.oxw(2);t.xp6(2),t.Q6J("disabled",m.editdisabled)("ngModel",r.targetYaw)}}function Y(c,E){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,K,3,1,"ng-container",52),t.YNc(2,h,3,2,"ng-container",52),t.qZA()),2&c){const r=E.$implicit,m=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!m.editHotspot.guid||!r.guid||r.guid!==m.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",m.editHotspot.guid&&r.guid&&r.guid===m.editHotspot.guid)}}function H(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function q(c,E){if(1&c&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&c){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.targetPitch||"N/A"," ")}}function G(c,E){if(1&c){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",62),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw().$implicit;return t.KtG(p.targetPitch=o)}),t.qZA()(),t.BQk()}if(2&c){const r=t.oxw().$implicit,m=t.oxw(2);t.xp6(2),t.Q6J("disabled",m.editdisabled)("ngModel",r.targetPitch)}}function Zt(c,E){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,q,3,1,"ng-container",52),t.YNc(2,G,3,2,"ng-container",52),t.qZA()),2&c){const r=E.$implicit,m=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!m.editHotspot.guid||!r.guid||r.guid!==m.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",m.editHotspot.guid&&r.guid&&r.guid===m.editHotspot.guid)}}function rt(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function St(c,E){if(1&c&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&c){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.text||"N/A"," ")}}function Bt(c,E){if(1&c){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",63),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw().$implicit;return t.KtG(p.text=o)}),t.qZA()(),t.BQk()}if(2&c){const r=t.oxw().$implicit,m=t.oxw(2);t.xp6(2),t.Q6J("disabled",m.editdisabled)("ngModel",r.text)}}function Ut(c,E){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,St,3,1,"ng-container",52),t.YNc(2,Bt,3,2,"ng-container",52),t.qZA()),2&c){const r=E.$implicit,m=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!m.editHotspot.guid||!r.guid||r.guid!==m.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",m.editHotspot.guid&&r.guid&&r.guid===m.editHotspot.guid)}}function Lt(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function ut(c,E){if(1&c&&(t.ynx(0),t.TgZ(1,"p",64),t._uU(2),t.qZA(),t.BQk()),2&c){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.url||"N/A"," ")}}function mt(c,E){if(1&c){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",65),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw().$implicit;return t.KtG(p.url=o)}),t.qZA()(),t.BQk()}if(2&c){const r=t.oxw().$implicit,m=t.oxw(2);t.xp6(2),t.Q6J("disabled",m.editdisabled)("ngModel",r.url)}}function ft(c,E){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,ut,3,1,"ng-container",52),t.YNc(2,mt,3,2,"ng-container",52),t.qZA()),2&c){const r=E.$implicit,m=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!m.editHotspot.guid||!r.guid||r.guid!==m.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",m.editHotspot.guid&&r.guid&&r.guid===m.editHotspot.guid)}}function wt(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function dt(c,E){if(1&c){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",67),t.NdJ("click",function(){t.CHM(r);const o=t.oxw().$implicit,p=t.oxw(2);return t.KtG(p.editROw(o))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",67),t.NdJ("click",function(){t.CHM(r);const o=t.oxw().$implicit,p=t.oxw(2);return t.KtG(p.removeROw(o))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function at(c,E){if(1&c){const r=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(4);return t.KtG(o.updateEdit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&c){const r=t.oxw(4);t.Q6J("disabled",r.editdisabled),t.xp6(1),t.Oqu(t.lcZ(2,2,"ACTION.Update"))}}function bt(c,E){if(1&c){const r=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(4);return t.KtG(o.onActionPannellumClickLastPoint())}),t._uU(1,"\u062b\u0628\u062a \u0646\u0642\u0637\u0647"),t.qZA()}if(2&c){const r=t.oxw(4);t.Q6J("disabled",r.editdisabled)}}function Ot(c,E){if(1&c){const r=t.EpF();t.ynx(0),t.YNc(1,at,3,4,"button",68),t.TgZ(2,"button",69),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(3);return t.KtG(o.cancelEdit())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,bt,2,1,"button",70),t.BQk()}if(2&c){const r=t.oxw(3);t.xp6(1),t.Q6J("ngIf",r.editHotspot.pitch!==(null==r.postionView?null:r.postionView.clickGetPitch)&&r.editHotspot.yaw!==(null==r.postionView?null:r.postionView.clickGetYaw)),t.xp6(1),t.Q6J("disabled",r.editdisabled),t.xp6(1),t.Oqu(t.lcZ(4,4,"ACTION.CANCEL")),t.xp6(2),t.Q6J("ngIf",r.postionView)}}function Tt(c,E){if(1&c&&(t.TgZ(0,"mat-cell")(1,"span",66),t.YNc(2,dt,5,0,"ng-container",52),t.YNc(3,Ot,6,6,"ng-container",52),t.qZA()()),2&c){const r=E.$implicit,m=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!m.editHotspot.guid||!r.guid||r.guid!==m.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",m.editHotspot.guid&&r.guid&&r.guid===m.editHotspot.guid)}}function ot(c,E){1&c&&t._UZ(0,"mat-header-row")}function _t(c,E){1&c&&t._UZ(0,"mat-row")}function Et(c,E){if(1&c){const r=t.EpF();t.TgZ(0,"mat-icon",48),t.NdJ("click",function(){t.CHM(r);const o=t.oxw(2);return t.KtG(o.dataDetailModel.configDataJson="")}),t._uU(1,"close"),t.qZA()}}function gt(c,E){if(1&c){const r=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"mat-form-field",6)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",7,8),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw();return t.KtG(p.dataDetailModel.title=o)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,ct,2,0,"mat-icon",9),t.TgZ(10,"mat-icon",10),t._uU(11,"mode_edit"),t.qZA()(),t.TgZ(12,"mat-form-field",6)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",11,12),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw();return t.KtG(p.dataDetailModel.description=o)}),t.ALo(18,"translate"),t.qZA(),t.YNc(19,pt,2,0,"mat-icon",9),t.TgZ(20,"mat-icon",10),t._uU(21,"mode_edit"),t.qZA()(),t.TgZ(22,"mat-form-field",13)(23,"input",14,15),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw();return t.KtG(p.dataDetailModel.linkFileId=o)})("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.fileManagerOpenFormReport=!0)}),t.ALo(25,"translate"),t.qZA(),t.YNc(26,x,2,0,"mat-icon",16),t.TgZ(27,"mat-icon",17),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.fileManagerOpenFormReport=!0)}),t._uU(28,"mode_edit"),t.qZA()(),t.TgZ(29,"cms-file-manager",18),t.NdJ("itemSelected",function(o){t.CHM(r);const p=t.oxw();return t.KtG(p.onActionFileSelect(o))})("openFormChange",function(o){t.CHM(r);const p=t.oxw();return t.KtG(p.fileManagerOpenFormReport=o)}),t.qZA(),t.TgZ(30,"a",19),t.ALo(31,"cmsthumbnail"),t.YNc(32,P,2,3,"img",20),t.qZA(),t._UZ(33,"hr"),t.TgZ(34,"div",21,22),t.NdJ("click",function(o){t.CHM(r);const p=t.oxw();return t.KtG(p.onActionPannellumClick(o))}),t.qZA(),t.YNc(36,et,19,4,"table",23),t._UZ(37,"hr"),t.TgZ(38,"h5"),t._uU(39,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a "),t.qZA(),t.TgZ(40,"p"),t._uU(41,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(42,"div",24)(43,"div",25),t.YNc(44,xt,3,3,"button",26),t.qZA(),t.TgZ(45,"mat-table",27,28),t.ynx(47,29),t.YNc(48,nt,2,0,"mat-header-cell",30),t.YNc(49,ie,3,2,"mat-cell",31),t.BQk(),t.ynx(50,32),t.YNc(51,Ht,2,0,"mat-header-cell",30),t.YNc(52,Nt,3,2,"mat-cell",31),t.BQk(),t.ynx(53,33),t.YNc(54,Gt,2,0,"mat-header-cell",30),t.YNc(55,k,3,2,"mat-cell",31),t.BQk(),t.ynx(56,34),t.YNc(57,Xt,2,0,"mat-header-cell",30),t.YNc(58,J,3,2,"mat-cell",31),t.BQk(),t.ynx(59,35),t.YNc(60,S,2,0,"mat-header-cell",30),t.YNc(61,Y,3,2,"mat-cell",31),t.BQk(),t.ynx(62,36),t.YNc(63,H,2,0,"mat-header-cell",30),t.YNc(64,Zt,3,2,"mat-cell",31),t.BQk(),t.ynx(65,37),t.YNc(66,rt,2,0,"mat-header-cell",30),t.YNc(67,Ut,3,2,"mat-cell",31),t.BQk(),t.ynx(68,38),t.YNc(69,Lt,2,0,"mat-header-cell",30),t.YNc(70,ft,3,2,"mat-cell",31),t.BQk(),t.ynx(71,39),t.YNc(72,wt,2,0,"mat-header-cell",30),t.YNc(73,Tt,4,2,"mat-cell",31),t.BQk(),t.YNc(74,ot,1,0,"mat-header-row",40),t.YNc(75,_t,1,0,"mat-row",41),t.qZA()(),t.TgZ(76,"mat-form-field",42)(77,"mat-label"),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.TgZ(80,"input",43,12),t.NdJ("ngModelChange",function(o){t.CHM(r);const p=t.oxw();return t.KtG(p.dataDetailModel.configDataJson=o)}),t.ALo(82,"translate"),t.qZA(),t.YNc(83,Et,2,0,"mat-icon",9),t.TgZ(84,"mat-icon",10),t._uU(85,"mode_edit"),t.qZA()(),t.TgZ(86,"div",25)(87,"button",44),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.onActionSubmitView360())}),t._UZ(88,"i",45),t._uU(89),t.ALo(90,"translate"),t.qZA(),t.TgZ(91,"button",46),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.onActionCancellView360())}),t._UZ(92,"i",47),t._uU(93),t.ALo(94,"translate"),t.qZA()(),t._UZ(95,"br"),t.qZA()()}if(2&c){const r=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,34,"TITLE.Photography_Place")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,36,"TITLE.Photography_Place")),t.Q6J("ngModel",r.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",r.dataDetailModel.title),t.xp6(5),t.Oqu(t.lcZ(15,38,"TITLE.DESCRIPTION")),t.xp6(2),t.s9C("placeholder",t.lcZ(18,40,"TITLE.DESCRIPTION")),t.Q6J("ngModel",r.dataDetailModel.description),t.xp6(3),t.Q6J("ngIf",r.dataDetailModel.description),t.xp6(4),t.s9C("placeholder",t.lcZ(25,42,"TITLE.View_360_File_ID")),t.Q6J("ngModel",r.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",r.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",r.appLanguage)("isPopup",!0)("openForm",r.fileManagerOpenFormReport)("tree",r.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",r.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(31,44,r.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==r.dataDetailModel||null==r.dataDetailModel.panorama?null:r.dataDetailModel.panorama.length)>0),t.xp6(2),t.Q6J("id",r.id),t.xp6(2),t.Q6J("ngIf",r.postionView),t.xp6(8),t.Q6J("ngIf",r.postionView),t.xp6(1),t.Q6J("dataSource",r.tableHotSpotdataSource),t.xp6(29),t.Q6J("matHeaderRowDef",r.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",r.tableHotspotDisplayedColumns),t.xp6(3),t.Oqu(t.lcZ(79,46,"TITLE.configDataJson")),t.xp6(2),t.s9C("placeholder",t.lcZ(82,48,"TITLE.configDataJson")),t.Q6J("ngModel",r.dataDetailModel.configDataJson),t.xp6(3),t.Q6J("ngIf",r.dataDetailModel.configDataJson),t.xp6(6),t.hij(" ",t.lcZ(90,50,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(94,52,"ACTION.CANCEL")," ")}}function ht(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function b(c,E){if(1&c&&t._UZ(0,"img",50),2&c){const r=t.oxw(2).$implicit;t.s9C("src",r.panorama,t.LSH)}}function it(c,E){if(1&c&&(t.ynx(0),t.TgZ(1,"a",19),t.YNc(2,b,1,1,"img",20),t.qZA(),t.BQk()),2&c){const r=t.oxw().$implicit;t.xp6(1),t.s9C("href",r.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==r||null==r.panorama?null:r.panorama.length)>0)}}function Ft(c,E){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,it,3,2,"ng-container",52),t.qZA()),2&c){const r=E.$implicit;t.xp6(1),t.Q6J("ngIf",r.panorama)}}function V(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function z(c,E){if(1&c&&(t.ynx(0),t._uU(1),t.BQk()),2&c){const r=t.oxw().$implicit;t.xp6(1),t.hij(" ",r.title," ")}}function O(c,E){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,z,2,1,"ng-container",52),t.qZA()),2&c){const r=E.$implicit;t.xp6(1),t.Q6J("ngIf",r.title)}}function _e(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&c&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.DESCRIPTION")," "))}function le(c,E){if(1&c&&(t.ynx(0),t._uU(1),t.BQk()),2&c){const r=t.oxw().$implicit;t.xp6(1),t.hij(" ",r.description," ")}}function ue(c,E){if(1&c&&(t.TgZ(0,"mat-cell"),t.YNc(1,le,2,1,"ng-container",52),t.qZA()),2&c){const r=E.$implicit;t.xp6(1),t.Q6J("ngIf",r.description)}}function de(c,E){1&c&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&c&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function re(c,E){if(1&c){const r=t.EpF();t.TgZ(0,"mat-cell",79)(1,"small")(2,"mat-icon",80),t.NdJ("click",function(){const p=t.CHM(r).renderIndex,l=t.oxw(2);return t.KtG(l.onActionOptionEditView360(p))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",81),t.NdJ("click",function(){const p=t.CHM(r).renderIndex,l=t.oxw(2);return t.KtG(l.onActionOptionRemoveView360(p))}),t._uU(7,"delete"),t.qZA()()()}}function pe(c,E){1&c&&t._UZ(0,"mat-header-row")}function me(c,E){1&c&&t._UZ(0,"mat-row")}function se(c,E){if(1&c&&(t.TgZ(0,"div",4)(1,"mat-table",73),t.ynx(2,74),t.YNc(3,ht,3,3,"mat-header-cell",30),t.YNc(4,Ft,2,1,"mat-cell",31),t.BQk(),t.ynx(5,75),t.YNc(6,V,3,3,"mat-header-cell",30),t.YNc(7,O,2,1,"mat-cell",31),t.BQk(),t.ynx(8,76),t.YNc(9,_e,3,3,"mat-header-cell",30),t.YNc(10,ue,2,1,"mat-cell",31),t.BQk(),t.ynx(11,39),t.YNc(12,de,4,6,"mat-header-cell",30),t.YNc(13,re,8,0,"mat-cell",77),t.BQk(),t.YNc(14,pe,1,0,"mat-header-row",78),t.YNc(15,me,1,0,"mat-row",41),t.qZA()()),2&c){const r=t.oxw();t.xp6(1),t.Q6J("dataSource",r.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",r.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.tabledisplayedColumns)}}class ce{constructor(){(0,w.Z)(this,"viewerGetYaw",void 0),(0,w.Z)(this,"viewerGetPitch",void 0),(0,w.Z)(this,"clickGetYaw",void 0),(0,w.Z)(this,"clickGetPitch",void 0)}}let oe=(()=>{var c;class E{constructor(m,o,p){(0,w.Z)(this,"cmsToastrService",void 0),(0,w.Z)(this,"publicHelper",void 0),(0,w.Z)(this,"translate",void 0),(0,w.Z)(this,"id",++E.nextId),(0,w.Z)(this,"privateDataModel",[]),(0,w.Z)(this,"dataDetailModel",new Q.zK_),(0,w.Z)(this,"dataModelChange",new t.vpe),(0,w.Z)(this,"formInfo",new Q.LEF),(0,w.Z)(this,"loading",new F.O),(0,w.Z)(this,"loadingOption",new F.O),(0,w.Z)(this,"tabledataSource",new g.by),(0,w.Z)(this,"tableHotSpotdataSource",new g.by),(0,w.Z)(this,"tabledisplayedColumns",["panorama","Title","Description","Action"]),(0,w.Z)(this,"tableHotspotDisplayedColumns",["type","text","url","pitch","yaw","Action"]),(0,w.Z)(this,"selectFileTypeReport",["jpeg","jpg"]),(0,w.Z)(this,"fileManagerTree",void 0),(0,w.Z)(this,"appLanguage","fa"),(0,w.Z)(this,"showAddView360",!1),(0,w.Z)(this,"fileManagerOpenFormReport",!1),(0,w.Z)(this,"container",void 0),(0,w.Z)(this,"viewer",void 0),(0,w.Z)(this,"options",void 0),(0,w.Z)(this,"postionView",void 0),(0,w.Z)(this,"selectIndex",-1),(0,w.Z)(this,"editHotspot",void 0),(0,w.Z)(this,"oldHotspot",void 0),(0,w.Z)(this,"editdisabled",void 0),this.cmsToastrService=m,this.publicHelper=o,this.translate=p,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}set dataModel(m){m||(m=[]),this.privateDataModel=m,this.privateDataModel.forEach(o=>{o.hotSpots||(o.hotSpots=[]),o.hotSpots=this.uniqByReduce(o.hotSpots),o.hotSpots.forEach(p=>{p.guid=this.getGuid()})}),this.tabledataSource.data=this.privateDataModel,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}uniqByReduce(m){const o=[];return m.forEach(p=>{!o.includes(p)&&0==o.filter(l=>l.pitch==p.pitch&&l.yaw==p.yaw).length&&o.push(p)}),o}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Edit")}ngAfterViewInit(){this.container.nativeElement.style.display="none"}getGuid(){return Math.floor(1e3*Math.random())+""}actionPannellumImageLoad(m,o){const p={type:"equirectangular",panorama:m,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};o&&o.length>0&&(p.hotSpots=o);const l=Object.assign({},p,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,l),this.container.nativeElement.style.display="block"}actionPrivateDataModelOptimaze(){const m=[];this.privateDataModel||(this.privateDataModel=[]),this.privateDataModel.forEach(o=>{o.hotSpots||(o.hotSpots=[]),o.hotSpots.forEach(p=>{p.type&&p.type.length>0&&m.push(p)}),o.hotSpots=this.uniqByReduce(m)})}onActionPannellumClick(m){if(!this.viewer)return;this.postionView=new ce,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const o=this.viewer.mouseEventToCoords(m);!o||0==o.length||(this.postionView.clickGetYaw=o[1],this.postionView.clickGetPitch=o[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(m){m&&m.id&&0!==m.id?(this.dataDetailModel.linkFileId=m.id,this.dataDetailModel.panorama=m.downloadLinksrc,this.dataDetailModel.preview=m.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.privateDataModel||(this.privateDataModel=[]),this.selectIndex>=0?this.privateDataModel[this.selectIndex]=this.dataDetailModel:this.privateDataModel.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new Q.zK_,this.showAddView360=!this.showAddView360}onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new Q.zK_),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new Q.aCC;const m=new Q.aCC;m.type="info",m.guid=this.getGuid(),this.dataDetailModel.hotSpots.push(m),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.editROw(m),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(m){m<0||!this.privateDataModel||0===this.privateDataModel.length||(this.privateDataModel.splice(m,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}onActionOptionEditView360(m){m<0||!this.privateDataModel||0===this.privateDataModel.length||(this.dataDetailModel=this.privateDataModel[m],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new Q.aCC,this.editHotspot=new Q.aCC,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=m,this.showAddView360=!this.showAddView360)}editROw(m){this.editHotspot=m&&m.guid?m:new Q.aCC,this.oldHotspot={...this.editHotspot}}removeROw(m){const o=this.dataDetailModel.hotSpots.findIndex(p=>p.guid==m.guid);o>=0&&(this.dataDetailModel.hotSpots.splice(o,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.editdisabled=!0;const m=this.dataDetailModel.hotSpots.findIndex(o=>o.guid==this.oldHotspot.guid);m>=0&&(this.dataDetailModel.hotSpots[m]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new Q.aCC,this.editHotspot=new Q.aCC}cancelEdit(){this.editHotspot=new Q.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}}return c=E,(0,w.Z)(E,"nextId",0),(0,w.Z)(E,"\u0275fac",function(m){return new(m||c)(t.Y36(v.e),t.Y36(n.i),t.Y36(B.sK))}),(0,w.Z)(E,"\u0275cmp",t.Xpm({type:c,selectors:[["app-cms-360-image-list"]],viewQuery:function(m,o){if(1&m&&t.Gf(jt,5),2&m){let p;t.iGM(p=t.CRH())&&(o.container=p.first)}},inputs:{dataModel:"dataModel"},outputs:{dataModelChange:"dataModelChange"},decls:4,vars:4,consts:[["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px 0px;",3,"click",4,"ngIf"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],["type","button","mat-button","",1,"btn","btn-primary","font-size-h6","px-3","py-2",2,"margin","10px 0px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"ntk-full-width","mb-1"],["matInput","","name","dataDetailModel.title","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["matInput","","name","dataDetailModel.description","type","text","minlength","3","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Description",""],[1,"ntk-full-width"],["matInput","","name","dataDetailModel.linkFileId","type","text",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","sceneId"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","type"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"ntk-full-width","mb-1",2,"visibility","hidden"],["matInput","","name","dataDetailModel.configDataJson","type","text","minlength","0","maxlength","10000","required","",3,"ngModel","placeholder","ngModelChange"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],[4,"ngIf"],[1,"text-truncate"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647","name","sceneId",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","placeholder","pitch","name","pitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr-center"],["matInput","","type","number","placeholder","yaw","name","yaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","type",3,"disabled","ngModel","ngModelChange"],[3,"value"],["matInput","","placeholder","targetYaw","name","targetYaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetPitch","name","targetPitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","text","name","text",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","mat-raised-button","","color","accent","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","accent",1,"mb-2",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","Description"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(m,o){1&m&&(t.YNc(0,At,3,3,"button",0),t.YNc(1,gt,96,54,"div",1),t._UZ(2,"app-progress-spinner",2),t.YNc(3,se,16,3,"div",1)),2&m&&(t.Q6J("ngIf",!o.showAddView360),t.xp6(1),t.Q6J("ngIf",o.showAddView360),t.xp6(1),t.Q6J("options",o.loadingOption),t.xp6(1),t.Q6J("ngIf",!o.showAddView360))},dependencies:[lt.O5,j.Fj,j.wV,j.JJ,j.Q7,j.wO,j.nD,j.On,y.ey,Yt.lW,X.KE,X.hX,X.R9,A.Hw,st.Nt,zt.gD,Ct.YE,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,Dt.gM,N.HG,qt.O,B.X$,It.v],encapsulation:2})),E})()},24014:(Rt,L,d)=>{"use strict";d.d(L,{g:()=>m});var w=d(86889),t=d(64537),g=d(80418),Q=d(34511),F=(d(56239),d(52633),d(60656)),v=d(32607),n=d(94032),B=d(56707),lt=d(88692),j=d(20092),y=d(1379),Yt=d(9638),X=d(88659),A=d(83331),st=d(39665),zt=d(18033),Ct=d(56558),Dt=d(2940),N=d(99482),qt=d(75738),It=d(81418);const jt=["container"];function At(o,p){if(1&o){const l=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function ct(o,p){if(1&o){const l=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.onActionImportFile360View())}),t._uU(1," \u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u06a9\u0633 \u0647\u0627\u06cc 360\n"),t.qZA()}}function pt(o,p){if(1&o){const l=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.actionPannellumTourLoad())}),t._uU(1," \u0646\u0645\u0627\u06cc\u0634 \u062a\u0648\u0631\n"),t.qZA()}}function x(o,p){if(1&o){const l=t.EpF();t.TgZ(0,"mat-icon",46),t.NdJ("click",function(){t.CHM(l);const C=t.oxw(2);return t.KtG(C.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function P(o,p){if(1&o){const l=t.EpF();t.TgZ(0,"mat-icon",47),t.NdJ("click",function(){t.CHM(l);const C=t.oxw(2);return t.KtG(C.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function et(o,p){if(1&o&&(t._UZ(0,"img",48),t.ALo(1,"cmsthumbnail")),2&o){const l=t.oxw(2);t.s9C("src",t.lcZ(1,1,l.dataDetailModel.panorama),t.LSH)}}function xt(o,p){if(1&o&&(t.TgZ(0,"table",49)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&o){const l=t.oxw(2);t.xp6(12),t.Oqu(l.postionView.viewerGetYaw),t.xp6(2),t.Oqu(l.postionView.viewerGetPitch),t.xp6(2),t.Oqu(l.postionView.clickGetYaw),t.xp6(2),t.Oqu(l.postionView.clickGetPitch)}}function nt(o,p){if(1&o){const l=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(l);const C=t.oxw(2);return t.KtG(C.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function Wt(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function ee(o,p){if(1&o&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.Oqu(l.type)}}function ie(o,p){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"mat-select",53),t.NdJ("ngModelChange",function(C){t.CHM(l);const R=t.oxw().$implicit;return t.KtG(R.type=C)}),t.TgZ(3,"mat-option",54),t._uU(4,"\u0635\u062d\u0646\u0647"),t.qZA(),t.TgZ(5,"mat-option",54),t._uU(6,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("disabled",s.editdisabled)("ngModel",l.type),t.xp6(1),t.Q6J("value","scene"),t.xp6(2),t.Q6J("value","info")}}function Ht(o,p){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,ee,3,1,"ng-container",50),t.YNc(2,ie,7,4,"ng-container",50),t.qZA()),2&o){const l=p.$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!s.editHotspot.guid||!l.guid||l.guid!==s.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",s.editHotspot.guid&&l.guid&&l.guid===s.editHotspot.guid)}}function Mt(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function yt(o,p){if(1&o&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.sceneId||"N/A"," ")}}function Nt(o,p){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",56),t.NdJ("ngModelChange",function(C){t.CHM(l);const R=t.oxw().$implicit;return t.KtG(R.sceneId=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("disabled",s.editdisabled)("ngModel",l.sceneId)}}function Gt(o,p){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,yt,3,1,"ng-container",50),t.YNc(2,Nt,3,2,"ng-container",50),t.qZA()),2&o){const l=p.$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!s.editHotspot.guid||!l.guid||l.guid!==s.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",s.editHotspot.guid&&l.guid&&l.guid===s.editHotspot.guid&&"scene"===l.type)}}function D(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function Vt(o,p){if(1&o&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.Oqu(l.sceneId)}}function k(o,p){if(1&o&&(t.TgZ(0,"mat-option",54),t._uU(1),t.qZA()),2&o){const l=p.$implicit;t.Q6J("value",l.linkFileId),t.xp6(1),t.Oqu(l.title)}}function Xt(o,p){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"mat-select",57),t.NdJ("ngModelChange",function(C){t.CHM(l);const R=t.oxw().$implicit;return t.KtG(R.sceneId=C)}),t.YNc(3,k,2,2,"mat-option",58),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("disabled",s.editdisabled)("ngModel",l.sceneId),t.xp6(1),t.Q6J("ngForOf",s.scenesList)}}function u(o,p){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,Vt,3,1,"ng-container",50),t.YNc(2,Xt,4,3,"ng-container",50),t.qZA()),2&o){const l=p.$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!s.editHotspot.guid||!l.guid||l.guid!==s.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",s.editHotspot.guid&&l.guid&&l.guid===s.editHotspot.guid&&"scene"===l.type)}}function f(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function J(o,p){if(1&o&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.pitch||"N/A"," ")}}function S(o,p){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",59),t.NdJ("ngModelChange",function(C){t.CHM(l);const R=t.oxw().$implicit;return t.KtG(R.pitch=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("disabled",s.editdisabled)("ngModel",l.pitch)}}function K(o,p){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,J,3,1,"ng-container",50),t.YNc(2,S,3,2,"ng-container",50),t.qZA()),2&o){const l=p.$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!s.editHotspot.guid||!l.guid||l.guid!==s.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",s.editHotspot.guid&&l.guid&&l.guid===s.editHotspot.guid)}}function h(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function Y(o,p){if(1&o&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.yaw||"N/A"," ")}}function H(o,p){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",60),t.NdJ("ngModelChange",function(C){t.CHM(l);const R=t.oxw().$implicit;return t.KtG(R.yaw=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("disabled",s.editdisabled)("ngModel",l.yaw)}}function q(o,p){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,Y,3,1,"ng-container",50),t.YNc(2,H,3,2,"ng-container",50),t.qZA()),2&o){const l=p.$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!s.editHotspot.guid||!l.guid||l.guid!==s.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",s.editHotspot.guid&&l.guid&&l.guid===s.editHotspot.guid)}}function G(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function Zt(o,p){if(1&o&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.targetYaw||"N/A"," ")}}function rt(o,p){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",61),t.NdJ("ngModelChange",function(C){t.CHM(l);const R=t.oxw().$implicit;return t.KtG(R.targetYaw=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("disabled",s.editdisabled)("ngModel",l.targetYaw)}}function St(o,p){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,Zt,3,1,"ng-container",50),t.YNc(2,rt,3,2,"ng-container",50),t.qZA()),2&o){const l=p.$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!s.editHotspot.guid||!l.guid||l.guid!==s.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",s.editHotspot.guid&&l.guid&&l.guid===s.editHotspot.guid)}}function Bt(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function Ut(o,p){if(1&o&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.targetPitch||"N/A"," ")}}function Lt(o,p){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",62),t.NdJ("ngModelChange",function(C){t.CHM(l);const R=t.oxw().$implicit;return t.KtG(R.targetPitch=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("disabled",s.editdisabled)("ngModel",l.targetPitch)}}function ut(o,p){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,Ut,3,1,"ng-container",50),t.YNc(2,Lt,3,2,"ng-container",50),t.qZA()),2&o){const l=p.$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!s.editHotspot.guid||!l.guid||l.guid!==s.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",s.editHotspot.guid&&l.guid&&l.guid===s.editHotspot.guid)}}function mt(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function ft(o,p){if(1&o&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.text||"N/A"," ")}}function wt(o,p){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",63),t.NdJ("ngModelChange",function(C){t.CHM(l);const R=t.oxw().$implicit;return t.KtG(R.text=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("disabled",s.editdisabled)("ngModel",l.text)}}function dt(o,p){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,ft,3,1,"ng-container",50),t.YNc(2,wt,3,2,"ng-container",50),t.qZA()),2&o){const l=p.$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!s.editHotspot.guid||!l.guid||l.guid!==s.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",s.editHotspot.guid&&l.guid&&l.guid===s.editHotspot.guid)}}function at(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function bt(o,p){if(1&o&&(t.ynx(0),t.TgZ(1,"p",64),t._uU(2),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.url||"N/A"," ")}}function Ot(o,p){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",65),t.NdJ("ngModelChange",function(C){t.CHM(l);const R=t.oxw().$implicit;return t.KtG(R.url=C)}),t.qZA()(),t.BQk()}if(2&o){const l=t.oxw().$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("disabled",s.editdisabled)("ngModel",l.url)}}function Tt(o,p){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,bt,3,1,"ng-container",50),t.YNc(2,Ot,3,2,"ng-container",50),t.qZA()),2&o){const l=p.$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!s.editHotspot.guid||!l.guid||l.guid!==s.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",s.editHotspot.guid&&l.guid&&l.guid===s.editHotspot.guid)}}function ot(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function _t(o,p){if(1&o){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",67),t.NdJ("click",function(){t.CHM(l);const C=t.oxw().$implicit,R=t.oxw(2);return t.KtG(R.editROw(C))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",67),t.NdJ("click",function(){t.CHM(l);const C=t.oxw().$implicit,R=t.oxw(2);return t.KtG(R.removeROw(C))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function Et(o,p){if(1&o){const l=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(l);const C=t.oxw(4);return t.KtG(C.updateEdit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&o){const l=t.oxw(4);t.Q6J("disabled",l.editdisabled),t.xp6(1),t.Oqu(t.lcZ(2,2,"ACTION.Update"))}}function gt(o,p){if(1&o){const l=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(l);const C=t.oxw(4);return t.KtG(C.onActionPannellumClickLastPoint())}),t._uU(1,"\u062b\u0628\u062a \u0646\u0642\u0637\u0647"),t.qZA()}if(2&o){const l=t.oxw(4);t.Q6J("disabled",l.editdisabled)}}function ht(o,p){if(1&o){const l=t.EpF();t.ynx(0),t.YNc(1,Et,3,4,"button",68),t.TgZ(2,"button",69),t.NdJ("click",function(){t.CHM(l);const C=t.oxw(3);return t.KtG(C.cancelEdit())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,gt,2,1,"button",70),t.BQk()}if(2&o){const l=t.oxw(3);t.xp6(1),t.Q6J("ngIf",l.editHotspot.pitch!==(null==l.postionView?null:l.postionView.clickGetPitch)&&l.editHotspot.yaw!==(null==l.postionView?null:l.postionView.clickGetYaw)),t.xp6(1),t.Q6J("disabled",l.editdisabled),t.xp6(1),t.Oqu(t.lcZ(4,4,"ACTION.CANCEL")),t.xp6(2),t.Q6J("ngIf",l.postionView)}}function b(o,p){if(1&o&&(t.TgZ(0,"mat-cell")(1,"span",66),t.YNc(2,_t,5,0,"ng-container",50),t.YNc(3,ht,6,6,"ng-container",50),t.qZA()()),2&o){const l=p.$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!s.editHotspot.guid||!l.guid||l.guid!==s.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",s.editHotspot.guid&&l.guid&&l.guid===s.editHotspot.guid)}}function it(o,p){1&o&&t._UZ(0,"mat-header-row")}function Ft(o,p){1&o&&t._UZ(0,"mat-row")}function V(o,p){if(1&o){const l=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"mat-form-field",7)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",8,9),t.NdJ("ngModelChange",function(C){t.CHM(l);const R=t.oxw();return t.KtG(R.dataDetailModel.title=C)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,x,2,0,"mat-icon",10),t.TgZ(10,"mat-icon",11),t._uU(11,"mode_edit"),t.qZA()(),t.TgZ(12,"mat-form-field",12)(13,"input",13,14),t.NdJ("ngModelChange",function(C){t.CHM(l);const R=t.oxw();return t.KtG(R.dataDetailModel.linkFileId=C)})("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.fileManagerOpenFormReport=!0)}),t.ALo(15,"translate"),t.qZA(),t.YNc(16,P,2,0,"mat-icon",15),t.TgZ(17,"mat-icon",16),t.NdJ("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.fileManagerOpenFormReport=!0)}),t._uU(18,"mode_edit"),t.qZA()(),t.TgZ(19,"cms-file-manager",17),t.NdJ("itemSelected",function(C){t.CHM(l);const R=t.oxw();return t.KtG(R.onActionFileSelect(C))})("openFormChange",function(C){t.CHM(l);const R=t.oxw();return t.KtG(R.fileManagerOpenFormReport=C)}),t.qZA(),t.TgZ(20,"a",18),t.ALo(21,"cmsthumbnail"),t.YNc(22,et,2,3,"img",19),t.qZA(),t._UZ(23,"hr"),t.TgZ(24,"div",20,21),t.NdJ("click",function(C){t.CHM(l);const R=t.oxw();return t.KtG(R.onActionPannellumClick(C))}),t.qZA(),t.YNc(26,xt,19,4,"table",22),t._UZ(27,"hr"),t.TgZ(28,"h5"),t._uU(29,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u062a\u0648\u0631"),t.qZA(),t.TgZ(30,"p"),t._uU(31,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(32,"div",23)(33,"div",24),t.YNc(34,nt,3,3,"button",25),t.qZA(),t.TgZ(35,"mat-table",26,27),t.ynx(37,28),t.YNc(38,Wt,2,0,"mat-header-cell",29),t.YNc(39,Ht,3,2,"mat-cell",30),t.BQk(),t.ynx(40,31),t.YNc(41,Mt,2,0,"mat-header-cell",29),t.YNc(42,Gt,3,2,"mat-cell",30),t.BQk(),t.ynx(43,32),t.YNc(44,D,2,0,"mat-header-cell",29),t.YNc(45,u,3,2,"mat-cell",30),t.BQk(),t.ynx(46,33),t.YNc(47,f,2,0,"mat-header-cell",29),t.YNc(48,K,3,2,"mat-cell",30),t.BQk(),t.ynx(49,34),t.YNc(50,h,2,0,"mat-header-cell",29),t.YNc(51,q,3,2,"mat-cell",30),t.BQk(),t.ynx(52,35),t.YNc(53,G,2,0,"mat-header-cell",29),t.YNc(54,St,3,2,"mat-cell",30),t.BQk(),t.ynx(55,36),t.YNc(56,Bt,2,0,"mat-header-cell",29),t.YNc(57,ut,3,2,"mat-cell",30),t.BQk(),t.ynx(58,37),t.YNc(59,mt,2,0,"mat-header-cell",29),t.YNc(60,dt,3,2,"mat-cell",30),t.BQk(),t.ynx(61,38),t.YNc(62,at,2,0,"mat-header-cell",29),t.YNc(63,Tt,3,2,"mat-cell",30),t.BQk(),t.ynx(64,39),t.YNc(65,ot,2,0,"mat-header-cell",29),t.YNc(66,b,4,2,"mat-cell",30),t.BQk(),t.YNc(67,it,1,0,"mat-header-row",40),t.YNc(68,Ft,1,0,"mat-row",41),t.qZA()(),t.TgZ(69,"div",24)(70,"button",42),t.NdJ("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.onActionSubmitView360())}),t._UZ(71,"i",43),t._uU(72),t.ALo(73,"translate"),t.qZA(),t.TgZ(74,"button",44),t.NdJ("click",function(){t.CHM(l);const C=t.oxw();return t.KtG(C.onActionCancellView360())}),t._UZ(75,"i",45),t._uU(76),t.ALo(77,"translate"),t.qZA()(),t._UZ(78,"br"),t.qZA()()}if(2&o){const l=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,26,"TITLE.Photography_Place")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,28,"TITLE.Photography_Place")),t.Q6J("ngModel",l.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.title),t.xp6(4),t.s9C("placeholder",t.lcZ(15,30,"TITLE.View_360_File_ID")),t.Q6J("ngModel",l.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",l.appLanguage)("isPopup",!0)("openForm",l.fileManagerOpenFormReport)("tree",l.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",l.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(21,32,l.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==l.dataDetailModel||null==l.dataDetailModel.panorama?null:l.dataDetailModel.panorama.length)>0),t.xp6(2),t.Q6J("id",l.id),t.xp6(2),t.Q6J("ngIf",l.postionView),t.xp6(8),t.Q6J("ngIf",l.postionView),t.xp6(1),t.Q6J("dataSource",l.tableHotSpotdataSource),t.xp6(32),t.Q6J("matHeaderRowDef",l.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",l.tableHotspotDisplayedColumns),t.xp6(4),t.hij(" ",t.lcZ(73,34,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(77,36,"ACTION.CANCEL")," ")}}function z(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function O(o,p){if(1&o&&t._UZ(0,"img",48),2&o){const l=t.oxw(2).$implicit;t.s9C("src",l.panorama,t.LSH)}}function _e(o,p){if(1&o&&(t.ynx(0),t.TgZ(1,"a",18),t.YNc(2,O,1,1,"img",19),t.qZA(),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(1),t.s9C("href",l.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==l||null==l.panorama?null:l.panorama.length)>0)}}function le(o,p){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,_e,3,2,"ng-container",50),t.qZA()),2&o){const l=p.$implicit;t.xp6(1),t.Q6J("ngIf",l.panorama)}}function ue(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function de(o,p){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const l=t.oxw().$implicit;t.xp6(1),t.hij(" ",l.title," ")}}function re(o,p){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,de,2,1,"ng-container",50),t.qZA()),2&o){const l=p.$implicit;t.xp6(1),t.Q6J("ngIf",l.title)}}function pe(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1," \u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647 "),t.qZA())}function me(o,p){if(1&o&&(t.TgZ(0,"mat-cell"),t.ynx(1),t._uU(2),t.BQk(),t.qZA()),2&o){const l=p.$implicit;t.xp6(2),t.hij(" ",l.linkFileId," ")}}function se(o,p){1&o&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&o&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function ce(o,p){if(1&o){const l=t.EpF();t.TgZ(0,"mat-cell",79)(1,"small")(2,"mat-icon",80),t.NdJ("click",function(){const R=t.CHM(l).renderIndex,Kt=t.oxw(2);return t.KtG(Kt.onActionOptionEditView360(R))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",81),t.NdJ("click",function(){const R=t.CHM(l).renderIndex,Kt=t.oxw(2);return t.KtG(Kt.onActionOptionRemoveView360(R))}),t._uU(7,"delete"),t.qZA()()()}}function oe(o,p){1&o&&t._UZ(0,"mat-header-row")}function c(o,p){1&o&&t._UZ(0,"mat-row")}function E(o,p){if(1&o&&(t.TgZ(0,"div",5)(1,"mat-table",73),t.ynx(2,74),t.YNc(3,z,3,3,"mat-header-cell",29),t.YNc(4,le,2,1,"mat-cell",30),t.BQk(),t.ynx(5,75),t.YNc(6,ue,3,3,"mat-header-cell",29),t.YNc(7,re,2,1,"mat-cell",30),t.BQk(),t.ynx(8,76),t.YNc(9,pe,2,0,"mat-header-cell",29),t.YNc(10,me,3,1,"mat-cell",30),t.BQk(),t.ynx(11,39),t.YNc(12,se,4,6,"mat-header-cell",29),t.YNc(13,ce,8,0,"mat-cell",77),t.BQk(),t.YNc(14,oe,1,0,"mat-header-row",78),t.YNc(15,c,1,0,"mat-row",41),t.qZA()()),2&o){const l=t.oxw();t.xp6(1),t.Q6J("dataSource",l.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",l.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",l.tabledisplayedColumns)}}class r{constructor(){(0,w.Z)(this,"viewerGetYaw",void 0),(0,w.Z)(this,"viewerGetPitch",void 0),(0,w.Z)(this,"clickGetYaw",void 0),(0,w.Z)(this,"clickGetPitch",void 0)}}let m=(()=>{var o;class p{constructor(s,C,R){(0,w.Z)(this,"cmsToastrService",void 0),(0,w.Z)(this,"publicHelper",void 0),(0,w.Z)(this,"translate",void 0),(0,w.Z)(this,"id",++p.nextId),(0,w.Z)(this,"scenesList",[]),(0,w.Z)(this,"dataDetailModel",new Q.$lU),(0,w.Z)(this,"privateDataModel",void 0),(0,w.Z)(this,"dataModelChange",new t.vpe),(0,w.Z)(this,"privateDataImageModel",void 0),(0,w.Z)(this,"formInfo",new Q.LEF),(0,w.Z)(this,"loading",new F.O),(0,w.Z)(this,"loadingOption",new F.O),(0,w.Z)(this,"tabledataSource",new g.by),(0,w.Z)(this,"tableHotSpotdataSource",new g.by),(0,w.Z)(this,"tabledisplayedColumns",["linkFileId","panorama","Title","Action"]),(0,w.Z)(this,"tableHotspotDisplayedColumns",["type","sceneIdSelector","text","url","pitch","yaw","Action"]),(0,w.Z)(this,"selectFileTypeReport",["jpeg","jpg"]),(0,w.Z)(this,"fileManagerTree",void 0),(0,w.Z)(this,"appLanguage","fa"),(0,w.Z)(this,"showAddView360",!1),(0,w.Z)(this,"fileManagerOpenFormReport",!1),(0,w.Z)(this,"container",void 0),(0,w.Z)(this,"viewer",void 0),(0,w.Z)(this,"options",void 0),(0,w.Z)(this,"postionView",void 0),(0,w.Z)(this,"actionPannellumTourLoadClick",!1),(0,w.Z)(this,"selectIndex",-1),(0,w.Z)(this,"editHotspot",void 0),(0,w.Z)(this,"oldHotspot",void 0),(0,w.Z)(this,"editdisabled",void 0),this.cmsToastrService=s,this.publicHelper=C,this.translate=R,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}getGuid(){return Math.floor(1e3*Math.random())+""}set dataModel(s){s||(s=new Q.veq),s.defaultValue||(s.defaultValue=new Q.vyA),s.scenes||(s.scenes=new Map),this.scenesList=[],Object.keys(s.scenes).map(C=>{s.scenes[C].guid=this.getGuid(),this.scenesList.push(s.scenes[C])}),this.scenesList.forEach(C=>{C.hotSpots||(C.hotSpots=[]),C.hotSpots.forEach(R=>{R.guid=this.getGuid()})}),this.privateDataModel=s,this.tabledataSource.data=this.scenesList,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}set dataImageModel(s){s||(s=[]),this.privateDataImageModel=s}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Edit")}ngAfterViewInit(){this.container.nativeElement.style.display="none"}uniqByReduce(s){const C=[];return s.forEach(R=>{!C.includes(R)&&0==C.filter(Kt=>Kt.pitch==R.pitch&&Kt.yaw==R.yaw).length&&C.push(R)}),C}actionPannellumImageLoad(s,C){const R={type:"equirectangular",panorama:s,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};C&&C.length>0&&(R.hotSpots=this.uniqByReduce(C));const Kt=Object.assign({},R,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,Kt),this.container.nativeElement.style.display="block"}actionPannellumTourLoad(){this.actionPannellumTourLoadClick=!0,this.actionPrivateDataModelOptimaze();const s={};s.default=this.privateDataModel.defaultValue,this.privateDataModel&&this.privateDataModel.scenes&&(s.scenes=this.privateDataModel.scenes);const C=Object.assign({},s,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,C),this.container.nativeElement.style.display="block"}onActionPannellumClick(s){if(!this.viewer)return;if(this.actionPannellumTourLoadClick)return void(this.actionPannellumTourLoadClick=!1);this.postionView=new r,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const C=this.viewer.mouseEventToCoords(s);!C||0==C.length||(this.postionView.clickGetYaw=C[1],this.postionView.clickGetPitch=C[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(s){s&&s.id&&0!==s.id?(this.dataDetailModel.linkFileId=s.id,this.dataDetailModel.panorama=s.downloadLinksrc,this.dataDetailModel.preview=s.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.scenesList||(this.scenesList=[]),this.selectIndex>=0?this.scenesList[this.selectIndex]=this.dataDetailModel:this.scenesList.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}actionPrivateDataModelOptimaze(){this.privateDataModel.defaultValue||(this.privateDataModel.defaultValue=new Q.vyA),this.privateDataModel.scenes=new Map,this.scenesList||(this.scenesList=[]),this.scenesList.forEach(s=>{if(s.title&&s.title.length>0){const C=[];s.hotSpots||(s.hotSpots=[]),s.hotSpots.forEach(R=>{R.type&&R.type.length>0&&C.push(R)}),s.hotSpots=this.uniqByReduce(C),this.privateDataModel.scenes[s.linkFileId]=s,this.privateDataModel.scenes[s.linkFileId].hfov=110}}),(!this.privateDataModel.defaultValue.firstScene||0==this.privateDataModel.defaultValue.firstScene.length)&&(this.privateDataModel.scenes&&this.scenesList&&this.scenesList.length>0&&(this.privateDataModel.defaultValue.firstScene=this.scenesList[0].linkFileId+""),this.privateDataModel.defaultValue.sceneFadeDuration=1e3)}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new Q.$lU,this.showAddView360=!this.showAddView360,this.tableHotSpotdataSource.data=[]}onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new Q.$lU),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new Q.aCC;const s=new Q.aCC;s.guid=this.getGuid(),this.dataDetailModel.hotSpots.push(s),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.editROw(s),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(s){s<0||!this.scenesList||0===this.scenesList.length||(this.scenesList.splice(s,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}onActionOptionEditView360(s){s<0||!this.scenesList||0===this.scenesList.length||(this.dataDetailModel=this.scenesList[s],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new Q.aCC,this.editHotspot=new Q.aCC,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=s,this.showAddView360=!this.showAddView360)}editROw(s){this.editHotspot=s&&s.guid?s:new Q.aCC,this.oldHotspot={...this.editHotspot}}removeROw(s){const C=this.dataDetailModel.hotSpots.findIndex(R=>R.guid==s.guid);C>=0&&(this.dataDetailModel.hotSpots.splice(C,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.editdisabled=!0;const s=this.dataDetailModel.hotSpots.findIndex(C=>C.guid==this.oldHotspot.guid);s>=0&&(this.dataDetailModel.hotSpots[s]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new Q.aCC,this.editHotspot=new Q.aCC}cancelEdit(){this.editHotspot=new Q.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}onActionImportFile360View(){this.privateDataImageModel&&this.privateDataImageModel.length>0&&(this.actionPrivateDataModelOptimaze(),this.privateDataImageModel.forEach(s=>{if(!this.privateDataModel.scenes[s.linkFileId]&&s.linkFileId>0){const C=new Q.$lU;C.guid=this.getGuid(),C.linkFileId=s.linkFileId,C.title=s.title,C.hotSpots=this.uniqByReduce(s.hotSpots),C.panorama=s.panorama,C.preview=s.preview,C.hfov=110,this.privateDataModel.scenes[s.linkFileId]=C}}),this.dataModel=this.privateDataModel)}}return o=p,(0,w.Z)(p,"nextId",0),(0,w.Z)(p,"\u0275fac",function(s){return new(s||o)(t.Y36(v.e),t.Y36(n.i),t.Y36(B.sK))}),(0,w.Z)(p,"\u0275cmp",t.Xpm({type:o,selectors:[["app-cms-360-tour-list"]],viewQuery:function(s,C){if(1&s&&t.Gf(jt,5),2&s){let R;t.iGM(R=t.CRH())&&(C.container=R.first)}},inputs:{dataModel:"dataModel",dataImageModel:"dataImageModel"},outputs:{dataModelChange:"dataModelChange"},decls:6,vars:6,consts:[["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px;",3,"click",4,"ngIf"],["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px ",3,"click",4,"ngIf"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],["type","button","mat-button","",1,"btn","btn-primary","font-size-h6","px-3","py-2",2,"margin","10px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"ntk-full-width","mb-1"],["matInput","","name","dataDetailModel.title","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],[1,"ntk-full-width"],["matInput","","name","dataDetailModel.linkFileId","type","text",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","type"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sceneId"],["matColumnDef","sceneIdSelector"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],[4,"ngIf"],[1,"text-truncate","grid-row-ltr-center"],["appearance","outline",2,"width","100%"],["placeholder","Select","name","type",3,"disabled","ngModel","ngModelChange"],[3,"value"],[1,"text-truncate"],["matInput","","placeholder","sceneId","name","sceneId",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","sceneId",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","placeholder","pitch","name","pitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","placeholder","yaw","name","yaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetYaw","name","targetYaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetPitch","name","targetPitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","text","name","text",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","mat-raised-button","","color","accent","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","accent",1,"mb-2",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","linkFileId"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(s,C){1&s&&(t.YNc(0,At,3,3,"button",0),t.YNc(1,ct,2,0,"button",1),t.YNc(2,pt,2,0,"button",1),t.YNc(3,V,79,38,"div",2),t._UZ(4,"app-progress-spinner",3),t.YNc(5,E,16,3,"div",2)),2&s&&(t.Q6J("ngIf",!C.showAddView360),t.xp6(1),t.Q6J("ngIf",C.privateDataImageModel&&C.privateDataImageModel.length>0),t.xp6(1),t.Q6J("ngIf",C.privateDataModel&&C.privateDataModel&&C.privateDataModel.scenes&&C.scenesList&&C.scenesList.length>0),t.xp6(1),t.Q6J("ngIf",C.showAddView360),t.xp6(1),t.Q6J("options",C.loadingOption),t.xp6(1),t.Q6J("ngIf",!C.showAddView360))},dependencies:[lt.sg,lt.O5,j.Fj,j.wV,j.JJ,j.Q7,j.wO,j.nD,j.On,y.ey,Yt.lW,X.KE,X.hX,X.R9,A.Hw,st.Nt,zt.gD,Ct.YE,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,Dt.gM,N.HG,qt.O,B.X$,It.v],encapsulation:2})),p})()},76609:(Rt,L,d)=>{"use strict";d.d(L,{D:()=>jt});var w=d(8239),t=d(86889),g=d(64537),Q=d(20092),e=d(34511),tt=d(57445),kt=d(51927),vt=d(83151),F=d(42147),v=d(61528),n=d(27969),B=d(60656),lt=d(56707),j=d(88692),y=d(61637),Yt=d(1379),X=d(88659),A=d(83331),st=d(39665),zt=d(75738),Ct=d(81418);function Dt(At,ct){if(1&At&&(g._UZ(0,"img",9),g.ALo(1,"cmsthumbnail")),2&At){const pt=g.oxw().$implicit;g.s9C("src",g.lcZ(1,1,pt.linkImageIdSrc),g.LSH)}}function N(At,ct){if(1&At&&(g.TgZ(0,"mat-option",7),g.YNc(1,Dt,2,3,"img",8),g.TgZ(2,"span"),g._uU(3),g.qZA()()),2&At){const pt=ct.$implicit,x=g.oxw();g.Q6J("value",pt)("disabled",x.optionDisabled),g.xp6(1),g.Q6J("ngIf",pt.linkImageIdSrc),g.xp6(2),g.Oqu(x.displayOption(pt))}}function qt(At,ct){if(1&At){const pt=g.EpF();g.TgZ(0,"mat-icon",10),g.NdJ("click",function(){g.CHM(pt);const P=g.oxw();return g.KtG(P.onActionSelectClear())}),g._uU(1,"close"),g.qZA()}}const It=["*"];let jt=(()=>{var At;class ct{constructor(x,P,et,xt){(0,t.Z)(this,"coreEnumService",void 0),(0,t.Z)(this,"translate",void 0),(0,t.Z)(this,"cdr",void 0),(0,t.Z)(this,"categoryService",void 0),(0,t.Z)(this,"id",++ct.nextId),(0,t.Z)(this,"dataModelResult",new e.y$4),(0,t.Z)(this,"dataModelSelect",new e.Dp$),(0,t.Z)(this,"formControl",new Q.NI),(0,t.Z)(this,"filteredOptions",void 0),(0,t.Z)(this,"optionDisabled",!1),(0,t.Z)(this,"optionSelectFirstItem",!1),(0,t.Z)(this,"optionPlaceholder",""),(0,t.Z)(this,"optionChange",new g.vpe),(0,t.Z)(this,"optionReload",()=>this.onActionReload()),(0,t.Z)(this,"loading",new B.O),this.coreEnumService=x,this.translate=P,this.cdr=et,this.categoryService=xt,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(x){this.onActionSelectForce(x)}get optionLoading(){return this.loading}set optionLoading(x){this.loading=x}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,kt.O)(""),(0,vt.b)(1500),(0,F.x)(),(0,v.w)(x=>this.DataGetAll("string"==typeof x||"number"==typeof x?x:"")))}displayFn(x){return x&&x.virtual_Parent&&x.virtual_Parent.title.length>0&&x.virtual_Parent.virtual_Parent&&x.virtual_Parent.virtual_Parent.title.length>0&&x.virtual_Parent.virtual_Parent.virtual_Parent&&x.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?x.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+x.virtual_Parent.virtual_Parent.titleML+" > "+x.virtual_Parent.titleML+" > "+x.titleML:x&&x.virtual_Parent&&x.virtual_Parent.title.length>0&&x.virtual_Parent.virtual_Parent&&x.virtual_Parent.virtual_Parent.title.length>0?x.virtual_Parent.virtual_Parent.titleML+" > "+x.virtual_Parent.titleML+" > "+x.titleML:x&&x.virtual_Parent&&x.virtual_Parent.title.length>0?x.virtual_Parent.titleML+" > "+x.titleML:x?x.titleML:void 0}displayOption(x){return x&&x.virtual_Parent&&x.virtual_Parent.title.length>0&&x.virtual_Parent.virtual_Parent&&x.virtual_Parent.virtual_Parent.title.length>0&&x.virtual_Parent.virtual_Parent.virtual_Parent&&x.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?x.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+x.virtual_Parent.virtual_Parent.titleML+" > "+x.virtual_Parent.titleML+" > "+x.titleML:x&&x.virtual_Parent&&x.virtual_Parent.title.length>0&&x.virtual_Parent.virtual_Parent&&x.virtual_Parent.virtual_Parent.title.length>0?x.virtual_Parent.virtual_Parent.titleML+" > "+x.virtual_Parent.titleML+" > "+x.titleML:x&&x.virtual_Parent&&x.virtual_Parent.title.length>0?x.virtual_Parent.titleML+" > "+x.titleML:x?x.titleML:void 0}DataGetAll(x){var P=this;return(0,w.Z)(function*(){const et=new e.Hay;if(et.rowPerPage=20,et.accessLoad=!0,x&&x.length>0){let nt=new e.AO3;nt=new e.AO3,nt.propertyName="Symbol",nt.value=x,nt.searchType=e.J6G.Contains,nt.clauseType=e.ppe.Or,et.filters.push(nt),nt=new e.AO3,nt.propertyName="Title",nt.value=x,nt.searchType=e.J6G.Contains,nt.clauseType=e.ppe.Or,et.filters.push(nt),x&&"number"==typeof+x&&+x>0&&(nt=new e.AO3,nt.propertyName="Id",nt.value=x,nt.searchType=e.J6G.Equal,nt.clauseType=e.ppe.Or,et.filters.push(nt))}const xt=P.constructor.name+"main";return P.loading.Start(xt),yield(0,tt.z)(P.categoryService.ServiceGetAll(et)).then(nt=>(P.dataModelResult=nt,P.optionSelectFirstItem&&(!P.dataModelSelect||!P.dataModelSelect.id||P.dataModelSelect.id<=0)&&P.dataModelResult.listItems.length>0&&(P.optionSelectFirstItem=!1,setTimeout(()=>{P.formControl.setValue(P.dataModelResult.listItems[0])},1e3),P.onActionSelect(P.dataModelResult.listItems[0])),P.loading.Stop(xt),nt.listItems))})()}onActionSelect(x){this.optionDisabled||(this.dataModelSelect=x,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(x){return this.filteredOptions.pipe((0,n.U)(P=>(P.find(et=>et.id===x.id)||P.push(x),P)))}onActionSelectForce(x){if("number"==typeof x&&x>0){if(this.dataModelSelect&&this.dataModelSelect.id===x)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(P=>P.id===x)){const P=this.dataModelResult.listItems.find(et=>et.id===x);return this.dataModelSelect=P,void this.formControl.setValue(P)}this.categoryService.ServiceGetOneIncludeParent(x).subscribe(P=>{P.isSuccess&&(this.filteredOptions=this.push(P.item),this.dataModelSelect=P.item,this.formControl.setValue(P.item),this.optionChange.emit(P.item))})}else{if(typeof x==typeof e.Dp$)return this.filteredOptions=this.push(x),this.dataModelSelect=x,void this.formControl.setValue(x);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new e.Dp$,this.loadOptions()}}return At=ct,(0,t.Z)(ct,"nextId",0),(0,t.Z)(ct,"\u0275fac",function(x){return new(x||At)(g.Y36(e.FLW),g.Y36(lt.sK),g.Y36(g.sBO),g.Y36(e.XRW))}),(0,t.Z)(ct,"\u0275cmp",g.Xpm({type:At,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:It,decls:9,vars:10,consts:[[1,"ntk-full-width"],[3,"options"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(x,P){if(1&x&&(g.F$t(),g.TgZ(0,"mat-form-field",0),g._UZ(1,"app-progress-spinner",1)(2,"input",2),g.TgZ(3,"mat-autocomplete",3,4),g.NdJ("optionSelected",function(xt){return P.onActionSelect(xt.option.value)}),g.YNc(5,N,4,4,"mat-option",5),g.ALo(6,"async"),g.qZA(),g.YNc(7,qt,2,0,"mat-icon",6),g.Hsn(8),g.qZA()),2&x){const et=g.MAs(4);g.xp6(1),g.Q6J("options",P.loading),g.xp6(1),g.s9C("placeholder",P.optionPlaceholder),g.Q6J("formControl",P.formControl)("matAutocomplete",et),g.uIk("disabled",!!P.optionDisabled||null),g.xp6(1),g.Q6J("displayWith",P.displayFn),g.xp6(2),g.Q6J("ngForOf",g.lcZ(6,8,P.filteredOptions)),g.xp6(2),g.Q6J("ngIf",null==P.dataModelSelect?null:P.dataModelSelect.id)}},dependencies:[j.sg,j.O5,Q.Fj,Q.JJ,Q.oH,y.XC,Yt.ey,y.ZL,X.KE,X.R9,A.Hw,st.Nt,zt.O,j.Ov,Ct.v],encapsulation:2})),ct})()},17407:(Rt,L,d)=>{"use strict";d.d(L,{r:()=>vt});var w=d(86889),t=d(64537),g=d(64216),e=d(92340),tt=d(32607),kt=d(27128);let vt=(()=>{var F;class v{set optonCenter(B){this.map&&B&&B.lat&&B.lon&&0!==B.lat&&0!==B.lon&&this.map.setView(new g.LatLng(B.lat,B.lon),this.zoom)}set optionCurrentPoint(B){this.onActionCurrentPoint(B)}constructor(B){(0,w.Z)(this,"cmsToastrService",void 0),(0,w.Z)(this,"id",++v.nextId),(0,w.Z)(this,"map$",new t.vpe),(0,w.Z)(this,"zoom$",new t.vpe),(0,w.Z)(this,"options",{layers:[(0,g.tileLayer)(e.N.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]}),(0,w.Z)(this,"map",void 0),(0,w.Z)(this,"zoom",void 0),(0,w.Z)(this,"destroy",!1),this.cmsToastrService=B}ngOnInit(){const y=g.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});g.Marker.prototype.options.icon=y}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(B){setTimeout(()=>{this.map&&!this.destroy&&B.invalidateSize()},500),this.map=B,this.map$.emit(B),this.zoom=B.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(B){this.zoom=B.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(B=!0){this.getPosition().then(lt=>{this.map.setView(new g.LatLng(lt.lat,lt.lon),this.zoom)})}getPosition(){return new Promise((B,lt)=>{navigator.geolocation.getCurrentPosition(j=>{B({lon:j.coords.longitude,lat:j.coords.latitude})},j=>{this.cmsToastrService.typeErrorGetPosition()})})}}return F=v,(0,w.Z)(v,"nextId",0),(0,w.Z)(v,"\u0275fac",function(B){return new(B||F)(t.Y36(tt.e))}),(0,w.Z)(v,"\u0275cmp",t.Xpm({type:F,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletOptions","leafletMapReady","leafletMapZoomEnd"]],template:function(B,lt){1&B&&(t.TgZ(0,"div",0),t.NdJ("leafletMapReady",function(y){return lt.onMapReady(y)})("leafletMapZoomEnd",function(y){return lt.onMapZoomEnd(y)}),t.qZA()),2&B&&t.Q6J("leafletOptions",lt.options)},dependencies:[kt.je],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})),v})()}}]);