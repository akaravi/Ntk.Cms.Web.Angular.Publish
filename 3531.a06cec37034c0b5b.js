"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[3531],{99654:(B,S,i)=>{i.d(S,{B:()=>e});var l=i(86889),a=i(64537);let e=(()=>{var M;class t{transform(f,C){if(!C||0===C.length)return"";const E=C.find(v=>v.key===f||v.value===f);return E?E.description:""}}return M=t,(0,l.Z)(t,"\u0275fac",function(f){return new(f||M)}),(0,l.Z)(t,"\u0275pipe",a.Yjl({name:"enums",type:M,pure:!0})),t})()},47907:(B,S,i)=>{i.d(S,{H:()=>A});var l=i(86889),a=i(54536),e=i(34511),M=i(60656),t=i(64537),T=i(32607),f=i(56707),C=i(94032),E=i(88692),v=i(46997),P=i(75738),Z=i(99654);function D(p,h){1&p&&(t.TgZ(0,"div"),t._UZ(1,"span",13)(2,"br"),t.qZA()),2&p&&(t.xp6(1),t.Q6J("inlineSVG","assets/media/svg/icons/General/Shield-check.svg"))}function y(p,h){if(1&p&&(t.TgZ(0,"div",8)(1,"div",9)(2,"div",10),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",10),t._uU(6),t.qZA(),t._UZ(7,"div",11),t.qZA(),t.TgZ(8,"div",9)(9,"div",10),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",10),t.YNc(13,D,3,1,"div",12),t._uU(14),t.ALo(15,"enums"),t.qZA(),t._UZ(16,"div",11),t.qZA(),t.TgZ(17,"div",9)(18,"div",10),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",10),t._uU(22),t.qZA(),t._UZ(23,"div",11),t.qZA(),t.TgZ(24,"div",9)(25,"div",10),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"div",10),t._uU(29),t.qZA(),t._UZ(30,"div",11),t.qZA()()),2&p){const _=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,11,"TITLE.Transaction_ID")),t.xp6(3),t.Oqu(_.dataModelResult.item.id),t.xp6(4),t.AsE("",t.lcZ(11,13,"TITLE.Transaction_status"),":",_.requestId,""),t.xp6(3),t.Q6J("ngIf",_.dataModelResult.item.transactionStatus===_.TransactionSuccessful),t.xp6(1),t.hij(" ",t.xi3(15,15,_.dataModelResult.item.transactionStatus,_.dataModelEnumTransactionRecordStatusResult.listItems)," "),t.xp6(5),t.hij(" ",t.lcZ(20,18,"TITLE.Amount")," "),t.xp6(3),t.AsE("",_.dataModelResult.item.amount," ",_.dataModelResult.item.currencyUnit,""),t.xp6(4),t.hij("",t.lcZ(27,20,"TITLE.Message")," "),t.xp6(3),t.Oqu(_.dataModelResult.item.lastStatusMessage)}}let A=(()=>{var p;class h{constructor(r,c,I,R,L,U,b,W){(0,l.Z)(this,"data",void 0),(0,l.Z)(this,"bankPaymentTransactionService",void 0),(0,l.Z)(this,"dialogRef",void 0),(0,l.Z)(this,"bankPaymentEnumService",void 0),(0,l.Z)(this,"cmsToastrService",void 0),(0,l.Z)(this,"translate",void 0),(0,l.Z)(this,"cdr",void 0),(0,l.Z)(this,"publicHelper",void 0),(0,l.Z)(this,"id",++h.nextId),(0,l.Z)(this,"requestId",0),(0,l.Z)(this,"loading",new M.O),(0,l.Z)(this,"dataModelResult",new e.y$4),(0,l.Z)(this,"dataModelEnumTransactionRecordStatusResult",new e.y$4),(0,l.Z)(this,"TransactionSuccessful",e.VnT.TransactionSuccessful),this.data=r,this.bankPaymentTransactionService=c,this.dialogRef=I,this.bankPaymentEnumService=R,this.cmsToastrService=L,this.translate=U,this.cdr=b,this.publicHelper=W,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),r&&(this.requestId=+r.id||0)}get optionLoading(){return this.loading}set optionLoading(r){this.loading=r}ngOnInit(){if(this.requestId<=0)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGeOne(),this.getEnumTransactionRecordStatus()}getEnumTransactionRecordStatus(){this.bankPaymentEnumService.ServiceTransactionRecordStatusEnum().subscribe(r=>{this.dataModelEnumTransactionRecordStatusResult=r})}DataGeOne(){const r=this.constructor.name+"main";this.loading.Start(r),this.bankPaymentTransactionService.ServiceGetOneById(this.requestId).subscribe(c=>{c.isSuccess?this.dataModelResult=c:this.cmsToastrService.typeErrorMessage(c.errorMessage),this.loading.Stop(r)},c=>{this.cmsToastrService.typeError(c),this.loading.Stop(r)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!0})}}return p=h,(0,l.Z)(h,"nextId",0),(0,l.Z)(h,"\u0275fac",function(r){return new(r||p)(t.Y36(a.WI),t.Y36(e.zRJ),t.Y36(a.so),t.Y36(e.T7Z),t.Y36(T.e),t.Y36(f.sK),t.Y36(t.sBO),t.Y36(C.i))}),(0,l.Z)(h,"\u0275cmp",t.Xpm({type:p,selectors:[["app-cms-bankpayment-transaction-info"]],inputs:{optionLoading:"optionLoading"},decls:12,vars:9,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","table",4,"ngIf"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],[1,"table"],[1,"tr"],[1,"td"],[2,"clear","both"],[4,"ngIf"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"]],template:function(r,c){1&r&&(t.TgZ(0,"div",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t._UZ(4,"app-progress-spinner",2),t.YNc(5,y,31,22,"div",3),t.qZA(),t.TgZ(6,"div",4)(7,"div",5)(8,"button",6),t.NdJ("click",function(){return c.onFormCancel()}),t._UZ(9,"i",7),t._uU(10),t.ALo(11,"translate"),t.qZA()()()),2&r&&(t.xp6(1),t.AsE(" ",t.lcZ(2,5,"TITLE.Transaction_status"),":",c.requestId," "),t.xp6(3),t.Q6J("options",c.loading),t.xp6(1),t.Q6J("ngIf",c.dataModelResult.item&&c.dataModelResult.item.id>0),t.xp6(5),t.hij(" ",t.lcZ(11,7,"ACTION.BACK")," "))},dependencies:[E.O5,v.d$,P.O,f.X$,Z.B],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f5;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.clear[_ngcontent-%COMP%]{clear:both}"]})),h})()},76049:(B,S,i)=>{i.d(S,{T:()=>x});var l=i(8239),a=i(86889),e=i(64537),M=i(20092),t=i(34511),T=i(57445),f=i(51927),C=i(83151),E=i(42147),v=i(61528),P=i(27969),Z=i(60656),D=i(56707),y=i(94032),A=i(88692),p=i(61637),h=i(1379),_=i(88659),r=i(83331),c=i(39665),I=i(75738),R=i(81418);function L(m,u){if(1&m&&(e._UZ(0,"img",9),e.ALo(1,"cmsthumbnail")),2&m){const g=e.oxw();e.s9C("src",e.lcZ(1,1,g.dataModelSelect.linkMainImageIdSrc),e.LSH)}}function U(m,u){if(1&m&&(e._UZ(0,"img",9),e.ALo(1,"cmsthumbnail")),2&m){const g=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,g.linkMainImageIdSrc),e.LSH)}}function b(m,u){if(1&m&&(e.TgZ(0,"mat-option",10),e.YNc(1,U,2,3,"img",3),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&m){const g=u.$implicit,o=e.oxw();e.Q6J("value",g)("disabled",o.optionDisabled),e.xp6(1),e.Q6J("ngIf",g.linkMainImageIdSrc),e.xp6(2),e.Oqu(o.displayOption(g))}}function W(m,u){if(1&m){const g=e.EpF();e.TgZ(0,"mat-icon",11),e.NdJ("click",function(){e.CHM(g);const n=e.oxw();return e.KtG(n.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const K=["*"];let x=(()=>{var m;class u{constructor(o,n,d,O,s){(0,a.Z)(this,"coreEnumService",void 0),(0,a.Z)(this,"translate",void 0),(0,a.Z)(this,"cdr",void 0),(0,a.Z)(this,"publicHelper",void 0),(0,a.Z)(this,"categoryService",void 0),(0,a.Z)(this,"id",++u.nextId),(0,a.Z)(this,"dataModelResult",new t.y$4),(0,a.Z)(this,"dataModelSelect",new t.CWo),(0,a.Z)(this,"formControl",new M.NI),(0,a.Z)(this,"filteredOptions",void 0),(0,a.Z)(this,"optionDisabled",!1),(0,a.Z)(this,"optionSelectFirstItem",!1),(0,a.Z)(this,"optionPlaceholder",""),(0,a.Z)(this,"optionChange",new e.vpe),(0,a.Z)(this,"optionReload",()=>this.onActionReload()),(0,a.Z)(this,"loading",new Z.O),(0,a.Z)(this,"dateUseStore",!0),this.coreEnumService=o,this.translate=n,this.cdr=d,this.publicHelper=O,this.categoryService=s,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(o){this.onActionSelectForce(o)}get optionLoading(){return this.loading}set optionLoading(o){this.loading=o}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,f.O)(""),(0,C.b)(1500),(0,E.x)(),(0,v.w)(o=>this.DataGetAll("string"==typeof o||"number"==typeof o?o:"")))}displayFn(o){return o?o.titleML:void 0}displayOption(o){return o?o.titleML:void 0}DataGetAll(o){var n=this;return(0,l.Z)(function*(){if(n.dateUseStore&&(n.dataModelResult=yield n.publicHelper.getCurrency(),n.dataModelResult.isSuccess))return n.optionSelectFirstItem&&(!n.dataModelSelect||!n.dataModelSelect.id||n.dataModelSelect.id<=0)&&n.dataModelResult.listItems.length>0&&(n.optionSelectFirstItem=!1,setTimeout(()=>{n.formControl.setValue(n.dataModelResult.listItems[0])},1e3),n.onActionSelect(n.dataModelResult.listItems[0])),n.dataModelResult.listItems;const d=new t.Hay;if(d.rowPerPage=20,d.accessLoad=!0,o&&o.length>0){let s=new t.AO3;s=new t.AO3,s.propertyName="Symbol",s.value=o,s.searchType=t.J6G.Contains,s.clauseType=t.ppe.Or,d.filters.push(s),s=new t.AO3,s.propertyName="Title",s.value=o,s.searchType=t.J6G.Contains,s.clauseType=t.ppe.Or,d.filters.push(s),o&&"number"==typeof+o&&+o>0&&(s=new t.AO3,s.propertyName="Id",s.value=o,s.searchType=t.J6G.Equal,s.clauseType=t.ppe.Or,d.filters.push(s))}const O=n.constructor.name+"ServiceGetAll";return n.loading.Start(O),n.categoryService.setAccessDataType(t.dR.Viewer),yield(0,T.z)(n.categoryService.ServiceGetAll(d)).then(s=>(n.dataModelResult=s,n.optionSelectFirstItem&&(!n.dataModelSelect||!n.dataModelSelect.id||n.dataModelSelect.id<=0)&&n.dataModelResult.listItems.length>0&&(n.optionSelectFirstItem=!1,setTimeout(()=>{n.formControl.setValue(n.dataModelResult.listItems[0])},1e3),n.onActionSelect(n.dataModelResult.listItems[0])),n.loading.Stop(O),s.listItems))})()}onActionSelect(o){this.optionDisabled||(this.dataModelSelect=o,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(o){return this.filteredOptions.pipe((0,P.U)(n=>(n.find(d=>d.id===o.id)||n.push(o),n)))}onActionSelectForce(o){if("number"==typeof o&&o>0){if(this.dataModelSelect&&this.dataModelSelect.id===o)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(n=>n.id===o)){const n=this.dataModelResult.listItems.find(d=>d.id===o);return this.dataModelSelect=n,void this.formControl.setValue(n)}this.categoryService.ServiceGetOneById(o).subscribe(n=>{n.isSuccess&&(this.filteredOptions=this.push(n.item),this.dataModelSelect=n.item,this.formControl.setValue(n.item),this.optionChange.emit(n.item))})}else{if(typeof o==typeof t.CWo)return this.filteredOptions=this.push(o),this.dataModelSelect=o,void this.formControl.setValue(o);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new t.CWo,this.loadOptions()}}return m=u,(0,a.Z)(u,"nextId",0),(0,a.Z)(u,"\u0275fac",function(o){return new(o||m)(e.Y36(t.FLW),e.Y36(D.sK),e.Y36(e.sBO),e.Y36(y.i),e.Y36(t._GB))}),(0,a.Z)(u,"\u0275cmp",e.Xpm({type:m,selectors:[["app-cms-currency-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:K,decls:12,vars:11,consts:[[1,"ntk-full-width"],[3,"options"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,n){if(1&o&&(e.F$t(),e.TgZ(0,"mat-form-field",0),e._UZ(1,"app-progress-spinner",1),e.TgZ(2,"span",2),e.YNc(3,L,2,3,"img",3),e._uU(4," \xa0"),e.qZA(),e._UZ(5,"input",4),e.TgZ(6,"mat-autocomplete",5,6),e.NdJ("optionSelected",function(O){return n.onActionSelect(O.option.value)}),e.YNc(8,b,4,4,"mat-option",7),e.ALo(9,"async"),e.qZA(),e.YNc(10,W,2,0,"mat-icon",8),e.Hsn(11),e.qZA()),2&o){const d=e.MAs(7);e.xp6(1),e.Q6J("options",n.loading),e.xp6(2),e.Q6J("ngIf",n.dataModelSelect&&(null==n.dataModelSelect?null:n.dataModelSelect.linkMainImageIdSrc)),e.xp6(2),e.s9C("placeholder",n.optionPlaceholder),e.Q6J("formControl",n.formControl)("matAutocomplete",d),e.uIk("disabled",!!n.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(9,9,n.filteredOptions)),e.xp6(2),e.Q6J("ngIf",null==n.dataModelSelect?null:n.dataModelSelect.id)}},dependencies:[A.sg,A.O5,M.Fj,M.JJ,M.oH,p.XC,h.ey,p.ZL,_.KE,_.qo,_.R9,r.Hw,c.Nt,I.O,A.Ov,R.v],encapsulation:2})),u})()}}]);