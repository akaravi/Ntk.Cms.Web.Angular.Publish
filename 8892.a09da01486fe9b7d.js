"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[8892],{39084:(I,M,n)=>{n.d(M,{Y:()=>E});var l=n(86889),i=n(87241),e=n(27969),h=n(64537),_=n(34511);let E=(()=>{class f{constructor(d){(0,l.Z)(this,"service",void 0),this.service=d}transform(d){return!d||d<=0?new i.y:this.service.ServiceGetOneById(d).pipe((0,e.U)(s=>{var a="";return s.isSuccess&&(s.item.title&&s.item.title.length>0&&(a=s.item.title),s.item.id&&s.item.id>0&&(a.length>0&&(a+=" | "),a+=s.item.id),s.item.domain&&s.item.domain.length>0&&s.item.subDomain&&s.item.subDomain.length>0?(a.length>0&&(a+=" | "),a=a+s.item.subDomain+"."+s.item.domain):s.item.domain&&s.item.domain.length>0&&(a.length>0&&(a+=" | "),a+=s.item.domain)),a},s=>""))}}return(0,l.Z)(f,"\u0275fac",function(d){return new(d||f)(h.Y36(_._0e,16))}),(0,l.Z)(f,"\u0275pipe",h.Yjl({name:"cmssiteinfo",type:f,pure:!0})),f})()},93817:(I,M,n)=>{n.d(M,{J:()=>E});var l=n(86889),i=n(87241),e=n(27969),h=n(64537),_=n(34511);let E=(()=>{class f{constructor(d){(0,l.Z)(this,"service",void 0),this.service=d}transform(d){return!d||d<=0?new i.y:this.service.ServiceGetOneById(d).pipe((0,e.U)(s=>{var a="";return s.isSuccess&&(s.item.username&&s.item.username.length>0&&(a=s.item.username),s.item.email&&s.item.email.length>0&&(a.length>0&&(a+=" | "),a+=s.item.email),s.item.name&&s.item.name.length>0&&(a.length>0&&(a+=" | "),a+=s.item.name),s.item.lastName&&s.item.lastName.length>0&&(a.length>0&&(a+=" | "),a+=s.item.lastName),s.item.mobile&&s.item.mobile.length>0&&(a.length>0&&(a+=" | "),a+=s.item.mobile)),a},s=>""))}}return(0,l.Z)(f,"\u0275fac",function(d){return new(d||f)(h.Y36(_.k$Z,16))}),(0,l.Z)(f,"\u0275pipe",h.Yjl({name:"cmsuserinfo",type:f,pure:!0})),f})()},76609:(I,M,n)=>{n.d(M,{D:()=>K});var l=n(8239),i=n(86889),e=n(64537),h=n(20092),_=n(34511),E=n(57445),f=n(51927),S=n(83151),d=n(42147),s=n(61528),a=n(27969),v=n(60656),O=n(56707),r=n(88692),u=n(61637),g=n(1379),P=n(88659),D=n(83331),L=n(39665),R=n(75738),T=n(81418);function y(m,A){if(1&m&&(e._UZ(0,"img",9),e.ALo(1,"cmsthumbnail")),2&m){const t=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,t.linkImageIdSrc),e.LSH)}}function Z(m,A){if(1&m&&(e.TgZ(0,"mat-option",7),e.YNc(1,y,2,3,"img",8),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&m){const t=A.$implicit,o=e.oxw();e.Q6J("value",t)("disabled",o.optionDisabled),e.xp6(1),e.Q6J("ngIf",t.linkImageIdSrc),e.xp6(2),e.Oqu(o.displayOption(t))}}function W(m,A){if(1&m){const t=e.EpF();e.TgZ(0,"mat-icon",10),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const U=["*"];let K=(()=>{class m{constructor(t,o,p,C){(0,i.Z)(this,"coreEnumService",void 0),(0,i.Z)(this,"translate",void 0),(0,i.Z)(this,"cdr",void 0),(0,i.Z)(this,"categoryService",void 0),(0,i.Z)(this,"id",++m.nextId),(0,i.Z)(this,"dataModelResult",new _.y$4),(0,i.Z)(this,"dataModelSelect",new _.Dp$),(0,i.Z)(this,"formControl",new h.NI),(0,i.Z)(this,"filteredOptions",void 0),(0,i.Z)(this,"optionDisabled",!1),(0,i.Z)(this,"optionSelectFirstItem",!1),(0,i.Z)(this,"optionPlaceholder",""),(0,i.Z)(this,"optionChange",new e.vpe),(0,i.Z)(this,"optionReload",()=>this.onActionReload()),(0,i.Z)(this,"loading",new v.O),this.coreEnumService=t,this.translate=o,this.cdr=p,this.categoryService=C,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(t){this.onActionSelectForce(t)}get optionLoading(){return this.loading}set optionLoading(t){this.loading=t}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,f.O)(""),(0,S.b)(1500),(0,d.x)(),(0,s.w)(t=>this.DataGetAll("string"==typeof t||"number"==typeof t?t:"")))}displayFn(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}displayOption(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}DataGetAll(t){var o=this;return(0,l.Z)(function*(){const p=new _.Hay;if(p.rowPerPage=20,p.accessLoad=!0,t&&t.length>0){let c=new _.AO3;c=new _.AO3,c.propertyName="Symbol",c.value=t,c.searchType=_.b3P.Contains,c.clauseType=_.KT6.Or,p.filters.push(c),c=new _.AO3,c.propertyName="Title",c.value=t,c.searchType=_.b3P.Contains,c.clauseType=_.KT6.Or,p.filters.push(c),t&&"number"==typeof+t&&+t>0&&(c=new _.AO3,c.propertyName="Id",c.value=t,c.searchType=_.b3P.Equal,c.clauseType=_.KT6.Or,p.filters.push(c))}const C=o.constructor.name+"main";return o.loading.Start(C),yield(0,E.z)(o.categoryService.ServiceGetAll(p)).then(c=>(o.dataModelResult=c,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.loading.Stop(C),c.listItems))})()}onActionSelect(t){this.optionDisabled||(this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(t){return this.filteredOptions.pipe((0,a.U)(o=>(o.find(p=>p.id===t.id)||o.push(t),o)))}onActionSelectForce(t){if("number"==typeof t&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===t)){const o=this.dataModelResult.listItems.find(p=>p.id===t);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneIncludeParent(t).subscribe(o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))})}else{if(typeof t==typeof _.Dp$)return this.filteredOptions=this.push(t),this.dataModelSelect=t,void this.formControl.setValue(t);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new _.Dp$,this.loadOptions()}}return(0,i.Z)(m,"nextId",0),(0,i.Z)(m,"\u0275fac",function(t){return new(t||m)(e.Y36(_.FLW),e.Y36(O.sK),e.Y36(e.sBO),e.Y36(_.XRW))}),(0,i.Z)(m,"\u0275cmp",e.Xpm({type:m,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:U,decls:9,vars:10,consts:[[1,"ntk-full-width"],[3,"options"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto34","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,o){if(1&t&&(e.F$t(),e.TgZ(0,"mat-form-field",0),e._UZ(1,"app-progress-spinner",1)(2,"input",2),e.TgZ(3,"mat-autocomplete",3,4),e.NdJ("optionSelected",function(C){return o.onActionSelect(C.option.value)}),e.YNc(5,Z,4,4,"mat-option",5),e.ALo(6,"async"),e.qZA(),e.YNc(7,W,2,0,"mat-icon",6),e.Hsn(8),e.qZA()),2&t){const p=e.MAs(4);e.xp6(1),e.Q6J("options",o.loading),e.xp6(1),e.s9C("placeholder",o.optionPlaceholder),e.Q6J("formControl",o.formControl)("matAutocomplete",p),e.uIk("disabled",!!o.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",o.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(6,8,o.filteredOptions)),e.xp6(2),e.Q6J("ngIf",o.dataModelSelect.id)}},dependencies:[r.sg,r.O5,h.Fj,h.JJ,h.oH,u.XC,g.ey,u.ZL,P.KE,P.R9,D.Hw,L.Nt,R.O,r.Ov,T.v],encapsulation:2})),m})()},64370:(I,M,n)=>{n.d(M,{a:()=>a});var l=n(86889),i=n(64537),e=n(20092),h=n(34511),_=n(60656),E=n(32607),f=n(56707),S=n(88692),d=n(71561);function s(v,O){if(1&v){const r=i.EpF();i.TgZ(0,"li")(1,"mat-checkbox",1),i.NdJ("change",function(){const P=i.CHM(r).$implicit,D=i.oxw();return i.KtG(D.onActionSelect(P))}),i._uU(2),i.qZA()()}if(2&v){const r=O.$implicit,u=i.oxw();i.xp6(1),i.Q6J("checked",u.fieldsStatus.get(r.id))("disabled",u.optionDisabled),i.xp6(1),i.hij(" ",r.title," ")}}let a=(()=>{class v{constructor(r,u,g,P,D){(0,l.Z)(this,"coreEnumService",void 0),(0,l.Z)(this,"categoryService",void 0),(0,l.Z)(this,"cdr",void 0),(0,l.Z)(this,"cmsToastrService",void 0),(0,l.Z)(this,"translate",void 0),(0,l.Z)(this,"id",++v.nextId),(0,l.Z)(this,"dataModelResult",new h.y$4),(0,l.Z)(this,"dataModelSelect",[]),(0,l.Z)(this,"dataIdsSelect",[]),(0,l.Z)(this,"loading",new _.O),(0,l.Z)(this,"formControl",new e.NI),(0,l.Z)(this,"fieldsStatus",new Map),(0,l.Z)(this,"optionDisabled",!1),(0,l.Z)(this,"optionSelectFirstItem",!1),(0,l.Z)(this,"optionPlaceholder",new i.vpe),(0,l.Z)(this,"optionChange",new i.vpe),(0,l.Z)(this,"optionSelectAdded",new i.vpe),(0,l.Z)(this,"optionSelectRemoved",new i.vpe),(0,l.Z)(this,"optionReload",()=>this.onActionReload()),this.coreEnumService=r,this.categoryService=u,this.cdr=g,this.cmsToastrService=P,this.translate=D,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}get optionLoading(){return this.loading}set optionLoading(r){this.loading=r}set optionSelectForce(r){this.onActionSelectForce(r)}ngOnInit(){this.DataGetAll()}DataGetAll(){const r=new h.Hay;r.rowPerPage=50,r.accessLoad=!0;const u=this.constructor.name+"main";this.loading.Start(u),this.categoryService.ServiceGetAll(r).subscribe(g=>{g.isSuccess&&(this.dataModelResult=g,this.dataModelResult.listItems.forEach(P=>this.fieldsStatus.set(P.id,!1)),this.dataIdsSelect.forEach(P=>this.fieldsStatus.set(P,!0)),this.dataModelResult.listItems.forEach(P=>{this.fieldsStatus.get(P.id)&&this.dataModelSelect.push(P)})),this.loading.Stop(u)},g=>{this.cmsToastrService.typeError(g),this.loading.Stop(u)})}onActionSelect(r){this.fieldsStatus.get(r.id)?(this.fieldsStatus.set(r.id,!1),this.optionSelectRemoved.emit(r),this.dataModelSelect.splice(this.dataModelSelect.indexOf(r),1)):(this.fieldsStatus.set(r.id,!0),this.optionSelectAdded.emit(r),this.dataModelSelect.push(r)),this.optionChange.emit(this.dataModelSelect)}onActionSelectForce(r){typeof r==typeof Array(Number)?r.forEach(u=>{this.dataIdsSelect.push(u)}):typeof r==typeof Array(h.MCb)&&r.forEach(u=>{this.dataIdsSelect.push(u.id)}),this.dataIdsSelect.forEach(u=>this.fieldsStatus.set(u,!0))}onActionReload(){this.DataGetAll()}}return(0,l.Z)(v,"nextId",0),(0,l.Z)(v,"\u0275fac",function(r){return new(r||v)(i.Y36(h.FLW),i.Y36(h.PwI),i.Y36(i.sBO),i.Y36(E.e),i.Y36(f.sK))}),(0,l.Z)(v,"\u0275cmp",i.Xpm({type:v,selectors:[["app-cms-sitecategory-selectionlist"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionSelectAdded:"optionSelectAdded",optionSelectRemoved:"optionSelectRemoved"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"checked","disabled","change"]],template:function(r,u){1&r&&(i.TgZ(0,"ul"),i.YNc(1,s,3,3,"li",0),i.qZA()),2&r&&(i.xp6(1),i.Q6J("ngForOf",u.dataModelResult.listItems))},dependencies:[S.sg,d.oG],encapsulation:2})),v})()}}]);