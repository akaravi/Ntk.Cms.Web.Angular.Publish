"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[3099],{76609:(L,S,n)=>{n.d(S,{D:()=>U});var r=n(8239),i=n(86889),e=n(64537),h=n(20092),_=n(34511),M=n(57445),E=n(51927),C=n(83151),O=n(42147),D=n(61528),A=n(27969),d=n(60656),P=n(56707),o=n(88692),l=n(61637),m=n(1379),u=n(88659),f=n(83331),I=n(39665),R=n(75738),T=n(81418);function Z(p,g){if(1&p&&(e._UZ(0,"img",9),e.ALo(1,"cmsthumbnail")),2&p){const t=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,t.linkImageIdSrc),e.LSH)}}function y(p,g){if(1&p&&(e.TgZ(0,"mat-option",7),e.YNc(1,Z,2,3,"img",8),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&p){const t=g.$implicit,a=e.oxw();e.Q6J("value",t)("disabled",a.optionDisabled),e.xp6(1),e.Q6J("ngIf",t.linkImageIdSrc),e.xp6(2),e.Oqu(a.displayOption(t))}}function K(p,g){if(1&p){const t=e.EpF();e.TgZ(0,"mat-icon",10),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const W=["*"];let U=(()=>{class p{constructor(t,a,c,v){(0,i.Z)(this,"coreEnumService",void 0),(0,i.Z)(this,"translate",void 0),(0,i.Z)(this,"cdr",void 0),(0,i.Z)(this,"categoryService",void 0),(0,i.Z)(this,"id",++p.nextId),(0,i.Z)(this,"dataModelResult",new _.y$4),(0,i.Z)(this,"dataModelSelect",new _.Dp$),(0,i.Z)(this,"formControl",new h.NI),(0,i.Z)(this,"filteredOptions",void 0),(0,i.Z)(this,"optionDisabled",!1),(0,i.Z)(this,"optionSelectFirstItem",!1),(0,i.Z)(this,"optionPlaceholder",""),(0,i.Z)(this,"optionChange",new e.vpe),(0,i.Z)(this,"optionReload",()=>this.onActionReload()),(0,i.Z)(this,"loading",new d.O),this.coreEnumService=t,this.translate=a,this.cdr=c,this.categoryService=v,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(t){this.onActionSelectForce(t)}get optionLoading(){return this.loading}set optionLoading(t){this.loading=t}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,E.O)(""),(0,C.b)(1500),(0,O.x)(),(0,D.w)(t=>this.DataGetAll("string"==typeof t||"number"==typeof t?t:"")))}displayFn(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}displayOption(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}DataGetAll(t){var a=this;return(0,r.Z)(function*(){const c=new _.Hay;if(c.rowPerPage=20,c.accessLoad=!0,t&&t.length>0){let s=new _.AO3;s=new _.AO3,s.propertyName="Symbol",s.value=t,s.searchType=_.b3P.Contains,s.clauseType=_.KT6.Or,c.filters.push(s),s=new _.AO3,s.propertyName="Title",s.value=t,s.searchType=_.b3P.Contains,s.clauseType=_.KT6.Or,c.filters.push(s),t&&"number"==typeof+t&&+t>0&&(s=new _.AO3,s.propertyName="Id",s.value=t,s.searchType=_.b3P.Equal,s.clauseType=_.KT6.Or,c.filters.push(s))}const v=a.constructor.name+"main";return a.loading.Start(v),yield(0,M.z)(a.categoryService.ServiceGetAll(c)).then(s=>(a.dataModelResult=s,a.optionSelectFirstItem&&(!a.dataModelSelect||!a.dataModelSelect.id||a.dataModelSelect.id<=0)&&a.dataModelResult.listItems.length>0&&(a.optionSelectFirstItem=!1,setTimeout(()=>{a.formControl.setValue(a.dataModelResult.listItems[0])},1e3),a.onActionSelect(a.dataModelResult.listItems[0])),a.loading.Stop(v),s.listItems))})()}onActionSelect(t){this.optionDisabled||(this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(t){return this.filteredOptions.pipe((0,A.U)(a=>(a.find(c=>c.id===t.id)||a.push(t),a)))}onActionSelectForce(t){if("number"==typeof t&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(a=>a.id===t)){const a=this.dataModelResult.listItems.find(c=>c.id===t);return this.dataModelSelect=a,void this.formControl.setValue(a)}this.categoryService.ServiceGetOneIncludeParent(t).subscribe(a=>{a.isSuccess&&(this.filteredOptions=this.push(a.item),this.dataModelSelect=a.item,this.formControl.setValue(a.item),this.optionChange.emit(a.item))})}else{if(typeof t==typeof _.Dp$)return this.filteredOptions=this.push(t),this.dataModelSelect=t,void this.formControl.setValue(t);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new _.Dp$,this.loadOptions()}}return(0,i.Z)(p,"nextId",0),(0,i.Z)(p,"\u0275fac",function(t){return new(t||p)(e.Y36(_.FLW),e.Y36(P.sK),e.Y36(e.sBO),e.Y36(_.XRW))}),(0,i.Z)(p,"\u0275cmp",e.Xpm({type:p,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:W,decls:9,vars:10,consts:[[1,"ntk-full-width"],[3,"options"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto34","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,a){if(1&t&&(e.F$t(),e.TgZ(0,"mat-form-field",0),e._UZ(1,"app-progress-spinner",1)(2,"input",2),e.TgZ(3,"mat-autocomplete",3,4),e.NdJ("optionSelected",function(v){return a.onActionSelect(v.option.value)}),e.YNc(5,y,4,4,"mat-option",5),e.ALo(6,"async"),e.qZA(),e.YNc(7,K,2,0,"mat-icon",6),e.Hsn(8),e.qZA()),2&t){const c=e.MAs(4);e.xp6(1),e.Q6J("options",a.loading),e.xp6(1),e.s9C("placeholder",a.optionPlaceholder),e.Q6J("formControl",a.formControl)("matAutocomplete",c),e.uIk("disabled",!!a.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",a.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(6,8,a.filteredOptions)),e.xp6(2),e.Q6J("ngIf",a.dataModelSelect.id)}},dependencies:[o.sg,o.O5,h.Fj,h.JJ,h.oH,l.XC,m.ey,l.ZL,u.KE,u.R9,f.Hw,I.Nt,R.O,o.Ov,T.v],encapsulation:2})),p})()},64370:(L,S,n)=>{n.d(S,{a:()=>A});var r=n(86889),i=n(64537),e=n(20092),h=n(34511),_=n(60656),M=n(32607),E=n(56707),C=n(88692),O=n(71561);function D(d,P){if(1&d){const o=i.EpF();i.TgZ(0,"li")(1,"mat-checkbox",1),i.NdJ("change",function(){const u=i.CHM(o).$implicit,f=i.oxw();return i.KtG(f.onActionSelect(u))}),i._uU(2),i.qZA()()}if(2&d){const o=P.$implicit,l=i.oxw();i.xp6(1),i.Q6J("checked",l.fieldsStatus.get(o.id))("disabled",l.optionDisabled),i.xp6(1),i.hij(" ",o.title," ")}}let A=(()=>{class d{constructor(o,l,m,u,f){(0,r.Z)(this,"coreEnumService",void 0),(0,r.Z)(this,"categoryService",void 0),(0,r.Z)(this,"cdr",void 0),(0,r.Z)(this,"cmsToastrService",void 0),(0,r.Z)(this,"translate",void 0),(0,r.Z)(this,"id",++d.nextId),(0,r.Z)(this,"dataModelResult",new h.y$4),(0,r.Z)(this,"dataModelSelect",[]),(0,r.Z)(this,"dataIdsSelect",[]),(0,r.Z)(this,"loading",new _.O),(0,r.Z)(this,"formControl",new e.NI),(0,r.Z)(this,"fieldsStatus",new Map),(0,r.Z)(this,"optionDisabled",!1),(0,r.Z)(this,"optionSelectFirstItem",!1),(0,r.Z)(this,"optionPlaceholder",new i.vpe),(0,r.Z)(this,"optionChange",new i.vpe),(0,r.Z)(this,"optionSelectAdded",new i.vpe),(0,r.Z)(this,"optionSelectRemoved",new i.vpe),(0,r.Z)(this,"optionReload",()=>this.onActionReload()),this.coreEnumService=o,this.categoryService=l,this.cdr=m,this.cmsToastrService=u,this.translate=f,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}get optionLoading(){return this.loading}set optionLoading(o){this.loading=o}set optionSelectForce(o){this.onActionSelectForce(o)}ngOnInit(){this.DataGetAll()}DataGetAll(){const o=new h.Hay;o.rowPerPage=50,o.accessLoad=!0;const l=this.constructor.name+"main";this.loading.Start(l),this.categoryService.ServiceGetAll(o).subscribe(m=>{m.isSuccess&&(this.dataModelResult=m,this.dataModelResult.listItems.forEach(u=>this.fieldsStatus.set(u.id,!1)),this.dataIdsSelect.forEach(u=>this.fieldsStatus.set(u,!0)),this.dataModelResult.listItems.forEach(u=>{this.fieldsStatus.get(u.id)&&this.dataModelSelect.push(u)})),this.loading.Stop(l)},m=>{this.cmsToastrService.typeError(m),this.loading.Stop(l)})}onActionSelect(o){this.fieldsStatus.get(o.id)?(this.fieldsStatus.set(o.id,!1),this.optionSelectRemoved.emit(o),this.dataModelSelect.splice(this.dataModelSelect.indexOf(o),1)):(this.fieldsStatus.set(o.id,!0),this.optionSelectAdded.emit(o),this.dataModelSelect.push(o)),this.optionChange.emit(this.dataModelSelect)}onActionSelectForce(o){typeof o==typeof Array(Number)?o.forEach(l=>{this.dataIdsSelect.push(l)}):typeof o==typeof Array(h.MCb)&&o.forEach(l=>{this.dataIdsSelect.push(l.id)}),this.dataIdsSelect.forEach(l=>this.fieldsStatus.set(l,!0))}onActionReload(){this.DataGetAll()}}return(0,r.Z)(d,"nextId",0),(0,r.Z)(d,"\u0275fac",function(o){return new(o||d)(i.Y36(h.FLW),i.Y36(h.PwI),i.Y36(i.sBO),i.Y36(M.e),i.Y36(E.sK))}),(0,r.Z)(d,"\u0275cmp",i.Xpm({type:d,selectors:[["app-cms-sitecategory-selectionlist"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionSelectAdded:"optionSelectAdded",optionSelectRemoved:"optionSelectRemoved"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"checked","disabled","change"]],template:function(o,l){1&o&&(i.TgZ(0,"ul"),i.YNc(1,D,3,3,"li",0),i.qZA()),2&o&&(i.xp6(1),i.Q6J("ngForOf",l.dataModelResult.listItems))},dependencies:[C.sg,O.oG],encapsulation:2})),d})()}}]);