"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[3099],{76609:(L,S,a)=>{a.d(S,{D:()=>U});var r=a(8239),i=a(86889),e=a(64537),h=a(20092),_=a(34511),M=a(57445),E=a(51927),C=a(83151),O=a(42147),A=a(61528),D=a(27969),d=a(60656),P=a(56707),n=a(88692),l=a(61637),m=a(1379),u=a(88659),g=a(83331),I=a(39665),R=a(75738),T=a(81418);function Z(p,f){if(1&p&&(e._UZ(0,"img",9),e.ALo(1,"cmsthumbnail")),2&p){const t=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,t.linkImageIdSrc),e.LSH)}}function y(p,f){if(1&p&&(e.TgZ(0,"mat-option",7),e.YNc(1,Z,2,3,"img",8),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&p){const t=f.$implicit,o=e.oxw();e.Q6J("value",t)("disabled",o.optionDisabled),e.xp6(1),e.Q6J("ngIf",t.linkImageIdSrc),e.xp6(2),e.Oqu(o.displayOption(t))}}function W(p,f){if(1&p){const t=e.EpF();e.TgZ(0,"mat-icon",10),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const K=["*"];let U=(()=>{class p{constructor(t,o,c,v){(0,i.Z)(this,"coreEnumService",void 0),(0,i.Z)(this,"translate",void 0),(0,i.Z)(this,"cdr",void 0),(0,i.Z)(this,"categoryService",void 0),(0,i.Z)(this,"id",++p.nextId),(0,i.Z)(this,"dataModelResult",new _.y$4),(0,i.Z)(this,"dataModelSelect",new _.Dp$),(0,i.Z)(this,"formControl",new h.NI),(0,i.Z)(this,"filteredOptions",void 0),(0,i.Z)(this,"optionDisabled",!1),(0,i.Z)(this,"optionSelectFirstItem",!1),(0,i.Z)(this,"optionPlaceholder",""),(0,i.Z)(this,"optionChange",new e.vpe),(0,i.Z)(this,"optionReload",()=>this.onActionReload()),(0,i.Z)(this,"loading",new d.O),this.coreEnumService=t,this.translate=o,this.cdr=c,this.categoryService=v,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(t){this.onActionSelectForce(t)}get optionLoading(){return this.loading}set optionLoading(t){this.loading=t}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,E.O)(""),(0,C.b)(1500),(0,O.x)(),(0,A.w)(t=>this.DataGetAll("string"==typeof t||"number"==typeof t?t:"")))}displayFn(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}displayOption(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}DataGetAll(t){var o=this;return(0,r.Z)(function*(){const c=new _.Hay;if(c.rowPerPage=20,c.accessLoad=!0,t&&t.length>0){let s=new _.AO3;s=new _.AO3,s.propertyName="Symbol",s.value=t,s.searchType=_.b3P.Contains,s.clauseType=_.KT6.Or,c.filters.push(s),s=new _.AO3,s.propertyName="Title",s.value=t,s.searchType=_.b3P.Contains,s.clauseType=_.KT6.Or,c.filters.push(s),t&&"number"==typeof+t&&+t>0&&(s=new _.AO3,s.propertyName="Id",s.value=t,s.searchType=_.b3P.Equal,s.clauseType=_.KT6.Or,c.filters.push(s))}const v=o.constructor.name+"main";return o.loading.Start(v),yield(0,M.z)(o.categoryService.ServiceGetAll(c)).then(s=>(o.dataModelResult=s,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.loading.Stop(v),s.listItems))})()}onActionSelect(t){this.optionDisabled||(this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(t){return this.filteredOptions.pipe((0,D.U)(o=>(o.find(c=>c.id===t.id)||o.push(t),o)))}onActionSelectForce(t){if("number"==typeof t&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===t)){const o=this.dataModelResult.listItems.find(c=>c.id===t);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneIncludeParent(t).subscribe(o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))})}else{if(typeof t==typeof _.Dp$)return this.filteredOptions=this.push(t),this.dataModelSelect=t,void this.formControl.setValue(t);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new _.Dp$,this.loadOptions()}}return(0,i.Z)(p,"nextId",0),(0,i.Z)(p,"\u0275fac",function(t){return new(t||p)(e.Y36(_.FLW),e.Y36(P.sK),e.Y36(e.sBO),e.Y36(_.XRW))}),(0,i.Z)(p,"\u0275cmp",e.Xpm({type:p,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:K,decls:9,vars:10,consts:[[1,"ntk-full-width"],[3,"options"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto34","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,o){if(1&t&&(e.F$t(),e.TgZ(0,"mat-form-field",0),e._UZ(1,"app-progress-spinner",1)(2,"input",2),e.TgZ(3,"mat-autocomplete",3,4),e.NdJ("optionSelected",function(v){return o.onActionSelect(v.option.value)}),e.YNc(5,y,4,4,"mat-option",5),e.ALo(6,"async"),e.qZA(),e.YNc(7,W,2,0,"mat-icon",6),e.Hsn(8),e.qZA()),2&t){const c=e.MAs(4);e.xp6(1),e.Q6J("options",o.loading),e.xp6(1),e.s9C("placeholder",o.optionPlaceholder),e.Q6J("formControl",o.formControl)("matAutocomplete",c),e.uIk("disabled",!!o.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",o.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(6,8,o.filteredOptions)),e.xp6(2),e.Q6J("ngIf",o.dataModelSelect.id)}},dependencies:[n.sg,n.O5,h.Fj,h.JJ,h.oH,l.XC,m.ey,l.ZL,u.KE,u.R9,g.Hw,I.Nt,R.O,n.Ov,T.v],encapsulation:2})),p})()},64370:(L,S,a)=>{a.d(S,{a:()=>D});var r=a(86889),i=a(64537),e=a(20092),h=a(34511),_=a(60656),M=a(32607),E=a(56707),C=a(88692),O=a(71561);function A(d,P){if(1&d){const n=i.EpF();i.TgZ(0,"li")(1,"mat-checkbox",1),i.NdJ("change",function(){const u=i.CHM(n).$implicit,g=i.oxw();return i.KtG(g.onActionSelect(u))}),i._uU(2),i.qZA()()}if(2&d){const n=P.$implicit,l=i.oxw();i.xp6(1),i.Q6J("checked",l.fieldsStatus.get(n.id))("disabled",l.optionDisabled),i.xp6(1),i.hij(" ",n.title," ")}}let D=(()=>{class d{constructor(n,l,m,u,g){(0,r.Z)(this,"coreEnumService",void 0),(0,r.Z)(this,"categoryService",void 0),(0,r.Z)(this,"cdr",void 0),(0,r.Z)(this,"cmsToastrService",void 0),(0,r.Z)(this,"translate",void 0),(0,r.Z)(this,"id",++d.nextId),(0,r.Z)(this,"dataModelResult",new h.y$4),(0,r.Z)(this,"dataModelSelect",[]),(0,r.Z)(this,"dataIdsSelect",[]),(0,r.Z)(this,"loading",new _.O),(0,r.Z)(this,"formControl",new e.NI),(0,r.Z)(this,"fieldsStatus",new Map),(0,r.Z)(this,"optionDisabled",!1),(0,r.Z)(this,"optionSelectFirstItem",!1),(0,r.Z)(this,"optionPlaceholder",new i.vpe),(0,r.Z)(this,"optionChange",new i.vpe),(0,r.Z)(this,"optionSelectAdded",new i.vpe),(0,r.Z)(this,"optionSelectRemoved",new i.vpe),(0,r.Z)(this,"optionReload",()=>this.onActionReload()),this.coreEnumService=n,this.categoryService=l,this.cdr=m,this.cmsToastrService=u,this.translate=g,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}get optionLoading(){return this.loading}set optionLoading(n){this.loading=n}set optionSelectForce(n){this.onActionSelectForce(n)}ngOnInit(){this.DataGetAll()}DataGetAll(){const n=new h.Hay;n.rowPerPage=50,n.accessLoad=!0;const l=this.constructor.name+"main";this.loading.Start(l),this.categoryService.ServiceGetAll(n).subscribe(m=>{m.isSuccess&&(this.dataModelResult=m,this.dataModelResult.listItems.forEach(u=>this.fieldsStatus.set(u.id,!1)),this.dataIdsSelect.forEach(u=>this.fieldsStatus.set(u,!0)),this.dataModelResult.listItems.forEach(u=>{this.fieldsStatus.get(u.id)&&this.dataModelSelect.push(u)})),this.loading.Stop(l)},m=>{this.cmsToastrService.typeError(m),this.loading.Stop(l)})}onActionSelect(n){this.fieldsStatus.get(n.id)?(this.fieldsStatus.set(n.id,!1),this.optionSelectRemoved.emit(n),this.dataModelSelect.splice(this.dataModelSelect.indexOf(n),1)):(this.fieldsStatus.set(n.id,!0),this.optionSelectAdded.emit(n),this.dataModelSelect.push(n)),this.optionChange.emit(this.dataModelSelect)}onActionSelectForce(n){typeof n==typeof Array(Number)?n.forEach(l=>{this.dataIdsSelect.push(l)}):typeof n==typeof Array(h.MCb)&&n.forEach(l=>{this.dataIdsSelect.push(l.id)}),this.dataIdsSelect.forEach(l=>this.fieldsStatus.set(l,!0))}onActionReload(){this.DataGetAll()}}return(0,r.Z)(d,"nextId",0),(0,r.Z)(d,"\u0275fac",function(n){return new(n||d)(i.Y36(h.FLW),i.Y36(h.PwI),i.Y36(i.sBO),i.Y36(M.e),i.Y36(E.sK))}),(0,r.Z)(d,"\u0275cmp",i.Xpm({type:d,selectors:[["app-cms-sitecategory-selectionlist"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionSelectAdded:"optionSelectAdded",optionSelectRemoved:"optionSelectRemoved"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"checked","disabled","change"]],template:function(n,l){1&n&&(i.TgZ(0,"ul"),i.YNc(1,A,3,3,"li",0),i.qZA()),2&n&&(i.xp6(1),i.Q6J("ngForOf",l.dataModelResult.listItems))},dependencies:[C.sg,O.oG],encapsulation:2})),d})()}}]);