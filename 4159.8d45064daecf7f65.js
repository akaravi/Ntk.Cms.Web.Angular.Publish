"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[4159],{39084:(L,S,o)=>{o.d(S,{Y:()=>E});var s=o(86889),i=o(87241),e=o(27969),h=o(64537),l=o(34511);let E=(()=>{class P{constructor(m){(0,s.Z)(this,"service",void 0),this.service=m}transform(m){return!m||m<=0?new i.y:this.service.ServiceGetOneById(m).pipe((0,e.U)(_=>{var r="";return _.isSuccess&&(_.item.title&&_.item.title.length>0&&(r=_.item.title),_.item.id&&_.item.id>0&&(r.length>0&&(r+=" | "),r+=_.item.id),_.item.domain&&_.item.domain.length>0&&_.item.subDomain&&_.item.subDomain.length>0?(r.length>0&&(r+=" | "),r=r+_.item.subDomain+"."+_.item.domain):_.item.domain&&_.item.domain.length>0&&(r.length>0&&(r+=" | "),r+=_.item.domain)),0===r.length&&(r=m.toString()),r},_=>m.toString()))}}return(0,s.Z)(P,"\u0275fac",function(m){return new(m||P)(h.Y36(l._0e,16))}),(0,s.Z)(P,"\u0275pipe",h.Yjl({name:"cmssiteinfo",type:P,pure:!0})),P})()},76609:(L,S,o)=>{o.d(S,{D:()=>U});var s=o(8239),i=o(86889),e=o(64537),h=o(20092),l=o(34511),E=o(57445),P=o(51927),C=o(83151),m=o(42147),_=o(61528),r=o(27969),v=o(60656),O=o(56707),a=o(88692),d=o(61637),g=o(1379),f=o(88659),D=o(83331),I=o(39665),R=o(75738),T=o(81418);function y(p,A){if(1&p&&(e._UZ(0,"img",9),e.ALo(1,"cmsthumbnail")),2&p){const t=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,t.linkImageIdSrc),e.LSH)}}function Z(p,A){if(1&p&&(e.TgZ(0,"mat-option",7),e.YNc(1,y,2,3,"img",8),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&p){const t=A.$implicit,n=e.oxw();e.Q6J("value",t)("disabled",n.optionDisabled),e.xp6(1),e.Q6J("ngIf",t.linkImageIdSrc),e.xp6(2),e.Oqu(n.displayOption(t))}}function W(p,A){if(1&p){const t=e.EpF();e.TgZ(0,"mat-icon",10),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const K=["*"];let U=(()=>{class p{constructor(t,n,u,M){(0,i.Z)(this,"coreEnumService",void 0),(0,i.Z)(this,"translate",void 0),(0,i.Z)(this,"cdr",void 0),(0,i.Z)(this,"categoryService",void 0),(0,i.Z)(this,"id",++p.nextId),(0,i.Z)(this,"dataModelResult",new l.y$4),(0,i.Z)(this,"dataModelSelect",new l.Dp$),(0,i.Z)(this,"formControl",new h.NI),(0,i.Z)(this,"filteredOptions",void 0),(0,i.Z)(this,"optionDisabled",!1),(0,i.Z)(this,"optionSelectFirstItem",!1),(0,i.Z)(this,"optionPlaceholder",""),(0,i.Z)(this,"optionChange",new e.vpe),(0,i.Z)(this,"optionReload",()=>this.onActionReload()),(0,i.Z)(this,"loading",new v.O),this.coreEnumService=t,this.translate=n,this.cdr=u,this.categoryService=M,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(t){this.onActionSelectForce(t)}get optionLoading(){return this.loading}set optionLoading(t){this.loading=t}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,P.O)(""),(0,C.b)(1500),(0,m.x)(),(0,_.w)(t=>this.DataGetAll("string"==typeof t||"number"==typeof t?t:"")))}displayFn(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}displayOption(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}DataGetAll(t){var n=this;return(0,s.Z)(function*(){const u=new l.Hay;if(u.rowPerPage=20,u.accessLoad=!0,t&&t.length>0){let c=new l.AO3;c=new l.AO3,c.propertyName="Symbol",c.value=t,c.searchType=l.b3P.Contains,c.clauseType=l.KT6.Or,u.filters.push(c),c=new l.AO3,c.propertyName="Title",c.value=t,c.searchType=l.b3P.Contains,c.clauseType=l.KT6.Or,u.filters.push(c),t&&"number"==typeof+t&&+t>0&&(c=new l.AO3,c.propertyName="Id",c.value=t,c.searchType=l.b3P.Equal,c.clauseType=l.KT6.Or,u.filters.push(c))}const M=n.constructor.name+"main";return n.loading.Start(M),yield(0,E.z)(n.categoryService.ServiceGetAll(u)).then(c=>(n.dataModelResult=c,n.optionSelectFirstItem&&(!n.dataModelSelect||!n.dataModelSelect.id||n.dataModelSelect.id<=0)&&n.dataModelResult.listItems.length>0&&(n.optionSelectFirstItem=!1,setTimeout(()=>{n.formControl.setValue(n.dataModelResult.listItems[0])},1e3),n.onActionSelect(n.dataModelResult.listItems[0])),n.loading.Stop(M),c.listItems))})()}onActionSelect(t){this.optionDisabled||(this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(t){return this.filteredOptions.pipe((0,r.U)(n=>(n.find(u=>u.id===t.id)||n.push(t),n)))}onActionSelectForce(t){if("number"==typeof t&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(n=>n.id===t)){const n=this.dataModelResult.listItems.find(u=>u.id===t);return this.dataModelSelect=n,void this.formControl.setValue(n)}this.categoryService.ServiceGetOneIncludeParent(t).subscribe(n=>{n.isSuccess&&(this.filteredOptions=this.push(n.item),this.dataModelSelect=n.item,this.formControl.setValue(n.item),this.optionChange.emit(n.item))})}else{if(typeof t==typeof l.Dp$)return this.filteredOptions=this.push(t),this.dataModelSelect=t,void this.formControl.setValue(t);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new l.Dp$,this.loadOptions()}}return(0,i.Z)(p,"nextId",0),(0,i.Z)(p,"\u0275fac",function(t){return new(t||p)(e.Y36(l.FLW),e.Y36(O.sK),e.Y36(e.sBO),e.Y36(l.XRW))}),(0,i.Z)(p,"\u0275cmp",e.Xpm({type:p,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:K,decls:9,vars:10,consts:[[1,"ntk-full-width"],[3,"options"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,n){if(1&t&&(e.F$t(),e.TgZ(0,"mat-form-field",0),e._UZ(1,"app-progress-spinner",1)(2,"input",2),e.TgZ(3,"mat-autocomplete",3,4),e.NdJ("optionSelected",function(M){return n.onActionSelect(M.option.value)}),e.YNc(5,Z,4,4,"mat-option",5),e.ALo(6,"async"),e.qZA(),e.YNc(7,W,2,0,"mat-icon",6),e.Hsn(8),e.qZA()),2&t){const u=e.MAs(4);e.xp6(1),e.Q6J("options",n.loading),e.xp6(1),e.s9C("placeholder",n.optionPlaceholder),e.Q6J("formControl",n.formControl)("matAutocomplete",u),e.uIk("disabled",!!n.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(6,8,n.filteredOptions)),e.xp6(2),e.Q6J("ngIf",n.dataModelSelect.id)}},dependencies:[a.sg,a.O5,h.Fj,h.JJ,h.oH,d.XC,g.ey,d.ZL,f.KE,f.R9,D.Hw,I.Nt,R.O,a.Ov,T.v],encapsulation:2})),p})()},64370:(L,S,o)=>{o.d(S,{a:()=>r});var s=o(86889),i=o(64537),e=o(20092),h=o(34511),l=o(60656),E=o(32607),P=o(56707),C=o(88692),m=o(71561);function _(v,O){if(1&v){const a=i.EpF();i.TgZ(0,"li")(1,"mat-checkbox",1),i.NdJ("change",function(){const f=i.CHM(a).$implicit,D=i.oxw();return i.KtG(D.onActionSelect(f))}),i._uU(2),i.qZA()()}if(2&v){const a=O.$implicit,d=i.oxw();i.xp6(1),i.Q6J("checked",d.fieldsStatus.get(a.id))("disabled",d.optionDisabled),i.xp6(1),i.hij(" ",a.title," ")}}let r=(()=>{class v{constructor(a,d,g,f,D){(0,s.Z)(this,"coreEnumService",void 0),(0,s.Z)(this,"categoryService",void 0),(0,s.Z)(this,"cdr",void 0),(0,s.Z)(this,"cmsToastrService",void 0),(0,s.Z)(this,"translate",void 0),(0,s.Z)(this,"id",++v.nextId),(0,s.Z)(this,"dataModelResult",new h.y$4),(0,s.Z)(this,"dataModelSelect",[]),(0,s.Z)(this,"dataIdsSelect",[]),(0,s.Z)(this,"loading",new l.O),(0,s.Z)(this,"formControl",new e.NI),(0,s.Z)(this,"fieldsStatus",new Map),(0,s.Z)(this,"optionDisabled",!1),(0,s.Z)(this,"optionSelectFirstItem",!1),(0,s.Z)(this,"optionPlaceholder",new i.vpe),(0,s.Z)(this,"optionChange",new i.vpe),(0,s.Z)(this,"optionSelectAdded",new i.vpe),(0,s.Z)(this,"optionSelectRemoved",new i.vpe),(0,s.Z)(this,"optionReload",()=>this.onActionReload()),this.coreEnumService=a,this.categoryService=d,this.cdr=g,this.cmsToastrService=f,this.translate=D,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}get optionLoading(){return this.loading}set optionLoading(a){this.loading=a}set optionSelectForce(a){this.onActionSelectForce(a)}ngOnInit(){this.DataGetAll()}DataGetAll(){const a=new h.Hay;a.rowPerPage=50,a.accessLoad=!0;const d=this.constructor.name+"main";this.loading.Start(d),this.categoryService.ServiceGetAll(a).subscribe(g=>{g.isSuccess&&(this.dataModelResult=g,this.dataModelResult.listItems.forEach(f=>this.fieldsStatus.set(f.id,!1)),this.dataIdsSelect.forEach(f=>this.fieldsStatus.set(f,!0)),this.dataModelResult.listItems.forEach(f=>{this.fieldsStatus.get(f.id)&&this.dataModelSelect.push(f)})),this.loading.Stop(d)},g=>{this.cmsToastrService.typeError(g),this.loading.Stop(d)})}onActionSelect(a){this.fieldsStatus.get(a.id)?(this.fieldsStatus.set(a.id,!1),this.optionSelectRemoved.emit(a),this.dataModelSelect.splice(this.dataModelSelect.indexOf(a),1)):(this.fieldsStatus.set(a.id,!0),this.optionSelectAdded.emit(a),this.dataModelSelect.push(a)),this.optionChange.emit(this.dataModelSelect)}onActionSelectForce(a){typeof a==typeof Array(Number)?a.forEach(d=>{this.dataIdsSelect.push(d)}):typeof a==typeof Array(h.MCb)&&a.forEach(d=>{this.dataIdsSelect.push(d.id)}),this.dataIdsSelect.forEach(d=>this.fieldsStatus.set(d,!0))}onActionReload(){this.DataGetAll()}}return(0,s.Z)(v,"nextId",0),(0,s.Z)(v,"\u0275fac",function(a){return new(a||v)(i.Y36(h.FLW),i.Y36(h.PwI),i.Y36(i.sBO),i.Y36(E.e),i.Y36(P.sK))}),(0,s.Z)(v,"\u0275cmp",i.Xpm({type:v,selectors:[["app-cms-sitecategory-selectionlist"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionSelectAdded:"optionSelectAdded",optionSelectRemoved:"optionSelectRemoved"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"checked","disabled","change"]],template:function(a,d){1&a&&(i.TgZ(0,"ul"),i.YNc(1,_,3,3,"li",0),i.qZA()),2&a&&(i.xp6(1),i.Q6J("ngForOf",d.dataModelResult.listItems))},dependencies:[C.sg,m.oG],encapsulation:2})),v})()}}]);