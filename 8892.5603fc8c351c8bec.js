"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[8892],{39084:(I,M,o)=>{o.d(M,{Y:()=>E});var l=o(86889),i=o(87241),e=o(27969),p=o(64537),_=o(34511);let E=(()=>{class f{constructor(c){(0,l.Z)(this,"service",void 0),this.service=c}transform(c){return!c||c<=0?new i.y:this.service.ServiceGetOneById(c).pipe((0,e.U)(s=>{var n="";return s.isSuccess&&(s.item.title&&s.item.title.length>0&&(n=s.item.title),s.item.id&&s.item.id>0&&(n.length>0&&(n+=" | "),n+=s.item.id),s.item.domain&&s.item.domain.length>0&&s.item.subDomain&&s.item.subDomain.length>0?(n.length>0&&(n+=" | "),n=n+s.item.subDomain+"."+s.item.domain):s.item.domain&&s.item.domain.length>0&&(n.length>0&&(n+=" | "),n+=s.item.domain)),0===n.length&&(n=c.toString()),n},s=>c.toString()))}}return(0,l.Z)(f,"\u0275fac",function(c){return new(c||f)(p.Y36(_._0e,16))}),(0,l.Z)(f,"\u0275pipe",p.Yjl({name:"cmssiteinfo",type:f,pure:!0})),f})()},93817:(I,M,o)=>{o.d(M,{J:()=>E});var l=o(86889),i=o(87241),e=o(27969),p=o(64537),_=o(34511);let E=(()=>{class f{constructor(c){(0,l.Z)(this,"service",void 0),this.service=c}transform(c){return!c||c<=0?new i.y:this.service.ServiceGetOneById(c).pipe((0,e.U)(s=>{var n="";return s.isSuccess&&(s.item.username&&s.item.username.length>0&&(n=s.item.username),s.item.email&&s.item.email.length>0&&(n.length>0&&(n+=" | "),n+=s.item.email),s.item.name&&s.item.name.length>0&&(n.length>0&&(n+=" | "),n+=s.item.name),s.item.lastName&&s.item.lastName.length>0&&(n.length>0&&(n+=" | "),n+=s.item.lastName),s.item.mobile&&s.item.mobile.length>0&&(n.length>0&&(n+=" | "),n+=s.item.mobile)),0===n.length&&(n=c.toString()),n},s=>c.toString()))}}return(0,l.Z)(f,"\u0275fac",function(c){return new(c||f)(p.Y36(_.k$Z,16))}),(0,l.Z)(f,"\u0275pipe",p.Yjl({name:"cmsuserinfo",type:f,pure:!0})),f})()},76609:(I,M,o)=>{o.d(M,{D:()=>K});var l=o(8239),i=o(86889),e=o(64537),p=o(20092),_=o(34511),E=o(57445),f=o(51927),S=o(83151),c=o(42147),s=o(61528),n=o(27969),P=o(60656),O=o(56707),r=o(88692),d=o(61637),v=o(1379),g=o(88659),D=o(83331),L=o(39665),R=o(75738),T=o(81418);function y(m,A){if(1&m&&(e._UZ(0,"img",9),e.ALo(1,"cmsthumbnail")),2&m){const t=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,t.linkImageIdSrc),e.LSH)}}function Z(m,A){if(1&m&&(e.TgZ(0,"mat-option",7),e.YNc(1,y,2,3,"img",8),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&m){const t=A.$implicit,a=e.oxw();e.Q6J("value",t)("disabled",a.optionDisabled),e.xp6(1),e.Q6J("ngIf",t.linkImageIdSrc),e.xp6(2),e.Oqu(a.displayOption(t))}}function W(m,A){if(1&m){const t=e.EpF();e.TgZ(0,"mat-icon",10),e.NdJ("click",function(){e.CHM(t);const h=e.oxw();return e.KtG(h.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const U=["*"];let K=(()=>{class m{constructor(t,a,h,C){(0,i.Z)(this,"coreEnumService",void 0),(0,i.Z)(this,"translate",void 0),(0,i.Z)(this,"cdr",void 0),(0,i.Z)(this,"categoryService",void 0),(0,i.Z)(this,"id",++m.nextId),(0,i.Z)(this,"dataModelResult",new _.y$4),(0,i.Z)(this,"dataModelSelect",new _.Dp$),(0,i.Z)(this,"formControl",new p.NI),(0,i.Z)(this,"filteredOptions",void 0),(0,i.Z)(this,"optionDisabled",!1),(0,i.Z)(this,"optionSelectFirstItem",!1),(0,i.Z)(this,"optionPlaceholder",""),(0,i.Z)(this,"optionChange",new e.vpe),(0,i.Z)(this,"optionReload",()=>this.onActionReload()),(0,i.Z)(this,"loading",new P.O),this.coreEnumService=t,this.translate=a,this.cdr=h,this.categoryService=C,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(t){this.onActionSelectForce(t)}get optionLoading(){return this.loading}set optionLoading(t){this.loading=t}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,f.O)(""),(0,S.b)(1500),(0,c.x)(),(0,s.w)(t=>this.DataGetAll("string"==typeof t||"number"==typeof t?t:"")))}displayFn(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}displayOption(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}DataGetAll(t){var a=this;return(0,l.Z)(function*(){const h=new _.Hay;if(h.rowPerPage=20,h.accessLoad=!0,t&&t.length>0){let u=new _.AO3;u=new _.AO3,u.propertyName="Symbol",u.value=t,u.searchType=_.b3P.Contains,u.clauseType=_.KT6.Or,h.filters.push(u),u=new _.AO3,u.propertyName="Title",u.value=t,u.searchType=_.b3P.Contains,u.clauseType=_.KT6.Or,h.filters.push(u),t&&"number"==typeof+t&&+t>0&&(u=new _.AO3,u.propertyName="Id",u.value=t,u.searchType=_.b3P.Equal,u.clauseType=_.KT6.Or,h.filters.push(u))}const C=a.constructor.name+"main";return a.loading.Start(C),yield(0,E.z)(a.categoryService.ServiceGetAll(h)).then(u=>(a.dataModelResult=u,a.optionSelectFirstItem&&(!a.dataModelSelect||!a.dataModelSelect.id||a.dataModelSelect.id<=0)&&a.dataModelResult.listItems.length>0&&(a.optionSelectFirstItem=!1,setTimeout(()=>{a.formControl.setValue(a.dataModelResult.listItems[0])},1e3),a.onActionSelect(a.dataModelResult.listItems[0])),a.loading.Stop(C),u.listItems))})()}onActionSelect(t){this.optionDisabled||(this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(t){return this.filteredOptions.pipe((0,n.U)(a=>(a.find(h=>h.id===t.id)||a.push(t),a)))}onActionSelectForce(t){if("number"==typeof t&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(a=>a.id===t)){const a=this.dataModelResult.listItems.find(h=>h.id===t);return this.dataModelSelect=a,void this.formControl.setValue(a)}this.categoryService.ServiceGetOneIncludeParent(t).subscribe(a=>{a.isSuccess&&(this.filteredOptions=this.push(a.item),this.dataModelSelect=a.item,this.formControl.setValue(a.item),this.optionChange.emit(a.item))})}else{if(typeof t==typeof _.Dp$)return this.filteredOptions=this.push(t),this.dataModelSelect=t,void this.formControl.setValue(t);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new _.Dp$,this.loadOptions()}}return(0,i.Z)(m,"nextId",0),(0,i.Z)(m,"\u0275fac",function(t){return new(t||m)(e.Y36(_.FLW),e.Y36(O.sK),e.Y36(e.sBO),e.Y36(_.XRW))}),(0,i.Z)(m,"\u0275cmp",e.Xpm({type:m,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:U,decls:9,vars:10,consts:[[1,"ntk-full-width"],[3,"options"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto34","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,a){if(1&t&&(e.F$t(),e.TgZ(0,"mat-form-field",0),e._UZ(1,"app-progress-spinner",1)(2,"input",2),e.TgZ(3,"mat-autocomplete",3,4),e.NdJ("optionSelected",function(C){return a.onActionSelect(C.option.value)}),e.YNc(5,Z,4,4,"mat-option",5),e.ALo(6,"async"),e.qZA(),e.YNc(7,W,2,0,"mat-icon",6),e.Hsn(8),e.qZA()),2&t){const h=e.MAs(4);e.xp6(1),e.Q6J("options",a.loading),e.xp6(1),e.s9C("placeholder",a.optionPlaceholder),e.Q6J("formControl",a.formControl)("matAutocomplete",h),e.uIk("disabled",!!a.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",a.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(6,8,a.filteredOptions)),e.xp6(2),e.Q6J("ngIf",a.dataModelSelect.id)}},dependencies:[r.sg,r.O5,p.Fj,p.JJ,p.oH,d.XC,v.ey,d.ZL,g.KE,g.R9,D.Hw,L.Nt,R.O,r.Ov,T.v],encapsulation:2})),m})()},64370:(I,M,o)=>{o.d(M,{a:()=>n});var l=o(86889),i=o(64537),e=o(20092),p=o(34511),_=o(60656),E=o(32607),f=o(56707),S=o(88692),c=o(71561);function s(P,O){if(1&P){const r=i.EpF();i.TgZ(0,"li")(1,"mat-checkbox",1),i.NdJ("change",function(){const g=i.CHM(r).$implicit,D=i.oxw();return i.KtG(D.onActionSelect(g))}),i._uU(2),i.qZA()()}if(2&P){const r=O.$implicit,d=i.oxw();i.xp6(1),i.Q6J("checked",d.fieldsStatus.get(r.id))("disabled",d.optionDisabled),i.xp6(1),i.hij(" ",r.title," ")}}let n=(()=>{class P{constructor(r,d,v,g,D){(0,l.Z)(this,"coreEnumService",void 0),(0,l.Z)(this,"categoryService",void 0),(0,l.Z)(this,"cdr",void 0),(0,l.Z)(this,"cmsToastrService",void 0),(0,l.Z)(this,"translate",void 0),(0,l.Z)(this,"id",++P.nextId),(0,l.Z)(this,"dataModelResult",new p.y$4),(0,l.Z)(this,"dataModelSelect",[]),(0,l.Z)(this,"dataIdsSelect",[]),(0,l.Z)(this,"loading",new _.O),(0,l.Z)(this,"formControl",new e.NI),(0,l.Z)(this,"fieldsStatus",new Map),(0,l.Z)(this,"optionDisabled",!1),(0,l.Z)(this,"optionSelectFirstItem",!1),(0,l.Z)(this,"optionPlaceholder",new i.vpe),(0,l.Z)(this,"optionChange",new i.vpe),(0,l.Z)(this,"optionSelectAdded",new i.vpe),(0,l.Z)(this,"optionSelectRemoved",new i.vpe),(0,l.Z)(this,"optionReload",()=>this.onActionReload()),this.coreEnumService=r,this.categoryService=d,this.cdr=v,this.cmsToastrService=g,this.translate=D,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}get optionLoading(){return this.loading}set optionLoading(r){this.loading=r}set optionSelectForce(r){this.onActionSelectForce(r)}ngOnInit(){this.DataGetAll()}DataGetAll(){const r=new p.Hay;r.rowPerPage=50,r.accessLoad=!0;const d=this.constructor.name+"main";this.loading.Start(d),this.categoryService.ServiceGetAll(r).subscribe(v=>{v.isSuccess&&(this.dataModelResult=v,this.dataModelResult.listItems.forEach(g=>this.fieldsStatus.set(g.id,!1)),this.dataIdsSelect.forEach(g=>this.fieldsStatus.set(g,!0)),this.dataModelResult.listItems.forEach(g=>{this.fieldsStatus.get(g.id)&&this.dataModelSelect.push(g)})),this.loading.Stop(d)},v=>{this.cmsToastrService.typeError(v),this.loading.Stop(d)})}onActionSelect(r){this.fieldsStatus.get(r.id)?(this.fieldsStatus.set(r.id,!1),this.optionSelectRemoved.emit(r),this.dataModelSelect.splice(this.dataModelSelect.indexOf(r),1)):(this.fieldsStatus.set(r.id,!0),this.optionSelectAdded.emit(r),this.dataModelSelect.push(r)),this.optionChange.emit(this.dataModelSelect)}onActionSelectForce(r){typeof r==typeof Array(Number)?r.forEach(d=>{this.dataIdsSelect.push(d)}):typeof r==typeof Array(p.MCb)&&r.forEach(d=>{this.dataIdsSelect.push(d.id)}),this.dataIdsSelect.forEach(d=>this.fieldsStatus.set(d,!0))}onActionReload(){this.DataGetAll()}}return(0,l.Z)(P,"nextId",0),(0,l.Z)(P,"\u0275fac",function(r){return new(r||P)(i.Y36(p.FLW),i.Y36(p.PwI),i.Y36(i.sBO),i.Y36(E.e),i.Y36(f.sK))}),(0,l.Z)(P,"\u0275cmp",i.Xpm({type:P,selectors:[["app-cms-sitecategory-selectionlist"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionSelectAdded:"optionSelectAdded",optionSelectRemoved:"optionSelectRemoved"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"checked","disabled","change"]],template:function(r,d){1&r&&(i.TgZ(0,"ul"),i.YNc(1,s,3,3,"li",0),i.qZA()),2&r&&(i.xp6(1),i.Q6J("ngForOf",d.dataModelResult.listItems))},dependencies:[S.sg,c.oG],encapsulation:2})),P})()}}]);