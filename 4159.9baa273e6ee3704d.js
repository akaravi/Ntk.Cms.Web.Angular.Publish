"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[4159],{39084:(R,D,o)=>{o.d(D,{Y:()=>A});var s=o(86889),i=o(87241),e=o(27969),p=o(64537),r=o(34511);let A=(()=>{var C;class E{constructor(h){(0,s.Z)(this,"service",void 0),this.service=h}transform(h){return!h||h<=0?new i.y:this.service.ServiceGetOneById(h,1e6).pipe((0,e.U)(_=>{var l="";return _.isSuccess&&(_.item.title&&_.item.title.length>0&&(l=_.item.title),_.item.id&&_.item.id>0&&(l.length>0&&(l+=" | "),l+=_.item.id),_.item.domain&&_.item.domain.length>0&&_.item.subDomain&&_.item.subDomain.length>0?(l.length>0&&(l+=" | "),l=l+_.item.subDomain+"."+_.item.domain):_.item.domain&&_.item.domain.length>0&&(l.length>0&&(l+=" | "),l+=_.item.domain)),0===l.length&&(l=h.toString()),l},_=>h.toString()))}}return C=E,(0,s.Z)(E,"\u0275fac",function(h){return new(h||C)(p.Y36(r._0e,16))}),(0,s.Z)(E,"\u0275pipe",p.Yjl({name:"cmssiteinfo",type:C,pure:!0})),E})()},76609:(R,D,o)=>{o.d(D,{D:()=>B});var s=o(8239),i=o(86889),e=o(64537),p=o(20092),r=o(34511),A=o(57445),C=o(51927),E=o(83151),L=o(42147),h=o(61528),_=o(27969),l=o(60656),v=o(56707),M=o(88692),a=o(61637),d=o(1379),f=o(88659),m=o(83331),I=o(39665),T=o(75738),y=o(81418);function Z(P,g){if(1&P&&(e._UZ(0,"img",9),e.ALo(1,"cmsthumbnail")),2&P){const S=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,S.linkImageIdSrc),e.LSH)}}function W(P,g){if(1&P&&(e.TgZ(0,"mat-option",7),e.YNc(1,Z,2,3,"img",8),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&P){const S=g.$implicit,t=e.oxw();e.Q6J("value",S)("disabled",t.optionDisabled),e.xp6(1),e.Q6J("ngIf",S.linkImageIdSrc),e.xp6(2),e.Oqu(t.displayOption(S))}}function U(P,g){if(1&P){const S=e.EpF();e.TgZ(0,"mat-icon",10),e.NdJ("click",function(){e.CHM(S);const n=e.oxw();return e.KtG(n.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const K=["*"];let B=(()=>{var P;class g{constructor(t,n,u,O){(0,i.Z)(this,"coreEnumService",void 0),(0,i.Z)(this,"translate",void 0),(0,i.Z)(this,"cdr",void 0),(0,i.Z)(this,"categoryService",void 0),(0,i.Z)(this,"id",++g.nextId),(0,i.Z)(this,"dataModelResult",new r.y$4),(0,i.Z)(this,"dataModelSelect",new r.Dp$),(0,i.Z)(this,"formControl",new p.NI),(0,i.Z)(this,"filteredOptions",void 0),(0,i.Z)(this,"optionDisabled",!1),(0,i.Z)(this,"optionSelectFirstItem",!1),(0,i.Z)(this,"optionPlaceholder",""),(0,i.Z)(this,"optionChange",new e.vpe),(0,i.Z)(this,"optionReload",()=>this.onActionReload()),(0,i.Z)(this,"loading",new l.O),this.coreEnumService=t,this.translate=n,this.cdr=u,this.categoryService=O,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(t){this.onActionSelectForce(t)}get optionLoading(){return this.loading}set optionLoading(t){this.loading=t}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,C.O)(""),(0,E.b)(1500),(0,L.x)(),(0,h.w)(t=>this.DataGetAll("string"==typeof t||"number"==typeof t?t:"")))}displayFn(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}displayOption(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}DataGetAll(t){var n=this;return(0,s.Z)(function*(){const u=new r.Hay;if(u.rowPerPage=20,u.accessLoad=!0,t&&t.length>0){let c=new r.AO3;c=new r.AO3,c.propertyName="Symbol",c.value=t,c.searchType=r.J6G.Contains,c.clauseType=r.ppe.Or,u.filters.push(c),c=new r.AO3,c.propertyName="Title",c.value=t,c.searchType=r.J6G.Contains,c.clauseType=r.ppe.Or,u.filters.push(c),t&&"number"==typeof+t&&+t>0&&(c=new r.AO3,c.propertyName="Id",c.value=t,c.searchType=r.J6G.Equal,c.clauseType=r.ppe.Or,u.filters.push(c))}const O=n.constructor.name+"main";return n.loading.Start(O),yield(0,A.z)(n.categoryService.ServiceGetAll(u)).then(c=>(n.dataModelResult=c,n.optionSelectFirstItem&&(!n.dataModelSelect||!n.dataModelSelect.id||n.dataModelSelect.id<=0)&&n.dataModelResult.listItems.length>0&&(n.optionSelectFirstItem=!1,setTimeout(()=>{n.formControl.setValue(n.dataModelResult.listItems[0])},1e3),n.onActionSelect(n.dataModelResult.listItems[0])),n.loading.Stop(O),c.listItems))})()}onActionSelect(t){this.optionDisabled||(this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(t){return this.filteredOptions.pipe((0,_.U)(n=>(n.find(u=>u.id===t.id)||n.push(t),n)))}onActionSelectForce(t){if("number"==typeof t&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(n=>n.id===t)){const n=this.dataModelResult.listItems.find(u=>u.id===t);return this.dataModelSelect=n,void this.formControl.setValue(n)}this.categoryService.ServiceGetOneIncludeParent(t).subscribe(n=>{n.isSuccess&&(this.filteredOptions=this.push(n.item),this.dataModelSelect=n.item,this.formControl.setValue(n.item),this.optionChange.emit(n.item))})}else{if(typeof t==typeof r.Dp$)return this.filteredOptions=this.push(t),this.dataModelSelect=t,void this.formControl.setValue(t);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new r.Dp$,this.loadOptions()}}return P=g,(0,i.Z)(g,"nextId",0),(0,i.Z)(g,"\u0275fac",function(t){return new(t||P)(e.Y36(r.FLW),e.Y36(v.sK),e.Y36(e.sBO),e.Y36(r.XRW))}),(0,i.Z)(g,"\u0275cmp",e.Xpm({type:P,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:K,decls:9,vars:10,consts:[[1,"ntk-full-width"],[3,"options"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,n){if(1&t&&(e.F$t(),e.TgZ(0,"mat-form-field",0),e._UZ(1,"app-progress-spinner",1)(2,"input",2),e.TgZ(3,"mat-autocomplete",3,4),e.NdJ("optionSelected",function(O){return n.onActionSelect(O.option.value)}),e.YNc(5,W,4,4,"mat-option",5),e.ALo(6,"async"),e.qZA(),e.YNc(7,U,2,0,"mat-icon",6),e.Hsn(8),e.qZA()),2&t){const u=e.MAs(4);e.xp6(1),e.Q6J("options",n.loading),e.xp6(1),e.s9C("placeholder",n.optionPlaceholder),e.Q6J("formControl",n.formControl)("matAutocomplete",u),e.uIk("disabled",!!n.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(6,8,n.filteredOptions)),e.xp6(2),e.Q6J("ngIf",null==n.dataModelSelect?null:n.dataModelSelect.id)}},dependencies:[M.sg,M.O5,p.Fj,p.JJ,p.oH,a.XC,d.ey,a.ZL,f.KE,f.R9,m.Hw,I.Nt,T.O,M.Ov,y.v],encapsulation:2})),g})()},64370:(R,D,o)=>{o.d(D,{a:()=>_});var s=o(86889),i=o(64537),e=o(20092),p=o(34511),r=o(60656),A=o(32607),C=o(56707),E=o(88692),L=o(71561);function h(l,v){if(1&l){const M=i.EpF();i.TgZ(0,"li")(1,"mat-checkbox",1),i.NdJ("change",function(){const f=i.CHM(M).$implicit,m=i.oxw();return i.KtG(m.onActionSelect(f))}),i._uU(2),i.qZA()()}if(2&l){const M=v.$implicit,a=i.oxw();i.xp6(1),i.Q6J("checked",a.fieldsStatus.get(M.id))("disabled",a.optionDisabled),i.xp6(1),i.hij(" ",M.title," ")}}let _=(()=>{var l;class v{constructor(a,d,f,m,I){(0,s.Z)(this,"coreEnumService",void 0),(0,s.Z)(this,"categoryService",void 0),(0,s.Z)(this,"cdr",void 0),(0,s.Z)(this,"cmsToastrService",void 0),(0,s.Z)(this,"translate",void 0),(0,s.Z)(this,"id",++v.nextId),(0,s.Z)(this,"dataModelResult",new p.y$4),(0,s.Z)(this,"dataModelSelect",[]),(0,s.Z)(this,"dataIdsSelect",[]),(0,s.Z)(this,"loading",new r.O),(0,s.Z)(this,"formControl",new e.NI),(0,s.Z)(this,"fieldsStatus",new Map),(0,s.Z)(this,"optionDisabled",!1),(0,s.Z)(this,"optionSelectFirstItem",!1),(0,s.Z)(this,"optionPlaceholder",new i.vpe),(0,s.Z)(this,"optionChange",new i.vpe),(0,s.Z)(this,"optionSelectAdded",new i.vpe),(0,s.Z)(this,"optionSelectRemoved",new i.vpe),(0,s.Z)(this,"optionReload",()=>this.onActionReload()),this.coreEnumService=a,this.categoryService=d,this.cdr=f,this.cmsToastrService=m,this.translate=I,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}get optionLoading(){return this.loading}set optionLoading(a){this.loading=a}set optionSelectForce(a){this.onActionSelectForce(a)}ngOnInit(){this.DataGetAll()}DataGetAll(){const a=new p.Hay;a.rowPerPage=50,a.accessLoad=!0;const d=this.constructor.name+"main";this.loading.Start(d),this.categoryService.ServiceGetAll(a).subscribe(f=>{f.isSuccess&&(this.dataModelResult=f,this.dataModelResult.listItems.forEach(m=>this.fieldsStatus.set(m.id,!1)),this.dataIdsSelect.forEach(m=>this.fieldsStatus.set(m,!0)),this.dataModelResult.listItems.forEach(m=>{this.fieldsStatus.get(m.id)&&this.dataModelSelect.push(m)})),this.loading.Stop(d)},f=>{this.cmsToastrService.typeError(f),this.loading.Stop(d)})}onActionSelect(a){this.fieldsStatus.get(a.id)?(this.fieldsStatus.set(a.id,!1),this.optionSelectRemoved.emit(a),this.dataModelSelect.splice(this.dataModelSelect.indexOf(a),1)):(this.fieldsStatus.set(a.id,!0),this.optionSelectAdded.emit(a),this.dataModelSelect.push(a)),this.optionChange.emit(this.dataModelSelect)}onActionSelectForce(a){typeof a==typeof Array(Number)?a.forEach(d=>{this.dataIdsSelect.push(d)}):typeof a==typeof Array(p.MCb)&&a.forEach(d=>{this.dataIdsSelect.push(d.id)}),this.dataIdsSelect.forEach(d=>this.fieldsStatus.set(d,!0))}onActionReload(){this.DataGetAll()}}return l=v,(0,s.Z)(v,"nextId",0),(0,s.Z)(v,"\u0275fac",function(a){return new(a||l)(i.Y36(p.FLW),i.Y36(p.PwI),i.Y36(i.sBO),i.Y36(A.e),i.Y36(C.sK))}),(0,s.Z)(v,"\u0275cmp",i.Xpm({type:l,selectors:[["app-cms-sitecategory-selectionlist"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionSelectAdded:"optionSelectAdded",optionSelectRemoved:"optionSelectRemoved"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"checked","disabled","change"]],template:function(a,d){1&a&&(i.TgZ(0,"ul"),i.YNc(1,h,3,3,"li",0),i.qZA()),2&a&&(i.xp6(1),i.Q6J("ngForOf",d.dataModelResult.listItems))},dependencies:[E.sg,L.oG],encapsulation:2})),v})()}}]);