(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[108],{7226:()=>{window.libpannellum=function(dt,I,h){"use strict";function y(H,gt){var J;H&&((J=I.createElement("canvas")).style.width=J.style.height="100%",H.appendChild(J));var g,i,lt,X,U,S,ct,rt,Et,oe,Ot,M,it,B,Nt,Mt,Ct,ht,mt=["f","b","u","d","l","r"],w=["f","r","b","l","u","d"];function Q(_,x){return 1==_.level&&1!=x.level?-1:1==x.level&&1!=_.level?1:x.timestamp-_.timestamp}function at(_,x){return _.level!=x.level?_.level-x.level:_.diff-x.diff}function $(_,x,f,P,R,k,b){this.vertices=_,this.side=x,this.level=f,this.x=P,this.y=R;var F="object"==typeof k?k.tileKey:k;F=F.replace("%s",x).replace("%l0",f-1).replace("%l",f).replace("%x",P).replace("%y",R),this.path="object"==typeof k?k[F]:F,this.parentPath=b}function Bt(_,x,f,P,R,k){if(function ie(_,x){var f=ee(_,x.slice(0,3)),P=ee(_,x.slice(3,6)),R=ee(_,x.slice(6,9)),k=ee(_,x.slice(9,12)),b=f[0]+P[0]+R[0]+k[0];if(-4==b||4==b)return!1;var F=f[1]+P[1]+R[1]+k[1];return-4!=F&&4!=F&&4!=f[2]+P[2]+R[2]+k[2]}(_,f.vertices)){for(var b=[],F=[],N=2,W=[],j=0,K=0;K<4;K++){var ut=q(x,f.vertices.slice(3*K,3*(K+1)));b.push(ut[0]*ut[3]),F.push(ut[1]*ut[3]);var Kt=ut[2]*ut[3];N=Math.min(N,Kt),W.push(Math.abs(b[K])<=1&&Math.abs(F[K])<=1&&Kt>0),j+=W[K]}var Vt=M.cubeResolution*Math.pow(2,f.level-M.maxLevel),_t=Math.ceil(Vt*M.invTileResolution)-1,st=Vt%M.tileResolution*2,vt=2*Vt%M.tileResolution;if(0===vt&&(vt=M.tileResolution),0===st&&(st=2*M.tileResolution),f.level>1&&N>0&&j>0){var wt=0;for(K=0;K<4;K++){var Tt=(K+1)%4;if(W[K]||W[Tt]){var Ut=(b[Tt]-b[K])*i.drawingBufferWidth/2,ot=(F[Tt]-F[K])*i.drawingBufferHeight/2;vt<M.tileResolution&&(f.x==_t?Ut*=M.tileResolution/vt:f.y==_t&&(ot*=M.tileResolution/vt)),st<=M.tileResolution&&(f.x==_t&&(Ut*=2),f.y==_t&&(ot*=2)),wt=Math.max(wt,Math.sqrt(Ut*Ut+ot*ot))}}if(wt<=M.tileResolution/2)return}var C=f.vertices,yt=C[0]+C[3]+C[6]+C[9],St=C[1]+C[4]+C[7]+C[10],xt=C[2]+C[5]+C[8]+C[11],Yt=Math.sqrt(yt*yt+St*St+xt*xt),Ht=Math.asin(xt/Yt),u=Math.atan2(St,yt)-R;u+=u>Math.PI?-2*Math.PI:u<-Math.PI?2*Math.PI:0,u=Math.abs(u),f.diff=Math.acos(Math.sin(P)*Math.sin(Ht)+Math.cos(P)*Math.cos(Ht)*Math.cos(u));for(var A=!1,s=0;s<g.nodeCache.length;s++)if(g.nodeCache[s].path==f.path){A=!0,g.nodeCache[s].timestamp=g.nodeCacheTimestamp++,g.nodeCache[s].diff=f.diff,g.currentNodes.push(g.nodeCache[s]);break}if(A||(f.timestamp=g.nodeCacheTimestamp++,g.currentNodes.push(f),g.nodeCache.push(f)),f.level<M.maxLevel){var p=.5;(f.x==_t||f.y==_t)&&(p=1-M.tileResolution/(M.tileResolution+vt));var r,a=[],c=p,m=p,T=p,O=K=1-p,Lt=K,Zt=K;for(vt<M.tileResolution&&(f.x==_t&&f.y!=_t?(m=.5,Lt=.5,("d"==f.side||"u"==f.side)&&(T=.5,Zt=.5)):f.x!=_t&&f.y==_t&&(c=.5,O=.5,("l"==f.side||"r"==f.side)&&(T=.5,Zt=.5))),st<=M.tileResolution&&(f.x==_t&&(c=0,O=1,("l"==f.side||"r"==f.side)&&(T=0,Zt=1)),f.y==_t&&(m=0,Lt=1,("d"==f.side||"u"==f.side)&&(T=0,Zt=1))),r=new $(new Float32Array([C[0],C[1],C[2],C[0]*c+C[3]*O,C[1]*p+C[4]*K,C[2]*T+C[5]*Zt,C[0]*c+C[6]*O,C[1]*m+C[7]*Lt,C[2]*T+C[8]*Zt,C[0]*p+C[9]*K,C[1]*m+C[10]*Lt,C[2]*T+C[11]*Zt]),f.side,f.level+1,2*f.x,2*f.y,M.fullpath,f.path),a.push(r),f.x==_t&&st<=M.tileResolution||(r=new $(new Float32Array([C[0]*c+C[3]*O,C[1]*p+C[4]*K,C[2]*T+C[5]*Zt,C[3],C[4],C[5],C[3]*p+C[6]*K,C[4]*m+C[7]*Lt,C[5]*T+C[8]*Zt,C[0]*c+C[6]*O,C[1]*m+C[7]*Lt,C[2]*T+C[8]*Zt]),f.side,f.level+1,2*f.x+1,2*f.y,M.fullpath,f.path),a.push(r)),!(f.x==_t&&st<=M.tileResolution)&&!(f.y==_t&&st<=M.tileResolution)&&(r=new $(new Float32Array([C[0]*c+C[6]*O,C[1]*m+C[7]*Lt,C[2]*T+C[8]*Zt,C[3]*p+C[6]*K,C[4]*m+C[7]*Lt,C[5]*T+C[8]*Zt,C[6],C[7],C[8],C[9]*c+C[6]*O,C[10]*p+C[7]*K,C[11]*T+C[8]*Zt]),f.side,f.level+1,2*f.x+1,2*f.y+1,M.fullpath,f.path),a.push(r)),f.y==_t&&st<=M.tileResolution||(r=new $(new Float32Array([C[0]*p+C[9]*K,C[1]*m+C[10]*Lt,C[2]*T+C[11]*Zt,C[0]*c+C[6]*O,C[1]*m+C[7]*Lt,C[2]*T+C[8]*Zt,C[9]*c+C[6]*O,C[10]*p+C[7]*K,C[11]*T+C[8]*Zt,C[9],C[10],C[11]]),f.side,f.level+1,2*f.x,2*f.y+1,M.fullpath,f.path),a.push(r)),Tt=0;Tt<a.length;Tt++)Bt(_,x,a[Tt],P,R,k)}}}function ae(){return new Float32Array([-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1])}function te(_,x,f){var P=Math.sin(x),R=Math.cos(x);return"x"==f?new Float32Array([_[0],R*_[1]+P*_[2],R*_[2]-P*_[1],_[3],R*_[4]+P*_[5],R*_[5]-P*_[4],_[6],R*_[7]+P*_[8],R*_[8]-P*_[7]]):"y"==f?new Float32Array([R*_[0]-P*_[2],_[1],R*_[2]+P*_[0],R*_[3]-P*_[5],_[4],R*_[5]+P*_[3],R*_[6]-P*_[8],_[7],R*_[8]+P*_[6]]):"z"==f?new Float32Array([R*_[0]+P*_[1],R*_[1]-P*_[0],_[2],R*_[3]+P*_[4],R*_[4]-P*_[3],_[5],R*_[6]+P*_[7],R*_[7]-P*_[6],_[8]]):void 0}function bt(_){return new Float32Array([_[0],_[4],_[8],_[12],_[1],_[5],_[9],_[13],_[2],_[6],_[10],_[14],_[3],_[7],_[11],_[15]])}function de(_,x,f,P){var R=2*Math.atan(Math.tan(_/2)*i.drawingBufferHeight/i.drawingBufferWidth),k=1/Math.tan(R/2);return new Float32Array([k/x,0,0,0,0,k,0,0,0,0,(P+f)/(f-P),2*P*f/(f-P),0,0,-1,0])}function ne(_,x){i.bindTexture(i.TEXTURE_2D,x),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,_),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null)}gt&&(i=gt),this.init=function(_,x,f,P,R,k,b){if(x===h&&(x="equirectangular"),"equirectangular"!=x&&"cubemap"!=x&&"multires"!=x)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(it=x,M=_,ht=b||{},g){if(lt&&(i.detachShader(g,lt),i.deleteShader(lt)),X&&(i.detachShader(g,X),i.deleteShader(X)),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),g.texture&&i.deleteTexture(g.texture),g.nodeCache)for(var F=0;F<g.nodeCache.length;F++)i.deleteTexture(g.nodeCache[F].texture);if(g.textureLoads)for(tt=[];g.textureLoads.length>0;)g.textureLoads.shift()(!1);i.deleteProgram(g),g=h}U&&(S&&(i.detachShader(U,S),i.deleteShader(S)),ct&&(i.detachShader(U,ct),i.deleteShader(ct)),i.deleteProgram(U),U=h),Ot=h;var N,j,W=!1;if("cubemap"==it)for(N=0;N<6;N++)M[N].width>0?(j===h&&(j=M[N].width),j!=M[N].width&&console.log("Cube faces have inconsistent widths: "+j+" vs. "+M[N].width)):W=!0;function K(l){if(W){var r=l*l*4,c=new Uint8ClampedArray(r),m=b.backgroundColor?b.backgroundColor:[0,0,0];m[0]*=255,m[1]*=255,m[2]*=255;for(var T=0;T<r;T++)c[T++]=m[0],c[T++]=m[1],c[T++]=m[2];var O=new ImageData(c,l,l);for(N=0;N<6;N++)0==M[N].width&&(M[N]=O)}}if("cubemap"==it&&j&j-1&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(i||(i=J.getContext("experimental-webgl",{alpha:!1,depth:!1})),i&&1286==i.getError()&&pe()),i||!("multires"==it&&M.hasOwnProperty("fallbackPath")||"cubemap"==it)||!("WebkitAppearance"in I.documentElement.style)&&!navigator.userAgent.match(/Trident.*rv[ :]*11\./)&&-1===navigator.appVersion.indexOf("MSIE 10")){if(!i)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};"cubemap"==it&&K(j),M.fullpath=M.basePath?M.basePath+M.path:M.path,M.invTileResolution=1/M.tileResolution;var vt=ae();for(oe=[],N=0;N<6;N++)oe[N]=vt.slice(12*N,12*N+12),vt=ae();var wt=0;if("equirectangular"==it){if(wt=i.getParameter(i.MAX_TEXTURE_SIZE),Math.max(M.width/2,M.height)>wt)throw console.log("Error: The image is too big; it's "+M.width+"px wide, but this device's maximum supported size is "+2*wt+"px."),{type:"webgl size error",width:M.width,maxWidth:2*wt}}else if("cubemap"==it&&j>i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+j+"px wide, but this device's maximum supported size is "+wt+"px."),{type:"webgl size error",width:j,maxWidth:wt};if(b!==h){var Tt=isNaN(b.horizonPitch)?0:Number(b.horizonPitch),Ut=isNaN(b.horizonRoll)?0:Number(b.horizonRoll);(0!=Tt||0!=Ut)&&(Ot=[Tt,Ut])}var ot=i.TEXTURE_2D;if(i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.getShaderPrecisionFormat){var C=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);C&&C.precision<1&&(pt=pt.replace("highp","mediump"))}lt=i.createShader(i.VERTEX_SHADER);var yt=t;"multires"==it&&(yt=v),i.shaderSource(lt,yt),i.compileShader(lt),X=i.createShader(i.FRAGMENT_SHADER);var St=et;if("cubemap"==it?(ot=i.TEXTURE_CUBE_MAP,St=e):"multires"==it&&(St=kt),i.shaderSource(X,St),i.compileShader(X),g=i.createProgram(),i.attachShader(g,lt),i.attachShader(g,X),i.linkProgram(g),i.getShaderParameter(lt,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(lt)),i.getShaderParameter(X,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(X)),i.getProgramParameter(g,i.LINK_STATUS)||console.log(i.getProgramInfoLog(g)),i.useProgram(g),g.drawInProgress=!1,null!==b.backgroundColor){var xt=b.backgroundColor?b.backgroundColor:[0,0,0];i.clearColor(xt[0],xt[1],xt[2],1),i.clear(i.COLOR_BUFFER_BIT)}if(g.texCoordLocation=i.getAttribLocation(g,"a_texCoord"),i.enableVertexAttribArray(g.texCoordLocation),"multires"!=it){if(B||(B=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,B),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i.STATIC_DRAW),i.vertexAttribPointer(g.texCoordLocation,2,i.FLOAT,!1,0,0),g.aspectRatio=i.getUniformLocation(g,"u_aspectRatio"),i.uniform1f(g.aspectRatio,i.drawingBufferWidth/i.drawingBufferHeight),g.psi=i.getUniformLocation(g,"u_psi"),g.theta=i.getUniformLocation(g,"u_theta"),g.f=i.getUniformLocation(g,"u_f"),g.h=i.getUniformLocation(g,"u_h"),g.v=i.getUniformLocation(g,"u_v"),g.vo=i.getUniformLocation(g,"u_vo"),g.rot=i.getUniformLocation(g,"u_rot"),i.uniform1f(g.h,f/(2*Math.PI)),i.uniform1f(g.v,P/Math.PI),i.uniform1f(g.vo,R/Math.PI*2),"equirectangular"==it&&(g.backgroundColor=i.getUniformLocation(g,"u_backgroundColor"),i.uniform4fv(g.backgroundColor,xt.concat([1]))),g.texture=i.createTexture(),i.bindTexture(ot,g.texture),"cubemap"==it)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M[1]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_X,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M[3]),i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_Y,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M[4]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M[5]),i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_Z,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M[0]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M[2]);else if(M.width<=wt)i.uniform1i(i.getUniformLocation(g,"u_splitImage"),0),i.texImage2D(ot,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M);else{i.uniform1i(i.getUniformLocation(g,"u_splitImage"),1);var Yt=I.createElement("canvas");Yt.width=M.width/2,Yt.height=M.height;var Ht=Yt.getContext("2d");Ht.drawImage(M,0,0);var Gt=Ht.getImageData(0,0,M.width/2,M.height);i.texImage2D(ot,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,Gt),g.texture2=i.createTexture(),i.activeTexture(i.TEXTURE1),i.bindTexture(ot,g.texture2),i.uniform1i(i.getUniformLocation(g,"u_image1"),1),Ht.drawImage(M,-M.width/2,0),Gt=Ht.getImageData(0,0,M.width/2,M.height),i.texImage2D(ot,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,Gt),i.texParameteri(ot,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(ot,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(ot,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(ot,i.TEXTURE_MAG_FILTER,i.LINEAR),i.activeTexture(i.TEXTURE0)}"cubemap"!=it&&M.width&&M.width<=wt&&f==2*Math.PI&&!(M.width&M.width-1)?i.texParameteri(ot,i.TEXTURE_WRAP_S,i.REPEAT):i.texParameteri(ot,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(ot,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(ot,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(ot,i.TEXTURE_MAG_FILTER,i.LINEAR)}else if(g.vertPosLocation=i.getAttribLocation(g,"a_vertCoord"),i.enableVertexAttribArray(g.vertPosLocation),Nt||(Nt=i.createBuffer()),Mt||(Mt=i.createBuffer()),Ct||(Ct=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,Mt),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),i.STATIC_DRAW),i.vertexAttribPointer(g.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,Ct),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,Nt),i.vertexAttribPointer(g.vertPosLocation,3,i.FLOAT,!1,0,0),g.perspUniform=i.getUniformLocation(g,"u_perspMatrix"),g.cubeUniform=i.getUniformLocation(g,"u_cubeMatrix"),g.currentNodes=[],g.nodeCache=[],g.nodeCacheTimestamp=0,g.textureLoads=[],M.shtHash||M.equirectangularThumbnail){S=i.createShader(i.VERTEX_SHADER),i.shaderSource(S,t),i.compileShader(S),ct=i.createShader(i.FRAGMENT_SHADER),i.shaderSource(ct,et),i.compileShader(ct),U=i.createProgram(),i.attachShader(U,S),i.attachShader(U,ct),i.linkProgram(U),i.getShaderParameter(S,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(S)),i.getShaderParameter(ct,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(ct)),i.getProgramParameter(U,i.LINK_STATUS)||console.log(i.getProgramInfoLog(U)),i.useProgram(U),U.texCoordLocation=i.getAttribLocation(U,"a_texCoord"),i.enableVertexAttribArray(U.texCoordLocation),B||(B=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,B),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i.STATIC_DRAW),i.vertexAttribPointer(U.texCoordLocation,2,i.FLOAT,!1,0,0),U.aspectRatio=i.getUniformLocation(U,"u_aspectRatio"),i.uniform1f(U.aspectRatio,i.drawingBufferWidth/i.drawingBufferHeight),U.psi=i.getUniformLocation(U,"u_psi"),U.theta=i.getUniformLocation(U,"u_theta"),U.f=i.getUniformLocation(U,"u_f"),U.h=i.getUniformLocation(U,"u_h"),U.v=i.getUniformLocation(U,"u_v"),U.vo=i.getUniformLocation(U,"u_vo"),U.rot=i.getUniformLocation(U,"u_rot"),i.uniform1f(U.h,1),U.texture=i.createTexture(),i.bindTexture(ot,U.texture);var u,A,s,p=function(){i.useProgram(U),i.uniform1i(i.getUniformLocation(U,"u_splitImage"),0),i.texImage2D(ot,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,u),i.texParameteri(ot,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(ot,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(ot,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(ot,i.TEXTURE_MAG_FILTER,i.LINEAR),i.uniform1f(U.v,A),i.uniform1f(U.vo,s),i.useProgram(g)};if(M.shtHash&&(u=function qt(_){if(At.length<1)for(var x=Jt.length/32,f=0;f<32;f++){At.push([]);for(var P=0;P<x;P++)At[f].push(ce(Qt(Jt[f*x+P],1),41)*fe)}Qt(_[0],1);var k=255*(ce(Qt(_[1],1),41)+1)/2,b=Qt(_.slice(2),2),F=[],N=[],W=[];for(f=0;f<b.length;f++){var j=ue(b[f],k);F.push(j[0]),N.push(j[1]),W.push(j[2])}var K=.03125*Math.PI,ut=[];for(f=31;f>=0;f--)for(P=0;P<64;P++)ut.push($t(F,At[f],(P+.5)*K)),ut.push($t(N,At[f],(P+.5)*K)),ut.push($t(W,At[f],(P+.5)*K)),ut.push(255);return new ImageData(new Uint8ClampedArray(ut),64,32)}(M.shtHash),A=(2+1/31)/2,s=1-(2+1/31)/2,p()),M.equirectangularThumbnail)if("string"==typeof M.equirectangularThumbnail){if("data:"!=M.equirectangularThumbnail.slice(0,5))throw console.log("Error: thumbnail string is not a data URI!"),{type:"config error"};(u=new Image).onload=function(){A=1,s=0,p()},u.src=M.equirectangularThumbnail}else u=M.equirectangularThumbnail,A=1,s=0,p();i.bindBuffer(i.ARRAY_BUFFER,Nt),i.vertexAttribPointer(g.vertPosLocation,3,i.FLOAT,!1,0,0),i.useProgram(g)}var a=i.getError();if(0!==a)throw console.log("Error: Something went wrong with WebGL!",a),{type:"webgl error"};k()}else{var ut;Et&&H.removeChild(Et),(Et=I.createElement("div")).className="pnlm-world",ut=M.basePath?M.basePath+M.fallbackPath:M.fallbackPath;var Kt=0,Vt=function(){var l=I.createElement("canvas");l.className="pnlm-face pnlm-"+w[this.side]+"face",Et.appendChild(l);var r=l.getContext("2d");l.style.width=this.width+4+"px",l.style.height=this.height+4+"px",l.width=this.width+4,l.height=this.height+4,r.drawImage(this,2,2);var T,O,c=r.getImageData(0,0,l.width,l.height),m=c.data;for(T=2;T<l.width-2;T++)for(O=0;O<4;O++)m[4*(T+l.width)+O]=m[4*(T+2*l.width)+O],m[4*(T+l.width*(l.height-2))+O]=m[4*(T+l.width*(l.height-3))+O];for(T=2;T<l.height-2;T++)for(O=0;O<4;O++)m[4*(T*l.width+1)+O]=m[4*(T*l.width+2)+O],m[4*((T+1)*l.width-2)+O]=m[4*((T+1)*l.width-3)+O];for(O=0;O<4;O++)m[4*(l.width+1)+O]=m[4*(2*l.width+2)+O],m[4*(2*l.width-2)+O]=m[4*(3*l.width-3)+O],m[4*(l.width*(l.height-2)+1)+O]=m[4*(l.width*(l.height-3)+2)+O],m[4*(l.width*(l.height-1)-2)+O]=m[4*(l.width*(l.height-2)-3)+O];for(T=1;T<l.width-1;T++)for(O=0;O<4;O++)m[4*T+O]=m[4*(T+l.width)+O],m[4*(T+l.width*(l.height-1))+O]=m[4*(T+l.width*(l.height-2))+O];for(T=1;T<l.height-1;T++)for(O=0;O<4;O++)m[T*l.width*4+O]=m[4*(T*l.width+1)+O],m[4*((T+1)*l.width-1)+O]=m[4*((T+1)*l.width-2)+O];for(O=0;O<4;O++)m[O]=m[4*(l.width+1)+O],m[4*(l.width-1)+O]=m[4*(2*l.width-2)+O],m[l.width*(l.height-1)*4+O]=m[4*(l.width*(l.height-2)+1)+O],m[4*(l.width*l.height-1)+O]=m[4*(l.width*(l.height-1)-2)+O];r.putImageData(c,0,0),_t.call(this)},_t=function(){this.width>0?(rt===h&&(rt=this.width),rt!=this.width&&console.log("Fallback faces have inconsistent widths: "+rt+" vs. "+this.width)):W=!0,6==++Kt&&(rt=this.width,H.appendChild(Et),k())};for(W=!1,N=0;N<6;N++){var st=new Image;st.crossOrigin=ht.crossOrigin?ht.crossOrigin:"anonymous",st.side=N,st.onload=Vt,st.onerror=_t,st.src="multires"==it?ut.replace("%s",w[N])+(M.extension?"."+M.extension:""):M[N].src}K(rt)}},this.destroy=function(){if(H!==h&&(J!==h&&H.contains(J)&&H.removeChild(J),Et!==h&&H.contains(Et)&&H.removeChild(Et)),i){var _=i.getExtension("WEBGL_lose_context");_&&_.loseContext()}},this.resize=function(){var _=dt.devicePixelRatio||1;J.width=J.clientWidth*_,J.height=J.clientHeight*_,i&&(1286==i.getError()&&pe(),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),"multires"!=it?i.uniform1f(g.aspectRatio,J.clientWidth/J.clientHeight):M.shtHash&&(i.useProgram(U),i.uniform1f(U.aspectRatio,J.clientWidth/J.clientHeight),i.useProgram(g)))},J&&this.resize(),this.setPose=function(_,x){_=isNaN(_)?0:Number(_),x=isNaN(x)?0:Number(x),Ot=0==_&&0==x?h:[_,x]},this.render=function(_,x,f,P){var R,b,F=0;if(P===h&&(P={}),P.roll&&(F=P.roll),P.dynamic)var N=P.dynamic;if(Ot!==h){var W=Ot[0],j=Ot[1],K=_,ut=x,Kt=Math.cos(j)*Math.sin(_)*Math.sin(W)+Math.cos(_)*(Math.cos(W)*Math.cos(x)+Math.sin(j)*Math.sin(W)*Math.sin(x)),Vt=-Math.sin(_)*Math.sin(j)+Math.cos(_)*Math.cos(j)*Math.sin(x),_t=Math.cos(j)*Math.cos(W)*Math.sin(_)+Math.cos(_)*(-Math.cos(x)*Math.sin(W)+Math.cos(W)*Math.sin(j)*Math.sin(x));_=Math.asin(Math.max(Math.min(_t,1),-1)),x=Math.atan2(Vt,Kt);var st=[Math.cos(K)*(Math.sin(j)*Math.sin(W)*Math.cos(ut)-Math.cos(W)*Math.sin(ut)),Math.cos(K)*Math.cos(j)*Math.cos(ut),Math.cos(K)*(Math.cos(W)*Math.sin(j)*Math.cos(ut)+Math.sin(ut)*Math.sin(W))],vt=[-Math.cos(_)*Math.sin(x),Math.cos(_)*Math.cos(x)],wt=Math.acos(Math.max(Math.min((st[0]*vt[0]+st[1]*vt[1])/(Math.sqrt(st[0]*st[0]+st[1]*st[1]+st[2]*st[2])*Math.sqrt(vt[0]*vt[0]+vt[1]*vt[1])),1),-1));st[2]<0&&(wt=2*Math.PI-wt),F+=wt}if(P.hook&&P.hook({gl:i,program:g,previewProgram:U,imageType:it,texCoordBuffer:B,cubeVertBuf:Nt,cubeVertTexCoordBuf:Mt,cubeVertIndBuf:Ct}),i||"multires"!=it&&"cubemap"!=it){if("multires"!=it){var St=2*Math.atan(Math.tan(.5*f)/(i.drawingBufferWidth/i.drawingBufferHeight));R=1/Math.tan(.5*St),i.uniform1f(g.psi,x),i.uniform1f(g.theta,_),i.uniform1f(g.rot,F),i.uniform1f(g.f,R),!0===N&&"equirectangular"==it&&(i.bindTexture(i.TEXTURE_2D,g.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,M)),i.drawArrays(i.TRIANGLES,0,6)}else{var xt=typeof M.shtHash<"u"||typeof M.equirectangularThumbnail<"u",Yt=xt;if(xt&&g.currentNodes.length>=6){Yt=!1;for(var k=0;k<6;k++)if(!g.currentNodes[k].textureLoaded){Yt=!0;break}}Yt&&(i.useProgram(U),i.bindBuffer(i.ARRAY_BUFFER,B),i.vertexAttribPointer(U.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindTexture(i.TEXTURE_2D,U.texture),St=2*Math.atan(Math.tan(.5*f)/(i.drawingBufferWidth/i.drawingBufferHeight)),R=1/Math.tan(.5*St),i.uniform1f(U.psi,x),i.uniform1f(U.theta,_),i.uniform1f(U.rot,F),i.uniform1f(U.f,R),i.drawArrays(i.TRIANGLES,0,6),i.bindBuffer(i.ARRAY_BUFFER,Nt),i.vertexAttribPointer(g.vertPosLocation,3,i.FLOAT,!1,0,0),i.useProgram(g));var Ht=de(f,i.drawingBufferWidth/i.drawingBufferHeight,.1,100),Gt=de(f,i.drawingBufferWidth/i.drawingBufferHeight,-100,100),u=function Xt(){return new Float32Array([1,0,0,0,1,0,0,0,1])}();u=te(u,-F,"z"),u=te(u,-_,"x"),u=function _e(_){return new Float32Array([_[0],_[1],_[2],0,_[3],_[4],_[5],0,_[6],_[7],_[8],0,0,0,0,1])}(u=te(u,x,"y")),i.uniformMatrix4fv(g.perspUniform,!1,bt(Ht)),i.uniformMatrix4fv(g.cubeUniform,!1,bt(u));var A=le(Ht,u),s=le(Gt,u);if(g.nodeCache.sort(Q),g.nodeCache.length>200&&g.nodeCache.length>g.currentNodes.length+50)for(var p=g.nodeCache.splice(200,g.nodeCache.length-200),a=0;a<p.length;a++)i.deleteTexture(p[a].texture);for(g.currentNodes=[],b=0;b<6;b++)Bt(A,s,new $(oe[b],mt[b],1,0,0,M.fullpath,null),_,x,f);for(g.currentNodes.sort(at),k=tt.length-1;k>=0;k--)-1===g.currentNodes.indexOf(tt[k].node)&&(tt[k].node.textureLoad=!1,tt.splice(k,1));if(0===tt.length)for(k=0;k<g.currentNodes.length;k++){var r=g.currentNodes[k];if(!r.texture&&!r.textureLoad){r.textureLoad=!0,setTimeout(Dt,0,r);break}}g.textureLoads.length>0&&g.textureLoads.shift()(!0),function ft(_){if(!g.drawInProgress){g.drawInProgress=!0,_&&i.clear(i.COLOR_BUFFER_BIT);for(var x={},f=0;f<g.currentNodes.length;f++)x[g.currentNodes[f].parentPath]===h&&(x[g.currentNodes[f].parentPath]=0),x[g.currentNodes[f].parentPath]+=!(g.currentNodes[f].textureLoaded>1);for(f=0;f<g.currentNodes.length;f++)g.currentNodes[f].textureLoaded>1&&4!=x[g.currentNodes[f].path]&&(i.bufferData(i.ARRAY_BUFFER,g.currentNodes[f].vertices,i.STATIC_DRAW),i.bindTexture(i.TEXTURE_2D,g.currentNodes[f].texture),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0));g.drawInProgress=!1}}(!xt)}if(P.returnImage!==h)return dt.createImageBitmap&&"ImageBitmap"==P.returnImage?createImageBitmap(J):0==P.returnImage.toString().indexOf("image/")?J.toDataURL(P.returnImage):J.toDataURL("image/png")}else{var Tt={f:"translate3d(-"+(2+(b=rt/2))+"px, -"+(b+2)+"px, -"+b+"px)",b:"translate3d("+(b+2)+"px, -"+(b+2)+"px, "+b+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(b+2)+"px, -"+b+"px, "+(b+2)+"px) rotateX(270deg)",d:"translate3d(-"+(b+2)+"px, "+b+"px, -"+(b+2)+"px) rotateX(90deg)",l:"translate3d(-"+b+"px, -"+(b+2)+"px, "+(b+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+b+"px, -"+(b+2)+"px, -"+(b+2)+"px) rotateY(270deg)"},Ut=(R=1/Math.tan(f/2))*J.clientWidth/2+"px",ot="perspective("+Ut+") translateZ("+Ut+") rotateX("+_+"rad) rotateY("+x+"rad) ",C=Object.keys(Tt);for(k=0;k<6;k++){var yt=Et.querySelector(".pnlm-"+C[k]+"face");yt&&(yt.style.webkitTransform=ot+Tt[C[k]],yt.style.transform=ot+Tt[C[k]])}}},this.isLoading=function(){if(i&&"multires"==it)for(var _=0;_<g.currentNodes.length;_++)if(!g.currentNodes[_].textureLoaded)return!0;return!1},this.isBaseLoaded=function(){if(g.currentNodes.length>=6){for(var _=0;_<6;_++)if(!g.currentNodes[_].textureLoaded)return!1;return!0}return!1},this.getCanvas=function(){return J};var Dt,tt=[],Ft=function(){var f,_=4,x={};function P(){var F=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=f||"anonymous";var N=function(){g.textureLoads.push(function(W){W&&(F.image.width>0&&F.image.height>0?(ne(F.image,F.texture),F.callback(F.texture,!0)):F.callback(F.texture,!1)),function k(F){if(tt.length){var N=tt.shift();F.loadTexture(N.src,N.texture,N.callback)}else x[_++]=F}(F)})};this.image.addEventListener("load",N),this.image.addEventListener("error",N)}function R(F,N,W,j){this.node=F,this.src=N,this.texture=W,this.callback=j}P.prototype.loadTexture=function(F,N,W){this.texture=N,this.callback=W,this.image.src=F};for(var b=0;b<_;b++)x[b]=new P;return function(F,N,W,j){f=j;var K=i.createTexture();return _?x[--_].loadTexture(N,K,W):tt.push(new R(F,N,K,W)),K}}();if(dt.Worker&&dt.createImageBitmap){var re=new Blob(["("+function(){self.onmessage=function(x){var f=x.data[0];fetch(f,{mode:"cors",credentials:"use-credentials"==x.data[1]?"include":"same-origin"}).then(function(R){return R.blob()}).then(function(R){return createImageBitmap(R)}).then(function(R){postMessage([f,!0,R],[R])}).catch(function(){postMessage([f,!1])})}}.toString()+")()"],{type:"application/javascript"}),me=new Worker(URL.createObjectURL(re)),D={};me.onmessage=function(x){var f=x.data[0],P=x.data[1],R=x.data[2];g.textureLoads.push(function(k){var b,F=!1;P&&k&&(b=i.createTexture(),ne(R,b),F=!0);var N=D[f];delete D[f],N!==h&&(N.texture=b,N.textureLoaded=F?2:1)})},Dt=function(x){var f=new URL(x.path+(M.extension?"."+M.extension:""),dt.location).href;D[f]=x,me.postMessage([f,ht.crossOrigin])}}else Dt=function Pt(_){Ft(_,_.path+(M.extension?"."+M.extension:""),function(x,f){_.texture=x,_.textureLoaded=f?2:1},ht.crossOrigin)};function le(_,x){return new Float32Array([_[0]*x[0],_[0]*x[1],_[0]*x[2],0,_[5]*x[4],_[5]*x[5],_[5]*x[6],0,_[10]*x[8],_[10]*x[9],_[10]*x[10],_[11],-x[8],-x[9],-x[10],0])}function q(_,x){return new Float32Array([_[0]*x[0]+_[1]*x[1]+_[2]*x[2],_[4]*x[0]+_[5]*x[1]+_[6]*x[2],_[11]+_[8]*x[0]+_[9]*x[1]+_[10]*x[2],1/(_[12]*x[0]+_[13]*x[1]+_[14]*x[2])])}function ee(_,x){var f=q(_,x),P=f[0]*f[3],R=f[1]*f[3],k=f[2]*f[3],b=[0,0,0];return P<-1&&(b[0]=-1),P>1&&(b[0]=1),R<-1&&(b[1]=-1),R>1&&(b[1]=1),(k<-1||k>1)&&(b[2]=1),b}function pe(){console.log("Reducing canvas size due to error 1286!"),J.width=Math.round(J.width/2),J.height=Math.round(J.height/2)}var se="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~",Jt="Bf[ff4fff|ffff0fffffBo@Ri5xag{Jmdf2+WiefCs@Ll7+Vi]Btag6[NmdgCv=Ho9;Qk;7zWiF_GsahDy:ErE?Mn$5+SkS_AyWiD#-CuJ[Iqp6;Nnx?7*SlE$*BxR@FtPA?Jq+%7:NnF*zAzn?CwIG@Ft-Y9?IrG+vA%w:AzGR?Cx*IF@EuI,nA+$*9%Gu:A#xCR?ByJ-VB-*wA+J**9*ZBv:9%L.QD.*aB.O.v9-MF+$8,O:MG:*OD;a:UB:IO:n9:Q:KJ;#IG=u-KE=Hs:MC?T:IO=wEL?#%FJ@K**FI@Y;HV=pDU?*sCS@S.uCR[m;Hp=VDq?*SCs@s.QCt[r:Iw=OEz?#IF$@#*HF%@u:K$;KI+=uEK-=*sCM:?w:M+:HO.;aCU;:%OCn?:z.Q..Ha;.ODv?-yFG$@,$-V;-Hw=+JH*?*lBP:?%%,n=+J*?%GQ:=#NCt?;y++v=%O:=zGt?:xHI,@-u,*z=zX?:wI+@,tEY??%r-$*;xt@,tP=?$qG%[:xn.#-:u$[%qp];xnN?[*sl.y:-r-?yn$^+sks_=yoi:v=*o?;uk;[zoi,_+skh:s@zl[+pi];tkg][xmhg;o@ti^xkg{$mhf|+oigf;f[ff_fff|ffff~fffff",fe=3.317,At=[];function ce(_,x){return Math.pow((Math.abs(_)-x)/x,2)*(_-x>0?1:-1)}function ue(_,x){var f=Math.floor(_/361),P=Math.floor(_/19)%19,R=_%19;return[ce(f,9)*x,ce(P,9)*x,ce(R,9)*x]}function Qt(_,x){for(var f=Math.floor(_.length/x),P=[],R=0;R<f;R++){for(var k=0,b=0;b<x;b++)k=83*k+se.indexOf(_[R*x+b]);P.push(k)}return P}function $t(_,x,f){var P=Math.floor(Math.sqrt(_.length))-1,R=Array(P+1),k=Array(P+1);k[0]=0,R[0]=1,k[1]=Math.sin(f),R[1]=Math.cos(f);for(var b=2;b<=P;b++)k[b]=2*k[b-1]*R[1]-k[b-2],R[b]=2*R[b-1]*R[1]-R[b-2];for(var F=0,N=0,W=1;W<=P+1;W++)N+=W;for(var j=P;j>=0;j--){var K=Math.floor((j+1)*j/2);for(F+=0!=K?_[K]*x[K-1]:_[K],b=1;b<=j;b++)F+=(_[++K]*R[b]+_[K+N-j-1]*k[b])*x[K-1]}return Math.round(F)}}var t=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),v=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),pt=["precision highp float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image0;","uniform sampler2D u_image1;","uniform bool u_splitImage;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join("\n"),e=pt+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join("\n"),et=pt+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else {","if(u_splitImage) {","if(coord.x < 0.0)","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","else","gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","} else {","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}","}","}"].join("\n"),kt=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function(H,gt,J){return new y(H,gt,J)}}}(window,document)},32647:()=>{window.pannellum=function(dt,I,h){"use strict";function y(t,v){var e,et,kt,H,rt,M,it,ht,w,Q,te,bt,pt=this,gt=!1,J=Date.now(),g=0,i=0,lt=-1,X=0,U=0,S=new Array(10),ct=!1,Et=!1,Ot=!1,B={yaw:0,pitch:0,hfov:0},Nt=!1,Mt=!1,Ct=0,mt=0,at={},ft={},$=[],Bt=!1,ae=!1,Xt=1e-6,_e=!1,de=!1,ne={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:h,maxPitch:h,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:h,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function Ut(o){return o<.5?2*o*o:(4-2*o)*o-1},draggable:!0,dragConfirm:!1,disableKeyboardCtrl:!1,crossOrigin:"anonymous",targetBlank:!1,touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console.",twoTouchActivate:"Use two fingers together to pan the panorama.",twoTouchXActivate:"Use two fingers together to pan the panorama horizontally.",twoTouchYActivate:"Use two fingers together to pan the panorama vertically.",ctrlZoomActivate:"Use %s + scroll to zoom the panorama."}};(t="string"==typeof t?I.getElementById(t):t).classList.add("pnlm-container"),t.tabIndex=0;var tt=I.createElement("div");tt.className="pnlm-ui",t.appendChild(tt);var Ft=I.createElement("div");Ft.className="pnlm-render-container",t.appendChild(Ft);var Pt=I.createElement("div");Pt.className="pnlm-dragfix",tt.appendChild(Pt);var Dt=I.createElement("span");Dt.className="pnlm-about-msg";var re=I.createElement("a");re.href="https://pannellum.org/",re.textContent="Pannellum",Dt.appendChild(re);var me=I.createElement("span");Dt.appendChild(me),tt.appendChild(Dt),Pt.addEventListener("contextmenu",function $t(o){var n=qt(o);Dt.style.left=n.x+"px",Dt.style.top=n.y+"px",clearTimeout($t.t1),clearTimeout($t.t2),Dt.style.display="block",Dt.style.opacity=1,$t.t1=setTimeout(function(){Dt.style.opacity=0},2e3),$t.t2=setTimeout(function(){Dt.style.display="none"},2500),o.preventDefault()});var D={},le=I.createElement("div");le.className="pnlm-sprite pnlm-hot-spot-debug-indicator",tt.appendChild(le),D.container=I.createElement("div"),D.container.className="pnlm-panorama-info",D.title=I.createElement("div"),D.title.className="pnlm-title-box",D.container.appendChild(D.title),D.author=I.createElement("div"),D.author.className="pnlm-author-box",D.container.appendChild(D.author),tt.appendChild(D.container),D.load={},D.load.box=I.createElement("div"),D.load.box.className="pnlm-load-box",D.load.boxp=I.createElement("p"),D.load.box.appendChild(D.load.boxp),D.load.lbox=I.createElement("div"),D.load.lbox.className="pnlm-lbox",D.load.lbox.innerHTML='<div class="pnlm-loading"></div>',D.load.box.appendChild(D.load.lbox),D.load.lbar=I.createElement("div"),D.load.lbar.className="pnlm-lbar",D.load.lbarFill=I.createElement("div"),D.load.lbarFill.className="pnlm-lbar-fill",D.load.lbar.appendChild(D.load.lbarFill),D.load.box.appendChild(D.load.lbar),D.load.msg=I.createElement("p"),D.load.msg.className="pnlm-lmsg",D.load.box.appendChild(D.load.msg),tt.appendChild(D.load.box),D.errorMsg=I.createElement("div"),D.errorMsg.className="pnlm-error-msg pnlm-info-box",tt.appendChild(D.errorMsg),D.interactionMsg=I.createElement("div"),D.interactionMsg.className="pnlm-interaction-msg pnlm-info-box",tt.appendChild(D.interactionMsg);var q={};q.container=I.createElement("div"),q.container.className="pnlm-controls-container",tt.appendChild(q.container),q.load=I.createElement("button"),q.load.className="pnlm-load-button",q.load.addEventListener("click",function(){T(),Ee()}),tt.appendChild(q.load),q.zoom=I.createElement("div"),q.zoom.className="pnlm-zoom-controls pnlm-controls",q.zoomIn=I.createElement("div"),q.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",q.zoomIn.addEventListener("click",function Zt(){rt&&(zt(e.hfov-5),C())}),q.zoom.appendChild(q.zoomIn),q.zoomOut=I.createElement("div"),q.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",q.zoomOut.addEventListener("click",function ye(){rt&&(zt(e.hfov+5),C())}),q.zoom.appendChild(q.zoomOut),q.container.appendChild(q.zoom),q.fullscreen=I.createElement("div"),q.fullscreen.addEventListener("click",O),q.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(I.fullscreenEnabled||I.mozFullScreenEnabled||I.webkitFullscreenEnabled||I.msFullscreenEnabled)&&q.container.appendChild(q.fullscreen),q.orientation=I.createElement("div"),q.orientation.addEventListener("click",function(o){Mt?Ce():we()}),q.orientation.addEventListener("mousedown",function(o){o.stopPropagation()}),q.orientation.addEventListener("touchstart",function(o){o.stopPropagation()}),q.orientation.addEventListener("pointerdown",function(o){o.stopPropagation()}),q.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var ee=!1;dt.DeviceOrientationEvent&&"https:"==location.protocol&&(navigator.userAgent.toLowerCase().indexOf("mobi")>=0||navigator.userAgent.indexOf("Mac")>=0&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0)&&(q.container.appendChild(q.orientation),ee=!0);var ie=I.createElement("div");function pe(){var o=I.createElement("div");if(o.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1!=o.getElementsByTagName("i").length){var n,d;if(w=e.hfov,Q=e.pitch,"cubemap"==e.type){for(M=[],n=0;n<6;n++)M.push(new Image),M[n].crossOrigin=e.crossOrigin;D.load.lbox.style.display="block",D.load.lbar.style.display="none"}else if("multires"==e.type){var E=JSON.parse(JSON.stringify(e.multiRes));e.basePath&&e.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(e.multiRes.basePath)?E.basePath=e.basePath+e.multiRes.basePath:e.multiRes.basePath?E.basePath=e.multiRes.basePath:e.basePath&&(E.basePath=e.basePath),M=E}else if(!0===e.dynamic)M=e.panorama;else{if(e.panorama===h)return void At(e.strings.noPanoramaError);M=new Image}if("cubemap"==e.type){var L=6,Z=function(){0==--L&&Jt()},z=function(Y){var G=I.createElement("a");G.href=Y.target.src,G.textContent=G.href,At(e.strings.fileAccessError.replace("%s",G.outerHTML))};for(n=0;n<M.length;n++)"null"==(d=e.cubeMap[n])?(console.log("Will use background instead of missing cubemap face "+n),Z()):(e.basePath&&!se(d)&&(d=e.basePath+d),M[n].onload=Z,M[n].onerror=z,M[n].src=ge(d))}else if("multires"==e.type)Jt();else if(d="",e.basePath&&(d=e.basePath),!0!==e.dynamic){if(e.panorama instanceof Image||e.panorama instanceof ImageData||dt.ImageBitmap&&e.panorama instanceof ImageBitmap)return M=e.panorama,void Jt();d=se(e.panorama)?e.panorama:d+e.panorama,M.onload=function(){dt.URL.revokeObjectURL(this.src),Jt()},(bt=new XMLHttpRequest).onloadend=function(){if(200!=bt.status){var Y=I.createElement("a");return Y.href=d,Y.textContent=Y.href,void At(e.strings.fileAccessError.replace("%s",Y.outerHTML))}(function fe(o,n){var d=new FileReader;d.addEventListener("loadend",function(){var E=d.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var L=E.indexOf("\xff\xc2");(L<0||L>65536)&&At(e.strings.iOS8WebGLError)}var Z=E.indexOf("<x:xmpmeta");if(Z>-1&&!0!==e.ignoreGPanoXMP){var z=E.substring(Z,E.indexOf("</x:xmpmeta>")+12),Y=function(V){var nt;return z.indexOf(V+'="')>=0?nt=(nt=z.substring(z.indexOf(V+'="')+V.length+2)).substring(0,nt.indexOf('"')):z.indexOf(V+">")>=0&&(nt=(nt=z.substring(z.indexOf(V+">")+V.length+1)).substring(0,nt.indexOf("<"))),nt!==h?Number(nt):null},G={fullWidth:Y("GPano:FullPanoWidthPixels"),croppedWidth:Y("GPano:CroppedAreaImageWidthPixels"),fullHeight:Y("GPano:FullPanoHeightPixels"),croppedHeight:Y("GPano:CroppedAreaImageHeightPixels"),topPixels:Y("GPano:CroppedAreaTopPixels"),heading:Y("GPano:PoseHeadingDegrees"),horizonPitch:Y("GPano:PosePitchDegrees"),horizonRoll:Y("GPano:PoseRollDegrees"),pitch:Y("GPano:InitialViewPitchDegrees"),yaw:Y("GPano:InitialViewHeadingDegrees"),hfov:Y("GPano:InitialHorizontalFOVDegrees")};null!==G.fullWidth&&null!==G.croppedWidth&&null!==G.fullHeight&&null!==G.croppedHeight&&null!==G.topPixels&&($.indexOf("haov")<0&&(e.haov=G.croppedWidth/G.fullWidth*360),$.indexOf("vaov")<0&&(e.vaov=G.croppedHeight/G.fullHeight*180),$.indexOf("vOffset")<0&&(e.vOffset=-180*((G.topPixels+G.croppedHeight/2)/G.fullHeight-.5)),null!==G.heading&&$.indexOf("northOffset")<0&&(e.northOffset=G.heading,!1!==e.compass&&(e.compass=!0)),null!==G.horizonPitch&&null!==G.horizonRoll&&($.indexOf("horizonPitch")<0&&(e.horizonPitch=G.horizonPitch),$.indexOf("horizonRoll")<0&&(e.horizonRoll=G.horizonRoll)),null!=G.pitch&&$.indexOf("pitch")<0&&(e.pitch=G.pitch),null!=G.yaw&&$.indexOf("yaw")<0&&(e.yaw=G.yaw),null!=G.hfov&&$.indexOf("hfov")<0&&(e.hfov=G.hfov))}M.src=dt.URL.createObjectURL(o),M.onerror=function(){(function V(){return dt.fetch?dt.fetch(I.location.href).then(function(nt){return nt.headers.get("Content-Security-Policy")}):null})().then(function(nt){nt&&nt.split(";").find(function(It){var jt=It.match(/img-src(.*)/);if(jt)return!jt[1].includes("blob")})&&(console.log("CSP blocks blobs; reverting to URL."),M.crossOrigin=e.crossOrigin,M.src=n)})}}),d.readAsBinaryString!==h?d.readAsBinaryString(o):d.readAsText(o)})(this.response,d),D.load.msg.innerHTML=""},bt.onprogress=function(Y){var V,nt,Rt;Y.lengthComputable?(D.load.lbarFill.style.width=Y.loaded/Y.total*100+"%",Y.total>1e6?(V="MB",nt=(Y.loaded/1e6).toFixed(2),Rt=(Y.total/1e6).toFixed(2)):Y.total>1e3?(V="kB",nt=(Y.loaded/1e3).toFixed(1),Rt=(Y.total/1e3).toFixed(1)):(V="B",nt=Y.loaded,Rt=Y.total),D.load.msg.innerHTML=nt+" / "+Rt+" "+V):(D.load.lbox.style.display="block",D.load.lbar.style.display="none")};try{bt.open("GET",d,!0)}catch{At(e.strings.malformedURLError)}bt.responseType="blob",bt.setRequestHeader("Accept","image/*,*/*;q=0.9"),bt.setRequestHeader("cache-control","no-cache"),bt.withCredentials="use-credentials"===e.crossOrigin,bt.send()}e.draggable&&tt.classList.add("pnlm-grab"),tt.classList.remove("pnlm-grabbing"),Bt=!0===e.dynamicUpdate,e.dynamic&&Bt&&(M=e.panorama,Jt())}else At()}function se(o){return new RegExp("^(?:[a-z]+:)?//","i").test(o)||"/"==o[0]||"blob:"==o.slice(0,5)}function Jt(){et||(et=new libpannellum.renderer(Ft)),Ot||(Ot=!0,Pt.addEventListener("mousedown",_,!1),I.addEventListener("mousemove",P,!1),I.addEventListener("mouseup",R,!1),e.mouseZoom&&(tt.addEventListener("mousewheel",Kt,!1),tt.addEventListener("DOMMouseScroll",Kt,!1)),e.doubleClickZoom&&Pt.addEventListener("dblclick",x,!1),t.addEventListener("mozfullscreenchange",Lt,!1),t.addEventListener("webkitfullscreenchange",Lt,!1),t.addEventListener("msfullscreenchange",Lt,!1),t.addEventListener("fullscreenchange",Lt,!1),"function"==typeof ResizeObserver?(te=new ResizeObserver(ot)).observe(t):(dt.addEventListener("resize",ot,!1),dt.addEventListener("orientationchange",ot,!1)),e.disableKeyboardCtrl||(t.addEventListener("keydown",Vt,!1),t.addEventListener("keyup",st,!1),t.addEventListener("blur",_t,!1)),I.addEventListener("mouseleave",R,!1),""===I.documentElement.style.pointerAction&&""===I.documentElement.style.touchAction?(Pt.addEventListener("pointerdown",j,!1),Pt.addEventListener("pointermove",K,!1),Pt.addEventListener("pointerup",ut,!1),Pt.addEventListener("pointerleave",ut,!1)):(Pt.addEventListener("touchstart",k,!1),Pt.addEventListener("touchmove",b,!1),Pt.addEventListener("touchend",F,!1)),dt.navigator.pointerEnabled&&(t.style.touchAction="none")),function u(){try{var o={};e.horizonPitch!==h&&(o.horizonPitch=e.horizonPitch*Math.PI/180),e.horizonRoll!==h&&(o.horizonRoll=e.horizonRoll*Math.PI/180),e.backgroundColor!==h&&(o.backgroundColor=e.backgroundColor),et.init(M,e.type,e.haov*Math.PI/180,e.vaov*Math.PI/180,e.vOffset*Math.PI/180,A,o)}catch(n){if(!0!==e.dynamic&&(M=h),"webgl error"==n.type||"no webgl"==n.type)At();else{if("webgl size error"!=n.type)throw At(e.strings.unknownError),n;At(e.strings.textureSizeError.replace("%s",n.width).replace("%s",n.maxWidth))}}}(),zt(e.hfov),setTimeout(function(){},500)}function At(o){o===h&&(o=e.strings.genericWebGLError),D.errorMsg.innerHTML="<p>"+o+"</p>",q.load.style.display="none",D.load.box.style.display="none",D.errorMsg.style.display="table",Et=!0,rt=h,Ft.style.display="none",Wt("error",o)}function ue(o){D.interactionMsg.style.opacity=1,D.interactionMsg.innerHTML="<p>"+o+"</p>",D.interactionMsg.style.display="table",Wt("messageshown"),clearTimeout(D.interactionMsg.timeout),D.interactionMsg.removeEventListener("transitionend",Qt),D.interactionMsg.timeout=setTimeout(function(){D.interactionMsg.style.opacity=0,D.interactionMsg.addEventListener("transitionend",Qt)},2e3)}function Qt(){D.interactionMsg.style.opacity=0,D.interactionMsg.style.display="none",Wt("messagecleared")}function qt(o){var n=t.getBoundingClientRect(),d={};return d.x=(o.clientX||o.pageX)-n.left,d.y=(o.clientY||o.pageY)-n.top,d}function _(o){if(o.preventDefault(),t.focus(),rt&&e.draggable&&!e.draggingHotSpot){var n=qt(o);if(e.hotSpotDebug){var d=f(o);console.log("Pitch: "+d[0]+", Yaw: "+d[1]+", Center Pitch: "+e.pitch+", Center Yaw: "+e.yaw+", HFOV: "+e.hfov)}ve(),Ce(),e.roll=0,B.hfov=0,gt=!0,J=Date.now(),g=n.x,i=n.y,X=e.yaw,U=e.pitch,tt.classList.add("pnlm-grabbing"),tt.classList.remove("pnlm-grab"),Wt("mousedown",o),C()}}function x(o){if(e.minHfov===e.hfov)pt.setHfov(w,1e3);else{var n=f(o);pt.lookAt(n[0],n[1],e.minHfov,1e3)}}function f(o){var n=qt(o),d=et.getCanvas(),E=d.clientWidth,L=d.clientHeight,Z=n.x/E*2-1,z=(1-n.y/L*2)*L/E,Y=1/Math.tan(e.hfov*Math.PI/360),G=Math.sin(e.pitch*Math.PI/180),V=Math.cos(e.pitch*Math.PI/180),nt=Y*V-z*G,Rt=Math.sqrt(Z*Z+nt*nt),It=180*Math.atan((z*V+Y*G)/Rt)/Math.PI,jt=180*Math.atan2(Z/Rt,nt/Rt)/Math.PI+e.yaw;return jt<-180&&(jt+=360),jt>180&&(jt-=360),[It,jt]}function P(o){if(H)p(H,o);else if(gt&&rt){J=Date.now();var n=et.getCanvas(),d=n.clientWidth,E=n.clientHeight,L=qt(o),Z=180*(Math.atan(g/d*2-1)-Math.atan(L.x/d*2-1))/Math.PI*e.hfov/90+X;B.yaw=(Z-e.yaw)%360*.2,e.yaw=Z;var z=2*Math.atan(Math.tan(e.hfov/360*Math.PI)*E/d)*180/Math.PI,Y=180*(Math.atan(L.y/E*2-1)-Math.atan(i/E*2-1))/Math.PI*z/90+U;B.pitch=.2*(Y-e.pitch),e.pitch=Y}}function R(o){H&&H.dragHandlerFunc&&H.dragHandlerFunc(o,H.dragHandlerArgs),H=null,gt&&(gt=!1,Date.now()-J>15&&(B.pitch=B.yaw=0),tt.classList.add("pnlm-grab"),tt.classList.remove("pnlm-grabbing"),J=Date.now(),Wt("mouseup",o))}function k(o){if(rt&&e.draggable&&!H){ve(),Ce(),e.roll=0,B.hfov=0;var n=qt(o.targetTouches[0]);if(g=n.x,i=n.y,2==o.targetTouches.length){var d=qt(o.targetTouches[1]);g+=.5*(d.x-n.x),i+=.5*(d.y-n.y),lt=Math.sqrt((n.x-d.x)*(n.x-d.x)+(n.y-d.y)*(n.y-d.y))}gt=!0,J=Date.now(),X=e.yaw,U=e.pitch,Wt("touchstart",o),C()}}function b(o){if(e.draggable&&(e.dragConfirm||o.preventDefault(),rt&&(J=Date.now()),gt&&rt)){var n=qt(o.targetTouches[0]),d=n.x,E=n.y;if(2==o.targetTouches.length&&-1!=lt){var L=qt(o.targetTouches[1]);d+=.5*(L.x-n.x),E+=.5*(L.y-n.y);var Z=Math.sqrt((n.x-L.x)*(n.x-L.x)+(n.y-L.y)*(n.y-L.y));zt(e.hfov+.1*(lt-Z)),lt=Z}var z=e.hfov/360*e.touchPanSpeedCoeffFactor;if(ct||"both"!=e.dragConfirm&&"yaw"!=e.dragConfirm||2==o.targetTouches.length){var Y=(g-d)*z+X;B.yaw=(Y-e.yaw)%360*.2,e.yaw=Y}else g!=d&&ue("yaw"==e.dragConfirm?e.strings.twoTouchXActivate:e.strings.twoTouchActivate);if(ct||"both"!=e.dragConfirm&&"pitch"!=e.dragConfirm||2==o.targetTouches.length){var G=(E-i)*z+U;B.pitch=.2*(G-e.pitch),e.pitch=G}else i!=E&&ue("pitch"==e.dragConfirm?e.strings.twoTouchYActivate:e.strings.twoTouchActivate);("yaw"==e.dragConfirm||"pitch"==e.dragConfirm||"both"==e.dragConfirm)&&2==o.targetTouches.length&&(Qt(),o.preventDefault())}}function F(){H=null,gt=!1,Date.now()-J>150&&(B.pitch=B.yaw=0),lt=-1,J=Date.now(),Wt("touchend",event)}ie.className="pnlm-compass pnlm-controls pnlm-control",tt.appendChild(ie),m(v.firstScene?v.firstScene:v.default&&v.default.firstScene?v.default.firstScene:null),T(!0);var N=[],W=[];function j(o){if("touch"==o.pointerType){if(!rt||!e.draggable)return;N.push(o.pointerId),W.push({clientX:o.clientX,clientY:o.clientY}),o.targetTouches=W,k(o),o.preventDefault()}}function K(o){if("touch"==o.pointerType){if(H)return void p(H,o);if(!e.draggable)return;for(var n=0;n<N.length;n++)if(o.pointerId==N[n])return W[n].clientX=o.clientX,W[n].clientY=o.clientY,o.targetTouches=W,b(o),void o.preventDefault()}}function ut(o){if(H&&H.dragHandlerFunc&&H.dragHandlerFunc(o,H.dragHandlerArgs),H=null,"touch"==o.pointerType){for(var n=!1,d=0;d<N.length;d++)o.pointerId==N[d]&&(N[d]=h),N[d]&&(n=!0);n||(N=[],W=[],F()),o.preventDefault()}}function Kt(o){if(rt&&("fullscreenonly"!=e.mouseZoom||ct)){if(!ct&&"ctrl"==e.mouseZoom&&!o.ctrlKey){var n=-1!=navigator.platform.indexOf("Mac")?"control":"ctrl";return void ue(e.strings.ctrlZoomActivate.replace("%s",'<kbd class="pnlm-outline">'+n+"</kbd>"))}Qt(),o.preventDefault(),ve(),J=Date.now(),o.wheelDeltaY?(zt(e.hfov-.05*o.wheelDeltaY),B.hfov=o.wheelDelta<0?1:-1):o.wheelDelta?(zt(e.hfov-.05*o.wheelDelta),B.hfov=o.wheelDelta<0?1:-1):o.detail&&(zt(e.hfov+1.5*o.detail),B.hfov=o.detail>0?1:-1),C()}}function Vt(o){ve(),J=Date.now(),Ce(),e.roll=0;var n=o.which||o.keycode;e.capturedKeyNumbers.indexOf(n)<0||!ct&&(16==n||17==n)&&"ctrl"==e.mouseZoom||(o.preventDefault(),27==n?ct&&O():vt(n,!0))}function _t(){for(var o=0;o<10;o++)S[o]=!1}function st(o){var n=o.which||o.keycode;e.capturedKeyNumbers.indexOf(n)<0||(o.preventDefault(),vt(n,!1))}function vt(o,n){var d=!1;switch(o){case 109:case 189:case 17:case 173:S[0]!=n&&(d=!0),S[0]=n;break;case 107:case 187:case 16:case 61:S[1]!=n&&(d=!0),S[1]=n;break;case 38:S[2]!=n&&(d=!0),S[2]=n;break;case 87:S[6]!=n&&(d=!0),S[6]=n;break;case 40:S[3]!=n&&(d=!0),S[3]=n;break;case 83:S[7]!=n&&(d=!0),S[7]=n;break;case 37:S[4]!=n&&(d=!0),S[4]=n;break;case 65:S[8]!=n&&(d=!0),S[8]=n;break;case 39:S[5]!=n&&(d=!0),S[5]=n;break;case 68:S[9]!=n&&(d=!0),S[9]=n}d&&n&&(it=typeof performance<"u"&&performance.now()?performance.now():Date.now(),C())}function Tt(o){var n=at[o],d=Math.min(1,Math.max((Date.now()-n.startTime)/1e3/(n.duration/1e3),0)),E=n.startPosition+e.animationTimingFunction(d)*(n.endPosition-n.startPosition);(n.endPosition>n.startPosition&&E>=n.endPosition||n.endPosition<n.startPosition&&E<=n.endPosition||n.endPosition===n.startPosition)&&(E=n.endPosition,B[o]=0,delete at[o]),e[o]=E}function ot(){Lt("resize")}function C(){Nt||(Nt=!0,yt())}function yt(){if(!de)if(function St(){var o;if(rt){var n=et.getCanvas();!1!==e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),o=e.yaw;var d=0;if(e.avoidShowingBackground){var L=e.hfov/2,Z=180*Math.atan2(Math.tan(L/180*Math.PI),n.width/n.height)/Math.PI;e.vaov>e.haov?Math.min(Math.cos((e.pitch-L)/180*Math.PI),Math.cos((e.pitch+L)/180*Math.PI)):d=L*(1-Math.min(Math.cos((e.pitch-Z)/180*Math.PI),Math.cos((e.pitch+Z)/180*Math.PI)))}var Y=e.maxYaw-e.minYaw,G=-180,V=180;Y<360&&(G=e.minYaw+e.hfov/2+d,V=e.maxYaw-e.hfov/2-d,Y<e.hfov&&(G=V=(G+V)/2),e.yaw=Math.max(G,Math.min(V,e.yaw))),!1===e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),!1!==e.autoRotate&&o!=e.yaw&&it!==h&&(e.autoRotate*=-1);var nt=2*Math.atan(Math.tan(e.hfov/180*Math.PI*.5)/(n.width/n.height))/Math.PI*180,Rt=e.minPitch+nt/2,It=e.maxPitch-nt/2;e.maxPitch-e.minPitch<nt&&(Rt=It=(Rt+It)/2),isNaN(Rt)&&(Rt=-90),isNaN(It)&&(It=90),e.pitch=Math.max(Rt,Math.min(It,e.pitch)),et.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{roll:e.roll*Math.PI/180,dynamic:Bt}),ae&&(ae=Bt=!1),c(),e.compass&&(ie.style.transform="rotate("+(-e.yaw-e.northOffset)+"deg)",ie.style.webkitTransform="rotate("+(-e.yaw-e.northOffset)+"deg)")}}(),ht&&clearTimeout(ht),gt||!0===Mt)requestAnimationFrame(yt);else if(S[0]||S[1]||S[2]||S[3]||S[4]||S[5]||S[6]||S[7]||S[8]||S[9]||e.autoRotate||at.pitch||at.yaw||at.hfov||Math.abs(B.yaw)>.01||Math.abs(B.pitch)>.01||Math.abs(B.hfov)>.01)(function wt(){if(rt){var L,o=!1,n=e.pitch,d=e.yaw,E=e.hfov;L=typeof performance<"u"&&performance.now()?performance.now():Date.now(),it===h&&(it=L);var Z=(L-it)*e.hfov/1200;if(Z=Math.min(Z,10),S[0]&&!0===e.keyboardZoom&&(zt(e.hfov+(.8*B.hfov+.4)*Z),o=!0),S[1]&&!0===e.keyboardZoom&&(zt(e.hfov+(.8*B.hfov-.2)*Z),o=!0),(S[2]||S[6])&&(e.pitch+=(.8*B.pitch+.2)*Z,o=!0),(S[3]||S[7])&&(e.pitch+=(.8*B.pitch-.2)*Z,o=!0),(S[4]||S[8])&&(e.yaw+=(.8*B.yaw-.2)*Z,o=!0),(S[5]||S[9])&&(e.yaw+=(.8*B.yaw+.2)*Z,o=!0),o&&(J=Date.now()),e.autoRotate){if(L-it>.001){var z=(L-it)/1e3,Y=(B.yaw/z*Z-.2*e.autoRotate)*z;Y=(-e.autoRotate>0?1:-1)*Math.min(Math.abs(e.autoRotate*z),Math.abs(Y)),e.yaw+=Y}e.autoRotateStopDelay&&(e.autoRotateStopDelay-=L-it,e.autoRotateStopDelay<=0&&(e.autoRotateStopDelay=!1,mt=e.autoRotate,e.autoRotate=0))}if(at.pitch&&(Tt("pitch"),n=e.pitch),at.yaw&&(Tt("yaw"),d=e.yaw),at.hfov&&(Tt("hfov"),E=e.hfov),Z>0&&!e.autoRotate){var G=1-e.friction;!S[4]&&!S[5]&&!S[8]&&!S[9]&&!at.yaw&&(e.yaw+=B.yaw*Z*G),!S[2]&&!S[3]&&!S[6]&&!S[7]&&!at.pitch&&(e.pitch+=B.pitch*Z*G),!S[0]&&!S[1]&&!at.hfov&&(e.hfov>90&&(G*=1-(e.hfov-90)/90),zt(e.hfov+B.hfov*Z*G))}if(it=L,Z>0){B.yaw=.8*B.yaw+(e.yaw-d)/Z*.2,B.pitch=.8*B.pitch+(e.pitch-n)/Z*.2,B.hfov=.8*B.hfov+(e.hfov-E)/Z*.2;var V=e.autoRotate?Math.abs(e.autoRotate):5;B.yaw=Math.min(V,Math.max(B.yaw,-V)),B.pitch=Math.min(V,Math.max(B.pitch,-V)),B.hfov=Math.min(V,Math.max(B.hfov,-V))}S[0]&&S[1]&&(B.hfov=0),(S[2]||S[6])&&(S[3]||S[7])&&(B.pitch=0),(S[4]||S[8])&&(S[5]||S[9])&&(B.yaw=0)}})(),e.autoRotateInactivityDelay>=0&&mt&&Date.now()-J>e.autoRotateInactivityDelay&&!e.autoRotate&&(e.autoRotate=mt,pt.lookAt(Q,h,w,3e3)),requestAnimationFrame(yt);else if(et&&(et.isLoading()||!0===e.dynamic&&Bt))requestAnimationFrame(yt);else{pt.getPitch&&pt.getYaw&&pt.getHfov&&Wt("animatefinished",{pitch:pt.getPitch(),yaw:pt.getYaw(),hfov:pt.getHfov()}),Nt=!1,it=h;var o=e.autoRotateInactivityDelay-(Date.now()-J);o>0?ht=setTimeout(function(){e.autoRotate=mt,pt.lookAt(Q,h,w,3e3),C()},o):e.autoRotateInactivityDelay>=0&&mt&&(e.autoRotate=mt,pt.lookAt(Q,h,w,3e3),C())}}function xt(o,n,d,E){this.w=o,this.x=n,this.y=d,this.z=E}function Gt(o){var n=function Ht(o,n,d){var E=function Yt(o,n,d){var E=[n?n*Math.PI/180/2:0,d?d*Math.PI/180/2:0,o?o*Math.PI/180/2:0],L=[Math.cos(E[0]),Math.cos(E[1]),Math.cos(E[2])],Z=[Math.sin(E[0]),Math.sin(E[1]),Math.sin(E[2])];return new xt(L[0]*L[1]*L[2]-Z[0]*Z[1]*Z[2],Z[0]*L[1]*L[2]-L[0]*Z[1]*Z[2],L[0]*Z[1]*L[2]+Z[0]*L[1]*Z[2],L[0]*L[1]*Z[2]+Z[0]*Z[1]*L[2])}(o,n,d);E=E.multiply(new xt(Math.sqrt(.5),-Math.sqrt(.5),0,0));var L=dt.orientation?-dt.orientation*Math.PI/180/2:0;return E.multiply(new xt(Math.cos(L),0,-Math.sin(L),0))}(o.alpha,o.beta,o.gamma).toEulerAngles();"number"==typeof Mt&&Mt<10?Mt+=1:10===Mt?(Ct=n[2]/Math.PI*180+e.yaw,Mt=!0,requestAnimationFrame(yt)):(e.pitch=n[0]/Math.PI*180,e.roll=-n[1]/Math.PI*180,e.yaw=-n[2]/Math.PI*180+Ct)}function A(){if(e.sceneFadeDuration&&et.fadeImg!==h){et.fadeImg.style.opacity=0;var o=et.fadeImg;delete et.fadeImg,setTimeout(function(){Ft.removeChild(o),Wt("scenechangefadedone")},e.sceneFadeDuration)}ie.style.display=e.compass?"inline":"none",function a(){_e||(e.hotSpots?(e.hotSpots=e.hotSpots.sort(function(o,n){return o.pitch<n.pitch}),e.hotSpots.forEach(s)):e.hotSpots=[],_e=!0,c())}(),D.load.box.style.display="none",kt!==h&&(Ft.removeChild(kt),kt=h),rt=!0,!0!==e.dynamic&&(M=h),C(),Wt("load")}function s(o){o.pitch=Number(o.pitch)||0,o.yaw=Number(o.yaw)||0;var n=I.createElement("div");n.tabIndex=-1,n.className="pnlm-hotspot-base",n.className+=o.cssClass?" "+o.cssClass:" pnlm-hotspot pnlm-sprite pnlm-"+he(o.type);var E,d=I.createElement("span");if(o.text&&(d.innerHTML=he(o.text)),o.video){var L=I.createElement("video"),Z=o.video;e.basePath&&!se(Z)&&(Z=e.basePath+Z),L.src=ge(Z),L.controls=!0,L.style.width=o.width+"px",tt.appendChild(n),d.appendChild(L)}else if(o.image){var z=o.image;e.basePath&&!se(z)&&(z=e.basePath+z),(E=I.createElement("a")).href=ge(o.URL?o.URL:z,!0),e.targetBlank&&(E.target="_blank",E.rel="noopener"),d.appendChild(E);var Y=I.createElement("img");Y.src=ge(z),Y.style.width=o.width+"px",Y.style.paddingTop="5px",tt.appendChild(n),E.appendChild(Y),d.style.maxWidth="initial"}else if(o.URL){if((E=I.createElement("a")).href=ge(o.URL,!0),o.attributes)for(var G in o.attributes)E.setAttribute(G,o.attributes[G]);else e.targetBlank&&(E.target="_blank",E.rel="noopener");tt.appendChild(E),n.className+=" pnlm-pointer",d.className+=" pnlm-pointer",E.appendChild(n)}else o.sceneId&&(n.onclick=n.ontouchend=function(){return n.clicked||(n.clicked=!0,xe(o.sceneId,o.targetPitch,o.targetYaw,o.targetHfov)),!1},n.className+=" pnlm-pointer",d.className+=" pnlm-pointer"),tt.appendChild(n);o.createTooltipFunc?o.createTooltipFunc(n,o.createTooltipArgs):(o.text||o.video||o.image)&&(n.classList.add("pnlm-tooltip"),n.appendChild(d),d.style.width=d.scrollWidth-20+"px",d.style.marginLeft=-(d.scrollWidth-n.offsetWidth)/2+"px",d.style.marginTop=-d.scrollHeight-12+"px"),o.clickHandlerFunc&&(n.addEventListener("click",function(V){o.clickHandlerFunc(V,o.clickHandlerArgs)},"false"),n.addEventListener(""===I.documentElement.style.pointerAction&&""===I.documentElement.style.touchAction?"pointerup":"touchend",function(V){o.clickHandlerFunc(V,o.clickHandlerArgs)},!1),n.className+=" pnlm-pointer",d.className+=" pnlm-pointer"),o.draggable&&(n.addEventListener("mousedown",function(V){o.dragHandlerFunc&&o.dragHandlerFunc(V,o.dragHandlerArgs),H=o}),""===I.documentElement.style.pointerAction&&""===I.documentElement.style.touchAction&&n.addEventListener("pointerdown",function(V){o.dragHandlerFunc&&o.dragHandlerFunc(V,o.dragHandlerArgs),H=o}),n.addEventListener("touchmove",function(V){p(o,V.targetTouches[0])}),n.addEventListener("touchend",function(V){o.dragHandlerFunc&&o.dragHandlerFunc(V,o.dragHandlerArgs),H=null})),o.div=n}function p(o,n){var d=f(n);o.pitch=d[0],o.yaw=d[1],r(o)}function r(o){var n=Math.sin(o.pitch*Math.PI/180),d=Math.cos(o.pitch*Math.PI/180),E=Math.sin(e.pitch*Math.PI/180),L=Math.cos(e.pitch*Math.PI/180),Z=Math.cos((-o.yaw+e.yaw)*Math.PI/180),z=n*E+d*Z*L;if(o.yaw<=90&&o.yaw>-90&&z<=0||(o.yaw>90||o.yaw<=-90)&&z<=0)o.div.style.visibility="hidden";else{var Y=Math.sin((-o.yaw+e.yaw)*Math.PI/180),G=Math.tan(e.hfov*Math.PI/360);o.div.style.visibility="visible";var V=et.getCanvas(),nt=V.clientWidth,Rt=V.clientHeight,It=[-nt/G*Y*d/z/2,-nt/G*(n*L-d*Z*E)/z/2],jt=Math.sin(e.roll*Math.PI/180),Ae=Math.cos(e.roll*Math.PI/180);(It=[It[0]*Ae-It[1]*jt,It[0]*jt+It[1]*Ae])[0]+=(nt-o.div.offsetWidth)/2,It[1]+=(Rt-o.div.offsetHeight)/2;var Me="translate("+It[0]+"px, "+It[1]+"px) translateZ(9999px) rotate("+e.roll+"deg)";o.scale&&(Me+=" scale("+w/e.hfov/z+")"),o.div.style.webkitTransform=Me,o.div.style.MozTransform=Me,o.div.style.transform=Me}}function c(){e.hotSpots.forEach(r)}function m(o){e={};var n,d,E=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];for(n in $=[],ne)ne.hasOwnProperty(n)&&(e[n]=ne[n]);for(n in v.default)if(v.default.hasOwnProperty(n))if("strings"==n)for(d in v.default.strings)v.default.strings.hasOwnProperty(d)&&(e.strings[d]=he(v.default.strings[d]));else e[n]=v.default[n],E.indexOf(n)>=0&&$.push(n);if(null!==o&&""!==o&&v.scenes&&v.scenes[o]){var L=v.scenes[o];for(n in L)if(L.hasOwnProperty(n))if("strings"==n)for(d in L.strings)L.strings.hasOwnProperty(d)&&(e.strings[d]=he(L.strings[d]));else e[n]=L[n],E.indexOf(n)>=0&&$.push(n);e.scene=o}for(n in v)if(v.hasOwnProperty(n))if("strings"==n)for(d in v.strings)v.strings.hasOwnProperty(d)&&(e.strings[d]=he(v.strings[d]));else e[n]=v[n],E.indexOf(n)>=0&&$.push(n)}function T(o){if((o=o||!1)&&"preview"in e){var n=e.preview;e.basePath&&!se(n)&&(n=e.basePath+n),(kt=I.createElement("div")).className="pnlm-preview-img",kt.style.backgroundImage="url('"+function be(o){return ge(o).replace(/"/g,"%22").replace(/'/g,"%27")}(n)+"')",Ft.appendChild(kt)}var d=e.title,E=e.author;for(var L in o&&("previewTitle"in e&&(e.title=e.previewTitle),"previewAuthor"in e&&(e.author=e.previewAuthor)),e.hasOwnProperty("title")||(D.title.innerHTML=""),e.hasOwnProperty("author")||(D.author.innerHTML=""),!e.hasOwnProperty("title")&&!e.hasOwnProperty("author")&&(D.container.style.display="none"),e.targetBlank&&(re.rel="noopener",re.target="_blank"),q.load.innerHTML="<div><p>"+e.strings.loadButtonLabel+"</p></div>",D.load.boxp.innerHTML=e.strings.loadingLabel,e)if(e.hasOwnProperty(L))switch(L){case"title":D.title.innerHTML=he(e[L]),D.container.style.display="inline";break;case"author":var Z=he(e[L]);if(e.authorURL){var z=I.createElement("a");z.href=ge(e.authorURL,!0),e.targetBlank&&(z.target="_blank",z.rel="noopener"),z.innerHTML=he(e[L]),Z=z.outerHTML}D.author.innerHTML=e.strings.bylineLabel.replace("%s",Z),D.container.style.display="inline";break;case"hfov":zt(Number(e[L]));break;case"autoLoad":!0===e[L]&&et===h&&(D.load.box.style.display="inline",q.load.style.display="none",pe());break;case"showZoomCtrl":q.zoom.style.display=e[L]&&0!=e.showControls?"block":"none";break;case"showFullscreenCtrl":q.fullscreen.style.display=e[L]&&0!=e.showControls&&("fullscreen"in I||"mozFullScreen"in I||"webkitIsFullScreen"in I||"msFullscreenElement"in I)?"block":"none";break;case"hotSpotDebug":le.style.display=e[L]?"block":"none";break;case"showControls":e[L]||(q.orientation.style.display="none",q.zoom.style.display="none",q.fullscreen.style.display="none");break;case"orientationOnByDefault":e[L]&&we()}o&&(d?e.title=d:delete e.title,E?e.author=E:delete e.author)}function O(){if(rt&&!Et)if(ct)I.exitFullscreen?I.exitFullscreen():I.mozCancelFullScreen?I.mozCancelFullScreen():I.webkitCancelFullScreen?I.webkitCancelFullScreen():I.msExitFullscreen&&I.msExitFullscreen();else try{t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen()}catch{}}function Lt(o){I.fullscreenElement||I.fullscreen||I.mozFullScreen||I.webkitIsFullScreen||I.msFullscreenElement?(q.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),ct=!0):(q.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),ct=!1),"resize"!==o&&Wt("fullscreenchange",ct),et.resize(),zt(e.hfov),C()}function Te(o){var n=e.minHfov;if("multires"==e.type&&et&&!e.multiResMinHfov&&(n=Math.min(n,et.getCanvas().width/(e.multiRes.cubeResolution/90*.9))),n>e.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),e.hfov;var d=e.hfov;if(d=o<n?n:o>e.maxHfov?e.maxHfov:o,e.avoidShowingBackground&&et&&!isNaN(e.maxPitch-e.minPitch)){var E=et.getCanvas();d=Math.min(d,360*Math.atan(Math.tan((e.maxPitch-e.minPitch)/360*Math.PI)/E.height*E.width)/Math.PI)}return d}function zt(o){e.hfov=Te(o),Wt("zoomchange",e.hfov)}function ve(){at={},mt=e.autoRotate?e.autoRotate:mt,e.autoRotate=!1}function Ee(){(function ce(){Et&&(D.load.box.style.display="none",D.errorMsg.style.display="none",Et=!1,Ft.style.display="block",Wt("errorcleared"))})(),rt=!1,Qt(),q.load.style.display="none",D.load.box.style.display="inline",pe()}function xe(o,n,d,E,L){var Z,z,Y,G;if(rt||(L=!0),rt=!1,at={},e.sceneFadeDuration&&!L){var V=et.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{returnImage:"ImageBitmap"});if(V!==h)return(Z=V.then?I.createElement("canvas"):new Image).className="pnlm-fade-img",Z.style.transition="opacity "+e.sceneFadeDuration/1e3+"s",Z.style.width="100%",Z.style.height="100%",V.then?V.then(function(nt){Z.width=nt.width,Z.height=nt.height,Z.getContext("2d").drawImage(nt,0,0),xe(o,n,d,E,!0)}):(Z.onload=function(){xe(o,n,d,E,!0)},Z.src=V),Ft.appendChild(Z),void(et.fadeImg=Z)}z="same"===n?e.pitch:n,Y="same"===d?e.yaw:"sameAzimuth"===d?e.yaw+(e.northOffset||0)-(v.scenes[o].northOffset||0):d,G="same"===E?e.hfov:E,function l(){var o=e.hotSpots;if(_e=!1,delete e.hotSpots,o)for(var n=0;n<o.length;n++){var d=o[n].div;if(d){for(;d.parentNode&&d.parentNode!=tt;)d=d.parentNode;tt.removeChild(d)}delete o[n].div}}(),m(o),B.yaw=B.pitch=B.hfov=0,T(),z!==h&&(e.pitch=z),Y!==h&&(e.yaw=Y),G!==h&&(e.hfov=G),Wt("scenechange",o),Ee()}function Ce(){dt.removeEventListener("deviceorientation",Gt),q.orientation.classList.remove("pnlm-orientation-button-active"),Mt=!1}function we(){ee&&(typeof DeviceMotionEvent<"u"&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(o){"granted"==o&&(Mt=1,dt.addEventListener("deviceorientation",Gt),q.orientation.classList.add("pnlm-orientation-button-active"))}):(Mt=1,dt.addEventListener("deviceorientation",Gt),q.orientation.classList.add("pnlm-orientation-button-active")))}function he(o){return v.escapeHTML?String(o).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(o).split("\n").join("<br>")}function ge(o,n){try{var d=decodeURIComponent(function Le(o){return o.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(n,d){return"colon"===(d=d.toLowerCase())?":":"#"===d.charAt(0)?"x"===d.charAt(1)?String.fromCharCode(parseInt(d.substring(2),16)):String.fromCharCode(+d.substring(1)):""})}(o)).replace(/[^\w:]/g,"").toLowerCase()}catch{return"about:blank"}return 0===d.indexOf("javascript:")||0===d.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):n&&0===d.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):o}function Wt(o){if(o in ft)for(var n=ft[o].length;n>0;n--)ft[o][ft[o].length-n].apply(null,[].slice.call(arguments,1))}xt.prototype.multiply=function(o){return new xt(this.w*o.w-this.x*o.x-this.y*o.y-this.z*o.z,this.x*o.w+this.w*o.x+this.y*o.z-this.z*o.y,this.y*o.w+this.w*o.y+this.z*o.x-this.x*o.z,this.z*o.w+this.w*o.z+this.x*o.y-this.y*o.x)},xt.prototype.toEulerAngles=function(){return[Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Math.asin(2*(this.w*this.y-this.z*this.x)),Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z))]},this.isLoaded=function(){return Boolean(rt)},this.getPitch=function(){return e.pitch},this.setPitch=function(o,n,d,E){return J=Date.now(),Math.abs(o-e.pitch)<=Xt?("function"==typeof d&&d(E),this):((n=n==h?1e3:Number(n))?(at.pitch={startTime:Date.now(),startPosition:e.pitch,endPosition:o,duration:n},"function"==typeof d&&setTimeout(function(){d(E)},n)):e.pitch=o,C(),this)},this.getPitchBounds=function(){return[e.minPitch,e.maxPitch]},this.setPitchBounds=function(o){return e.minPitch=Math.max(-90,Math.min(o[0],90)),e.maxPitch=Math.max(-90,Math.min(o[1],90)),this},this.getYaw=function(){return(e.yaw+540)%360-180},this.setYaw=function(o,n,d,E){return J=Date.now(),Math.abs(o-e.yaw)<=Xt?("function"==typeof d&&d(E),this):(o=(o+180)%360-180,(n=n==h?1e3:Number(n))?(e.yaw-o>180?o+=360:o-e.yaw>180&&(o-=360),at.yaw={startTime:Date.now(),startPosition:e.yaw,endPosition:o,duration:n},"function"==typeof d&&setTimeout(function(){d(E)},n)):e.yaw=o,C(),this)},this.getYawBounds=function(){return[e.minYaw,e.maxYaw]},this.setYawBounds=function(o){return e.minYaw=Math.max(-360,Math.min(o[0],360)),e.maxYaw=Math.max(-360,Math.min(o[1],360)),this},this.getHfov=function(){return e.hfov},this.setHfov=function(o,n,d,E){return J=Date.now(),Math.abs(o-e.hfov)<=Xt?("function"==typeof d&&d(E),this):((n=n==h?1e3:Number(n))?(at.hfov={startTime:Date.now(),startPosition:e.hfov,endPosition:Te(o),duration:n},"function"==typeof d&&setTimeout(function(){d(E)},n)):zt(o),C(),this)},this.getHfovBounds=function(){return[e.minHfov,e.maxHfov]},this.setHfovBounds=function(o){return e.minHfov=Math.max(0,o[0]),e.maxHfov=Math.max(0,o[1]),this},this.lookAt=function(o,n,d,E,L,Z){return E=E==h?1e3:Number(E),o!==h&&Math.abs(o-e.pitch)>Xt&&(this.setPitch(o,E,L,Z),L=h),n!==h&&Math.abs(n-e.yaw)>Xt&&(this.setYaw(n,E,L,Z),L=h),d!==h&&Math.abs(d-e.hfov)>Xt&&(this.setHfov(d,E,L,Z),L=h),"function"==typeof L&&L(Z),this},this.getNorthOffset=function(){return e.northOffset},this.setNorthOffset=function(o){return e.northOffset=Math.min(360,Math.max(0,o)),C(),this},this.getHorizonRoll=function(){return e.horizonRoll},this.setHorizonRoll=function(o){return e.horizonRoll=Math.min(90,Math.max(-90,o)),et.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),C(),this},this.getHorizonPitch=function(){return e.horizonPitch},this.setHorizonPitch=function(o){return e.horizonPitch=Math.min(90,Math.max(-90,o)),et.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),C(),this},this.startAutoRotate=function(o,n,d,E){return n=n===h?Q:n,d=d===h?w:d,e.autoRotate=o=o||mt||1,E!==h&&(e.autoRotateInactivityDelay=E),pt.lookAt(n,h,d,3e3),C(),this},this.stopAutoRotate=function(){return mt=e.autoRotate?e.autoRotate:mt,e.autoRotate=!1,e.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){ve(),B={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return et},this.setUpdate=function(o){return(Bt=!0===o)&&(ae=!1,et===h?Jt():C()),this},this.updateOnce=function(){return Bt=ae=!0,et===h?Jt():C(),this},this.mouseEventToCoords=function(o){return f(o)},this.loadScene=function(o,n,d,E){return!1!==rt&&xe(o,n,d,E),this},this.getScene=function(){return e.scene},this.addScene=function(o,n){return v.scenes[o]=n,this},this.removeScene=function(o){return!(e.scene==o||!v.scenes.hasOwnProperty(o)||(delete v.scenes[o],0))},this.toggleFullscreen=function(){return O(),this},this.getConfig=function(){return e},this.getContainer=function(){return t},this.addHotSpot=function(o,n){if(n===h&&e.scene===h)e.hotSpots.push(o);else{var d=n!==h?n:e.scene;if(!v.scenes.hasOwnProperty(d))throw"Invalid scene ID!";v.scenes[d].hasOwnProperty("hotSpots")||(v.scenes[d].hotSpots=[],d==e.scene&&(e.hotSpots=v.scenes[d].hotSpots)),v.scenes[d].hotSpots.push(o)}return(n===h||e.scene==n)&&(s(o),rt&&r(o)),this},this.removeHotSpot=function(o,n){if(n===h||e.scene==n){if(!e.hotSpots)return!1;for(var d=0;d<e.hotSpots.length;d++)if(e.hotSpots[d].hasOwnProperty("id")&&e.hotSpots[d].id==o){for(var E=e.hotSpots[d].div;E.parentNode!=tt;)E=E.parentNode;return tt.removeChild(E),delete e.hotSpots[d].div,e.hotSpots.splice(d,1),!0}}else{if(!v.scenes.hasOwnProperty(n))return!1;if(!v.scenes[n].hasOwnProperty("hotSpots"))return!1;for(var L=0;L<v.scenes[n].hotSpots.length;L++)if(v.scenes[n].hotSpots[L].hasOwnProperty("id")&&v.scenes[n].hotSpots[L].id==o)return v.scenes[n].hotSpots.splice(L,1),!0}},this.resize=function(){et&&ot()},this.isOrientationSupported=function(){return ee||!1},this.stopOrientation=function(){Ce()},this.startOrientation=function(){we()},this.isOrientationActive=function(){return Boolean(Mt)},this.on=function(o,n){return ft[o]=ft[o]||[],ft[o].push(n),this},this.off=function(o,n){if(!o)return ft={},this;if(n){var d=ft[o].indexOf(n);d>=0&&ft[o].splice(d,1),0==ft[o].length&&delete ft[o]}else delete ft[o];return this},this.destroy=function(){if(de=!0,clearTimeout(ht),bt&&bt.abort(),Array.isArray(M))for(var o=0;o<6;o++)M[o].src="";et&&et.destroy(),Ot&&(I.removeEventListener("mousemove",P,!1),I.removeEventListener("mouseup",R,!1),t.removeEventListener("mozfullscreenchange",Lt,!1),t.removeEventListener("webkitfullscreenchange",Lt,!1),t.removeEventListener("msfullscreenchange",Lt,!1),t.removeEventListener("fullscreenchange",Lt,!1),te?te.disconnect():(dt.removeEventListener("resize",ot,!1),dt.removeEventListener("orientationchange",ot,!1)),t.removeEventListener("keydown",Vt,!1),t.removeEventListener("keyup",st,!1),t.removeEventListener("blur",_t,!1),I.removeEventListener("mouseleave",R,!1)),t.innerHTML="",t.classList.remove("pnlm-container")}}return{viewer:function(t,v){return new y(t,v)}}}(window,document)},81447:(dt,I,h)=>{"use strict";h.d(I,{t:()=>t});var y=h(86889);class t{constructor(){(0,y.Z)(this,"lat",void 0),(0,y.Z)(this,"lon",void 0)}}},87753:(dt,I,h)=>{"use strict";h.d(I,{H:()=>Gt});var y=h(86889),t=h(64537),v=h(80418),H=(h(7226),h(32647),h(34511)),gt=h(60656),J=h(32607),g=h(94032),i=h(56707),lt=h(88692),X=h(20092),U=h(1379),S=h(9638),ct=h(88659),rt=h(83331),Et=h(39665),oe=h(18033),Ot=h(56558),M=h(2940),it=h(99482),B=h(75738),Nt=h(81418);const Mt=["container"];function Ct(u,A){if(1&u){const s=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(s);const a=t.oxw();return t.KtG(a.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function ht(u,A){if(1&u){const s=t.EpF();t.TgZ(0,"mat-icon",48),t.NdJ("click",function(){t.CHM(s);const a=t.oxw(2);return t.KtG(a.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function mt(u,A){if(1&u){const s=t.EpF();t.TgZ(0,"mat-icon",48),t.NdJ("click",function(){t.CHM(s);const a=t.oxw(2);return t.KtG(a.dataDetailModel.description="")}),t._uU(1,"close"),t.qZA()}}function w(u,A){if(1&u){const s=t.EpF();t.TgZ(0,"mat-icon",49),t.NdJ("click",function(){t.CHM(s);const a=t.oxw(2);return t.KtG(a.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function Q(u,A){if(1&u&&(t._UZ(0,"img",50),t.ALo(1,"cmsthumbnail")),2&u){const s=t.oxw(2);t.s9C("src",t.lcZ(1,1,s.dataDetailModel.panorama),t.LSH)}}function at(u,A){if(1&u&&(t.TgZ(0,"table",51)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&u){const s=t.oxw(2);t.xp6(12),t.Oqu(s.postionView.viewerGetYaw),t.xp6(2),t.Oqu(s.postionView.viewerGetPitch),t.xp6(2),t.Oqu(s.postionView.clickGetYaw),t.xp6(2),t.Oqu(s.postionView.clickGetPitch)}}function ft(u,A){if(1&u){const s=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(s);const a=t.oxw(2);return t.KtG(a.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function $(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function Bt(u,A){if(1&u&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&u){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.sceneId||"N/A"," ")}}function ae(u,A){if(1&u){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",55),t.NdJ("ngModelChange",function(a){t.CHM(s);const l=t.oxw().$implicit;return t.KtG(l.sceneId=a)}),t.qZA()(),t.BQk()}if(2&u){const s=t.oxw().$implicit,p=t.oxw(2);t.xp6(2),t.Q6J("disabled",p.editdisabled)("ngModel",s.sceneId)}}function Xt(u,A){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,Bt,3,1,"ng-container",52),t.YNc(2,ae,3,2,"ng-container",52),t.qZA()),2&u){const s=A.$implicit,p=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!p.editHotspot.guid||!s.guid||s.guid!==p.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",p.editHotspot.guid&&s.guid&&s.guid===p.editHotspot.guid)}}function te(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function _e(u,A){if(1&u&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&u){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.pitch||"N/A"," ")}}function bt(u,A){if(1&u){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",56),t.NdJ("ngModelChange",function(a){t.CHM(s);const l=t.oxw().$implicit;return t.KtG(l.pitch=a)}),t.qZA()(),t.BQk()}if(2&u){const s=t.oxw().$implicit,p=t.oxw(2);t.xp6(2),t.Q6J("disabled",p.editdisabled)("ngModel",s.pitch)}}function de(u,A){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,_e,3,1,"ng-container",52),t.YNc(2,bt,3,2,"ng-container",52),t.qZA()),2&u){const s=A.$implicit,p=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!p.editHotspot.guid||!s.guid||s.guid!==p.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",p.editHotspot.guid&&s.guid&&s.guid===p.editHotspot.guid)}}function ne(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function tt(u,A){if(1&u&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&u){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.yaw||"N/A"," ")}}function Ft(u,A){if(1&u){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",58),t.NdJ("ngModelChange",function(a){t.CHM(s);const l=t.oxw().$implicit;return t.KtG(l.yaw=a)}),t.qZA()(),t.BQk()}if(2&u){const s=t.oxw().$implicit,p=t.oxw(2);t.xp6(2),t.Q6J("disabled",p.editdisabled)("ngModel",s.yaw)}}function Pt(u,A){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,tt,3,1,"ng-container",52),t.YNc(2,Ft,3,2,"ng-container",52),t.qZA()),2&u){const s=A.$implicit,p=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!p.editHotspot.guid||!s.guid||s.guid!==p.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",p.editHotspot.guid&&s.guid&&s.guid===p.editHotspot.guid)}}function Dt(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function re(u,A){if(1&u&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&u){const s=t.oxw().$implicit;t.xp6(2),t.Oqu(s.type)}}function me(u,A){if(1&u){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"mat-select",59),t.NdJ("ngModelChange",function(a){t.CHM(s);const l=t.oxw().$implicit;return t.KtG(l.type=a)}),t.TgZ(3,"mat-option",60),t._uU(4,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&u){const s=t.oxw().$implicit,p=t.oxw(2);t.xp6(2),t.Q6J("disabled",p.editdisabled)("ngModel",s.type),t.xp6(1),t.Q6J("value","info")}}function D(u,A){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,re,3,1,"ng-container",52),t.YNc(2,me,5,3,"ng-container",52),t.qZA()),2&u){const s=A.$implicit,p=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!p.editHotspot.guid||!s.guid||s.guid!==p.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",p.editHotspot.guid&&s.guid&&s.guid===p.editHotspot.guid)}}function le(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function q(u,A){if(1&u&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&u){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.targetYaw||"N/A"," ")}}function ee(u,A){if(1&u){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",61),t.NdJ("ngModelChange",function(a){t.CHM(s);const l=t.oxw().$implicit;return t.KtG(l.targetYaw=a)}),t.qZA()(),t.BQk()}if(2&u){const s=t.oxw().$implicit,p=t.oxw(2);t.xp6(2),t.Q6J("disabled",p.editdisabled)("ngModel",s.targetYaw)}}function ie(u,A){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,q,3,1,"ng-container",52),t.YNc(2,ee,3,2,"ng-container",52),t.qZA()),2&u){const s=A.$implicit,p=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!p.editHotspot.guid||!s.guid||s.guid!==p.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",p.editHotspot.guid&&s.guid&&s.guid===p.editHotspot.guid)}}function pe(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function se(u,A){if(1&u&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&u){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.targetPitch||"N/A"," ")}}function Jt(u,A){if(1&u){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",62),t.NdJ("ngModelChange",function(a){t.CHM(s);const l=t.oxw().$implicit;return t.KtG(l.targetPitch=a)}),t.qZA()(),t.BQk()}if(2&u){const s=t.oxw().$implicit,p=t.oxw(2);t.xp6(2),t.Q6J("disabled",p.editdisabled)("ngModel",s.targetPitch)}}function fe(u,A){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,se,3,1,"ng-container",52),t.YNc(2,Jt,3,2,"ng-container",52),t.qZA()),2&u){const s=A.$implicit,p=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!p.editHotspot.guid||!s.guid||s.guid!==p.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",p.editHotspot.guid&&s.guid&&s.guid===p.editHotspot.guid)}}function At(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function ce(u,A){if(1&u&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&u){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.text||"N/A"," ")}}function ue(u,A){if(1&u){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",63),t.NdJ("ngModelChange",function(a){t.CHM(s);const l=t.oxw().$implicit;return t.KtG(l.text=a)}),t.qZA()(),t.BQk()}if(2&u){const s=t.oxw().$implicit,p=t.oxw(2);t.xp6(2),t.Q6J("disabled",p.editdisabled)("ngModel",s.text)}}function Qt(u,A){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,ce,3,1,"ng-container",52),t.YNc(2,ue,3,2,"ng-container",52),t.qZA()),2&u){const s=A.$implicit,p=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!p.editHotspot.guid||!s.guid||s.guid!==p.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",p.editHotspot.guid&&s.guid&&s.guid===p.editHotspot.guid)}}function $t(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function qt(u,A){if(1&u&&(t.ynx(0),t.TgZ(1,"p",64),t._uU(2),t.qZA(),t.BQk()),2&u){const s=t.oxw().$implicit;t.xp6(2),t.hij("",s.url||"N/A"," ")}}function _(u,A){if(1&u){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",65),t.NdJ("ngModelChange",function(a){t.CHM(s);const l=t.oxw().$implicit;return t.KtG(l.url=a)}),t.qZA()(),t.BQk()}if(2&u){const s=t.oxw().$implicit,p=t.oxw(2);t.xp6(2),t.Q6J("disabled",p.editdisabled)("ngModel",s.url)}}function x(u,A){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,qt,3,1,"ng-container",52),t.YNc(2,_,3,2,"ng-container",52),t.qZA()),2&u){const s=A.$implicit,p=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!p.editHotspot.guid||!s.guid||s.guid!==p.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",p.editHotspot.guid&&s.guid&&s.guid===p.editHotspot.guid)}}function f(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function P(u,A){if(1&u){const s=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",67),t.NdJ("click",function(){t.CHM(s);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.editROw(a))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",67),t.NdJ("click",function(){t.CHM(s);const a=t.oxw().$implicit,l=t.oxw(2);return t.KtG(l.removeROw(a))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function R(u,A){if(1&u){const s=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(s);const a=t.oxw(4);return t.KtG(a.updateEdit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&u){const s=t.oxw(4);t.Q6J("disabled",s.editdisabled||!s.editHotspot.text||0==s.editHotspot.text.length),t.xp6(1),t.Oqu(t.lcZ(2,2,"ACTION.Update"))}}function k(u,A){if(1&u){const s=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(s);const a=t.oxw(4);return t.KtG(a.onActionPannellumClickLastPoint())}),t._uU(1,"\u0646\u0642\u0637\u0647"),t.qZA()}if(2&u){const s=t.oxw(4);t.Q6J("disabled",s.editdisabled)}}function b(u,A){if(1&u){const s=t.EpF();t.ynx(0),t.YNc(1,R,3,4,"button",68),t.TgZ(2,"button",69),t.NdJ("click",function(){t.CHM(s);const a=t.oxw(3);return t.KtG(a.cancelEdit())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,k,2,1,"button",70),t.BQk()}if(2&u){const s=t.oxw(3);t.xp6(1),t.Q6J("ngIf",s.postionView),t.xp6(1),t.Q6J("disabled",s.editdisabled),t.xp6(1),t.Oqu(t.lcZ(4,4,"ACTION.CANCEL")),t.xp6(2),t.Q6J("ngIf",s.editHotspot.pitch!==(null==s.postionView?null:s.postionView.clickGetPitch)&&s.editHotspot.yaw!==(null==s.postionView?null:s.postionView.clickGetYaw))}}function F(u,A){if(1&u&&(t.TgZ(0,"mat-cell")(1,"span",66),t.YNc(2,P,5,0,"ng-container",52),t.YNc(3,b,6,6,"ng-container",52),t.qZA()()),2&u){const s=A.$implicit,p=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!p.editHotspot.guid||!s.guid||s.guid!==p.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",p.editHotspot.guid&&s.guid&&s.guid===p.editHotspot.guid)}}function N(u,A){1&u&&t._UZ(0,"mat-header-row")}function W(u,A){1&u&&t._UZ(0,"mat-row")}function j(u,A){if(1&u){const s=t.EpF();t.TgZ(0,"mat-icon",48),t.NdJ("click",function(){t.CHM(s);const a=t.oxw(2);return t.KtG(a.dataDetailModel.configDataJson="")}),t._uU(1,"close"),t.qZA()}}function K(u,A){if(1&u){const s=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",9,10),t.NdJ("ngModelChange",function(a){t.CHM(s);const l=t.oxw();return t.KtG(l.dataDetailModel.title=a)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,ht,2,0,"mat-icon",11),t.TgZ(10,"mat-icon",12),t._uU(11,"mode_edit"),t.qZA()(),t.TgZ(12,"mat-form-field",8)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",13,14),t.NdJ("ngModelChange",function(a){t.CHM(s);const l=t.oxw();return t.KtG(l.dataDetailModel.description=a)}),t.ALo(18,"translate"),t.qZA(),t.YNc(19,mt,2,0,"mat-icon",11),t.TgZ(20,"mat-icon",12),t._uU(21,"mode_edit"),t.qZA()(),t.TgZ(22,"mat-form-field",15)(23,"input",16,17),t.NdJ("ngModelChange",function(a){t.CHM(s);const l=t.oxw();return t.KtG(l.dataDetailModel.linkFileId=a)})("click",function(){t.CHM(s);const a=t.oxw();return t.KtG(a.fileManagerOpenFormReport=!0)}),t.ALo(25,"translate"),t.qZA(),t.YNc(26,w,2,0,"mat-icon",18),t.TgZ(27,"mat-icon",19),t.NdJ("click",function(){t.CHM(s);const a=t.oxw();return t.KtG(a.fileManagerOpenFormReport=!0)}),t._uU(28,"mode_edit"),t.qZA()(),t.TgZ(29,"cms-file-manager",20),t.NdJ("itemSelected",function(a){t.CHM(s);const l=t.oxw();return t.KtG(l.onActionFileSelect(a))})("openFormChange",function(a){t.CHM(s);const l=t.oxw();return t.KtG(l.fileManagerOpenFormReport=a)}),t.qZA(),t.TgZ(30,"a",21),t.ALo(31,"cmsthumbnail"),t.YNc(32,Q,2,3,"img",22),t.qZA(),t._UZ(33,"hr"),t.YNc(34,at,19,4,"table",23),t._UZ(35,"hr"),t.TgZ(36,"h5"),t._uU(37,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a "),t.qZA(),t.TgZ(38,"p"),t._uU(39,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(40,"div",24)(41,"div",25),t.YNc(42,ft,3,3,"button",26),t.qZA(),t.TgZ(43,"mat-table",27,28),t.ynx(45,29),t.YNc(46,$,2,0,"mat-header-cell",30),t.YNc(47,Xt,3,2,"mat-cell",31),t.BQk(),t.ynx(48,32),t.YNc(49,te,2,0,"mat-header-cell",30),t.YNc(50,de,3,2,"mat-cell",31),t.BQk(),t.ynx(51,33),t.YNc(52,ne,2,0,"mat-header-cell",30),t.YNc(53,Pt,3,2,"mat-cell",31),t.BQk(),t.ynx(54,34),t.YNc(55,Dt,2,0,"mat-header-cell",30),t.YNc(56,D,3,2,"mat-cell",31),t.BQk(),t.ynx(57,35),t.YNc(58,le,2,0,"mat-header-cell",30),t.YNc(59,ie,3,2,"mat-cell",31),t.BQk(),t.ynx(60,36),t.YNc(61,pe,2,0,"mat-header-cell",30),t.YNc(62,fe,3,2,"mat-cell",31),t.BQk(),t.ynx(63,37),t.YNc(64,At,2,0,"mat-header-cell",30),t.YNc(65,Qt,3,2,"mat-cell",31),t.BQk(),t.ynx(66,38),t.YNc(67,$t,2,0,"mat-header-cell",30),t.YNc(68,x,3,2,"mat-cell",31),t.BQk(),t.ynx(69,39),t.YNc(70,f,2,0,"mat-header-cell",30),t.YNc(71,F,4,2,"mat-cell",31),t.BQk(),t.YNc(72,N,1,0,"mat-header-row",40),t.YNc(73,W,1,0,"mat-row",41),t.qZA()(),t.TgZ(74,"mat-form-field",42)(75,"mat-label"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"input",43,14),t.NdJ("ngModelChange",function(a){t.CHM(s);const l=t.oxw();return t.KtG(l.dataDetailModel.configDataJson=a)}),t.ALo(80,"translate"),t.qZA(),t.YNc(81,j,2,0,"mat-icon",11),t.TgZ(82,"mat-icon",12),t._uU(83,"mode_edit"),t.qZA()(),t.TgZ(84,"div",25)(85,"button",44),t.NdJ("click",function(){t.CHM(s);const a=t.oxw();return t.KtG(a.onActionSubmitView360())}),t._UZ(86,"i",45),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.TgZ(89,"button",46),t.NdJ("click",function(){t.CHM(s);const a=t.oxw();return t.KtG(a.onActionCancellView360())}),t._UZ(90,"i",47),t._uU(91),t.ALo(92,"translate"),t.qZA()(),t._UZ(93,"br"),t.qZA()()}if(2&u){const s=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,33,"TITLE.Photography_Place")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,35,"TITLE.Photography_Place")),t.Q6J("ngModel",s.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",s.dataDetailModel.title),t.xp6(5),t.Oqu(t.lcZ(15,37,"TITLE.DESCRIPTION")),t.xp6(2),t.s9C("placeholder",t.lcZ(18,39,"TITLE.DESCRIPTION")),t.Q6J("ngModel",s.dataDetailModel.description),t.xp6(3),t.Q6J("ngIf",s.dataDetailModel.description),t.xp6(4),t.s9C("placeholder",t.lcZ(25,41,"TITLE.View_360_File_ID")),t.Q6J("ngModel",s.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",s.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",s.appLanguage)("isPopup",!0)("openForm",s.fileManagerOpenFormReport)("tree",s.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",s.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(31,43,s.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==s.dataDetailModel||null==s.dataDetailModel.panorama?null:s.dataDetailModel.panorama.length)>0),t.xp6(2),t.Q6J("ngIf",s.postionView),t.xp6(8),t.Q6J("ngIf",s.postionView),t.xp6(1),t.Q6J("dataSource",s.tableHotSpotdataSource),t.xp6(29),t.Q6J("matHeaderRowDef",s.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",s.tableHotspotDisplayedColumns),t.xp6(3),t.Oqu(t.lcZ(77,45,"TITLE.configDataJson")),t.xp6(2),t.s9C("placeholder",t.lcZ(80,47,"TITLE.configDataJson")),t.Q6J("ngModel",s.dataDetailModel.configDataJson),t.xp6(3),t.Q6J("ngIf",s.dataDetailModel.configDataJson),t.xp6(6),t.hij(" ",t.lcZ(88,49,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(92,51,"ACTION.CANCEL")," ")}}function ut(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function Kt(u,A){if(1&u&&t._UZ(0,"img",50),2&u){const s=t.oxw(2).$implicit;t.s9C("src",s.panorama,t.LSH)}}function Vt(u,A){if(1&u&&(t.ynx(0),t.TgZ(1,"a",21),t.YNc(2,Kt,1,1,"img",22),t.qZA(),t.BQk()),2&u){const s=t.oxw().$implicit;t.xp6(1),t.s9C("href",s.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==s||null==s.panorama?null:s.panorama.length)>0)}}function _t(u,A){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,Vt,3,2,"ng-container",52),t.qZA()),2&u){const s=A.$implicit;t.xp6(1),t.Q6J("ngIf",s.panorama)}}function st(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function vt(u,A){if(1&u&&(t.ynx(0),t._uU(1),t.BQk()),2&u){const s=t.oxw().$implicit;t.xp6(1),t.hij(" ",s.title," ")}}function wt(u,A){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,vt,2,1,"ng-container",52),t.qZA()),2&u){const s=A.$implicit;t.xp6(1),t.Q6J("ngIf",s.title)}}function Tt(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.DESCRIPTION")," "))}function Ut(u,A){if(1&u&&(t.ynx(0),t._uU(1),t.BQk()),2&u){const s=t.oxw().$implicit;t.xp6(1),t.hij(" ",s.description," ")}}function ot(u,A){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,Ut,2,1,"ng-container",52),t.qZA()),2&u){const s=A.$implicit;t.xp6(1),t.Q6J("ngIf",s.description)}}function C(u,A){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&u&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function yt(u,A){if(1&u){const s=t.EpF();t.TgZ(0,"mat-cell",79)(1,"small")(2,"mat-icon",80),t.NdJ("click",function(){const l=t.CHM(s).renderIndex,r=t.oxw(2);return t.KtG(r.onActionOptionEditView360(l))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",81),t.NdJ("click",function(){const l=t.CHM(s).renderIndex,r=t.oxw(2);return t.KtG(r.onActionOptionRemoveView360(l))}),t._uU(7,"delete"),t.qZA()()()}}function St(u,A){1&u&&t._UZ(0,"mat-header-row")}function xt(u,A){1&u&&t._UZ(0,"mat-row")}function Yt(u,A){if(1&u&&(t.TgZ(0,"div",6)(1,"mat-table",73),t.ynx(2,74),t.YNc(3,ut,3,3,"mat-header-cell",30),t.YNc(4,_t,2,1,"mat-cell",31),t.BQk(),t.ynx(5,75),t.YNc(6,st,3,3,"mat-header-cell",30),t.YNc(7,wt,2,1,"mat-cell",31),t.BQk(),t.ynx(8,76),t.YNc(9,Tt,3,3,"mat-header-cell",30),t.YNc(10,ot,2,1,"mat-cell",31),t.BQk(),t.ynx(11,39),t.YNc(12,C,4,6,"mat-header-cell",30),t.YNc(13,yt,8,0,"mat-cell",77),t.BQk(),t.YNc(14,St,1,0,"mat-header-row",78),t.YNc(15,xt,1,0,"mat-row",41),t.qZA()()),2&u){const s=t.oxw();t.xp6(1),t.Q6J("dataSource",s.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",s.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",s.tabledisplayedColumns)}}class Ht{constructor(){(0,y.Z)(this,"viewerGetYaw",void 0),(0,y.Z)(this,"viewerGetPitch",void 0),(0,y.Z)(this,"clickGetYaw",void 0),(0,y.Z)(this,"clickGetPitch",void 0)}}let Gt=(()=>{var u;class A{constructor(p,a,l){(0,y.Z)(this,"cmsToastrService",void 0),(0,y.Z)(this,"publicHelper",void 0),(0,y.Z)(this,"translate",void 0),(0,y.Z)(this,"id",++A.nextId),(0,y.Z)(this,"privateDataModel",[]),(0,y.Z)(this,"dataDetailModel",new H.zK_),(0,y.Z)(this,"dataModelChange",new t.vpe),(0,y.Z)(this,"formInfo",new H.LEF),(0,y.Z)(this,"loading",new gt.O),(0,y.Z)(this,"loadingOption",new gt.O),(0,y.Z)(this,"tabledataSource",new v.by),(0,y.Z)(this,"tableHotSpotdataSource",new v.by),(0,y.Z)(this,"tabledisplayedColumns",["panorama","Title","Description","Action"]),(0,y.Z)(this,"tableHotspotDisplayedColumns",["type","text","url","pitch","yaw","Action"]),(0,y.Z)(this,"selectFileTypeReport",["jpeg","jpg"]),(0,y.Z)(this,"fileManagerTree",void 0),(0,y.Z)(this,"appLanguage","fa"),(0,y.Z)(this,"showAddView360",!1),(0,y.Z)(this,"fileManagerOpenFormReport",!1),(0,y.Z)(this,"container",void 0),(0,y.Z)(this,"viewer",void 0),(0,y.Z)(this,"options",void 0),(0,y.Z)(this,"postionView",void 0),(0,y.Z)(this,"inAddhotspotGuid",""),(0,y.Z)(this,"selectIndex",-1),(0,y.Z)(this,"editHotspot",void 0),(0,y.Z)(this,"oldHotspot",void 0),(0,y.Z)(this,"editdisabled",void 0),this.cmsToastrService=p,this.publicHelper=a,this.translate=l,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}set dataModel(p){p||(p=[]),this.privateDataModel=p,this.privateDataModel.forEach(a=>{a.hotSpots||(a.hotSpots=[]),a.hotSpots=this.uniqByReduce(a.hotSpots),a.hotSpots.forEach(l=>{l.guid=this.getGuid()})}),this.tabledataSource.data=this.privateDataModel,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}uniqByReduce(p){const a=[];return p.forEach(l=>{!a.includes(l)&&0==a.filter(r=>r.pitch==l.pitch&&r.yaw==l.yaw).length&&a.push(l)}),a}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Edit")}ngAfterViewInit(){this.container.nativeElement.style.display="none"}getGuid(){return Math.floor(1e3*Math.random())+""}actionPannellumImageLoad(p,a){const l={type:"equirectangular",panorama:p,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};a&&a.length>0&&(l.hotSpots=a);const r=Object.assign({},l,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,r),this.container.nativeElement.style.display="block"}actionPrivateDataModelOptimaze(){const p=[];this.privateDataModel||(this.privateDataModel=[]),this.privateDataModel.forEach(a=>{a.hotSpots||(a.hotSpots=[]),a.hotSpots.forEach(l=>{l.type&&l.type.length>0&&p.push(l)}),a.hotSpots=this.uniqByReduce(p)})}onActionPannellumClick(p){if(!this.viewer)return;this.postionView=new Ht,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const a=this.viewer.mouseEventToCoords(p);!a||0==a.length||(this.postionView.clickGetYaw=a[1],this.postionView.clickGetPitch=a[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(p){p&&p.id&&0!==p.id?(this.dataDetailModel.linkFileId=p.id,this.dataDetailModel.panorama=p.downloadLinksrc,this.dataDetailModel.preview=p.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.privateDataModel||(this.privateDataModel=[]),this.selectIndex>=0?this.privateDataModel[this.selectIndex]=this.dataDetailModel:this.privateDataModel.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new H.zK_,this.showAddView360=!this.showAddView360}onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new H.zK_),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new H.aCC;const p=new H.aCC;p.type="info",p.guid=this.getGuid(),this.inAddhotspotGuid=p.guid,this.dataDetailModel.hotSpots.push(p),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(p),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(p){p<0||!this.privateDataModel||0===this.privateDataModel.length||(this.privateDataModel.splice(p,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}onActionOptionEditView360(p){p<0||!this.privateDataModel||0===this.privateDataModel.length||(this.dataDetailModel=this.privateDataModel[p],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new H.aCC,this.editHotspot=new H.aCC,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=p,this.showAddView360=!this.showAddView360)}newROw(p){this.editHotspot=p&&p.guid?p:new H.aCC,this.oldHotspot={...this.editHotspot}}editROw(p){this.editHotspot=p&&p.guid?p:new H.aCC,this.oldHotspot={...this.editHotspot},this.inAddhotspotGuid=""}removeROw(p){const a=this.dataDetailModel.hotSpots.findIndex(l=>l.guid==p.guid);a>=0&&(this.dataDetailModel.hotSpots.splice(a,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;const p=this.dataDetailModel.hotSpots.findIndex(a=>a.guid==this.oldHotspot.guid);p>=0&&(this.dataDetailModel.hotSpots[p]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new H.aCC,this.editHotspot=new H.aCC}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(p=>p.guid!=this.inAddhotspotGuid)),this.editHotspot=new H.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}}return u=A,(0,y.Z)(A,"nextId",0),(0,y.Z)(A,"\u0275fac",function(p){return new(p||u)(t.Y36(J.e),t.Y36(g.i),t.Y36(i.sK))}),(0,y.Z)(A,"\u0275cmp",t.Xpm({type:u,selectors:[["app-cms-360-image-list"]],viewQuery:function(p,a){if(1&p&&t.Gf(Mt,5),2&p){let l;t.iGM(l=t.CRH())&&(a.container=l.first)}},inputs:{dataModel:"dataModel"},outputs:{dataModelChange:"dataModelChange"},decls:6,vars:5,consts:[["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px 0px;",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],["type","button","mat-button","",1,"btn","btn-primary","font-size-h6","px-3","py-2",2,"margin","10px 0px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"ntk-full-width","mb-1"],["matInput","","name","dataDetailModel.title","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["matInput","","name","dataDetailModel.description","type","text","minlength","3","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Description",""],[1,"ntk-full-width"],["matInput","","name","dataDetailModel.linkFileId","type","text",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","sceneId"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","type"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"ntk-full-width","mb-1",2,"visibility","hidden"],["matInput","","name","dataDetailModel.configDataJson","type","text","minlength","0","maxlength","10000","required","",3,"ngModel","placeholder","ngModelChange"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],[4,"ngIf"],[1,"text-truncate"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647","name","sceneId",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","placeholder","pitch","name","pitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr-center"],["matInput","","type","number","placeholder","yaw","name","yaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","type",3,"disabled","ngModel","ngModelChange"],[3,"value"],["matInput","","placeholder","targetYaw","name","targetYaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetPitch","name","targetPitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","text","name","text",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","mat-raised-button","","color","accent","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","accent",1,"mb-2",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","Description"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(p,a){1&p&&(t.YNc(0,Ct,3,3,"button",0),t.TgZ(1,"div",1,2),t.NdJ("click",function(r){return a.onActionPannellumClick(r)}),t.qZA(),t.YNc(3,K,94,53,"div",3),t._UZ(4,"app-progress-spinner",4),t.YNc(5,Yt,16,3,"div",3)),2&p&&(t.Q6J("ngIf",!a.showAddView360),t.xp6(1),t.Q6J("id",a.id),t.xp6(2),t.Q6J("ngIf",a.showAddView360),t.xp6(1),t.Q6J("options",a.loadingOption),t.xp6(1),t.Q6J("ngIf",!a.showAddView360))},dependencies:[lt.O5,X.Fj,X.wV,X.JJ,X.Q7,X.wO,X.nD,X.On,U.ey,S.lW,ct.KE,ct.hX,ct.R9,rt.Hw,Et.Nt,oe.gD,Ot.YE,v.BZ,v.fO,v.as,v.w1,v.Dz,v.nj,v.ge,v.ev,v.XQ,v.Gk,M.gM,it.HG,B.O,i.X$,Nt.v],encapsulation:2})),A})()},24014:(dt,I,h)=>{"use strict";h.d(I,{g:()=>p});var y=h(86889),t=h(64537),v=h(80418),H=(h(7226),h(32647),h(34511)),gt=h(60656),J=h(32607),g=h(94032),i=h(56707),lt=h(88692),X=h(20092),U=h(1379),S=h(9638),ct=h(88659),rt=h(83331),Et=h(39665),oe=h(18033),Ot=h(56558),M=h(2940),it=h(99482),B=h(75738),Nt=h(81418);const Mt=["container"];function Ct(a,l){if(1&a){const r=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(r);const m=t.oxw();return t.KtG(m.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function ht(a,l){if(1&a){const r=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(r);const m=t.oxw();return t.KtG(m.onActionImportFile360View())}),t._uU(1," \u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u06a9\u0633 \u0647\u0627\u06cc 360\n"),t.qZA()}}function mt(a,l){if(1&a){const r=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(r);const m=t.oxw();return t.KtG(m.actionPannellumTourLoad())}),t._uU(1," \u0646\u0645\u0627\u06cc\u0634 \u062a\u0648\u0631\n"),t.qZA()}}function w(a,l){if(1&a){const r=t.EpF();t.TgZ(0,"mat-icon",46),t.NdJ("click",function(){t.CHM(r);const m=t.oxw(2);return t.KtG(m.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function Q(a,l){if(1&a){const r=t.EpF();t.TgZ(0,"mat-icon",47),t.NdJ("click",function(){t.CHM(r);const m=t.oxw(2);return t.KtG(m.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function at(a,l){if(1&a&&(t._UZ(0,"img",48),t.ALo(1,"cmsthumbnail")),2&a){const r=t.oxw(2);t.s9C("src",t.lcZ(1,1,r.dataDetailModel.panorama),t.LSH)}}function ft(a,l){if(1&a&&(t.TgZ(0,"table",49)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&a){const r=t.oxw(2);t.xp6(12),t.Oqu(r.postionView.viewerGetYaw),t.xp6(2),t.Oqu(r.postionView.viewerGetPitch),t.xp6(2),t.Oqu(r.postionView.clickGetYaw),t.xp6(2),t.Oqu(r.postionView.clickGetPitch)}}function $(a,l){if(1&a){const r=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(r);const m=t.oxw(2);return t.KtG(m.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function Bt(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function ae(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&a){const r=t.oxw().$implicit;t.xp6(2),t.Oqu(r.type)}}function Xt(a,l){if(1&a){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"mat-select",53),t.NdJ("ngModelChange",function(m){t.CHM(r);const T=t.oxw().$implicit;return t.KtG(T.type=m)}),t.TgZ(3,"mat-option",54),t._uU(4,"\u0635\u062d\u0646\u0647"),t.qZA(),t.TgZ(5,"mat-option",54),t._uU(6,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&a){const r=t.oxw().$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("disabled",c.editdisabled)("ngModel",r.type),t.xp6(1),t.Q6J("value","scene"),t.xp6(2),t.Q6J("value","info")}}function te(a,l){if(1&a&&(t.TgZ(0,"mat-cell"),t.YNc(1,ae,3,1,"ng-container",50),t.YNc(2,Xt,7,4,"ng-container",50),t.qZA()),2&a){const r=l.$implicit,c=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!c.editHotspot.guid||!r.guid||r.guid!==c.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",c.editHotspot.guid&&r.guid&&r.guid===c.editHotspot.guid)}}function _e(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function bt(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&a){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.sceneId||"N/A"," ")}}function de(a,l){if(1&a){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",56),t.NdJ("ngModelChange",function(m){t.CHM(r);const T=t.oxw().$implicit;return t.KtG(T.sceneId=m)}),t.qZA()(),t.BQk()}if(2&a){const r=t.oxw().$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("disabled",c.editdisabled)("ngModel",r.sceneId)}}function ne(a,l){if(1&a&&(t.TgZ(0,"mat-cell"),t.YNc(1,bt,3,1,"ng-container",50),t.YNc(2,de,3,2,"ng-container",50),t.qZA()),2&a){const r=l.$implicit,c=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!c.editHotspot.guid||!r.guid||r.guid!==c.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",c.editHotspot.guid&&r.guid&&r.guid===c.editHotspot.guid&&"scene"===r.type)}}function tt(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function Ft(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&a){const r=t.oxw().$implicit;t.xp6(2),t.Oqu(r.sceneId)}}function Pt(a,l){if(1&a&&(t.TgZ(0,"mat-option",54),t._uU(1),t.qZA()),2&a){const r=l.$implicit;t.Q6J("value",r.linkFileId),t.xp6(1),t.Oqu(r.title)}}function Dt(a,l){if(1&a){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"mat-select",57),t.NdJ("ngModelChange",function(m){t.CHM(r);const T=t.oxw().$implicit;return t.KtG(T.sceneId=m)}),t.YNc(3,Pt,2,2,"mat-option",58),t.qZA()(),t.BQk()}if(2&a){const r=t.oxw().$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("disabled",c.editdisabled)("ngModel",r.sceneId),t.xp6(1),t.Q6J("ngForOf",c.scenesList)}}function re(a,l){if(1&a&&(t.TgZ(0,"mat-cell"),t.YNc(1,Ft,3,1,"ng-container",50),t.YNc(2,Dt,4,3,"ng-container",50),t.qZA()),2&a){const r=l.$implicit,c=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!c.editHotspot.guid||!r.guid||r.guid!==c.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",c.editHotspot.guid&&r.guid&&r.guid===c.editHotspot.guid&&"scene"===r.type)}}function me(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function D(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&a){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.pitch||"N/A"," ")}}function le(a,l){if(1&a){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",59),t.NdJ("ngModelChange",function(m){t.CHM(r);const T=t.oxw().$implicit;return t.KtG(T.pitch=m)}),t.qZA()(),t.BQk()}if(2&a){const r=t.oxw().$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("disabled",c.editdisabled)("ngModel",r.pitch)}}function q(a,l){if(1&a&&(t.TgZ(0,"mat-cell"),t.YNc(1,D,3,1,"ng-container",50),t.YNc(2,le,3,2,"ng-container",50),t.qZA()),2&a){const r=l.$implicit,c=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!c.editHotspot.guid||!r.guid||r.guid!==c.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",c.editHotspot.guid&&r.guid&&r.guid===c.editHotspot.guid)}}function ee(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function ie(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&a){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.yaw||"N/A"," ")}}function pe(a,l){if(1&a){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",60),t.NdJ("ngModelChange",function(m){t.CHM(r);const T=t.oxw().$implicit;return t.KtG(T.yaw=m)}),t.qZA()(),t.BQk()}if(2&a){const r=t.oxw().$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("disabled",c.editdisabled)("ngModel",r.yaw)}}function se(a,l){if(1&a&&(t.TgZ(0,"mat-cell"),t.YNc(1,ie,3,1,"ng-container",50),t.YNc(2,pe,3,2,"ng-container",50),t.qZA()),2&a){const r=l.$implicit,c=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!c.editHotspot.guid||!r.guid||r.guid!==c.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",c.editHotspot.guid&&r.guid&&r.guid===c.editHotspot.guid)}}function Jt(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function fe(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&a){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.targetYaw||"N/A"," ")}}function At(a,l){if(1&a){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",61),t.NdJ("ngModelChange",function(m){t.CHM(r);const T=t.oxw().$implicit;return t.KtG(T.targetYaw=m)}),t.qZA()(),t.BQk()}if(2&a){const r=t.oxw().$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("disabled",c.editdisabled)("ngModel",r.targetYaw)}}function ce(a,l){if(1&a&&(t.TgZ(0,"mat-cell"),t.YNc(1,fe,3,1,"ng-container",50),t.YNc(2,At,3,2,"ng-container",50),t.qZA()),2&a){const r=l.$implicit,c=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!c.editHotspot.guid||!r.guid||r.guid!==c.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",c.editHotspot.guid&&r.guid&&r.guid===c.editHotspot.guid)}}function ue(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function Qt(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&a){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.targetPitch||"N/A"," ")}}function $t(a,l){if(1&a){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",62),t.NdJ("ngModelChange",function(m){t.CHM(r);const T=t.oxw().$implicit;return t.KtG(T.targetPitch=m)}),t.qZA()(),t.BQk()}if(2&a){const r=t.oxw().$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("disabled",c.editdisabled)("ngModel",r.targetPitch)}}function qt(a,l){if(1&a&&(t.TgZ(0,"mat-cell"),t.YNc(1,Qt,3,1,"ng-container",50),t.YNc(2,$t,3,2,"ng-container",50),t.qZA()),2&a){const r=l.$implicit,c=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!c.editHotspot.guid||!r.guid||r.guid!==c.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",c.editHotspot.guid&&r.guid&&r.guid===c.editHotspot.guid)}}function _(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function x(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&a){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.text||"N/A"," ")}}function f(a,l){if(1&a){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",63),t.NdJ("ngModelChange",function(m){t.CHM(r);const T=t.oxw().$implicit;return t.KtG(T.text=m)}),t.qZA()(),t.BQk()}if(2&a){const r=t.oxw().$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("disabled",c.editdisabled)("ngModel",r.text)}}function P(a,l){if(1&a&&(t.TgZ(0,"mat-cell"),t.YNc(1,x,3,1,"ng-container",50),t.YNc(2,f,3,2,"ng-container",50),t.qZA()),2&a){const r=l.$implicit,c=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!c.editHotspot.guid||!r.guid||r.guid!==c.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",c.editHotspot.guid&&r.guid&&r.guid===c.editHotspot.guid)}}function R(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function k(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"p",64),t._uU(2),t.qZA(),t.BQk()),2&a){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.url||"N/A"," ")}}function b(a,l){if(1&a){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",65),t.NdJ("ngModelChange",function(m){t.CHM(r);const T=t.oxw().$implicit;return t.KtG(T.url=m)}),t.qZA()(),t.BQk()}if(2&a){const r=t.oxw().$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("disabled",c.editdisabled)("ngModel",r.url)}}function F(a,l){if(1&a&&(t.TgZ(0,"mat-cell"),t.YNc(1,k,3,1,"ng-container",50),t.YNc(2,b,3,2,"ng-container",50),t.qZA()),2&a){const r=l.$implicit,c=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!c.editHotspot.guid||!r.guid||r.guid!==c.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",c.editHotspot.guid&&r.guid&&r.guid===c.editHotspot.guid)}}function N(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function W(a,l){if(1&a){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",67),t.NdJ("click",function(){t.CHM(r);const m=t.oxw().$implicit,T=t.oxw(2);return t.KtG(T.editROw(m))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",67),t.NdJ("click",function(){t.CHM(r);const m=t.oxw().$implicit,T=t.oxw(2);return t.KtG(T.removeROw(m))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function j(a,l){if(1&a){const r=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(r);const m=t.oxw(4);return t.KtG(m.updateEdit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&a){const r=t.oxw(4);t.Q6J("disabled",r.editdisabled||!r.editHotspot.text||0==r.editHotspot.text.length),t.xp6(1),t.Oqu(t.lcZ(2,2,"ACTION.Update"))}}function K(a,l){if(1&a){const r=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(r);const m=t.oxw(4);return t.KtG(m.onActionPannellumClickLastPoint())}),t._uU(1,"\u0646\u0642\u0637\u0647"),t.qZA()}if(2&a){const r=t.oxw(4);t.Q6J("disabled",r.editdisabled)}}function ut(a,l){if(1&a){const r=t.EpF();t.ynx(0),t.YNc(1,j,3,4,"button",68),t.TgZ(2,"button",69),t.NdJ("click",function(){t.CHM(r);const m=t.oxw(3);return t.KtG(m.cancelEdit())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,K,2,1,"button",70),t.BQk()}if(2&a){const r=t.oxw(3);t.xp6(1),t.Q6J("ngIf",r.postionView),t.xp6(1),t.Q6J("disabled",r.editdisabled),t.xp6(1),t.Oqu(t.lcZ(4,4,"ACTION.CANCEL")),t.xp6(2),t.Q6J("ngIf",r.editHotspot.pitch!==(null==r.postionView?null:r.postionView.clickGetPitch)&&r.editHotspot.yaw!==(null==r.postionView?null:r.postionView.clickGetYaw))}}function Kt(a,l){if(1&a&&(t.TgZ(0,"mat-cell")(1,"span",66),t.YNc(2,W,5,0,"ng-container",50),t.YNc(3,ut,6,6,"ng-container",50),t.qZA()()),2&a){const r=l.$implicit,c=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!c.editHotspot.guid||!r.guid||r.guid!==c.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",c.editHotspot.guid&&r.guid&&r.guid===c.editHotspot.guid)}}function Vt(a,l){1&a&&t._UZ(0,"mat-header-row")}function _t(a,l){1&a&&t._UZ(0,"mat-row")}function st(a,l){if(1&a){const r=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"mat-form-field",9)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",10,11),t.NdJ("ngModelChange",function(m){t.CHM(r);const T=t.oxw();return t.KtG(T.dataDetailModel.title=m)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,w,2,0,"mat-icon",12),t.TgZ(10,"mat-icon",13),t._uU(11,"mode_edit"),t.qZA()(),t.TgZ(12,"mat-form-field",14)(13,"input",15,16),t.NdJ("ngModelChange",function(m){t.CHM(r);const T=t.oxw();return t.KtG(T.dataDetailModel.linkFileId=m)})("click",function(){t.CHM(r);const m=t.oxw();return t.KtG(m.fileManagerOpenFormReport=!0)}),t.ALo(15,"translate"),t.qZA(),t.YNc(16,Q,2,0,"mat-icon",17),t.TgZ(17,"mat-icon",18),t.NdJ("click",function(){t.CHM(r);const m=t.oxw();return t.KtG(m.fileManagerOpenFormReport=!0)}),t._uU(18,"mode_edit"),t.qZA()(),t.TgZ(19,"cms-file-manager",19),t.NdJ("itemSelected",function(m){t.CHM(r);const T=t.oxw();return t.KtG(T.onActionFileSelect(m))})("openFormChange",function(m){t.CHM(r);const T=t.oxw();return t.KtG(T.fileManagerOpenFormReport=m)}),t.qZA(),t.TgZ(20,"a",20),t.ALo(21,"cmsthumbnail"),t.YNc(22,at,2,3,"img",21),t.qZA(),t._UZ(23,"hr"),t.YNc(24,ft,19,4,"table",22),t._UZ(25,"hr"),t.TgZ(26,"h5"),t._uU(27,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u062a\u0648\u0631"),t.qZA(),t.TgZ(28,"p"),t._uU(29,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(30,"div",23)(31,"div",24),t.YNc(32,$,3,3,"button",25),t.qZA(),t.TgZ(33,"mat-table",26,27),t.ynx(35,28),t.YNc(36,Bt,2,0,"mat-header-cell",29),t.YNc(37,te,3,2,"mat-cell",30),t.BQk(),t.ynx(38,31),t.YNc(39,_e,2,0,"mat-header-cell",29),t.YNc(40,ne,3,2,"mat-cell",30),t.BQk(),t.ynx(41,32),t.YNc(42,tt,2,0,"mat-header-cell",29),t.YNc(43,re,3,2,"mat-cell",30),t.BQk(),t.ynx(44,33),t.YNc(45,me,2,0,"mat-header-cell",29),t.YNc(46,q,3,2,"mat-cell",30),t.BQk(),t.ynx(47,34),t.YNc(48,ee,2,0,"mat-header-cell",29),t.YNc(49,se,3,2,"mat-cell",30),t.BQk(),t.ynx(50,35),t.YNc(51,Jt,2,0,"mat-header-cell",29),t.YNc(52,ce,3,2,"mat-cell",30),t.BQk(),t.ynx(53,36),t.YNc(54,ue,2,0,"mat-header-cell",29),t.YNc(55,qt,3,2,"mat-cell",30),t.BQk(),t.ynx(56,37),t.YNc(57,_,2,0,"mat-header-cell",29),t.YNc(58,P,3,2,"mat-cell",30),t.BQk(),t.ynx(59,38),t.YNc(60,R,2,0,"mat-header-cell",29),t.YNc(61,F,3,2,"mat-cell",30),t.BQk(),t.ynx(62,39),t.YNc(63,N,2,0,"mat-header-cell",29),t.YNc(64,Kt,4,2,"mat-cell",30),t.BQk(),t.YNc(65,Vt,1,0,"mat-header-row",40),t.YNc(66,_t,1,0,"mat-row",41),t.qZA()(),t.TgZ(67,"div",24)(68,"button",42),t.NdJ("click",function(){t.CHM(r);const m=t.oxw();return t.KtG(m.onActionSubmitView360())}),t._UZ(69,"i",43),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"button",44),t.NdJ("click",function(){t.CHM(r);const m=t.oxw();return t.KtG(m.onActionCancellView360())}),t._UZ(73,"i",45),t._uU(74),t.ALo(75,"translate"),t.qZA()(),t._UZ(76,"br"),t.qZA()()}if(2&a){const r=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,25,"TITLE.Photography_Place")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,27,"TITLE.Photography_Place")),t.Q6J("ngModel",r.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",r.dataDetailModel.title),t.xp6(4),t.s9C("placeholder",t.lcZ(15,29,"TITLE.View_360_File_ID")),t.Q6J("ngModel",r.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",r.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",r.appLanguage)("isPopup",!0)("openForm",r.fileManagerOpenFormReport)("tree",r.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",r.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(21,31,r.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==r.dataDetailModel||null==r.dataDetailModel.panorama?null:r.dataDetailModel.panorama.length)>0),t.xp6(2),t.Q6J("ngIf",r.postionView),t.xp6(8),t.Q6J("ngIf",r.postionView),t.xp6(1),t.Q6J("dataSource",r.tableHotSpotdataSource),t.xp6(32),t.Q6J("matHeaderRowDef",r.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",r.tableHotspotDisplayedColumns),t.xp6(4),t.hij(" ",t.lcZ(71,33,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(75,35,"ACTION.CANCEL")," ")}}function vt(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function wt(a,l){if(1&a&&t._UZ(0,"img",48),2&a){const r=t.oxw(2).$implicit;t.s9C("src",r.panorama,t.LSH)}}function Tt(a,l){if(1&a&&(t.ynx(0),t.TgZ(1,"a",20),t.YNc(2,wt,1,1,"img",21),t.qZA(),t.BQk()),2&a){const r=t.oxw().$implicit;t.xp6(1),t.s9C("href",r.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==r||null==r.panorama?null:r.panorama.length)>0)}}function Ut(a,l){if(1&a&&(t.TgZ(0,"mat-cell"),t.YNc(1,Tt,3,2,"ng-container",50),t.qZA()),2&a){const r=l.$implicit;t.xp6(1),t.Q6J("ngIf",r.panorama)}}function ot(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&a&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function C(a,l){if(1&a&&(t.ynx(0),t._uU(1),t.BQk()),2&a){const r=t.oxw().$implicit;t.xp6(1),t.hij(" ",r.title," ")}}function yt(a,l){if(1&a&&(t.TgZ(0,"mat-cell"),t.YNc(1,C,2,1,"ng-container",50),t.qZA()),2&a){const r=l.$implicit;t.xp6(1),t.Q6J("ngIf",r.title)}}function St(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1," \u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647 "),t.qZA())}function xt(a,l){if(1&a&&(t.TgZ(0,"mat-cell"),t.ynx(1),t._uU(2),t.BQk(),t.qZA()),2&a){const r=l.$implicit;t.xp6(2),t.hij(" ",r.linkFileId," ")}}function Yt(a,l){1&a&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&a&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function Ht(a,l){if(1&a){const r=t.EpF();t.TgZ(0,"mat-cell",79)(1,"small")(2,"mat-icon",80),t.NdJ("click",function(){const T=t.CHM(r).renderIndex,O=t.oxw(2);return t.KtG(O.onActionOptionEditView360(T))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",81),t.NdJ("click",function(){const T=t.CHM(r).renderIndex,O=t.oxw(2);return t.KtG(O.onActionOptionRemoveView360(T))}),t._uU(7,"delete"),t.qZA()()()}}function Gt(a,l){1&a&&t._UZ(0,"mat-header-row")}function u(a,l){1&a&&t._UZ(0,"mat-row")}function A(a,l){if(1&a&&(t.TgZ(0,"div",7)(1,"mat-table",73),t.ynx(2,74),t.YNc(3,vt,3,3,"mat-header-cell",29),t.YNc(4,Ut,2,1,"mat-cell",30),t.BQk(),t.ynx(5,75),t.YNc(6,ot,3,3,"mat-header-cell",29),t.YNc(7,yt,2,1,"mat-cell",30),t.BQk(),t.ynx(8,76),t.YNc(9,St,2,0,"mat-header-cell",29),t.YNc(10,xt,3,1,"mat-cell",30),t.BQk(),t.ynx(11,39),t.YNc(12,Yt,4,6,"mat-header-cell",29),t.YNc(13,Ht,8,0,"mat-cell",77),t.BQk(),t.YNc(14,Gt,1,0,"mat-header-row",78),t.YNc(15,u,1,0,"mat-row",41),t.qZA()()),2&a){const r=t.oxw();t.xp6(1),t.Q6J("dataSource",r.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",r.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.tabledisplayedColumns)}}class s{constructor(){(0,y.Z)(this,"viewerGetYaw",void 0),(0,y.Z)(this,"viewerGetPitch",void 0),(0,y.Z)(this,"clickGetYaw",void 0),(0,y.Z)(this,"clickGetPitch",void 0)}}let p=(()=>{var a;class l{constructor(c,m,T){(0,y.Z)(this,"cmsToastrService",void 0),(0,y.Z)(this,"publicHelper",void 0),(0,y.Z)(this,"translate",void 0),(0,y.Z)(this,"id",++l.nextId),(0,y.Z)(this,"scenesList",[]),(0,y.Z)(this,"dataDetailModel",new H.$lU),(0,y.Z)(this,"privateDataModel",void 0),(0,y.Z)(this,"dataModelChange",new t.vpe),(0,y.Z)(this,"privateDataImageModel",void 0),(0,y.Z)(this,"formInfo",new H.LEF),(0,y.Z)(this,"loading",new gt.O),(0,y.Z)(this,"loadingOption",new gt.O),(0,y.Z)(this,"tabledataSource",new v.by),(0,y.Z)(this,"tableHotSpotdataSource",new v.by),(0,y.Z)(this,"tabledisplayedColumns",["linkFileId","panorama","Title","Action"]),(0,y.Z)(this,"tableHotspotDisplayedColumns",["type","sceneIdSelector","text","url","pitch","yaw","Action"]),(0,y.Z)(this,"selectFileTypeReport",["jpeg","jpg"]),(0,y.Z)(this,"fileManagerTree",void 0),(0,y.Z)(this,"appLanguage","fa"),(0,y.Z)(this,"showAddView360",!1),(0,y.Z)(this,"fileManagerOpenFormReport",!1),(0,y.Z)(this,"container",void 0),(0,y.Z)(this,"viewer",void 0),(0,y.Z)(this,"options",void 0),(0,y.Z)(this,"postionView",void 0),(0,y.Z)(this,"actionPannellumTourLoadClick",!1),(0,y.Z)(this,"inAddhotspotGuid",""),(0,y.Z)(this,"selectIndex",-1),(0,y.Z)(this,"editHotspot",void 0),(0,y.Z)(this,"oldHotspot",void 0),(0,y.Z)(this,"editdisabled",void 0),this.cmsToastrService=c,this.publicHelper=m,this.translate=T,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}getGuid(){return Math.floor(1e3*Math.random())+""}set dataModel(c){c||(c=new H.veq),c.defaultValue||(c.defaultValue=new H.vyA),c.scenes||(c.scenes=new Map),this.scenesList=[],Object.keys(c.scenes).map(m=>{c.scenes[m].guid=this.getGuid(),this.scenesList.push(c.scenes[m])}),this.scenesList.forEach(m=>{m.hotSpots||(m.hotSpots=[]),m.hotSpots.forEach(T=>{T.guid=this.getGuid()})}),this.privateDataModel=c,this.tabledataSource.data=this.scenesList,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}set dataImageModel(c){c||(c=[]),this.privateDataImageModel=c}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Edit")}ngAfterViewInit(){this.container.nativeElement.style.display="none"}uniqByReduce(c){const m=[];return c.forEach(T=>{!m.includes(T)&&0==m.filter(O=>O.pitch==T.pitch&&O.yaw==T.yaw).length&&m.push(T)}),m}actionPannellumImageLoad(c,m){const T={type:"equirectangular",panorama:c,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};m&&m.length>0&&(T.hotSpots=this.uniqByReduce(m));const O=Object.assign({},T,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,O),this.container.nativeElement.style.display="block"}actionPannellumTourLoad(){this.actionPannellumTourLoadClick=!0,this.actionPrivateDataModelOptimaze();const c={};c.default=this.privateDataModel.defaultValue,this.privateDataModel&&this.privateDataModel.scenes&&(c.scenes=this.privateDataModel.scenes);const m=Object.assign({},c,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,m),this.container.nativeElement.style.display="block"}onActionPannellumClick(c){if(!this.viewer)return;if(this.actionPannellumTourLoadClick)return void(this.actionPannellumTourLoadClick=!1);this.postionView=new s,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const m=this.viewer.mouseEventToCoords(c);!m||0==m.length||(this.postionView.clickGetYaw=m[1],this.postionView.clickGetPitch=m[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(c){c&&c.id&&0!==c.id?(this.dataDetailModel.linkFileId=c.id,this.dataDetailModel.panorama=c.downloadLinksrc,this.dataDetailModel.preview=c.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.scenesList||(this.scenesList=[]),this.selectIndex>=0?this.scenesList[this.selectIndex]=this.dataDetailModel:this.scenesList.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}actionPrivateDataModelOptimaze(){this.privateDataModel.defaultValue||(this.privateDataModel.defaultValue=new H.vyA),this.privateDataModel.scenes=new Map,this.scenesList||(this.scenesList=[]),this.scenesList.forEach(c=>{if(c.title&&c.title.length>0){const m=[];c.hotSpots||(c.hotSpots=[]),c.hotSpots.forEach(T=>{T.type&&T.type.length>0&&m.push(T)}),c.hotSpots=this.uniqByReduce(m),this.privateDataModel.scenes[c.linkFileId]=c,this.privateDataModel.scenes[c.linkFileId].hfov=110}}),(!this.privateDataModel.defaultValue.firstScene||0==this.privateDataModel.defaultValue.firstScene.length)&&(this.privateDataModel.scenes&&this.scenesList&&this.scenesList.length>0&&(this.privateDataModel.defaultValue.firstScene=this.scenesList[0].linkFileId+""),this.privateDataModel.defaultValue.sceneFadeDuration=1e3)}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new H.$lU,this.showAddView360=!this.showAddView360,this.tableHotSpotdataSource.data=[]}onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new H.$lU),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new H.aCC;const c=new H.aCC;c.guid=this.getGuid(),this.inAddhotspotGuid=c.guid,this.dataDetailModel.hotSpots.push(c),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(c),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(c){c<0||!this.scenesList||0===this.scenesList.length||(this.scenesList.splice(c,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}onActionOptionEditView360(c){c<0||!this.scenesList||0===this.scenesList.length||(this.dataDetailModel=this.scenesList[c],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new H.aCC,this.editHotspot=new H.aCC,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=c,this.showAddView360=!this.showAddView360)}newROw(c){this.editHotspot=c&&c.guid?c:new H.aCC,this.oldHotspot={...this.editHotspot}}editROw(c){this.editHotspot=c&&c.guid?c:new H.aCC,this.oldHotspot={...this.editHotspot},this.inAddhotspotGuid=""}removeROw(c){const m=this.dataDetailModel.hotSpots.findIndex(T=>T.guid==c.guid);m>=0&&(this.dataDetailModel.hotSpots.splice(m,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;const c=this.dataDetailModel.hotSpots.findIndex(m=>m.guid==this.oldHotspot.guid);c>=0&&(this.dataDetailModel.hotSpots[c]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new H.aCC,this.editHotspot=new H.aCC}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(c=>c.guid!=this.inAddhotspotGuid)),this.editHotspot=new H.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}onActionImportFile360View(){this.privateDataImageModel&&this.privateDataImageModel.length>0&&(this.actionPrivateDataModelOptimaze(),this.privateDataImageModel.forEach(c=>{if(!this.privateDataModel.scenes[c.linkFileId]&&c.linkFileId>0){const m=new H.$lU;m.guid=this.getGuid(),m.linkFileId=c.linkFileId,m.title=c.title,m.hotSpots=this.uniqByReduce(c.hotSpots),m.panorama=c.panorama,m.preview=c.preview,m.hfov=110,this.privateDataModel.scenes[c.linkFileId]=m}}),this.dataModel=this.privateDataModel)}}return a=l,(0,y.Z)(l,"nextId",0),(0,y.Z)(l,"\u0275fac",function(c){return new(c||a)(t.Y36(J.e),t.Y36(g.i),t.Y36(i.sK))}),(0,y.Z)(l,"\u0275cmp",t.Xpm({type:a,selectors:[["app-cms-360-tour-list"]],viewQuery:function(c,m){if(1&c&&t.Gf(Mt,5),2&c){let T;t.iGM(T=t.CRH())&&(m.container=T.first)}},inputs:{dataModel:"dataModel",dataImageModel:"dataImageModel"},outputs:{dataModelChange:"dataModelChange"},decls:8,vars:7,consts:[["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px;",3,"click",4,"ngIf"],["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px ",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],["type","button","mat-button","",1,"btn","btn-primary","font-size-h6","px-3","py-2",2,"margin","10px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"ntk-full-width","mb-1"],["matInput","","name","dataDetailModel.title","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],[1,"ntk-full-width"],["matInput","","name","dataDetailModel.linkFileId","type","text",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","type"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sceneId"],["matColumnDef","sceneIdSelector"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],[4,"ngIf"],[1,"text-truncate","grid-row-ltr-center"],["appearance","outline",2,"width","100%"],["placeholder","Select","name","type",3,"disabled","ngModel","ngModelChange"],[3,"value"],[1,"text-truncate"],["matInput","","placeholder","sceneId","name","sceneId",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","sceneId",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","placeholder","pitch","name","pitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","placeholder","yaw","name","yaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetYaw","name","targetYaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetPitch","name","targetPitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","text","name","text",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","mat-raised-button","","color","accent","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","accent",1,"mb-2",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","linkFileId"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(c,m){1&c&&(t.YNc(0,Ct,3,3,"button",0),t.YNc(1,ht,2,0,"button",1),t.YNc(2,mt,2,0,"button",1),t.TgZ(3,"div",2,3),t.NdJ("click",function(O){return m.onActionPannellumClick(O)}),t.qZA(),t.YNc(5,st,77,37,"div",4),t._UZ(6,"app-progress-spinner",5),t.YNc(7,A,16,3,"div",4)),2&c&&(t.Q6J("ngIf",!m.showAddView360),t.xp6(1),t.Q6J("ngIf",m.privateDataImageModel&&m.privateDataImageModel.length>0),t.xp6(1),t.Q6J("ngIf",m.privateDataModel&&m.privateDataModel&&m.privateDataModel.scenes&&m.scenesList&&m.scenesList.length>0),t.xp6(1),t.Q6J("id",m.id),t.xp6(2),t.Q6J("ngIf",m.showAddView360),t.xp6(1),t.Q6J("options",m.loadingOption),t.xp6(1),t.Q6J("ngIf",!m.showAddView360))},dependencies:[lt.sg,lt.O5,X.Fj,X.wV,X.JJ,X.Q7,X.wO,X.nD,X.On,U.ey,S.lW,ct.KE,ct.hX,ct.R9,rt.Hw,Et.Nt,oe.gD,Ot.YE,v.BZ,v.fO,v.as,v.w1,v.Dz,v.nj,v.ge,v.ev,v.XQ,v.Gk,M.gM,it.HG,B.O,i.X$,Nt.v],encapsulation:2})),l})()},76609:(dt,I,h)=>{"use strict";h.d(I,{D:()=>Mt});var y=h(8239),t=h(86889),v=h(64537),pt=h(20092),e=h(34511),et=h(57445),kt=h(51927),H=h(83151),gt=h(42147),J=h(61528),g=h(27969),i=h(60656),lt=h(56707),X=h(88692),U=h(61637),S=h(1379),ct=h(88659),rt=h(83331),Et=h(39665),oe=h(75738),Ot=h(81418);function M(Ct,ht){if(1&Ct&&(v._UZ(0,"img",9),v.ALo(1,"cmsthumbnail")),2&Ct){const mt=v.oxw().$implicit;v.s9C("src",v.lcZ(1,1,mt.linkImageIdSrc),v.LSH)}}function it(Ct,ht){if(1&Ct&&(v.TgZ(0,"mat-option",7),v.YNc(1,M,2,3,"img",8),v.TgZ(2,"span"),v._uU(3),v.qZA()()),2&Ct){const mt=ht.$implicit,w=v.oxw();v.Q6J("value",mt)("disabled",w.optionDisabled),v.xp6(1),v.Q6J("ngIf",mt.linkImageIdSrc),v.xp6(2),v.Oqu(w.displayOption(mt))}}function B(Ct,ht){if(1&Ct){const mt=v.EpF();v.TgZ(0,"mat-icon",10),v.NdJ("click",function(){v.CHM(mt);const Q=v.oxw();return v.KtG(Q.onActionSelectClear())}),v._uU(1,"close"),v.qZA()}}const Nt=["*"];let Mt=(()=>{var Ct;class ht{constructor(w,Q,at,ft){(0,t.Z)(this,"coreEnumService",void 0),(0,t.Z)(this,"translate",void 0),(0,t.Z)(this,"cdr",void 0),(0,t.Z)(this,"categoryService",void 0),(0,t.Z)(this,"id",++ht.nextId),(0,t.Z)(this,"dataModelResult",new e.y$4),(0,t.Z)(this,"dataModelSelect",new e.Dp$),(0,t.Z)(this,"formControl",new pt.NI),(0,t.Z)(this,"filteredOptions",void 0),(0,t.Z)(this,"optionDisabled",!1),(0,t.Z)(this,"optionSelectFirstItem",!1),(0,t.Z)(this,"optionPlaceholder",""),(0,t.Z)(this,"optionChange",new v.vpe),(0,t.Z)(this,"optionReload",()=>this.onActionReload()),(0,t.Z)(this,"loading",new i.O),this.coreEnumService=w,this.translate=Q,this.cdr=at,this.categoryService=ft,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(w){this.onActionSelectForce(w)}get optionLoading(){return this.loading}set optionLoading(w){this.loading=w}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,kt.O)(""),(0,H.b)(1500),(0,gt.x)(),(0,J.w)(w=>this.DataGetAll("string"==typeof w||"number"==typeof w?w:"")))}displayFn(w){return w&&w.virtual_Parent&&w.virtual_Parent.title.length>0&&w.virtual_Parent.virtual_Parent&&w.virtual_Parent.virtual_Parent.title.length>0&&w.virtual_Parent.virtual_Parent.virtual_Parent&&w.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?w.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+w.virtual_Parent.virtual_Parent.titleML+" > "+w.virtual_Parent.titleML+" > "+w.titleML:w&&w.virtual_Parent&&w.virtual_Parent.title.length>0&&w.virtual_Parent.virtual_Parent&&w.virtual_Parent.virtual_Parent.title.length>0?w.virtual_Parent.virtual_Parent.titleML+" > "+w.virtual_Parent.titleML+" > "+w.titleML:w&&w.virtual_Parent&&w.virtual_Parent.title.length>0?w.virtual_Parent.titleML+" > "+w.titleML:w?w.titleML:void 0}displayOption(w){return w&&w.virtual_Parent&&w.virtual_Parent.title.length>0&&w.virtual_Parent.virtual_Parent&&w.virtual_Parent.virtual_Parent.title.length>0&&w.virtual_Parent.virtual_Parent.virtual_Parent&&w.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?w.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+w.virtual_Parent.virtual_Parent.titleML+" > "+w.virtual_Parent.titleML+" > "+w.titleML:w&&w.virtual_Parent&&w.virtual_Parent.title.length>0&&w.virtual_Parent.virtual_Parent&&w.virtual_Parent.virtual_Parent.title.length>0?w.virtual_Parent.virtual_Parent.titleML+" > "+w.virtual_Parent.titleML+" > "+w.titleML:w&&w.virtual_Parent&&w.virtual_Parent.title.length>0?w.virtual_Parent.titleML+" > "+w.titleML:w?w.titleML:void 0}DataGetAll(w){var Q=this;return(0,y.Z)(function*(){const at=new e.Hay;if(at.rowPerPage=20,at.accessLoad=!0,w&&w.length>0){let $=new e.AO3;$=new e.AO3,$.propertyName="Symbol",$.value=w,$.searchType=e.J6G.Contains,$.clauseType=e.ppe.Or,at.filters.push($),$=new e.AO3,$.propertyName="Title",$.value=w,$.searchType=e.J6G.Contains,$.clauseType=e.ppe.Or,at.filters.push($),w&&"number"==typeof+w&&+w>0&&($=new e.AO3,$.propertyName="Id",$.value=w,$.searchType=e.J6G.Equal,$.clauseType=e.ppe.Or,at.filters.push($))}const ft=Q.constructor.name+"main";return Q.loading.Start(ft),yield(0,et.z)(Q.categoryService.ServiceGetAll(at)).then($=>(Q.dataModelResult=$,Q.optionSelectFirstItem&&(!Q.dataModelSelect||!Q.dataModelSelect.id||Q.dataModelSelect.id<=0)&&Q.dataModelResult.listItems.length>0&&(Q.optionSelectFirstItem=!1,setTimeout(()=>{Q.formControl.setValue(Q.dataModelResult.listItems[0])},1e3),Q.onActionSelect(Q.dataModelResult.listItems[0])),Q.loading.Stop(ft),$.listItems))})()}onActionSelect(w){this.optionDisabled||(this.dataModelSelect=w,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(w){return this.filteredOptions.pipe((0,g.U)(Q=>(Q.find(at=>at.id===w.id)||Q.push(w),Q)))}onActionSelectForce(w){if("number"==typeof w&&w>0){if(this.dataModelSelect&&this.dataModelSelect.id===w)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(Q=>Q.id===w)){const Q=this.dataModelResult.listItems.find(at=>at.id===w);return this.dataModelSelect=Q,void this.formControl.setValue(Q)}this.categoryService.ServiceGetOneIncludeParent(w).subscribe(Q=>{Q.isSuccess&&(this.filteredOptions=this.push(Q.item),this.dataModelSelect=Q.item,this.formControl.setValue(Q.item),this.optionChange.emit(Q.item))})}else{if(typeof w==typeof e.Dp$)return this.filteredOptions=this.push(w),this.dataModelSelect=w,void this.formControl.setValue(w);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new e.Dp$,this.loadOptions()}}return Ct=ht,(0,t.Z)(ht,"nextId",0),(0,t.Z)(ht,"\u0275fac",function(w){return new(w||Ct)(v.Y36(e.FLW),v.Y36(lt.sK),v.Y36(v.sBO),v.Y36(e.XRW))}),(0,t.Z)(ht,"\u0275cmp",v.Xpm({type:Ct,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:Nt,decls:9,vars:10,consts:[[1,"ntk-full-width"],[3,"options"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(w,Q){if(1&w&&(v.F$t(),v.TgZ(0,"mat-form-field",0),v._UZ(1,"app-progress-spinner",1)(2,"input",2),v.TgZ(3,"mat-autocomplete",3,4),v.NdJ("optionSelected",function(ft){return Q.onActionSelect(ft.option.value)}),v.YNc(5,it,4,4,"mat-option",5),v.ALo(6,"async"),v.qZA(),v.YNc(7,B,2,0,"mat-icon",6),v.Hsn(8),v.qZA()),2&w){const at=v.MAs(4);v.xp6(1),v.Q6J("options",Q.loading),v.xp6(1),v.s9C("placeholder",Q.optionPlaceholder),v.Q6J("formControl",Q.formControl)("matAutocomplete",at),v.uIk("disabled",!!Q.optionDisabled||null),v.xp6(1),v.Q6J("displayWith",Q.displayFn),v.xp6(2),v.Q6J("ngForOf",v.lcZ(6,8,Q.filteredOptions)),v.xp6(2),v.Q6J("ngIf",null==Q.dataModelSelect?null:Q.dataModelSelect.id)}},dependencies:[X.sg,X.O5,pt.Fj,pt.JJ,pt.oH,U.XC,S.ey,U.ZL,ct.KE,ct.R9,rt.Hw,Et.Nt,oe.O,X.Ov,Ot.v],encapsulation:2})),ht})()},17407:(dt,I,h)=>{"use strict";h.d(I,{r:()=>H});var y=h(86889),t=h(64537),v=h(64216),e=h(92340),et=h(32607),kt=h(27128);let H=(()=>{var gt;class J{set optonCenter(i){this.map&&i&&i.lat&&i.lon&&0!==i.lat&&0!==i.lon&&this.map.setView(new v.LatLng(i.lat,i.lon),this.zoom)}set optionCurrentPoint(i){this.onActionCurrentPoint(i)}constructor(i){(0,y.Z)(this,"cmsToastrService",void 0),(0,y.Z)(this,"id",++J.nextId),(0,y.Z)(this,"map$",new t.vpe),(0,y.Z)(this,"zoom$",new t.vpe),(0,y.Z)(this,"options",{layers:[(0,v.tileLayer)(e.N.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]}),(0,y.Z)(this,"map",void 0),(0,y.Z)(this,"zoom",void 0),(0,y.Z)(this,"destroy",!1),this.cmsToastrService=i}ngOnInit(){const U=v.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});v.Marker.prototype.options.icon=U}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(i){setTimeout(()=>{this.map&&!this.destroy&&i.invalidateSize()},500),this.map=i,this.map$.emit(i),this.zoom=i.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(i){this.zoom=i.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(i=!0){this.getPosition().then(lt=>{this.map.setView(new v.LatLng(lt.lat,lt.lon),this.zoom)})}getPosition(){return new Promise((i,lt)=>{navigator.geolocation.getCurrentPosition(X=>{i({lon:X.coords.longitude,lat:X.coords.latitude})},X=>{this.cmsToastrService.typeErrorGetPosition()})})}}return gt=J,(0,y.Z)(J,"nextId",0),(0,y.Z)(J,"\u0275fac",function(i){return new(i||gt)(t.Y36(et.e))}),(0,y.Z)(J,"\u0275cmp",t.Xpm({type:gt,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletOptions","leafletMapReady","leafletMapZoomEnd"]],template:function(i,lt){1&i&&(t.TgZ(0,"div",0),t.NdJ("leafletMapReady",function(U){return lt.onMapReady(U)})("leafletMapZoomEnd",function(U){return lt.onMapZoomEnd(U)}),t.qZA()),2&i&&t.Q6J("leafletOptions",lt.options)},dependencies:[kt.je],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})),J})()}}]);