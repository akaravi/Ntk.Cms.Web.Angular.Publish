(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[108],{56239:()=>{window.libpannellum=function(Zt,T,d){"use strict";function w(vt){var v,o,ot,rt,tt,I,Ft,X,A,st,qt,Ct,bt,R,Gt,It,U=T.createElement("canvas");function zt(_,m){return 1==_.level&&1!=m.level?-1:1==m.level&&1!=_.level?1:m.timestamp-_.timestamp}function dt(_,m){return _.level!=m.level?_.level-m.level:_.diff-m.diff}function C(_,m,Y,S,J,p){this.vertices=_,this.side=m,this.level=Y,this.x=S,this.y=J,this.path=p.replace("%s",m).replace("%l",Y).replace("%x",S).replace("%y",J)}function Z(_,m,Y,S,J){if(function k(_,m){var Y=Wt(_,m.slice(0,3)),S=Wt(_,m.slice(3,6)),J=Wt(_,m.slice(6,9)),p=Wt(_,m.slice(9,12)),B=Y[0]+S[0]+J[0]+p[0];if(-4==B||4==B)return!1;var H=Y[1]+S[1]+J[1]+p[1];return-4!=H&&4!=H&&4!=Y[2]+S[2]+J[2]+p[2]}(_,m.vertices)){var p=m.vertices,B=p[0]+p[3]+p[6]+p[9],H=p[1]+p[4]+p[7]+p[10],G=p[2]+p[5]+p[8]+p[11],Q=Math.sqrt(B*B+H*H+G*G),Dt=Math.asin(G/Q),St=Math.atan2(H,B)-S;St+=St>Math.PI?-2*Math.PI:St<-Math.PI?2*Math.PI:0,St=Math.abs(St),m.diff=Math.acos(Math.sin(Y)*Math.sin(Dt)+Math.cos(Y)*Math.cos(Dt)*Math.cos(St));for(var Ht=!1,Nt=0;Nt<v.nodeCache.length;Nt++)if(v.nodeCache[Nt].path==m.path){Ht=!0,v.nodeCache[Nt].timestamp=v.nodeCacheTimestamp++,v.nodeCache[Nt].diff=m.diff,v.currentNodes.push(v.nodeCache[Nt]);break}if(Ht||(m.timestamp=v.nodeCacheTimestamp++,v.currentNodes.push(m),v.nodeCache.push(m)),m.level<v.level){var yt=A.cubeResolution*Math.pow(2,m.level-A.maxLevel),_t=Math.ceil(yt*A.invTileResolution)-1,pt=yt%A.tileResolution*2,ft=2*yt%A.tileResolution;0===ft&&(ft=A.tileResolution),0===pt&&(pt=2*A.tileResolution);var Mt=.5;(m.x==_t||m.y==_t)&&(Mt=1-A.tileResolution/(A.tileResolution+ft));var Ot,ut=1-Mt,at=[],wt=Mt,nt=Mt,ct=Mt,Tt=ut,gt=ut,mt=ut;ft<A.tileResolution&&(m.x==_t&&m.y!=_t?(nt=.5,gt=.5,("d"==m.side||"u"==m.side)&&(ct=.5,mt=.5)):m.x!=_t&&m.y==_t&&(wt=.5,Tt=.5,("l"==m.side||"r"==m.side)&&(ct=.5,mt=.5))),pt<=A.tileResolution&&(m.x==_t&&(wt=0,Tt=1,("l"==m.side||"r"==m.side)&&(ct=0,mt=1)),m.y==_t&&(nt=0,gt=1,("d"==m.side||"u"==m.side)&&(ct=0,mt=1))),Ot=new C([p[0],p[1],p[2],p[0]*wt+p[3]*Tt,p[1]*Mt+p[4]*ut,p[2]*ct+p[5]*mt,p[0]*wt+p[6]*Tt,p[1]*nt+p[7]*gt,p[2]*ct+p[8]*mt,p[0]*Mt+p[9]*ut,p[1]*nt+p[10]*gt,p[2]*ct+p[11]*mt],m.side,m.level+1,2*m.x,2*m.y,A.fullpath),at.push(Ot),m.x==_t&&pt<=A.tileResolution||(Ot=new C([p[0]*wt+p[3]*Tt,p[1]*Mt+p[4]*ut,p[2]*ct+p[5]*mt,p[3],p[4],p[5],p[3]*Mt+p[6]*ut,p[4]*nt+p[7]*gt,p[5]*ct+p[8]*mt,p[0]*wt+p[6]*Tt,p[1]*nt+p[7]*gt,p[2]*ct+p[8]*mt],m.side,m.level+1,2*m.x+1,2*m.y,A.fullpath),at.push(Ot)),!(m.x==_t&&pt<=A.tileResolution)&&!(m.y==_t&&pt<=A.tileResolution)&&(Ot=new C([p[0]*wt+p[6]*Tt,p[1]*nt+p[7]*gt,p[2]*ct+p[8]*mt,p[3]*Mt+p[6]*ut,p[4]*nt+p[7]*gt,p[5]*ct+p[8]*mt,p[6],p[7],p[8],p[9]*wt+p[6]*Tt,p[10]*Mt+p[7]*ut,p[11]*ct+p[8]*mt],m.side,m.level+1,2*m.x+1,2*m.y+1,A.fullpath),at.push(Ot)),m.y==_t&&pt<=A.tileResolution||(Ot=new C([p[0]*Mt+p[9]*ut,p[1]*nt+p[10]*gt,p[2]*ct+p[11]*mt,p[0]*wt+p[6]*Tt,p[1]*nt+p[7]*gt,p[2]*ct+p[8]*mt,p[9]*wt+p[6]*Tt,p[10]*Mt+p[7]*ut,p[11]*ct+p[8]*mt,p[9],p[10],p[11]],m.side,m.level+1,2*m.x,2*m.y+1,A.fullpath),at.push(Ot));for(var P=0;P<at.length;P++)Z(_,at[P],Y,S,J)}}}function $(_,m,Y){var S=Math.sin(m),J=Math.cos(m);return"x"==Y?[_[0],J*_[1]+S*_[2],J*_[2]-S*_[1],_[3],J*_[4]+S*_[5],J*_[5]-S*_[4],_[6],J*_[7]+S*_[8],J*_[8]-S*_[7]]:"y"==Y?[J*_[0]-S*_[2],_[1],J*_[2]+S*_[0],J*_[3]-S*_[5],_[4],J*_[5]+S*_[3],J*_[6]-S*_[8],_[7],J*_[8]+S*_[6]]:"z"==Y?[J*_[0]+S*_[1],J*_[1]-S*_[0],_[2],J*_[3]+S*_[4],J*_[4]-S*_[3],_[5],J*_[6]+S*_[7],J*_[7]-S*_[6],_[8]]:void 0}function Kt(_){return[_[0],_[4],_[8],_[12],_[1],_[5],_[9],_[13],_[2],_[6],_[10],_[14],_[3],_[7],_[11],_[15]]}U.style.width=U.style.height="100%",vt.appendChild(U),this.init=function(_,m,Y,S,J,p,B,H){if(m===d&&(m="equirectangular"),"equirectangular"!=m&&"cubemap"!=m&&"multires"!=m)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(st=m,A=_,qt=Y,It=H||{},v){if(ot&&(o.detachShader(v,ot),o.deleteShader(ot)),rt&&(o.detachShader(v,rt),o.deleteShader(rt)),o.bindBuffer(o.ARRAY_BUFFER,null),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null),v.texture&&o.deleteTexture(v.texture),v.nodeCache)for(var G=0;G<v.nodeCache.length;G++)o.deleteTexture(v.nodeCache[G].texture);o.deleteProgram(v),v=d}X=d;var Q,lt,Dt=!1;if("cubemap"==st)for(Q=0;Q<6;Q++)A[Q].width>0?(lt===d&&(lt=A[Q].width),lt!=A[Q].width&&console.log("Cube faces have inconsistent widths: "+lt+" vs. "+A[Q].width)):Dt=!0;function St(P){if(Dt){var it=P*P*4,Bt=new Uint8ClampedArray(it),W=H.backgroundColor?H.backgroundColor:[0,0,0];W[0]*=255,W[1]*=255,W[2]*=255;for(var q=0;q<it;q++)Bt[q++]=W[0],Bt[q++]=W[1],Bt[q++]=W[2];var O=new ImageData(Bt,P,P);for(Q=0;Q<6;Q++)0==A[Q].width&&(A[Q]=O)}}if("cubemap"==st&&lt&lt-1&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(o||(o=U.getContext("experimental-webgl",{alpha:!1,depth:!1})),o&&1286==o.getError()&&jt()),o||!("multires"==st&&A.hasOwnProperty("fallbackPath")||"cubemap"==st)||!("WebkitAppearance"in T.documentElement.style)&&!navigator.userAgent.match(/Trident.*rv[ :]*11\./)&&-1===navigator.appVersion.indexOf("MSIE 10")){if(!o)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};"cubemap"==st&&St(lt),A.fullpath=A.basePath?A.basePath+A.path:A.path,A.invTileResolution=1/A.tileResolution;var Mt=[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1];for(Ft=[],Q=0;Q<6;Q++)Ft[Q]=Mt.slice(12*Q,12*Q+12),Mt=[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1];var ut=0;if("equirectangular"==st){if(ut=o.getParameter(o.MAX_TEXTURE_SIZE),Math.max(A.width/2,A.height)>ut)throw console.log("Error: The image is too big; it's "+A.width+"px wide, but this device's maximum supported size is "+2*ut+"px."),{type:"webgl size error",width:A.width,maxWidth:2*ut}}else if("cubemap"==st&&lt>o.getParameter(o.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+lt+"px wide, but this device's maximum supported size is "+ut+"px."),{type:"webgl size error",width:lt,maxWidth:ut};H!==d&&(H.horizonPitch!==d||H.horizonRoll!==d)&&(X=[H.horizonPitch==d?0:H.horizonPitch,H.horizonRoll==d?0:H.horizonRoll]);var at=o.TEXTURE_2D;if(o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.getShaderPrecisionFormat){var At=o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT);At&&At.precision<1&&(F=F.replace("highp","mediump"))}ot=o.createShader(o.VERTEX_SHADER);var Ot=t;"multires"==st&&(Ot=f),o.shaderSource(ot,Ot),o.compileShader(ot),rt=o.createShader(o.FRAGMENT_SHADER);var wt=et;"cubemap"==st?(at=o.TEXTURE_CUBE_MAP,wt=e):"multires"==st&&(wt=Ut),o.shaderSource(rt,wt),o.compileShader(rt),v=o.createProgram(),o.attachShader(v,ot),o.attachShader(v,rt),o.linkProgram(v),o.getShaderParameter(ot,o.COMPILE_STATUS)||console.log(o.getShaderInfoLog(ot)),o.getShaderParameter(rt,o.COMPILE_STATUS)||console.log(o.getShaderInfoLog(rt)),o.getProgramParameter(v,o.LINK_STATUS)||console.log(o.getProgramInfoLog(v)),o.useProgram(v),v.drawInProgress=!1;var nt=H.backgroundColor?H.backgroundColor:[0,0,0];if(o.clearColor(nt[0],nt[1],nt[2],1),o.clear(o.COLOR_BUFFER_BIT),v.texCoordLocation=o.getAttribLocation(v,"a_texCoord"),o.enableVertexAttribArray(v.texCoordLocation),"multires"!=st){if(Ct||(Ct=o.createBuffer()),o.bindBuffer(o.ARRAY_BUFFER,Ct),o.bufferData(o.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),o.STATIC_DRAW),o.vertexAttribPointer(v.texCoordLocation,2,o.FLOAT,!1,0,0),v.aspectRatio=o.getUniformLocation(v,"u_aspectRatio"),o.uniform1f(v.aspectRatio,o.drawingBufferWidth/o.drawingBufferHeight),v.psi=o.getUniformLocation(v,"u_psi"),v.theta=o.getUniformLocation(v,"u_theta"),v.f=o.getUniformLocation(v,"u_f"),v.h=o.getUniformLocation(v,"u_h"),v.v=o.getUniformLocation(v,"u_v"),v.vo=o.getUniformLocation(v,"u_vo"),v.rot=o.getUniformLocation(v,"u_rot"),o.uniform1f(v.h,S/(2*Math.PI)),o.uniform1f(v.v,J/Math.PI),o.uniform1f(v.vo,p/Math.PI*2),"equirectangular"==st&&(v.backgroundColor=o.getUniformLocation(v,"u_backgroundColor"),o.uniform4fv(v.backgroundColor,nt.concat([1]))),v.texture=o.createTexture(),o.bindTexture(at,v.texture),"cubemap"==st)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,A[1]),o.texImage2D(o.TEXTURE_CUBE_MAP_NEGATIVE_X,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,A[3]),o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_Y,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,A[4]),o.texImage2D(o.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,A[5]),o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_Z,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,A[0]),o.texImage2D(o.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,A[2]);else if(A.width<=ut)o.uniform1i(o.getUniformLocation(v,"u_splitImage"),0),o.texImage2D(at,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,A);else{o.uniform1i(o.getUniformLocation(v,"u_splitImage"),1);var ct=T.createElement("canvas");ct.width=A.width/2,ct.height=A.height;var Tt=ct.getContext("2d");Tt.drawImage(A,0,0);var gt=Tt.getImageData(0,0,A.width/2,A.height);o.texImage2D(at,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,gt),v.texture2=o.createTexture(),o.activeTexture(o.TEXTURE1),o.bindTexture(at,v.texture2),o.uniform1i(o.getUniformLocation(v,"u_image1"),1),Tt.drawImage(A,-A.width/2,0),gt=Tt.getImageData(0,0,A.width/2,A.height),o.texImage2D(at,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,gt),o.texParameteri(at,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(at,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(at,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(at,o.TEXTURE_MAG_FILTER,o.LINEAR),o.activeTexture(o.TEXTURE0)}o.texParameteri(at,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(at,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(at,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(at,o.TEXTURE_MAG_FILTER,o.LINEAR)}else v.vertPosLocation=o.getAttribLocation(v,"a_vertCoord"),o.enableVertexAttribArray(v.vertPosLocation),bt||(bt=o.createBuffer()),R||(R=o.createBuffer()),Gt||(Gt=o.createBuffer()),o.bindBuffer(o.ARRAY_BUFFER,R),o.bufferData(o.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),o.STATIC_DRAW),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,Gt),o.bufferData(o.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),o.STATIC_DRAW),v.perspUniform=o.getUniformLocation(v,"u_perspMatrix"),v.cubeUniform=o.getUniformLocation(v,"u_cubeMatrix"),v.level=-1,v.currentNodes=[],v.nodeCache=[],v.nodeCacheTimestamp=0;var mt=o.getError();if(0!==mt)throw console.log("Error: Something went wrong with WebGL!",mt),{type:"webgl error"};B()}else{var Ht;I&&vt.removeChild(I),(I=T.createElement("div")).className="pnlm-world",Ht=A.basePath?A.basePath+A.fallbackPath:A.fallbackPath;var Nt=["f","r","b","l","u","d"],yt=0,_t=function(){var P=T.createElement("canvas");P.className="pnlm-face pnlm-"+Nt[this.side]+"face",I.appendChild(P);var it=P.getContext("2d");P.style.width=this.width+4+"px",P.style.height=this.height+4+"px",P.width=this.width+4,P.height=this.height+4,it.drawImage(this,2,2);var q,O,Bt=it.getImageData(0,0,P.width,P.height),W=Bt.data;for(q=2;q<P.width-2;q++)for(O=0;O<4;O++)W[4*(q+P.width)+O]=W[4*(q+2*P.width)+O],W[4*(q+P.width*(P.height-2))+O]=W[4*(q+P.width*(P.height-3))+O];for(q=2;q<P.height-2;q++)for(O=0;O<4;O++)W[4*(q*P.width+1)+O]=W[4*(q*P.width+2)+O],W[4*((q+1)*P.width-2)+O]=W[4*((q+1)*P.width-3)+O];for(O=0;O<4;O++)W[4*(P.width+1)+O]=W[4*(2*P.width+2)+O],W[4*(2*P.width-2)+O]=W[4*(3*P.width-3)+O],W[4*(P.width*(P.height-2)+1)+O]=W[4*(P.width*(P.height-3)+2)+O],W[4*(P.width*(P.height-1)-2)+O]=W[4*(P.width*(P.height-2)-3)+O];for(q=1;q<P.width-1;q++)for(O=0;O<4;O++)W[4*q+O]=W[4*(q+P.width)+O],W[4*(q+P.width*(P.height-1))+O]=W[4*(q+P.width*(P.height-2))+O];for(q=1;q<P.height-1;q++)for(O=0;O<4;O++)W[q*P.width*4+O]=W[4*(q*P.width+1)+O],W[4*((q+1)*P.width-1)+O]=W[4*((q+1)*P.width-2)+O];for(O=0;O<4;O++)W[O]=W[4*(P.width+1)+O],W[4*(P.width-1)+O]=W[4*(2*P.width-2)+O],W[P.width*(P.height-1)*4+O]=W[4*(P.width*(P.height-2)+1)+O],W[4*(P.width*P.height-1)+O]=W[4*(P.width*(P.height-1)-2)+O];it.putImageData(Bt,0,0),pt.call(this)},pt=function(){this.width>0?(tt===d&&(tt=this.width),tt!=this.width&&console.log("Fallback faces have inconsistent widths: "+tt+" vs. "+this.width)):Dt=!0,6==++yt&&(tt=this.width,vt.appendChild(I),B())};for(Dt=!1,Q=0;Q<6;Q++){var ft=new Image;ft.crossOrigin=It.crossOrigin?It.crossOrigin:"anonymous",ft.side=Q,ft.onload=_t,ft.onerror=pt,ft.src="multires"==st?Ht.replace("%s",Nt[Q])+"."+A.extension:A[Q].src}St(tt)}},this.destroy=function(){if(vt!==d&&(U!==d&&vt.contains(U)&&vt.removeChild(U),I!==d&&vt.contains(I)&&vt.removeChild(I)),o){var _=o.getExtension("WEBGL_lose_context");_&&_.loseContext()}},this.resize=function(){var _=Zt.devicePixelRatio||1;U.width=U.clientWidth*_,U.height=U.clientHeight*_,o&&(1286==o.getError()&&jt(),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),"multires"!=st&&o.uniform1f(v.aspectRatio,U.clientWidth/U.clientHeight))},this.resize(),this.setPose=function(_,m){X=[_,m]},this.render=function(_,m,Y,S){var J,p,B,H=0;if(S===d&&(S={}),S.roll&&(H=S.roll),X!==d){var G=X[0],Q=X[1],Dt=_,lt=m,St=Math.cos(Q)*Math.sin(_)*Math.sin(G)+Math.cos(_)*(Math.cos(G)*Math.cos(m)+Math.sin(Q)*Math.sin(G)*Math.sin(m)),Ht=-Math.sin(_)*Math.sin(Q)+Math.cos(_)*Math.cos(Q)*Math.sin(m),Nt=Math.cos(Q)*Math.cos(G)*Math.sin(_)+Math.cos(_)*(-Math.cos(m)*Math.sin(G)+Math.cos(G)*Math.sin(Q)*Math.sin(m));_=Math.asin(Math.max(Math.min(Nt,1),-1)),m=Math.atan2(Ht,St);var yt=[Math.cos(Dt)*(Math.sin(Q)*Math.sin(G)*Math.cos(lt)-Math.cos(G)*Math.sin(lt)),Math.cos(Dt)*Math.cos(Q)*Math.cos(lt),Math.cos(Dt)*(Math.cos(G)*Math.sin(Q)*Math.cos(lt)+Math.sin(lt)*Math.sin(G))],_t=[-Math.cos(_)*Math.sin(m),Math.cos(_)*Math.cos(m)],pt=Math.acos(Math.max(Math.min((yt[0]*_t[0]+yt[1]*_t[1])/(Math.sqrt(yt[0]*yt[0]+yt[1]*yt[1]+yt[2]*yt[2])*Math.sqrt(_t[0]*_t[0]+_t[1]*_t[1])),1),-1));yt[2]<0&&(pt=2*Math.PI-pt),H+=pt}if(o||"multires"!=st&&"cubemap"!=st){if("multires"!=st){var Ot=2*Math.atan(Math.tan(.5*Y)/(o.drawingBufferWidth/o.drawingBufferHeight));J=1/Math.tan(.5*Ot),o.uniform1f(v.psi,m),o.uniform1f(v.theta,_),o.uniform1f(v.rot,H),o.uniform1f(v.f,J),!0===qt&&"equirectangular"==st&&(o.bindTexture(o.TEXTURE_2D,v.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,A)),o.drawArrays(o.TRIANGLES,0,6)}else{var wt=function te(_,m,Y,S){var J=2*Math.atan(Math.tan(_/2)*o.drawingBufferHeight/o.drawingBufferWidth),p=1/Math.tan(J/2);return[p/m,0,0,0,0,p,0,0,0,0,(S+Y)/(Y-S),2*S*Y/(Y-S),0,0,-1,0]}(Y,o.drawingBufferWidth/o.drawingBufferHeight,.1,100);!function Rt(_){for(var m=1;m<A.maxLevel&&o.drawingBufferWidth>A.tileResolution*Math.pow(2,m-1)*Math.tan(_/2)*.707;)m++;v.level=m}(Y);var nt=[1,0,0,0,1,0,0,0,1];nt=$(nt,-H,"z"),nt=$(nt,-_,"x"),nt=function $t(_){return[_[0],_[1],_[2],0,_[3],_[4],_[5],0,_[6],_[7],_[8],0,0,0,0,1]}(nt=$(nt,m,"y")),o.uniformMatrix4fv(v.perspUniform,!1,new Float32Array(Kt(wt))),o.uniformMatrix4fv(v.cubeUniform,!1,new Float32Array(Kt(nt)));var ct=function Jt(_,m){return[_[0]*m[0],_[0]*m[1],_[0]*m[2],0,_[5]*m[4],_[5]*m[5],_[5]*m[6],0,_[10]*m[8],_[10]*m[9],_[10]*m[10],_[11],-m[8],-m[9],-m[10],0]}(wt,nt);if(v.nodeCache.sort(zt),v.nodeCache.length>200&&v.nodeCache.length>v.currentNodes.length+50)for(var Tt=v.nodeCache.splice(200,v.nodeCache.length-200),gt=0;gt<Tt.length;gt++)o.deleteTexture(Tt[gt].texture);v.currentNodes=[];var mt=["f","b","u","d","l","r"];for(B=0;B<6;B++)Z(ct,new C(Ft[B],mt[B],1,0,0,A.fullpath),_,m,Y);for(v.currentNodes.sort(dt),p=kt.length-1;p>=0;p--)-1===v.currentNodes.indexOf(kt[p].node)&&(kt[p].node.textureLoad=!1,kt.splice(p,1));if(0===kt.length)for(p=0;p<v.currentNodes.length;p++){var it=v.currentNodes[p];if(!it.texture&&!it.textureLoad){it.textureLoad=!0,setTimeout(Lt,0,it);break}}!function Et(){if(!v.drawInProgress){v.drawInProgress=!0,o.clear(o.COLOR_BUFFER_BIT);for(var _=0;_<v.currentNodes.length;_++)v.currentNodes[_].textureLoaded>1&&(o.bindBuffer(o.ARRAY_BUFFER,bt),o.bufferData(o.ARRAY_BUFFER,new Float32Array(v.currentNodes[_].vertices),o.STATIC_DRAW),o.vertexAttribPointer(v.vertPosLocation,3,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,R),o.vertexAttribPointer(v.texCoordLocation,2,o.FLOAT,!1,0,0),o.bindTexture(o.TEXTURE_2D,v.currentNodes[_].texture),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0));v.drawInProgress=!1}}()}if(S.returnImage!==d)return U.toDataURL("image/png")}else{var ft={f:"translate3d(-"+(2+(B=tt/2))+"px, -"+(B+2)+"px, -"+B+"px)",b:"translate3d("+(B+2)+"px, -"+(B+2)+"px, "+B+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(B+2)+"px, -"+B+"px, "+(B+2)+"px) rotateX(270deg)",d:"translate3d(-"+(B+2)+"px, "+B+"px, -"+(B+2)+"px) rotateX(90deg)",l:"translate3d(-"+B+"px, -"+(B+2)+"px, "+(B+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+B+"px, -"+(B+2)+"px, -"+(B+2)+"px) rotateY(270deg)"},Mt=(J=1/Math.tan(Y/2))*U.clientWidth/2+"px",ut="perspective("+Mt+") translateZ("+Mt+") rotateX("+_+"rad) rotateY("+m+"rad) ",at=Object.keys(ft);for(p=0;p<6;p++){var At=I.querySelector(".pnlm-"+at[p]+"face");At&&(At.style.webkitTransform=ut+ft[at[p]],At.style.transform=ut+ft[at[p]])}}},this.isLoading=function(){if(o&&"multires"==st)for(var _=0;_<v.currentNodes.length;_++)if(!v.currentNodes[_].textureLoaded)return!0;return!1},this.getCanvas=function(){return U};var kt=[],xt=function(){var Y,_=4,m={};function S(){var H=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=Y||"anonymous";var G=function(){H.image.width>0&&H.image.height>0?(function ee(_,m){o.bindTexture(o.TEXTURE_2D,m),o.texImage2D(o.TEXTURE_2D,0,o.RGB,o.RGB,o.UNSIGNED_BYTE,_),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.bindTexture(o.TEXTURE_2D,null)}(H.image,H.texture),H.callback(H.texture,!0)):H.callback(H.texture,!1),function p(H){if(kt.length){var G=kt.shift();H.loadTexture(G.src,G.texture,G.callback)}else m[_++]=H}(H)};this.image.addEventListener("load",G),this.image.addEventListener("error",G)}function J(H,G,Q,Dt){this.node=H,this.src=G,this.texture=Q,this.callback=Dt}S.prototype.loadTexture=function(H,G,Q){this.texture=G,this.callback=Q,this.image.src=H};for(var B=0;B<_;B++)m[B]=new S;return function(H,G,Q,Dt){Y=Dt;var lt=o.createTexture();return _?m[--_].loadTexture(G,lt,Q):kt.push(new J(H,G,lt,Q)),lt}}();function Lt(_){xt(_,_.path+"."+A.extension,function(m,Y){_.texture=m,_.textureLoaded=Y?2:1},It.crossOrigin)}function Wt(_,m){var Y=function b(_,m){return[_[0]*m[0]+_[1]*m[1]+_[2]*m[2],_[4]*m[0]+_[5]*m[1]+_[6]*m[2],_[11]+_[8]*m[0]+_[9]*m[1]+_[10]*m[2],1/(_[12]*m[0]+_[13]*m[1]+_[14]*m[2])]}(_,m),S=Y[0]*Y[3],J=Y[1]*Y[3],p=Y[2]*Y[3],B=[0,0,0];return S<-1&&(B[0]=-1),S>1&&(B[0]=1),J<-1&&(B[1]=-1),J>1&&(B[1]=1),(p<-1||p>1)&&(B[2]=1),B}function jt(){console.log("Reducing canvas size due to error 1286!"),U.width=Math.round(U.width/2),U.height=Math.round(U.height/2)}}var t=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),f=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),F=["precision highp float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image0;","uniform sampler2D u_image1;","uniform bool u_splitImage;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join("\n"),e=F+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join("\n"),et=F+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else {","if(u_splitImage) {","if(coord.x < 0.0)","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","else","gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","} else {","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}","}","}"].join("\n"),Ut=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function(vt,U,v,o){return new w(vt,U,v,o)}}}(window,document)},52633:()=>{window.pannellum=function(Zt,T,d){"use strict";function w(t,f){var e,et,Ut,X,Ct,bt,dt,C,Z,F=this,vt=!1,U=Date.now(),v=0,o=0,ot=-1,rt=0,tt=0,I=new Array(10),Ft=!1,A=!1,qt=!1,R={yaw:0,pitch:0,hfov:0},Gt=!1,It=!1,zt=0,Et=0,z={},ht={},$=[],$t=!1,Kt=1e-6,te=!1,ee=!1,kt={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:d,maxPitch:d,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:d,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function mt(i){return i<.5?2*i*i:(4-2*i)*i-1},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."}};(t="string"==typeof t?T.getElementById(t):t).classList.add("pnlm-container"),t.tabIndex=0;var xt=T.createElement("div");xt.className="pnlm-ui",t.appendChild(xt);var Lt=T.createElement("div");Lt.className="pnlm-render-container",t.appendChild(Lt);var Rt=T.createElement("div");Rt.className="pnlm-dragfix",xt.appendChild(Rt);var Jt=T.createElement("span");Jt.className="pnlm-about-msg",Jt.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a>',xt.appendChild(Jt),Rt.addEventListener("contextmenu",function H(i){var a=G(i);Jt.style.left=a.x+"px",Jt.style.top=a.y+"px",clearTimeout(H.t1),clearTimeout(H.t2),Jt.style.display="block",Jt.style.opacity=1,H.t1=setTimeout(function(){Jt.style.opacity=0},2e3),H.t2=setTimeout(function(){Jt.style.display="none"},2500),i.preventDefault()});var b={},Wt=T.createElement("div");Wt.className="pnlm-sprite pnlm-hot-spot-debug-indicator",xt.appendChild(Wt),b.container=T.createElement("div"),b.container.className="pnlm-panorama-info",b.title=T.createElement("div"),b.title.className="pnlm-title-box",b.container.appendChild(b.title),b.author=T.createElement("div"),b.author.className="pnlm-author-box",b.container.appendChild(b.author),xt.appendChild(b.container),b.load={},b.load.box=T.createElement("div"),b.load.box.className="pnlm-load-box",b.load.boxp=T.createElement("p"),b.load.box.appendChild(b.load.boxp),b.load.lbox=T.createElement("div"),b.load.lbox.className="pnlm-lbox",b.load.lbox.innerHTML='<div class="pnlm-loading"></div>',b.load.box.appendChild(b.load.lbox),b.load.lbar=T.createElement("div"),b.load.lbar.className="pnlm-lbar",b.load.lbarFill=T.createElement("div"),b.load.lbarFill.className="pnlm-lbar-fill",b.load.lbar.appendChild(b.load.lbarFill),b.load.box.appendChild(b.load.lbar),b.load.msg=T.createElement("p"),b.load.msg.className="pnlm-lmsg",b.load.box.appendChild(b.load.msg),xt.appendChild(b.load.box),b.errorMsg=T.createElement("div"),b.errorMsg.className="pnlm-error-msg pnlm-info-box",xt.appendChild(b.errorMsg);var k={};k.container=T.createElement("div"),k.container.className="pnlm-controls-container",xt.appendChild(k.container),k.load=T.createElement("div"),k.load.className="pnlm-load-button",k.load.addEventListener("click",function(){E(),j()}),xt.appendChild(k.load),k.zoom=T.createElement("div"),k.zoom.className="pnlm-zoom-controls pnlm-controls",k.zoomIn=T.createElement("div"),k.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",k.zoomIn.addEventListener("click",function l(){X&&(u(e.hfov-5),it())}),k.zoom.appendChild(k.zoomIn),k.zoomOut=T.createElement("div"),k.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",k.zoomOut.addEventListener("click",function g(){X&&(u(e.hfov+5),it())}),k.zoom.appendChild(k.zoomOut),k.container.appendChild(k.zoom),k.fullscreen=T.createElement("div"),k.fullscreen.addEventListener("click",r),k.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(T.fullscreenEnabled||T.mozFullScreenEnabled||T.webkitFullscreenEnabled||T.msFullscreenEnabled)&&k.container.appendChild(k.fullscreen),k.orientation=T.createElement("div"),k.orientation.addEventListener("click",function(i){It?me():fe()}),k.orientation.addEventListener("mousedown",function(i){i.stopPropagation()}),k.orientation.addEventListener("touchstart",function(i){i.stopPropagation()}),k.orientation.addEventListener("pointerdown",function(i){i.stopPropagation()}),k.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var jt=!1;Zt.DeviceOrientationEvent&&"https:"==location.protocol&&navigator.userAgent.toLowerCase().indexOf("mobi")>=0&&(k.container.appendChild(k.orientation),jt=!0);var _=T.createElement("div");function m(){var i=T.createElement("div");if(i.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1!=i.getElementsByTagName("i").length){var a,c;if(C=e.hfov,Z=e.pitch,"cubemap"==e.type){for(Ct=[],a=0;a<6;a++)Ct.push(new Image),Ct[a].crossOrigin=e.crossOrigin;b.load.lbox.style.display="block",b.load.lbar.style.display="none"}else if("multires"==e.type){var M=JSON.parse(JSON.stringify(e.multiRes));e.basePath&&e.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(e.multiRes.basePath)?M.basePath=e.basePath+e.multiRes.basePath:e.multiRes.basePath?M.basePath=e.multiRes.basePath:e.basePath&&(M.basePath=e.basePath),Ct=M}else if(!0===e.dynamic)Ct=e.panorama;else{if(e.panorama===d)return void p(e.strings.noPanoramaError);Ct=new Image}if("cubemap"==e.type){var x=6,y=function(){0==--x&&S()},K=function(N){var V=T.createElement("a");V.href=N.target.src,V.textContent=V.href,p(e.strings.fileAccessError.replace("%s",V.outerHTML))};for(a=0;a<Ct.length;a++)"null"==(c=e.cubeMap[a])?(console.log("Will use background instead of missing cubemap face "+a),y()):(e.basePath&&!Y(c)&&(c=e.basePath+c),Ct[a].onload=y,Ct[a].onerror=K,Ct[a].src=oe(c))}else if("multires"==e.type)S();else if(c="",e.basePath&&(c=e.basePath),!0!==e.dynamic){c=Y(e.panorama)?e.panorama:c+e.panorama,Ct.onload=function(){Zt.URL.revokeObjectURL(this.src),S()};var D=new XMLHttpRequest;D.onloadend=function(){if(200!=D.status){var N=T.createElement("a");N.href=c,N.textContent=N.href,p(e.strings.fileAccessError.replace("%s",N.outerHTML))}(function J(i){var a=new FileReader;a.addEventListener("loadend",function(){var c=a.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var M=c.indexOf("\xff\xc2");(M<0||M>65536)&&p(e.strings.iOS8WebGLError)}var x=c.indexOf("<x:xmpmeta");if(x>-1&&!0!==e.ignoreGPanoXMP){var y=c.substring(x,c.indexOf("</x:xmpmeta>")+12),K=function(N){var V;return y.indexOf(N+'="')>=0?V=(V=y.substring(y.indexOf(N+'="')+N.length+2)).substring(0,V.indexOf('"')):y.indexOf(N+">")>=0&&(V=(V=y.substring(y.indexOf(N+">")+N.length+1)).substring(0,V.indexOf("<"))),V!==d?Number(V):null},D={fullWidth:K("GPano:FullPanoWidthPixels"),croppedWidth:K("GPano:CroppedAreaImageWidthPixels"),fullHeight:K("GPano:FullPanoHeightPixels"),croppedHeight:K("GPano:CroppedAreaImageHeightPixels"),topPixels:K("GPano:CroppedAreaTopPixels"),heading:K("GPano:PoseHeadingDegrees"),horizonPitch:K("GPano:PosePitchDegrees"),horizonRoll:K("GPano:PoseRollDegrees")};null!==D.fullWidth&&null!==D.croppedWidth&&null!==D.fullHeight&&null!==D.croppedHeight&&null!==D.topPixels&&($.indexOf("haov")<0&&(e.haov=D.croppedWidth/D.fullWidth*360),$.indexOf("vaov")<0&&(e.vaov=D.croppedHeight/D.fullHeight*180),$.indexOf("vOffset")<0&&(e.vOffset=-180*((D.topPixels+D.croppedHeight/2)/D.fullHeight-.5)),null!==D.heading&&$.indexOf("northOffset")<0&&(e.northOffset=D.heading,!1!==e.compass&&(e.compass=!0)),null!==D.horizonPitch&&null!==D.horizonRoll&&($.indexOf("horizonPitch")<0&&(e.horizonPitch=D.horizonPitch),$.indexOf("horizonRoll")<0&&(e.horizonRoll=D.horizonRoll)))}Ct.src=Zt.URL.createObjectURL(i)}),a.readAsBinaryString!==d?a.readAsBinaryString(i):a.readAsText(i)})(this.response),b.load.msg.innerHTML=""},D.onprogress=function(N){var Yt,Qt,Pt;N.lengthComputable?(b.load.lbarFill.style.width=N.loaded/N.total*100+"%",N.total>1e6?(Yt="MB",Qt=(N.loaded/1e6).toFixed(2),Pt=(N.total/1e6).toFixed(2)):N.total>1e3?(Yt="kB",Qt=(N.loaded/1e3).toFixed(1),Pt=(N.total/1e3).toFixed(1)):(Yt="B",Qt=N.loaded,Pt=N.total),b.load.msg.innerHTML=Qt+" / "+Pt+" "+Yt):(b.load.lbox.style.display="block",b.load.lbar.style.display="none")};try{D.open("GET",c,!0)}catch{p(e.strings.malformedURLError)}D.responseType="blob",D.setRequestHeader("Accept","image/*,*/*;q=0.9"),D.withCredentials="use-credentials"===e.crossOrigin,D.send()}e.draggable&&xt.classList.add("pnlm-grab"),xt.classList.remove("pnlm-grabbing"),$t=!0===e.dynamicUpdate,e.dynamic&&$t&&(Ct=e.panorama,S())}else p()}function Y(i){return new RegExp("^(?:[a-z]+:)?//","i").test(i)||"/"==i[0]||"blob:"==i.slice(0,5)}function S(){et||(et=new libpannellum.renderer(Lt)),qt||(qt=!0,Rt.addEventListener("mousedown",Q,!1),T.addEventListener("mousemove",St,!1),T.addEventListener("mouseup",Ht,!1),e.mouseZoom&&(xt.addEventListener("mousewheel",At,!1),xt.addEventListener("DOMMouseScroll",At,!1)),e.doubleClickZoom&&Rt.addEventListener("dblclick",Dt,!1),t.addEventListener("mozfullscreenchange",h,!1),t.addEventListener("webkitfullscreenchange",h,!1),t.addEventListener("msfullscreenchange",h,!1),t.addEventListener("fullscreenchange",h,!1),Zt.addEventListener("resize",P,!1),Zt.addEventListener("orientationchange",P,!1),e.disableKeyboardCtrl||(t.addEventListener("keydown",Ot,!1),t.addEventListener("keyup",nt,!1),t.addEventListener("blur",wt,!1)),T.addEventListener("mouseleave",Ht,!1),""===T.documentElement.style.pointerAction&&""===T.documentElement.style.touchAction?(Rt.addEventListener("pointerdown",Mt,!1),Rt.addEventListener("pointermove",ut,!1),Rt.addEventListener("pointerup",at,!1),Rt.addEventListener("pointerleave",at,!1)):(Rt.addEventListener("touchstart",Nt,!1),Rt.addEventListener("touchmove",yt,!1),Rt.addEventListener("touchend",_t,!1)),Zt.navigator.pointerEnabled&&(t.style.touchAction="none")),function _e(){try{var i={};e.horizonPitch!==d&&(i.horizonPitch=e.horizonPitch*Math.PI/180),e.horizonRoll!==d&&(i.horizonRoll=e.horizonRoll*Math.PI/180),e.backgroundColor!==d&&(i.backgroundColor=e.backgroundColor),et.init(Ct,e.type,e.dynamic,e.haov*Math.PI/180,e.vaov*Math.PI/180,e.vOffset*Math.PI/180,ue,i),!0!==e.dynamic&&(Ct=d)}catch(a){if("webgl error"==a.type||"no webgl"==a.type)p();else{if("webgl size error"!=a.type)throw p(e.strings.unknownError),a;p(e.strings.textureSizeError.replace("%s",a.width).replace("%s",a.maxWidth))}}}(),u(e.hfov),setTimeout(function(){},500)}function p(i){i===d&&(i=e.strings.genericWebGLError),b.errorMsg.innerHTML="<p>"+i+"</p>",k.load.style.display="none",b.load.box.style.display="none",b.errorMsg.style.display="table",A=!0,X=d,Lt.style.display="none",Vt("error",i)}function G(i){var a=t.getBoundingClientRect(),c={};return c.x=(i.clientX||i.pageX)-a.left,c.y=(i.clientY||i.pageY)-a.top,c}function Q(i){if(i.preventDefault(),t.focus(),X&&e.draggable){var a=G(i);if(e.hotSpotDebug){var c=lt(i);console.log("Pitch: "+c[0]+", Yaw: "+c[1]+", Center Pitch: "+e.pitch+", Center Yaw: "+e.yaw+", HFOV: "+e.hfov)}L(),me(),e.roll=0,R.hfov=0,vt=!0,U=Date.now(),v=a.x,o=a.y,rt=e.yaw,tt=e.pitch,xt.classList.add("pnlm-grabbing"),xt.classList.remove("pnlm-grab"),Vt("mousedown",i),it()}}function Dt(i){if(e.minHfov===e.hfov)F.setHfov(C,1e3);else{var a=lt(i);F.lookAt(a[0],a[1],e.minHfov,1e3)}}function lt(i){var a=G(i),c=et.getCanvas(),M=c.clientWidth,x=c.clientHeight,y=a.x/M*2-1,K=(1-a.y/x*2)*x/M,D=1/Math.tan(e.hfov*Math.PI/360),N=Math.sin(e.pitch*Math.PI/180),V=Math.cos(e.pitch*Math.PI/180),Yt=D*V-K*N,Qt=Math.sqrt(y*y+Yt*Yt),Pt=180*Math.atan((K*V+D*N)/Qt)/Math.PI,Xt=180*Math.atan2(y/Qt,Yt/Qt)/Math.PI+e.yaw;return Xt<-180&&(Xt+=360),Xt>180&&(Xt-=360),[Pt,Xt]}function St(i){if(vt&&X){U=Date.now();var a=et.getCanvas(),c=a.clientWidth,M=a.clientHeight,x=G(i),y=180*(Math.atan(v/c*2-1)-Math.atan(x.x/c*2-1))/Math.PI*e.hfov/90+rt;R.yaw=(y-e.yaw)%360*.2,e.yaw=y;var K=2*Math.atan(Math.tan(e.hfov/360*Math.PI)*M/c)*180/Math.PI,D=180*(Math.atan(x.y/M*2-1)-Math.atan(o/M*2-1))/Math.PI*K/90+tt;R.pitch=.2*(D-e.pitch),e.pitch=D}}function Ht(i){vt&&(vt=!1,Date.now()-U>15&&(R.pitch=R.yaw=0),xt.classList.add("pnlm-grab"),xt.classList.remove("pnlm-grabbing"),U=Date.now(),Vt("mouseup",i))}function Nt(i){if(X&&e.draggable){L(),me(),e.roll=0,R.hfov=0;var a=G(i.targetTouches[0]);if(v=a.x,o=a.y,2==i.targetTouches.length){var c=G(i.targetTouches[1]);v+=.5*(c.x-a.x),o+=.5*(c.y-a.y),ot=Math.sqrt((a.x-c.x)*(a.x-c.x)+(a.y-c.y)*(a.y-c.y))}vt=!0,U=Date.now(),rt=e.yaw,tt=e.pitch,Vt("touchstart",i),it()}}function yt(i){if(e.draggable&&(i.preventDefault(),X&&(U=Date.now()),vt&&X)){var a=G(i.targetTouches[0]),c=a.x,M=a.y;if(2==i.targetTouches.length&&-1!=ot){var x=G(i.targetTouches[1]);c+=.5*(x.x-a.x),M+=.5*(x.y-a.y);var y=Math.sqrt((a.x-x.x)*(a.x-x.x)+(a.y-x.y)*(a.y-x.y));u(e.hfov+.1*(ot-y)),ot=y}var K=e.hfov/360*e.touchPanSpeedCoeffFactor,D=(v-c)*K+rt;R.yaw=(D-e.yaw)%360*.2,e.yaw=D;var N=(M-o)*K+tt;R.pitch=.2*(N-e.pitch),e.pitch=N}}function _t(){vt=!1,Date.now()-U>150&&(R.pitch=R.yaw=0),ot=-1,U=Date.now(),Vt("touchend",event)}_.className="pnlm-compass pnlm-controls pnlm-control",xt.appendChild(_),s(f.firstScene?f.firstScene:f.default&&f.default.firstScene?f.default.firstScene:null),E(!0);var pt=[],ft=[];function Mt(i){if("touch"==i.pointerType){if(!X||!e.draggable)return;pt.push(i.pointerId),ft.push({clientX:i.clientX,clientY:i.clientY}),i.targetTouches=ft,Nt(i),i.preventDefault()}}function ut(i){if("touch"==i.pointerType){if(!e.draggable)return;for(var a=0;a<pt.length;a++)if(i.pointerId==pt[a])return ft[a].clientX=i.clientX,ft[a].clientY=i.clientY,i.targetTouches=ft,yt(i),void i.preventDefault()}}function at(i){if("touch"==i.pointerType){for(var a=!1,c=0;c<pt.length;c++)i.pointerId==pt[c]&&(pt[c]=d),pt[c]&&(a=!0);a||(pt=[],ft=[],_t()),i.preventDefault()}}function At(i){!X||"fullscreenonly"==e.mouseZoom&&!Ft||(i.preventDefault(),L(),U=Date.now(),i.wheelDeltaY?(u(e.hfov-.05*i.wheelDeltaY),R.hfov=i.wheelDelta<0?1:-1):i.wheelDelta?(u(e.hfov-.05*i.wheelDelta),R.hfov=i.wheelDelta<0?1:-1):i.detail&&(u(e.hfov+1.5*i.detail),R.hfov=i.detail>0?1:-1),it())}function Ot(i){L(),U=Date.now(),me(),e.roll=0;var a=i.which||i.keycode;e.capturedKeyNumbers.indexOf(a)<0||(i.preventDefault(),27==a?Ft&&r():ct(a,!0))}function wt(){for(var i=0;i<10;i++)I[i]=!1}function nt(i){var a=i.which||i.keycode;e.capturedKeyNumbers.indexOf(a)<0||(i.preventDefault(),ct(a,!1))}function ct(i,a){var c=!1;switch(i){case 109:case 189:case 17:case 173:I[0]!=a&&(c=!0),I[0]=a;break;case 107:case 187:case 16:case 61:I[1]!=a&&(c=!0),I[1]=a;break;case 38:I[2]!=a&&(c=!0),I[2]=a;break;case 87:I[6]!=a&&(c=!0),I[6]=a;break;case 40:I[3]!=a&&(c=!0),I[3]=a;break;case 83:I[7]!=a&&(c=!0),I[7]=a;break;case 37:I[4]!=a&&(c=!0),I[4]=a;break;case 65:I[8]!=a&&(c=!0),I[8]=a;break;case 39:I[5]!=a&&(c=!0),I[5]=a;break;case 68:I[9]!=a&&(c=!0),I[9]=a}c&&a&&(bt=typeof performance<"u"&&performance.now()?performance.now():Date.now(),it())}function gt(i){var a=z[i],c=Math.min(1,Math.max((Date.now()-a.startTime)/1e3/(a.duration/1e3),0)),M=a.startPosition+e.animationTimingFunction(c)*(a.endPosition-a.startPosition);(a.endPosition>a.startPosition&&M>=a.endPosition||a.endPosition<a.startPosition&&M<=a.endPosition||a.endPosition===a.startPosition)&&(M=a.endPosition,R[i]=0,delete z[i]),e[i]=M}function P(){h("resize")}function it(){Gt||(Gt=!0,Bt())}function Bt(){if(!ee)if(function W(){var i;if(X){var a=et.getCanvas();!1!==e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),i=e.yaw;var c=0;if(e.avoidShowingBackground){var x=e.hfov/2,y=180*Math.atan2(Math.tan(x/180*Math.PI),a.width/a.height)/Math.PI;e.vaov>e.haov?Math.min(Math.cos((e.pitch-x)/180*Math.PI),Math.cos((e.pitch+x)/180*Math.PI)):c=x*(1-Math.min(Math.cos((e.pitch-y)/180*Math.PI),Math.cos((e.pitch+y)/180*Math.PI)))}var D=e.maxYaw-e.minYaw,N=-180,V=180;D<360&&(N=e.minYaw+e.hfov/2+c,V=e.maxYaw-e.hfov/2-c,D<e.hfov&&(N=V=(N+V)/2),e.yaw=Math.max(N,Math.min(V,e.yaw))),!1===e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),!1!==e.autoRotate&&i!=e.yaw&&bt!==d&&(e.autoRotate*=-1);var Yt=2*Math.atan(Math.tan(e.hfov/180*Math.PI*.5)/(a.width/a.height))/Math.PI*180,Qt=e.minPitch+Yt/2,Pt=e.maxPitch-Yt/2;e.maxPitch-e.minPitch<Yt&&(Qt=Pt=(Qt+Pt)/2),isNaN(Qt)&&(Qt=-90),isNaN(Pt)&&(Pt=90),e.pitch=Math.max(Qt,Math.min(Pt,e.pitch)),et.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{roll:e.roll*Math.PI/180}),se(),e.compass&&(_.style.transform="rotate("+(-e.yaw-e.northOffset)+"deg)",_.style.webkitTransform="rotate("+(-e.yaw-e.northOffset)+"deg)")}}(),dt&&clearTimeout(dt),vt||!0===It)requestAnimationFrame(Bt);else if(I[0]||I[1]||I[2]||I[3]||I[4]||I[5]||I[6]||I[7]||I[8]||I[9]||e.autoRotate||z.pitch||z.yaw||z.hfov||Math.abs(R.yaw)>.01||Math.abs(R.pitch)>.01||Math.abs(R.hfov)>.01)(function Tt(){if(X){var x,i=!1,a=e.pitch,c=e.yaw,M=e.hfov;x=typeof performance<"u"&&performance.now()?performance.now():Date.now(),bt===d&&(bt=x);var y=(x-bt)*e.hfov/1700;if(y=Math.min(y,1),I[0]&&!0===e.keyboardZoom&&(u(e.hfov+(.8*R.hfov+.5)*y),i=!0),I[1]&&!0===e.keyboardZoom&&(u(e.hfov+(.8*R.hfov-.2)*y),i=!0),(I[2]||I[6])&&(e.pitch+=(.8*R.pitch+.2)*y,i=!0),(I[3]||I[7])&&(e.pitch+=(.8*R.pitch-.2)*y,i=!0),(I[4]||I[8])&&(e.yaw+=(.8*R.yaw-.2)*y,i=!0),(I[5]||I[9])&&(e.yaw+=(.8*R.yaw+.2)*y,i=!0),i&&(U=Date.now()),e.autoRotate){if(x-bt>.001){var K=(x-bt)/1e3,D=(R.yaw/K*y-.2*e.autoRotate)*K;D=(-e.autoRotate>0?1:-1)*Math.min(Math.abs(e.autoRotate*K),Math.abs(D)),e.yaw+=D}e.autoRotateStopDelay&&(e.autoRotateStopDelay-=x-bt,e.autoRotateStopDelay<=0&&(e.autoRotateStopDelay=!1,Et=e.autoRotate,e.autoRotate=0))}if(z.pitch&&(gt("pitch"),a=e.pitch),z.yaw&&(gt("yaw"),c=e.yaw),z.hfov&&(gt("hfov"),M=e.hfov),y>0&&!e.autoRotate){var N=1-e.friction;!I[4]&&!I[5]&&!I[8]&&!I[9]&&!z.yaw&&(e.yaw+=R.yaw*y*N),!I[2]&&!I[3]&&!I[6]&&!I[7]&&!z.pitch&&(e.pitch+=R.pitch*y*N),!I[0]&&!I[1]&&!z.hfov&&u(e.hfov+R.hfov*y*N)}if(bt=x,y>0){R.yaw=.8*R.yaw+(e.yaw-c)/y*.2,R.pitch=.8*R.pitch+(e.pitch-a)/y*.2,R.hfov=.8*R.hfov+(e.hfov-M)/y*.2;var V=e.autoRotate?Math.abs(e.autoRotate):5;R.yaw=Math.min(V,Math.max(R.yaw,-V)),R.pitch=Math.min(V,Math.max(R.pitch,-V)),R.hfov=Math.min(V,Math.max(R.hfov,-V))}I[0]&&I[1]&&(R.hfov=0),(I[2]||I[6])&&(I[3]||I[7])&&(R.pitch=0),(I[4]||I[8])&&(I[5]||I[9])&&(R.yaw=0)}})(),e.autoRotateInactivityDelay>=0&&Et&&Date.now()-U>e.autoRotateInactivityDelay&&!e.autoRotate&&(e.autoRotate=Et,F.lookAt(Z,d,C,3e3)),requestAnimationFrame(Bt);else if(et&&(et.isLoading()||!0===e.dynamic&&$t))requestAnimationFrame(Bt);else{Vt("animatefinished",{pitch:F.getPitch(),yaw:F.getYaw(),hfov:F.getHfov()}),Gt=!1,bt=d;var i=e.autoRotateInactivityDelay-(Date.now()-U);i>0?dt=setTimeout(function(){e.autoRotate=Et,F.lookAt(Z,d,C,3e3),it()},i):e.autoRotateInactivityDelay>=0&&Et&&(e.autoRotate=Et,F.lookAt(Z,d,C,3e3),it())}}function q(i,a,c,M){this.w=i,this.x=a,this.y=c,this.z=M}function ne(i){var a=function ce(i,a,c){var M=function O(i,a,c){var M=[a?a*Math.PI/180/2:0,c?c*Math.PI/180/2:0,i?i*Math.PI/180/2:0],x=[Math.cos(M[0]),Math.cos(M[1]),Math.cos(M[2])],y=[Math.sin(M[0]),Math.sin(M[1]),Math.sin(M[2])];return new q(x[0]*x[1]*x[2]-y[0]*y[1]*y[2],y[0]*x[1]*x[2]-x[0]*y[1]*y[2],x[0]*y[1]*x[2]+y[0]*x[1]*y[2],x[0]*x[1]*y[2]+y[0]*y[1]*x[2])}(i,a,c);M=M.multiply(new q(Math.sqrt(.5),-Math.sqrt(.5),0,0));var x=Zt.orientation?-Zt.orientation*Math.PI/180/2:0;return M.multiply(new q(Math.cos(x),0,-Math.sin(x),0))}(i.alpha,i.beta,i.gamma).toEulerAngles();"number"==typeof It&&It<10?It+=1:10===It?(zt=a[2]/Math.PI*180+e.yaw,It=!0,requestAnimationFrame(Bt)):(e.pitch=a[0]/Math.PI*180,e.roll=-a[1]/Math.PI*180,e.yaw=-a[2]/Math.PI*180+zt)}function ue(){if(e.sceneFadeDuration&&et.fadeImg!==d){et.fadeImg.style.opacity=0;var i=et.fadeImg;delete et.fadeImg,setTimeout(function(){Lt.removeChild(i),Vt("scenechangefadedone")},e.sceneFadeDuration)}_.style.display=e.compass?"inline":"none",function de(){te||(e.hotSpots?(e.hotSpots=e.hotSpots.sort(function(i,a){return i.pitch<a.pitch}),e.hotSpots.forEach(le)):e.hotSpots=[],te=!0,se())}(),b.load.box.style.display="none",Ut!==d&&(Lt.removeChild(Ut),Ut=d),X=!0,Vt("load"),it()}function le(i){i.pitch=Number(i.pitch)||0,i.yaw=Number(i.yaw)||0;var a=T.createElement("div");a.className="pnlm-hotspot-base",a.className+=i.cssClass?" "+i.cssClass:" pnlm-hotspot pnlm-sprite pnlm-"+ie(i.type);var M,c=T.createElement("span");if(i.text&&(c.innerHTML=ie(i.text)),i.video){var x=T.createElement("video"),y=i.video;e.basePath&&!Y(y)&&(y=e.basePath+y),x.src=oe(y),x.controls=!0,x.style.width=i.width+"px",Lt.appendChild(a),c.appendChild(x)}else if(i.image){var K=i.image;e.basePath&&!Y(K)&&(K=e.basePath+K),(M=T.createElement("a")).href=oe(i.URL?i.URL:K,!0),M.target="_blank",c.appendChild(M);var D=T.createElement("img");D.src=oe(K),D.style.width=i.width+"px",D.style.paddingTop="5px",Lt.appendChild(a),M.appendChild(D),c.style.maxWidth="initial"}else if(i.URL){if((M=T.createElement("a")).href=oe(i.URL,!0),i.attributes)for(var N in i.attributes)M.setAttribute(N,i.attributes[N]);else M.target="_blank";Lt.appendChild(M),a.className+=" pnlm-pointer",c.className+=" pnlm-pointer",M.appendChild(a)}else i.sceneId&&(a.onclick=a.ontouchend=function(){return a.clicked||(a.clicked=!0,ae(i.sceneId,i.targetPitch,i.targetYaw,i.targetHfov)),!1},a.className+=" pnlm-pointer",c.className+=" pnlm-pointer"),Lt.appendChild(a);i.createTooltipFunc?i.createTooltipFunc(a,i.createTooltipArgs):(i.text||i.video||i.image)&&(a.classList.add("pnlm-tooltip"),a.appendChild(c),c.style.width=c.scrollWidth-20+"px",c.style.marginLeft=-(c.scrollWidth-a.offsetWidth)/2+"px",c.style.marginTop=-c.scrollHeight-12+"px"),i.clickHandlerFunc&&(a.addEventListener("click",function(V){i.clickHandlerFunc(V,i.clickHandlerArgs)},"false"),a.className+=" pnlm-pointer",c.className+=" pnlm-pointer"),i.div=a}function re(i){var a=Math.sin(i.pitch*Math.PI/180),c=Math.cos(i.pitch*Math.PI/180),M=Math.sin(e.pitch*Math.PI/180),x=Math.cos(e.pitch*Math.PI/180),y=Math.cos((-i.yaw+e.yaw)*Math.PI/180),K=a*M+c*y*x;if(i.yaw<=90&&i.yaw>-90&&K<=0||(i.yaw>90||i.yaw<=-90)&&K<=0)i.div.style.visibility="hidden";else{var D=Math.sin((-i.yaw+e.yaw)*Math.PI/180),N=Math.tan(e.hfov*Math.PI/360);i.div.style.visibility="visible";var V=et.getCanvas(),Yt=V.clientWidth,Qt=V.clientHeight,Pt=[-Yt/N*D*c/K/2,-Yt/N*(a*x-c*y*M)/K/2],Xt=Math.sin(e.roll*Math.PI/180),ge=Math.cos(e.roll*Math.PI/180);(Pt=[Pt[0]*ge-Pt[1]*Xt,Pt[0]*Xt+Pt[1]*ge])[0]+=(Yt-i.div.offsetWidth)/2,Pt[1]+=(Qt-i.div.offsetHeight)/2;var he="translate("+Pt[0]+"px, "+Pt[1]+"px) translateZ(9999px) rotate("+e.roll+"deg)";i.scale&&(he+=" scale("+C/e.hfov/K+")"),i.div.style.webkitTransform=he,i.div.style.MozTransform=he,i.div.style.transform=he}}function se(){e.hotSpots.forEach(re)}function s(i){e={};var a,c,M=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];for(a in $=[],kt)kt.hasOwnProperty(a)&&(e[a]=kt[a]);for(a in f.default)if(f.default.hasOwnProperty(a))if("strings"==a)for(c in f.default.strings)f.default.strings.hasOwnProperty(c)&&(e.strings[c]=ie(f.default.strings[c]));else e[a]=f.default[a],M.indexOf(a)>=0&&$.push(a);if(null!==i&&""!==i&&f.scenes&&f.scenes[i]){var x=f.scenes[i];for(a in x)if(x.hasOwnProperty(a))if("strings"==a)for(c in x.strings)x.strings.hasOwnProperty(c)&&(e.strings[c]=ie(x.strings[c]));else e[a]=x[a],M.indexOf(a)>=0&&$.push(a);e.scene=i}for(a in f)if(f.hasOwnProperty(a))if("strings"==a)for(c in f.strings)f.strings.hasOwnProperty(c)&&(e.strings[c]=ie(f.strings[c]));else e[a]=f[a],M.indexOf(a)>=0&&$.push(a)}function E(i){if((i=i||!1)&&"preview"in e){var a=e.preview;e.basePath&&!Y(a)&&(a=e.basePath+a),(Ut=T.createElement("div")).className="pnlm-preview-img",Ut.style.backgroundImage="url('"+function Ce(i){return oe(i).replace(/"/g,"%22").replace(/'/g,"%27")}(a)+"')",Lt.appendChild(Ut)}var c=e.title,M=e.author;for(var x in i&&("previewTitle"in e&&(e.title=e.previewTitle),"previewAuthor"in e&&(e.author=e.previewAuthor)),e.hasOwnProperty("title")||(b.title.innerHTML=""),e.hasOwnProperty("author")||(b.author.innerHTML=""),!e.hasOwnProperty("title")&&!e.hasOwnProperty("author")&&(b.container.style.display="none"),k.load.innerHTML="<p>"+e.strings.loadButtonLabel+"</p>",b.load.boxp.innerHTML=e.strings.loadingLabel,e)if(e.hasOwnProperty(x))switch(x){case"title":b.title.innerHTML=ie(e[x]),b.container.style.display="inline";break;case"author":var y=ie(e[x]);if(e.authorURL){var K=T.createElement("a");K.href=oe(e.authorURL,!0),K.target="_blank",K.innerHTML=ie(e[x]),y=K.outerHTML}b.author.innerHTML=e.strings.bylineLabel.replace("%s",y),b.container.style.display="inline";break;case"fallback":var D=T.createElement("a");D.href=oe(e[x],!0),D.target="_blank",D.textContent="Click here to view this panorama in an alternative viewer.";var N=T.createElement("p");N.textContent="Your browser does not support WebGL.",N.appendChild(T.createElement("br")),N.appendChild(D),b.errorMsg.innerHTML="",b.errorMsg.appendChild(N);break;case"hfov":u(Number(e[x]));break;case"autoLoad":!0===e[x]&&et===d&&(b.load.box.style.display="inline",k.load.style.display="none",m());break;case"showZoomCtrl":k.zoom.style.display=e[x]&&0!=e.showControls?"block":"none";break;case"showFullscreenCtrl":k.fullscreen.style.display=e[x]&&0!=e.showControls&&("fullscreen"in T||"mozFullScreen"in T||"webkitIsFullScreen"in T||"msFullscreenElement"in T)?"block":"none";break;case"hotSpotDebug":Wt.style.display=e[x]?"block":"none";break;case"showControls":e[x]||(k.orientation.style.display="none",k.zoom.style.display="none",k.fullscreen.style.display="none");break;case"orientationOnByDefault":e[x]&&fe()}i&&(c?e.title=c:delete e.title,M?e.author=M:delete e.author)}function r(){if(X&&!A)if(Ft)T.exitFullscreen?T.exitFullscreen():T.mozCancelFullScreen?T.mozCancelFullScreen():T.webkitCancelFullScreen?T.webkitCancelFullScreen():T.msExitFullscreen&&T.msExitFullscreen();else try{t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen()}catch{}}function h(i){T.fullscreenElement||T.fullscreen||T.mozFullScreen||T.webkitIsFullScreen||T.msFullscreenElement?(k.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),Ft=!0):(k.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),Ft=!1),"resize"!==i&&Vt("fullscreenchange",Ft),et.resize(),u(e.hfov),it()}function n(i){var a=e.minHfov;if("multires"==e.type&&et&&!e.multiResMinHfov&&(a=Math.min(a,et.getCanvas().width/(e.multiRes.cubeResolution/90*.9))),a>e.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),e.hfov;var c=e.hfov;if(c=i<a?a:i>e.maxHfov?e.maxHfov:i,e.avoidShowingBackground&&et){var M=et.getCanvas();c=Math.min(c,360*Math.atan(Math.tan((e.maxPitch-e.minPitch)/360*Math.PI)/M.height*M.width)/Math.PI)}return c}function u(i){e.hfov=n(i),Vt("zoomchange",e.hfov)}function L(){z={},Et=e.autoRotate?e.autoRotate:Et,e.autoRotate=!1}function j(){(function B(){A&&(b.load.box.style.display="none",b.errorMsg.style.display="none",A=!1,Lt.style.display="block",Vt("errorcleared"))})(),X=!1,k.load.style.display="none",b.load.box.style.display="inline",m()}function ae(i,a,c,M,x){var y,K,D,N;if(X||(x=!0),X=!1,z={},e.sceneFadeDuration&&!x){var V=et.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{returnImage:!0});if(V!==d)return(y=new Image).className="pnlm-fade-img",y.style.transition="opacity "+e.sceneFadeDuration/1e3+"s",y.style.width="100%",y.style.height="100%",y.onload=function(){ae(i,a,c,M,!0)},y.src=V,Lt.appendChild(y),void(et.fadeImg=y)}K="same"===a?e.pitch:a,D="same"===c?e.yaw:"sameAzimuth"===c?e.yaw+(e.northOffset||0)-(f.scenes[i].northOffset||0):c,N="same"===M?e.hfov:M,function pe(){var i=e.hotSpots;if(te=!1,delete e.hotSpots,i)for(var a=0;a<i.length;a++){var c=i[a].div;if(c){for(;c.parentNode&&c.parentNode!=Lt;)c=c.parentNode;Lt.removeChild(c)}delete i[a].div}}(),s(i),R.yaw=R.pitch=R.hfov=0,E(),K!==d&&(e.pitch=K),D!==d&&(e.yaw=D),N!==d&&(e.hfov=N),Vt("scenechange",i),j()}function me(){Zt.removeEventListener("deviceorientation",ne),k.orientation.classList.remove("pnlm-orientation-button-active"),It=!1}function fe(){"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(i){"granted"==i&&(It=1,Zt.addEventListener("deviceorientation",ne),k.orientation.classList.add("pnlm-orientation-button-active"))}):(It=1,Zt.addEventListener("deviceorientation",ne),k.orientation.classList.add("pnlm-orientation-button-active"))}function ie(i){return f.escapeHTML?String(i).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(i).split("\n").join("<br>")}function oe(i,a){try{var c=decodeURIComponent(function ve(i){return i.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(a,c){return"colon"===(c=c.toLowerCase())?":":"#"===c.charAt(0)?"x"===c.charAt(1)?String.fromCharCode(parseInt(c.substring(2),16)):String.fromCharCode(+c.substring(1)):""})}(i)).replace(/[^\w:]/g,"").toLowerCase()}catch{return"about:blank"}return 0===c.indexOf("javascript:")||0===c.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):a&&0===c.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):i}function Vt(i){if(i in ht)for(var a=ht[i].length;a>0;a--)ht[i][ht[i].length-a].apply(null,[].slice.call(arguments,1))}q.prototype.multiply=function(i){return new q(this.w*i.w-this.x*i.x-this.y*i.y-this.z*i.z,this.x*i.w+this.w*i.x+this.y*i.z-this.z*i.y,this.y*i.w+this.w*i.y+this.z*i.x-this.x*i.z,this.z*i.w+this.w*i.z+this.x*i.y-this.y*i.x)},q.prototype.toEulerAngles=function(){return[Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Math.asin(2*(this.w*this.y-this.z*this.x)),Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z))]},this.isLoaded=function(){return Boolean(X)},this.getPitch=function(){return e.pitch},this.setPitch=function(i,a,c,M){return U=Date.now(),Math.abs(i-e.pitch)<=Kt?("function"==typeof c&&c(M),this):((a=a==d?1e3:Number(a))?(z.pitch={startTime:Date.now(),startPosition:e.pitch,endPosition:i,duration:a},"function"==typeof c&&setTimeout(function(){c(M)},a)):e.pitch=i,it(),this)},this.getPitchBounds=function(){return[e.minPitch,e.maxPitch]},this.setPitchBounds=function(i){return e.minPitch=Math.max(-90,Math.min(i[0],90)),e.maxPitch=Math.max(-90,Math.min(i[1],90)),this},this.getYaw=function(){return(e.yaw+540)%360-180},this.setYaw=function(i,a,c,M){return U=Date.now(),Math.abs(i-e.yaw)<=Kt?("function"==typeof c&&c(M),this):(i=(i+180)%360-180,(a=a==d?1e3:Number(a))?(e.yaw-i>180?i+=360:i-e.yaw>180&&(i-=360),z.yaw={startTime:Date.now(),startPosition:e.yaw,endPosition:i,duration:a},"function"==typeof c&&setTimeout(function(){c(M)},a)):e.yaw=i,it(),this)},this.getYawBounds=function(){return[e.minYaw,e.maxYaw]},this.setYawBounds=function(i){return e.minYaw=Math.max(-360,Math.min(i[0],360)),e.maxYaw=Math.max(-360,Math.min(i[1],360)),this},this.getHfov=function(){return e.hfov},this.setHfov=function(i,a,c,M){return U=Date.now(),Math.abs(i-e.hfov)<=Kt?("function"==typeof c&&c(M),this):((a=a==d?1e3:Number(a))?(z.hfov={startTime:Date.now(),startPosition:e.hfov,endPosition:n(i),duration:a},"function"==typeof c&&setTimeout(function(){c(M)},a)):u(i),it(),this)},this.getHfovBounds=function(){return[e.minHfov,e.maxHfov]},this.setHfovBounds=function(i){return e.minHfov=Math.max(0,i[0]),e.maxHfov=Math.max(0,i[1]),this},this.lookAt=function(i,a,c,M,x,y){return M=M==d?1e3:Number(M),i!==d&&Math.abs(i-e.pitch)>Kt&&(this.setPitch(i,M,x,y),x=d),a!==d&&Math.abs(a-e.yaw)>Kt&&(this.setYaw(a,M,x,y),x=d),c!==d&&Math.abs(c-e.hfov)>Kt&&(this.setHfov(c,M,x,y),x=d),"function"==typeof x&&x(y),this},this.getNorthOffset=function(){return e.northOffset},this.setNorthOffset=function(i){return e.northOffset=Math.min(360,Math.max(0,i)),it(),this},this.getHorizonRoll=function(){return e.horizonRoll},this.setHorizonRoll=function(i){return e.horizonRoll=Math.min(90,Math.max(-90,i)),et.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),it(),this},this.getHorizonPitch=function(){return e.horizonPitch},this.setHorizonPitch=function(i){return e.horizonPitch=Math.min(90,Math.max(-90,i)),et.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),it(),this},this.startAutoRotate=function(i,a){return a=a===d?Z:a,e.autoRotate=i=i||Et||1,F.lookAt(a,d,C,3e3),it(),this},this.stopAutoRotate=function(){return Et=e.autoRotate?e.autoRotate:Et,e.autoRotate=!1,e.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){L(),R={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return et},this.setUpdate=function(i){return $t=!0===i,et===d?S():it(),this},this.mouseEventToCoords=function(i){return lt(i)},this.loadScene=function(i,a,c,M){return!1!==X&&ae(i,a,c,M),this},this.getScene=function(){return e.scene},this.addScene=function(i,a){return f.scenes[i]=a,this},this.removeScene=function(i){return!(e.scene===i||!f.scenes.hasOwnProperty(i)||(delete f.scenes[i],0))},this.toggleFullscreen=function(){return r(),this},this.getConfig=function(){return e},this.getContainer=function(){return t},this.addHotSpot=function(i,a){if(a===d&&e.scene===d)e.hotSpots.push(i);else{var c=a!==d?a:e.scene;if(!f.scenes.hasOwnProperty(c))throw"Invalid scene ID!";f.scenes[c].hasOwnProperty("hotSpots")||(f.scenes[c].hotSpots=[],c==e.scene&&(e.hotSpots=f.scenes[c].hotSpots)),f.scenes[c].hotSpots.push(i)}return(a===d||e.scene==a)&&(le(i),X&&re(i)),this},this.removeHotSpot=function(i,a){if(a===d||e.scene==a){if(!e.hotSpots)return!1;for(var c=0;c<e.hotSpots.length;c++)if(e.hotSpots[c].hasOwnProperty("id")&&e.hotSpots[c].id===i){for(var M=e.hotSpots[c].div;M.parentNode!=Lt;)M=M.parentNode;return Lt.removeChild(M),delete e.hotSpots[c].div,e.hotSpots.splice(c,1),!0}}else{if(!f.scenes.hasOwnProperty(a))return!1;if(!f.scenes[a].hasOwnProperty("hotSpots"))return!1;for(var x=0;x<f.scenes[a].hotSpots.length;x++)if(f.scenes[a].hotSpots[x].hasOwnProperty("id")&&f.scenes[a].hotSpots[x].id===i)return f.scenes[a].hotSpots.splice(x,1),!0}},this.resize=function(){et&&P()},this.isLoaded=function(){return X},this.isOrientationSupported=function(){return jt||!1},this.stopOrientation=function(){me()},this.startOrientation=function(){jt&&fe()},this.isOrientationActive=function(){return Boolean(It)},this.on=function(i,a){return ht[i]=ht[i]||[],ht[i].push(a),this},this.off=function(i,a){if(!i)return ht={},this;if(a){var c=ht[i].indexOf(a);c>=0&&ht[i].splice(c,1),0==ht[i].length&&delete ht[i]}else delete ht[i];return this},this.destroy=function(){ee=!0,clearTimeout(dt),et&&et.destroy(),qt&&(T.removeEventListener("mousemove",St,!1),T.removeEventListener("mouseup",Ht,!1),t.removeEventListener("mozfullscreenchange",h,!1),t.removeEventListener("webkitfullscreenchange",h,!1),t.removeEventListener("msfullscreenchange",h,!1),t.removeEventListener("fullscreenchange",h,!1),Zt.removeEventListener("resize",P,!1),Zt.removeEventListener("orientationchange",P,!1),t.removeEventListener("keydown",Ot,!1),t.removeEventListener("keyup",nt,!1),t.removeEventListener("blur",wt,!1),T.removeEventListener("mouseleave",Ht,!1)),t.innerHTML="",t.classList.remove("pnlm-container")}}return{viewer:function(t,f){return new w(t,f)}}}(window,document)},81447:(Zt,T,d)=>{"use strict";d.d(T,{t:()=>t});var w=d(86889);class t{constructor(){(0,w.Z)(this,"lat",void 0),(0,w.Z)(this,"lon",void 0)}}},87753:(Zt,T,d)=>{"use strict";d.d(T,{H:()=>se});var w=d(86889),t=d(64537),f=d(80418),F=d(34511),U=(d(56239),d(52633),d(60656)),v=d(32607),o=d(13987),ot=d(56707),rt=d(88692),tt=d(20092),I=d(1379),Ft=d(9638),X=d(88659),A=d(83331),st=d(39665),qt=d(18033),Ct=d(56558),bt=d(2940),R=d(99482),Gt=d(75738),It=d(81418);const zt=["container"];function dt(s,E){if(1&s&&(t.TgZ(0,"table",6)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&s){const r=t.oxw();t.xp6(12),t.Oqu(r.postionView.viewerGetYaw),t.xp6(2),t.Oqu(r.postionView.viewerGetPitch),t.xp6(2),t.Oqu(r.postionView.clickGetYaw),t.xp6(2),t.Oqu(r.postionView.clickGetPitch)}}function Et(s,E){if(1&s){const r=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function C(s,E){if(1&s){const r=t.EpF();t.TgZ(0,"mat-icon",49),t.NdJ("click",function(){t.CHM(r);const l=t.oxw(2);return t.KtG(l.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function Z(s,E){if(1&s){const r=t.EpF();t.TgZ(0,"mat-icon",49),t.NdJ("click",function(){t.CHM(r);const l=t.oxw(2);return t.KtG(l.dataDetailModel.description="")}),t._uU(1,"close"),t.qZA()}}function z(s,E){if(1&s){const r=t.EpF();t.TgZ(0,"mat-icon",50),t.NdJ("click",function(){t.CHM(r);const l=t.oxw(2);return t.KtG(l.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function ht(s,E){if(1&s&&(t._UZ(0,"img",51),t.ALo(1,"cmsthumbnail")),2&s){const r=t.oxw(2);t.s9C("src",t.lcZ(1,1,r.dataDetailModel.panorama),t.LSH)}}function $(s,E){if(1&s){const r=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){t.CHM(r);const l=t.oxw(2);return t.KtG(l.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function $t(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function Kt(s,E){if(1&s&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&s){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.sceneId||"N/A"," ")}}function te(s,E){if(1&s){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",55),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw().$implicit;return t.KtG(g.sceneId=l)}),t.qZA()(),t.BQk()}if(2&s){const r=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",r.sceneId)}}function ee(s,E){if(1&s&&(t.TgZ(0,"mat-cell"),t.YNc(1,Kt,3,1,"ng-container",52),t.YNc(2,te,3,2,"ng-container",52),t.qZA()),2&s){const r=E.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!r.guid||r.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&r.guid&&r.guid===h.editHotspot.guid)}}function kt(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function xt(s,E){if(1&s&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&s){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.pitch||"N/A"," ")}}function Lt(s,E){if(1&s){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",56),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw().$implicit;return t.KtG(g.pitch=l)}),t.qZA()(),t.BQk()}if(2&s){const r=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",r.pitch)}}function Rt(s,E){if(1&s&&(t.TgZ(0,"mat-cell"),t.YNc(1,xt,3,1,"ng-container",52),t.YNc(2,Lt,3,2,"ng-container",52),t.qZA()),2&s){const r=E.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!r.guid||r.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&r.guid&&r.guid===h.editHotspot.guid)}}function Jt(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function b(s,E){if(1&s&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&s){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.yaw||"N/A"," ")}}function Wt(s,E){if(1&s){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",58),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw().$implicit;return t.KtG(g.yaw=l)}),t.qZA()(),t.BQk()}if(2&s){const r=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",r.yaw)}}function k(s,E){if(1&s&&(t.TgZ(0,"mat-cell"),t.YNc(1,b,3,1,"ng-container",52),t.YNc(2,Wt,3,2,"ng-container",52),t.qZA()),2&s){const r=E.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!r.guid||r.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&r.guid&&r.guid===h.editHotspot.guid)}}function jt(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function _(s,E){if(1&s&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&s){const r=t.oxw().$implicit;t.xp6(2),t.Oqu(r.type)}}function m(s,E){if(1&s){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"mat-select",59),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw().$implicit;return t.KtG(g.type=l)}),t.TgZ(3,"mat-option",60),t._uU(4,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&s){const r=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",r.type),t.xp6(1),t.Q6J("value","info")}}function Y(s,E){if(1&s&&(t.TgZ(0,"mat-cell"),t.YNc(1,_,3,1,"ng-container",52),t.YNc(2,m,5,3,"ng-container",52),t.qZA()),2&s){const r=E.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!r.guid||r.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&r.guid&&r.guid===h.editHotspot.guid)}}function S(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function J(s,E){if(1&s&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&s){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.targetYaw||"N/A"," ")}}function p(s,E){if(1&s){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",61),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw().$implicit;return t.KtG(g.targetYaw=l)}),t.qZA()(),t.BQk()}if(2&s){const r=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",r.targetYaw)}}function B(s,E){if(1&s&&(t.TgZ(0,"mat-cell"),t.YNc(1,J,3,1,"ng-container",52),t.YNc(2,p,3,2,"ng-container",52),t.qZA()),2&s){const r=E.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!r.guid||r.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&r.guid&&r.guid===h.editHotspot.guid)}}function H(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function G(s,E){if(1&s&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&s){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.targetPitch||"N/A"," ")}}function Q(s,E){if(1&s){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",62),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw().$implicit;return t.KtG(g.targetPitch=l)}),t.qZA()(),t.BQk()}if(2&s){const r=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",r.targetPitch)}}function Dt(s,E){if(1&s&&(t.TgZ(0,"mat-cell"),t.YNc(1,G,3,1,"ng-container",52),t.YNc(2,Q,3,2,"ng-container",52),t.qZA()),2&s){const r=E.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!r.guid||r.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&r.guid&&r.guid===h.editHotspot.guid)}}function lt(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function St(s,E){if(1&s&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&s){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.text||"N/A"," ")}}function Ht(s,E){if(1&s){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",63),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw().$implicit;return t.KtG(g.text=l)}),t.qZA()(),t.BQk()}if(2&s){const r=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",r.text)}}function Nt(s,E){if(1&s&&(t.TgZ(0,"mat-cell"),t.YNc(1,St,3,1,"ng-container",52),t.YNc(2,Ht,3,2,"ng-container",52),t.qZA()),2&s){const r=E.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!r.guid||r.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&r.guid&&r.guid===h.editHotspot.guid)}}function yt(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function _t(s,E){if(1&s&&(t.ynx(0),t.TgZ(1,"p",64),t._uU(2),t.qZA(),t.BQk()),2&s){const r=t.oxw().$implicit;t.xp6(2),t.hij("",r.url||"N/A"," ")}}function pt(s,E){if(1&s){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",65),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw().$implicit;return t.KtG(g.url=l)}),t.qZA()(),t.BQk()}if(2&s){const r=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",r.url)}}function ft(s,E){if(1&s&&(t.TgZ(0,"mat-cell"),t.YNc(1,_t,3,1,"ng-container",52),t.YNc(2,pt,3,2,"ng-container",52),t.qZA()),2&s){const r=E.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!r.guid||r.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&r.guid&&r.guid===h.editHotspot.guid)}}function Mt(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function ut(s,E){if(1&s){const r=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",67),t.NdJ("click",function(){t.CHM(r);const l=t.oxw().$implicit,g=t.oxw(2);return t.KtG(g.editROw(l))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",67),t.NdJ("click",function(){t.CHM(r);const l=t.oxw().$implicit,g=t.oxw(2);return t.KtG(g.removeROw(l))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function at(s,E){if(1&s){const r=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(r);const l=t.oxw(4);return t.KtG(l.onActionPannellumClickLastPoint())}),t._uU(1,"\u062b\u0628\u062a \u0646\u0642\u0637\u0647"),t.qZA()}if(2&s){const r=t.oxw(4);t.Q6J("disabled",r.editdisabled)}}function At(s,E){if(1&s){const r=t.EpF();t.ynx(0),t.TgZ(1,"button",68),t.NdJ("click",function(){t.CHM(r);const l=t.oxw(3);return t.KtG(l.updateEdit())}),t._uU(2,"Update"),t.qZA(),t.TgZ(3,"button",69),t.NdJ("click",function(){t.CHM(r);const l=t.oxw(3);return t.KtG(l.cancelEdit())}),t._uU(4,"Cancel"),t.qZA(),t.YNc(5,at,2,1,"button",70),t.BQk()}if(2&s){const r=t.oxw(3);t.xp6(1),t.Q6J("disabled",r.editdisabled),t.xp6(2),t.Q6J("disabled",r.editdisabled),t.xp6(2),t.Q6J("ngIf",r.postionView)}}function Ot(s,E){if(1&s&&(t.TgZ(0,"mat-cell")(1,"span",66),t.YNc(2,ut,5,0,"ng-container",52),t.YNc(3,At,6,3,"ng-container",52),t.qZA()()),2&s){const r=E.$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!h.editHotspot.guid||!r.guid||r.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&r.guid&&r.guid===h.editHotspot.guid)}}function wt(s,E){1&s&&t._UZ(0,"mat-header-row")}function nt(s,E){1&s&&t._UZ(0,"mat-row")}function ct(s,E){if(1&s){const r=t.EpF();t.TgZ(0,"mat-icon",49),t.NdJ("click",function(){t.CHM(r);const l=t.oxw(2);return t.KtG(l.dataDetailModel.configDataJson="")}),t._uU(1,"close"),t.qZA()}}function Tt(s,E){if(1&s){const r=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"mat-form-field",10)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",11,12),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw();return t.KtG(g.dataDetailModel.title=l)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,C,2,0,"mat-icon",13),t.TgZ(10,"mat-icon",14),t._uU(11,"mode_edit"),t.qZA()(),t.TgZ(12,"mat-form-field",10)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",15,16),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw();return t.KtG(g.dataDetailModel.description=l)}),t.ALo(18,"translate"),t.qZA(),t.YNc(19,Z,2,0,"mat-icon",13),t.TgZ(20,"mat-icon",14),t._uU(21,"mode_edit"),t.qZA()(),t.TgZ(22,"mat-form-field",17)(23,"input",18,19),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw();return t.KtG(g.dataDetailModel.linkFileId=l)})("click",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.fileManagerOpenFormReport=!0)}),t.ALo(25,"translate"),t.qZA(),t.YNc(26,z,2,0,"mat-icon",20),t.TgZ(27,"mat-icon",21),t.NdJ("click",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.fileManagerOpenFormReport=!0)}),t._uU(28,"mode_edit"),t.qZA()(),t.TgZ(29,"cms-file-manager",22),t.NdJ("itemSelected",function(l){t.CHM(r);const g=t.oxw();return t.KtG(g.onActionFileSelect(l))})("openFormChange",function(l){t.CHM(r);const g=t.oxw();return t.KtG(g.fileManagerOpenFormReport=l)}),t.qZA(),t.TgZ(30,"a",23),t.ALo(31,"cmsthumbnail"),t.YNc(32,ht,2,3,"img",24),t.qZA(),t._UZ(33,"hr"),t.TgZ(34,"h5"),t._uU(35,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u062a\u0648\u0631"),t.qZA(),t.TgZ(36,"p"),t._uU(37,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(38,"div",25)(39,"div",26),t.YNc(40,$,3,3,"button",27),t.qZA(),t.TgZ(41,"mat-table",28,29),t.ynx(43,30),t.YNc(44,$t,2,0,"mat-header-cell",31),t.YNc(45,ee,3,2,"mat-cell",32),t.BQk(),t.ynx(46,33),t.YNc(47,kt,2,0,"mat-header-cell",31),t.YNc(48,Rt,3,2,"mat-cell",32),t.BQk(),t.ynx(49,34),t.YNc(50,Jt,2,0,"mat-header-cell",31),t.YNc(51,k,3,2,"mat-cell",32),t.BQk(),t.ynx(52,35),t.YNc(53,jt,2,0,"mat-header-cell",31),t.YNc(54,Y,3,2,"mat-cell",32),t.BQk(),t.ynx(55,36),t.YNc(56,S,2,0,"mat-header-cell",31),t.YNc(57,B,3,2,"mat-cell",32),t.BQk(),t.ynx(58,37),t.YNc(59,H,2,0,"mat-header-cell",31),t.YNc(60,Dt,3,2,"mat-cell",32),t.BQk(),t.ynx(61,38),t.YNc(62,lt,2,0,"mat-header-cell",31),t.YNc(63,Nt,3,2,"mat-cell",32),t.BQk(),t.ynx(64,39),t.YNc(65,yt,2,0,"mat-header-cell",31),t.YNc(66,ft,3,2,"mat-cell",32),t.BQk(),t.ynx(67,40),t.YNc(68,Mt,2,0,"mat-header-cell",31),t.YNc(69,Ot,4,2,"mat-cell",32),t.BQk(),t.YNc(70,wt,1,0,"mat-header-row",41),t.YNc(71,nt,1,0,"mat-row",42),t.qZA()(),t.TgZ(72,"mat-form-field",43)(73,"mat-label"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"input",44,16),t.NdJ("ngModelChange",function(l){t.CHM(r);const g=t.oxw();return t.KtG(g.dataDetailModel.configDataJson=l)}),t.ALo(78,"translate"),t.qZA(),t.YNc(79,ct,2,0,"mat-icon",13),t.TgZ(80,"mat-icon",14),t._uU(81,"mode_edit"),t.qZA()(),t.TgZ(82,"div",26)(83,"button",45),t.NdJ("click",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.onActionSubmitView360())}),t._UZ(84,"i",46),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.TgZ(87,"button",47),t.NdJ("click",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.onActionCancellView360())}),t._UZ(88,"i",48),t._uU(89),t.ALo(90,"translate"),t.qZA()(),t._UZ(91,"br"),t.qZA()()}if(2&s){const r=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,32,"TITLE.Photography_Place")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,34,"TITLE.Photography_Place")),t.Q6J("ngModel",r.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",r.dataDetailModel.title),t.xp6(5),t.Oqu(t.lcZ(15,36,"TITLE.DESCRIPTION")),t.xp6(2),t.s9C("placeholder",t.lcZ(18,38,"TITLE.DESCRIPTION")),t.Q6J("ngModel",r.dataDetailModel.description),t.xp6(3),t.Q6J("ngIf",r.dataDetailModel.description),t.xp6(4),t.s9C("placeholder",t.lcZ(25,40,"TITLE.View_360_File_ID")),t.Q6J("ngModel",r.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",r.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",r.appLanguage)("isPopup",!0)("openForm",r.fileManagerOpenFormReport)("tree",r.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",r.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(31,42,r.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==r.dataDetailModel||null==r.dataDetailModel.panorama?null:r.dataDetailModel.panorama.length)>0),t.xp6(8),t.Q6J("ngIf",r.postionView),t.xp6(1),t.Q6J("dataSource",r.tableHotSpotdataSource),t.xp6(29),t.Q6J("matHeaderRowDef",r.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",r.tableHotspotDisplayedColumns),t.xp6(3),t.Oqu(t.lcZ(75,44,"TITLE.configDataJson")),t.xp6(2),t.s9C("placeholder",t.lcZ(78,46,"TITLE.configDataJson")),t.Q6J("ngModel",r.dataDetailModel.configDataJson),t.xp6(3),t.Q6J("ngIf",r.dataDetailModel.configDataJson),t.xp6(6),t.hij(" ",t.lcZ(86,48,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(90,50,"ACTION.CANCEL")," ")}}function gt(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function mt(s,E){if(1&s&&t._UZ(0,"img",51),2&s){const r=t.oxw(2).$implicit;t.s9C("src",r.panorama,t.LSH)}}function P(s,E){if(1&s&&(t.ynx(0),t.TgZ(1,"a",23),t.YNc(2,mt,1,1,"img",24),t.qZA(),t.BQk()),2&s){const r=t.oxw().$implicit;t.xp6(1),t.s9C("href",r.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==r||null==r.panorama?null:r.panorama.length)>0)}}function it(s,E){if(1&s&&(t.TgZ(0,"mat-cell"),t.YNc(1,P,3,2,"ng-container",52),t.qZA()),2&s){const r=E.$implicit;t.xp6(1),t.Q6J("ngIf",r.panorama)}}function Bt(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function W(s,E){if(1&s&&(t.ynx(0),t._uU(1),t.BQk()),2&s){const r=t.oxw().$implicit;t.xp6(1),t.hij(" ",r.title," ")}}function q(s,E){if(1&s&&(t.TgZ(0,"mat-cell"),t.YNc(1,W,2,1,"ng-container",52),t.qZA()),2&s){const r=E.$implicit;t.xp6(1),t.Q6J("ngIf",r.title)}}function O(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&s&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.DESCRIPTION")," "))}function ce(s,E){if(1&s&&(t.ynx(0),t._uU(1),t.BQk()),2&s){const r=t.oxw().$implicit;t.xp6(1),t.hij(" ",r.description," ")}}function ne(s,E){if(1&s&&(t.TgZ(0,"mat-cell"),t.YNc(1,ce,2,1,"ng-container",52),t.qZA()),2&s){const r=E.$implicit;t.xp6(1),t.Q6J("ngIf",r.description)}}function _e(s,E){1&s&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&s&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function ue(s,E){if(1&s){const r=t.EpF();t.TgZ(0,"mat-cell",78)(1,"small")(2,"mat-icon",79),t.NdJ("click",function(){const g=t.CHM(r).renderIndex,n=t.oxw(2);return t.KtG(n.onActionOptionEditView360(g))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",80),t.NdJ("click",function(){const g=t.CHM(r).renderIndex,n=t.oxw(2);return t.KtG(n.onActionOptionRemoveView360(g))}),t._uU(7,"delete"),t.qZA()()()}}function le(s,E){1&s&&t._UZ(0,"mat-header-row")}function de(s,E){1&s&&t._UZ(0,"mat-row")}function pe(s,E){if(1&s&&(t.TgZ(0,"div",8)(1,"mat-table",72),t.ynx(2,73),t.YNc(3,gt,3,3,"mat-header-cell",31),t.YNc(4,it,2,1,"mat-cell",32),t.BQk(),t.ynx(5,74),t.YNc(6,Bt,3,3,"mat-header-cell",31),t.YNc(7,q,2,1,"mat-cell",32),t.BQk(),t.ynx(8,75),t.YNc(9,O,3,3,"mat-header-cell",31),t.YNc(10,ne,2,1,"mat-cell",32),t.BQk(),t.ynx(11,40),t.YNc(12,_e,4,6,"mat-header-cell",31),t.YNc(13,ue,8,0,"mat-cell",76),t.BQk(),t.YNc(14,le,1,0,"mat-header-row",77),t.YNc(15,de,1,0,"mat-row",42),t.qZA()()),2&s){const r=t.oxw();t.xp6(1),t.Q6J("dataSource",r.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",r.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.tabledisplayedColumns)}}class re{constructor(){(0,w.Z)(this,"viewerGetYaw",void 0),(0,w.Z)(this,"viewerGetPitch",void 0),(0,w.Z)(this,"clickGetYaw",void 0),(0,w.Z)(this,"clickGetPitch",void 0)}}let se=(()=>{class s{constructor(r,h,l){(0,w.Z)(this,"cmsToastrService",void 0),(0,w.Z)(this,"publicHelper",void 0),(0,w.Z)(this,"translate",void 0),(0,w.Z)(this,"id",++s.nextId),(0,w.Z)(this,"privateDataModel",[]),(0,w.Z)(this,"dataDetailModel",new F.zK_),(0,w.Z)(this,"dataModelChange",new t.vpe),(0,w.Z)(this,"formInfo",new F.LEF),(0,w.Z)(this,"loading",new U.O),(0,w.Z)(this,"loadingOption",new U.O),(0,w.Z)(this,"tabledataSource",new f.by),(0,w.Z)(this,"tableHotSpotdataSource",new f.by),(0,w.Z)(this,"tabledisplayedColumns",["panorama","Title","Description","Action"]),(0,w.Z)(this,"tableHotspotDisplayedColumns",["sceneId","type","text","url","pitch","yaw","Action"]),(0,w.Z)(this,"selectFileTypeReport",["jpeg","jpg"]),(0,w.Z)(this,"fileManagerTree",void 0),(0,w.Z)(this,"appLanguage","fa"),(0,w.Z)(this,"showAddView360",!1),(0,w.Z)(this,"fileManagerOpenFormReport",!1),(0,w.Z)(this,"container",void 0),(0,w.Z)(this,"viewer",void 0),(0,w.Z)(this,"options",void 0),(0,w.Z)(this,"postionView",void 0),(0,w.Z)(this,"selectIndex",-1),(0,w.Z)(this,"editHotspot",void 0),(0,w.Z)(this,"oldHotspot",void 0),(0,w.Z)(this,"editdisabled",void 0),this.cmsToastrService=r,this.publicHelper=h,this.translate=l,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}set dataModel(r){r||(r=[]),this.privateDataModel=r,this.privateDataModel.forEach(h=>{h.hotSpots||(h.hotSpots=[]),h.hotSpots.forEach(l=>{l.guid=this.getGuid()})}),this.tabledataSource.data=this.privateDataModel,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Edit")}ngAfterViewInit(){this.container.nativeElement.style.display="none"}getGuid(){return Math.floor(1e3*Math.random())+""}actionPannellumImageLoad(r,h){const l={type:"equirectangular",panorama:r,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};h&&h.length>0&&(l.hotSpots=h);const g=Object.assign({},l,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,g),this.container.nativeElement.style.display="block"}actionPrivateDataModelOptimaze(){const r=[];this.privateDataModel||(this.privateDataModel=[]),this.privateDataModel.forEach(h=>{h.hotSpots||(h.hotSpots=[]),h.hotSpots.forEach(l=>{l.type&&l.type.length>0&&r.push(l)}),h.hotSpots=r})}onActionPannellumClick(r){if(!this.viewer)return;this.postionView=new re,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const h=this.viewer.mouseEventToCoords(r);!h||0==h.length||(this.postionView.clickGetYaw=h[1],this.postionView.clickGetPitch=h[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(r){r&&r.id&&0!==r.id?(this.dataDetailModel.linkFileId=r.id,this.dataDetailModel.panorama=r.downloadLinksrc,this.dataDetailModel.preview=r.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.privateDataModel||(this.privateDataModel=[]),this.selectIndex>=0?this.privateDataModel[this.selectIndex]=this.dataDetailModel:this.privateDataModel.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new F.zK_,this.showAddView360=!this.showAddView360}onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new F.zK_),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new F.aCC;const r=new F.aCC;r.type="info",r.guid=this.getGuid(),this.dataDetailModel.hotSpots.push(r),this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots,this.editROw(r),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(r){r<0||!this.privateDataModel||0===this.privateDataModel.length||(this.privateDataModel.splice(r,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}onActionOptionEditView360(r){r<0||!this.privateDataModel||0===this.privateDataModel.length||(this.dataDetailModel=this.privateDataModel[r],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new F.aCC,this.editHotspot=new F.aCC,this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots,this.selectIndex=r,this.showAddView360=!this.showAddView360)}editROw(r){this.editHotspot=r&&r.guid?r:new F.aCC,this.oldHotspot={...this.editHotspot}}removeROw(r){const h=this.dataDetailModel.hotSpots.findIndex(l=>l.guid==r.guid);h>=0&&(this.dataDetailModel.hotSpots.splice(h,1),this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots)}updateEdit(){this.editdisabled=!0;const r=this.dataDetailModel.hotSpots.findIndex(h=>h.guid==this.oldHotspot.guid);r>=0&&(this.dataDetailModel.hotSpots[r]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new F.aCC,this.editHotspot=new F.aCC}cancelEdit(){this.editHotspot=new F.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots)}}return(0,w.Z)(s,"nextId",0),(0,w.Z)(s,"\u0275fac",function(r){return new(r||s)(t.Y36(v.e),t.Y36(o.i),t.Y36(ot.sK))}),(0,w.Z)(s,"\u0275cmp",t.Xpm({type:s,selectors:[["app-cms-360-image-list"]],viewQuery:function(r,h){if(1&r&&t.Gf(zt,5),2&r){let l;t.iGM(l=t.CRH())&&(h.container=l.first)}},inputs:{dataModel:"dataModel"},outputs:{dataModelChange:"dataModelChange"},decls:8,vars:6,consts:[[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","grid-row-ltr-center",4,"ngIf"],["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px 0px;",3,"click",4,"ngIf"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],[1,"grid-row-ltr-center"],["type","button","mat-button","",1,"btn","btn-primary","font-size-h6","px-3","py-2",2,"margin","10px 0px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"ntk-full-width","mb-1"],["matInput","","name","dataDetailModel.title","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["matInput","","name","dataDetailModel.description","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","ngModelChange"],["Description",""],[1,"ntk-full-width"],["matInput","","name","dataDetailModel.linkFileId","type","text",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","sceneId"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","type"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"ntk-full-width","mb-1",2,"visibility","hidden"],["matInput","","name","dataDetailModel.configDataJson","type","text","minlength","0","maxlength","10000","required","",3,"ngModel","placeholder","ngModelChange"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[4,"ngIf"],[1,"text-truncate"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647","name","sceneId",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","placeholder","pitch","name","pitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr-center"],["matInput","","type","number","placeholder","yaw","name","yaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","type",3,"disabled","ngModel","ngModelChange"],[3,"value"],["matInput","","placeholder","targetYaw","name","targetYaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetPitch","name","targetPitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","text","name","text",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","mat-raised-button","","color","accent",1,"mb-2",3,"disabled","click"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","Description"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red",3,"click"]],template:function(r,h){1&r&&(t.TgZ(0,"div",0,1),t.NdJ("click",function(g){return h.onActionPannellumClick(g)}),t.qZA(),t.YNc(2,dt,19,4,"table",2),t._UZ(3,"br"),t.YNc(4,Et,3,3,"button",3),t.YNc(5,Tt,92,52,"div",4),t._UZ(6,"app-progress-spinner",5),t.YNc(7,pe,16,3,"div",4)),2&r&&(t.Q6J("id",h.id),t.xp6(2),t.Q6J("ngIf",h.postionView),t.xp6(2),t.Q6J("ngIf",!h.showAddView360),t.xp6(1),t.Q6J("ngIf",h.showAddView360),t.xp6(1),t.Q6J("options",h.loadingOption),t.xp6(1),t.Q6J("ngIf",!h.showAddView360))},dependencies:[rt.O5,tt.Fj,tt.wV,tt.JJ,tt.Q7,tt.wO,tt.nD,tt.On,I.ey,Ft.lW,X.KE,X.hX,X.R9,A.Hw,st.Nt,qt.gD,Ct.YE,f.BZ,f.fO,f.as,f.w1,f.Dz,f.nj,f.ge,f.ev,f.XQ,f.Gk,bt.gM,R.HG,Gt.O,ot.X$,It.v],encapsulation:2})),s})()},24014:(Zt,T,d)=>{"use strict";d.d(T,{g:()=>h});var w=d(86889),t=d(64537),f=d(80418),F=d(34511),U=(d(56239),d(52633),d(60656)),v=d(32607),o=d(13987),ot=d(56707),rt=d(88692),tt=d(20092),I=d(1379),Ft=d(9638),X=d(88659),A=d(83331),st=d(39665),qt=d(18033),Ct=d(56558),bt=d(2940),R=d(99482),Gt=d(75738),It=d(81418);const zt=["container"];function dt(l,g){if(1&l&&(t.TgZ(0,"table",7)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&l){const n=t.oxw();t.xp6(12),t.Oqu(n.postionView.viewerGetYaw),t.xp6(2),t.Oqu(n.postionView.viewerGetPitch),t.xp6(2),t.Oqu(n.postionView.clickGetYaw),t.xp6(2),t.Oqu(n.postionView.clickGetPitch)}}function Et(l,g){if(1&l){const n=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(n);const L=t.oxw();return t.KtG(L.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function C(l,g){if(1&l){const n=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(n);const L=t.oxw();return t.KtG(L.onActionImportFile360View())}),t._uU(1," \u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u06a9\u0633 \u0647\u0627\u06cc 360\n"),t.qZA()}}function Z(l,g){if(1&l){const n=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){t.CHM(n);const L=t.oxw();return t.KtG(L.actionPannellumTourLoad())}),t._uU(1," \u0646\u0645\u0627\u06cc\u0634 \u062a\u0648\u0631\n"),t.qZA()}}function z(l,g){if(1&l){const n=t.EpF();t.TgZ(0,"mat-icon",47),t.NdJ("click",function(){t.CHM(n);const L=t.oxw(2);return t.KtG(L.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function ht(l,g){if(1&l){const n=t.EpF();t.TgZ(0,"mat-icon",48),t.NdJ("click",function(){t.CHM(n);const L=t.oxw(2);return t.KtG(L.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function $(l,g){if(1&l&&(t._UZ(0,"img",49),t.ALo(1,"cmsthumbnail")),2&l){const n=t.oxw(2);t.s9C("src",t.lcZ(1,1,n.dataDetailModel.panorama),t.LSH)}}function $t(l,g){if(1&l){const n=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(n);const L=t.oxw(2);return t.KtG(L.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function Kt(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function te(l,g){if(1&l&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&l){const n=t.oxw().$implicit;t.xp6(2),t.Oqu(n.type)}}function ee(l,g){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"mat-select",53),t.NdJ("ngModelChange",function(L){t.CHM(n);const j=t.oxw().$implicit;return t.KtG(j.type=L)}),t.TgZ(3,"mat-option",54),t._uU(4,"\u0635\u062d\u0646\u0647"),t.qZA(),t.TgZ(5,"mat-option",54),t._uU(6,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&l){const n=t.oxw().$implicit,u=t.oxw(2);t.xp6(2),t.Q6J("disabled",u.editdisabled)("ngModel",n.type),t.xp6(1),t.Q6J("value","scene"),t.xp6(2),t.Q6J("value","info")}}function kt(l,g){if(1&l&&(t.TgZ(0,"mat-cell"),t.YNc(1,te,3,1,"ng-container",50),t.YNc(2,ee,7,4,"ng-container",50),t.qZA()),2&l){const n=g.$implicit,u=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!u.editHotspot.guid||!n.guid||n.guid!==u.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",u.editHotspot.guid&&n.guid&&n.guid===u.editHotspot.guid)}}function xt(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function Lt(l,g){if(1&l&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&l){const n=t.oxw().$implicit;t.xp6(2),t.hij("",n.sceneId||"N/A"," ")}}function Rt(l,g){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",56),t.NdJ("ngModelChange",function(L){t.CHM(n);const j=t.oxw().$implicit;return t.KtG(j.sceneId=L)}),t.qZA()(),t.BQk()}if(2&l){const n=t.oxw().$implicit,u=t.oxw(2);t.xp6(2),t.Q6J("disabled",u.editdisabled)("ngModel",n.sceneId)}}function Jt(l,g){if(1&l&&(t.TgZ(0,"mat-cell"),t.YNc(1,Lt,3,1,"ng-container",50),t.YNc(2,Rt,3,2,"ng-container",50),t.qZA()),2&l){const n=g.$implicit,u=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!u.editHotspot.guid||!n.guid||n.guid!==u.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",u.editHotspot.guid&&n.guid&&n.guid===u.editHotspot.guid&&"scene"===n.type)}}function b(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function Wt(l,g){if(1&l&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&l){const n=t.oxw().$implicit;t.xp6(2),t.Oqu(n.sceneId)}}function k(l,g){if(1&l&&(t.TgZ(0,"mat-option",54),t._uU(1),t.qZA()),2&l){const n=g.$implicit;t.Q6J("value",n.linkFileId),t.xp6(1),t.Oqu(n.title)}}function jt(l,g){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"mat-select",57),t.NdJ("ngModelChange",function(L){t.CHM(n);const j=t.oxw().$implicit;return t.KtG(j.sceneId=L)}),t.YNc(3,k,2,2,"mat-option",58),t.qZA()(),t.BQk()}if(2&l){const n=t.oxw().$implicit,u=t.oxw(2);t.xp6(2),t.Q6J("disabled",u.editdisabled)("ngModel",n.sceneId),t.xp6(1),t.Q6J("ngForOf",u.scenesList)}}function _(l,g){if(1&l&&(t.TgZ(0,"mat-cell"),t.YNc(1,Wt,3,1,"ng-container",50),t.YNc(2,jt,4,3,"ng-container",50),t.qZA()),2&l){const n=g.$implicit,u=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!u.editHotspot.guid||!n.guid||n.guid!==u.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",u.editHotspot.guid&&n.guid&&n.guid===u.editHotspot.guid&&"scene"===n.type)}}function m(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function Y(l,g){if(1&l&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&l){const n=t.oxw().$implicit;t.xp6(2),t.hij("",n.pitch||"N/A"," ")}}function S(l,g){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",59),t.NdJ("ngModelChange",function(L){t.CHM(n);const j=t.oxw().$implicit;return t.KtG(j.pitch=L)}),t.qZA()(),t.BQk()}if(2&l){const n=t.oxw().$implicit,u=t.oxw(2);t.xp6(2),t.Q6J("disabled",u.editdisabled)("ngModel",n.pitch)}}function J(l,g){if(1&l&&(t.TgZ(0,"mat-cell"),t.YNc(1,Y,3,1,"ng-container",50),t.YNc(2,S,3,2,"ng-container",50),t.qZA()),2&l){const n=g.$implicit,u=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!u.editHotspot.guid||!n.guid||n.guid!==u.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",u.editHotspot.guid&&n.guid&&n.guid===u.editHotspot.guid)}}function p(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function B(l,g){if(1&l&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&l){const n=t.oxw().$implicit;t.xp6(2),t.hij("",n.yaw||"N/A"," ")}}function H(l,g){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",60),t.NdJ("ngModelChange",function(L){t.CHM(n);const j=t.oxw().$implicit;return t.KtG(j.yaw=L)}),t.qZA()(),t.BQk()}if(2&l){const n=t.oxw().$implicit,u=t.oxw(2);t.xp6(2),t.Q6J("disabled",u.editdisabled)("ngModel",n.yaw)}}function G(l,g){if(1&l&&(t.TgZ(0,"mat-cell"),t.YNc(1,B,3,1,"ng-container",50),t.YNc(2,H,3,2,"ng-container",50),t.qZA()),2&l){const n=g.$implicit,u=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!u.editHotspot.guid||!n.guid||n.guid!==u.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",u.editHotspot.guid&&n.guid&&n.guid===u.editHotspot.guid)}}function Q(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function Dt(l,g){if(1&l&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&l){const n=t.oxw().$implicit;t.xp6(2),t.hij("",n.targetYaw||"N/A"," ")}}function lt(l,g){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",61),t.NdJ("ngModelChange",function(L){t.CHM(n);const j=t.oxw().$implicit;return t.KtG(j.targetYaw=L)}),t.qZA()(),t.BQk()}if(2&l){const n=t.oxw().$implicit,u=t.oxw(2);t.xp6(2),t.Q6J("disabled",u.editdisabled)("ngModel",n.targetYaw)}}function St(l,g){if(1&l&&(t.TgZ(0,"mat-cell"),t.YNc(1,Dt,3,1,"ng-container",50),t.YNc(2,lt,3,2,"ng-container",50),t.qZA()),2&l){const n=g.$implicit,u=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!u.editHotspot.guid||!n.guid||n.guid!==u.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",u.editHotspot.guid&&n.guid&&n.guid===u.editHotspot.guid)}}function Ht(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function Nt(l,g){if(1&l&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&l){const n=t.oxw().$implicit;t.xp6(2),t.hij("",n.targetPitch||"N/A"," ")}}function yt(l,g){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",62),t.NdJ("ngModelChange",function(L){t.CHM(n);const j=t.oxw().$implicit;return t.KtG(j.targetPitch=L)}),t.qZA()(),t.BQk()}if(2&l){const n=t.oxw().$implicit,u=t.oxw(2);t.xp6(2),t.Q6J("disabled",u.editdisabled)("ngModel",n.targetPitch)}}function _t(l,g){if(1&l&&(t.TgZ(0,"mat-cell"),t.YNc(1,Nt,3,1,"ng-container",50),t.YNc(2,yt,3,2,"ng-container",50),t.qZA()),2&l){const n=g.$implicit,u=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!u.editHotspot.guid||!n.guid||n.guid!==u.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",u.editHotspot.guid&&n.guid&&n.guid===u.editHotspot.guid)}}function pt(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function ft(l,g){if(1&l&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&l){const n=t.oxw().$implicit;t.xp6(2),t.hij("",n.text||"N/A"," ")}}function Mt(l,g){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",63),t.NdJ("ngModelChange",function(L){t.CHM(n);const j=t.oxw().$implicit;return t.KtG(j.text=L)}),t.qZA()(),t.BQk()}if(2&l){const n=t.oxw().$implicit,u=t.oxw(2);t.xp6(2),t.Q6J("disabled",u.editdisabled)("ngModel",n.text)}}function ut(l,g){if(1&l&&(t.TgZ(0,"mat-cell"),t.YNc(1,ft,3,1,"ng-container",50),t.YNc(2,Mt,3,2,"ng-container",50),t.qZA()),2&l){const n=g.$implicit,u=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!u.editHotspot.guid||!n.guid||n.guid!==u.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",u.editHotspot.guid&&n.guid&&n.guid===u.editHotspot.guid)}}function at(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function At(l,g){if(1&l&&(t.ynx(0),t.TgZ(1,"p",64),t._uU(2),t.qZA(),t.BQk()),2&l){const n=t.oxw().$implicit;t.xp6(2),t.hij("",n.url||"N/A"," ")}}function Ot(l,g){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",65),t.NdJ("ngModelChange",function(L){t.CHM(n);const j=t.oxw().$implicit;return t.KtG(j.url=L)}),t.qZA()(),t.BQk()}if(2&l){const n=t.oxw().$implicit,u=t.oxw(2);t.xp6(2),t.Q6J("disabled",u.editdisabled)("ngModel",n.url)}}function wt(l,g){if(1&l&&(t.TgZ(0,"mat-cell"),t.YNc(1,At,3,1,"ng-container",50),t.YNc(2,Ot,3,2,"ng-container",50),t.qZA()),2&l){const n=g.$implicit,u=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!u.editHotspot.guid||!n.guid||n.guid!==u.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",u.editHotspot.guid&&n.guid&&n.guid===u.editHotspot.guid)}}function nt(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function ct(l,g){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",67),t.NdJ("click",function(){t.CHM(n);const L=t.oxw().$implicit,j=t.oxw(2);return t.KtG(j.editROw(L))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",67),t.NdJ("click",function(){t.CHM(n);const L=t.oxw().$implicit,j=t.oxw(2);return t.KtG(j.removeROw(L))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function Tt(l,g){if(1&l){const n=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(n);const L=t.oxw(4);return t.KtG(L.onActionPannellumClickLastPoint())}),t._uU(1,"\u062b\u0628\u062a \u0646\u0642\u0637\u0647"),t.qZA()}if(2&l){const n=t.oxw(4);t.Q6J("disabled",n.editdisabled)}}function gt(l,g){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"button",68),t.NdJ("click",function(){t.CHM(n);const L=t.oxw(3);return t.KtG(L.updateEdit())}),t._uU(2,"Update"),t.qZA(),t.TgZ(3,"button",69),t.NdJ("click",function(){t.CHM(n);const L=t.oxw(3);return t.KtG(L.cancelEdit())}),t._uU(4,"Cancel"),t.qZA(),t.YNc(5,Tt,2,1,"button",70),t.BQk()}if(2&l){const n=t.oxw(3);t.xp6(1),t.Q6J("disabled",n.editdisabled),t.xp6(2),t.Q6J("disabled",n.editdisabled),t.xp6(2),t.Q6J("ngIf",n.postionView)}}function mt(l,g){if(1&l&&(t.TgZ(0,"mat-cell")(1,"span",66),t.YNc(2,ct,5,0,"ng-container",50),t.YNc(3,gt,6,3,"ng-container",50),t.qZA()()),2&l){const n=g.$implicit,u=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!u.editHotspot.guid||!n.guid||n.guid!==u.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",u.editHotspot.guid&&n.guid&&n.guid===u.editHotspot.guid)}}function P(l,g){1&l&&t._UZ(0,"mat-header-row")}function it(l,g){1&l&&t._UZ(0,"mat-row")}function Bt(l,g){if(1&l){const n=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"mat-form-field",11)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",12,13),t.NdJ("ngModelChange",function(L){t.CHM(n);const j=t.oxw();return t.KtG(j.dataDetailModel.title=L)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,z,2,0,"mat-icon",14),t.TgZ(10,"mat-icon",15),t._uU(11,"mode_edit"),t.qZA()(),t.TgZ(12,"mat-form-field",16)(13,"input",17,18),t.NdJ("ngModelChange",function(L){t.CHM(n);const j=t.oxw();return t.KtG(j.dataDetailModel.linkFileId=L)})("click",function(){t.CHM(n);const L=t.oxw();return t.KtG(L.fileManagerOpenFormReport=!0)}),t.ALo(15,"translate"),t.qZA(),t.YNc(16,ht,2,0,"mat-icon",19),t.TgZ(17,"mat-icon",20),t.NdJ("click",function(){t.CHM(n);const L=t.oxw();return t.KtG(L.fileManagerOpenFormReport=!0)}),t._uU(18,"mode_edit"),t.qZA()(),t.TgZ(19,"cms-file-manager",21),t.NdJ("itemSelected",function(L){t.CHM(n);const j=t.oxw();return t.KtG(j.onActionFileSelect(L))})("openFormChange",function(L){t.CHM(n);const j=t.oxw();return t.KtG(j.fileManagerOpenFormReport=L)}),t.qZA(),t.TgZ(20,"a",22),t.ALo(21,"cmsthumbnail"),t.YNc(22,$,2,3,"img",23),t.qZA(),t._UZ(23,"hr"),t.TgZ(24,"h5"),t._uU(25,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u062a\u0648\u0631"),t.qZA(),t.TgZ(26,"p"),t._uU(27,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(28,"div",24)(29,"div",25),t.YNc(30,$t,3,3,"button",26),t.qZA(),t.TgZ(31,"mat-table",27,28),t.ynx(33,29),t.YNc(34,Kt,2,0,"mat-header-cell",30),t.YNc(35,kt,3,2,"mat-cell",31),t.BQk(),t.ynx(36,32),t.YNc(37,xt,2,0,"mat-header-cell",30),t.YNc(38,Jt,3,2,"mat-cell",31),t.BQk(),t.ynx(39,33),t.YNc(40,b,2,0,"mat-header-cell",30),t.YNc(41,_,3,2,"mat-cell",31),t.BQk(),t.ynx(42,34),t.YNc(43,m,2,0,"mat-header-cell",30),t.YNc(44,J,3,2,"mat-cell",31),t.BQk(),t.ynx(45,35),t.YNc(46,p,2,0,"mat-header-cell",30),t.YNc(47,G,3,2,"mat-cell",31),t.BQk(),t.ynx(48,36),t.YNc(49,Q,2,0,"mat-header-cell",30),t.YNc(50,St,3,2,"mat-cell",31),t.BQk(),t.ynx(51,37),t.YNc(52,Ht,2,0,"mat-header-cell",30),t.YNc(53,_t,3,2,"mat-cell",31),t.BQk(),t.ynx(54,38),t.YNc(55,pt,2,0,"mat-header-cell",30),t.YNc(56,ut,3,2,"mat-cell",31),t.BQk(),t.ynx(57,39),t.YNc(58,at,2,0,"mat-header-cell",30),t.YNc(59,wt,3,2,"mat-cell",31),t.BQk(),t.ynx(60,40),t.YNc(61,nt,2,0,"mat-header-cell",30),t.YNc(62,mt,4,2,"mat-cell",31),t.BQk(),t.YNc(63,P,1,0,"mat-header-row",41),t.YNc(64,it,1,0,"mat-row",42),t.qZA()(),t.TgZ(65,"div",25)(66,"button",43),t.NdJ("click",function(){t.CHM(n);const L=t.oxw();return t.KtG(L.onActionSubmitView360())}),t._UZ(67,"i",44),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"button",45),t.NdJ("click",function(){t.CHM(n);const L=t.oxw();return t.KtG(L.onActionCancellView360())}),t._UZ(71,"i",46),t._uU(72),t.ALo(73,"translate"),t.qZA()(),t._UZ(74,"br"),t.qZA()()}if(2&l){const n=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,24,"TITLE.Photography_Place")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,26,"TITLE.Photography_Place")),t.Q6J("ngModel",n.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",n.dataDetailModel.title),t.xp6(4),t.s9C("placeholder",t.lcZ(15,28,"TITLE.View_360_File_ID")),t.Q6J("ngModel",n.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",n.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",n.appLanguage)("isPopup",!0)("openForm",n.fileManagerOpenFormReport)("tree",n.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",n.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(21,30,n.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==n.dataDetailModel||null==n.dataDetailModel.panorama?null:n.dataDetailModel.panorama.length)>0),t.xp6(8),t.Q6J("ngIf",n.postionView),t.xp6(1),t.Q6J("dataSource",n.tableHotSpotdataSource),t.xp6(32),t.Q6J("matHeaderRowDef",n.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.tableHotspotDisplayedColumns),t.xp6(4),t.hij(" ",t.lcZ(69,32,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(73,34,"ACTION.CANCEL")," ")}}function W(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function q(l,g){if(1&l&&t._UZ(0,"img",49),2&l){const n=t.oxw(2).$implicit;t.s9C("src",n.panorama,t.LSH)}}function O(l,g){if(1&l&&(t.ynx(0),t.TgZ(1,"a",22),t.YNc(2,q,1,1,"img",23),t.qZA(),t.BQk()),2&l){const n=t.oxw().$implicit;t.xp6(1),t.s9C("href",n.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==n||null==n.panorama?null:n.panorama.length)>0)}}function ce(l,g){if(1&l&&(t.TgZ(0,"mat-cell"),t.YNc(1,O,3,2,"ng-container",50),t.qZA()),2&l){const n=g.$implicit;t.xp6(1),t.Q6J("ngIf",n.panorama)}}function ne(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function _e(l,g){if(1&l&&(t.ynx(0),t._uU(1),t.BQk()),2&l){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.title," ")}}function ue(l,g){if(1&l&&(t.TgZ(0,"mat-cell"),t.YNc(1,_e,2,1,"ng-container",50),t.qZA()),2&l){const n=g.$implicit;t.xp6(1),t.Q6J("ngIf",n.title)}}function le(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1," \u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647 "),t.qZA())}function de(l,g){if(1&l&&(t.TgZ(0,"mat-cell"),t.ynx(1),t._uU(2),t.BQk(),t.qZA()),2&l){const n=g.$implicit;t.xp6(2),t.hij(" ",n.linkFileId," ")}}function pe(l,g){1&l&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&l&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function re(l,g){if(1&l){const n=t.EpF();t.TgZ(0,"mat-cell",78)(1,"small")(2,"mat-icon",79),t.NdJ("click",function(){const j=t.CHM(n).renderIndex,ae=t.oxw(2);return t.KtG(ae.onActionOptionEditView360(j))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",80),t.NdJ("click",function(){const j=t.CHM(n).renderIndex,ae=t.oxw(2);return t.KtG(ae.onActionOptionRemoveView360(j))}),t._uU(7,"delete"),t.qZA()()()}}function se(l,g){1&l&&t._UZ(0,"mat-header-row")}function s(l,g){1&l&&t._UZ(0,"mat-row")}function E(l,g){if(1&l&&(t.TgZ(0,"div",9)(1,"mat-table",72),t.ynx(2,73),t.YNc(3,W,3,3,"mat-header-cell",30),t.YNc(4,ce,2,1,"mat-cell",31),t.BQk(),t.ynx(5,74),t.YNc(6,ne,3,3,"mat-header-cell",30),t.YNc(7,ue,2,1,"mat-cell",31),t.BQk(),t.ynx(8,75),t.YNc(9,le,2,0,"mat-header-cell",30),t.YNc(10,de,3,1,"mat-cell",31),t.BQk(),t.ynx(11,40),t.YNc(12,pe,4,6,"mat-header-cell",30),t.YNc(13,re,8,0,"mat-cell",76),t.BQk(),t.YNc(14,se,1,0,"mat-header-row",77),t.YNc(15,s,1,0,"mat-row",42),t.qZA()()),2&l){const n=t.oxw();t.xp6(1),t.Q6J("dataSource",n.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",n.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.tabledisplayedColumns)}}class r{constructor(){(0,w.Z)(this,"viewerGetYaw",void 0),(0,w.Z)(this,"viewerGetPitch",void 0),(0,w.Z)(this,"clickGetYaw",void 0),(0,w.Z)(this,"clickGetPitch",void 0)}}let h=(()=>{class l{constructor(n,u,L){(0,w.Z)(this,"cmsToastrService",void 0),(0,w.Z)(this,"publicHelper",void 0),(0,w.Z)(this,"translate",void 0),(0,w.Z)(this,"id",++l.nextId),(0,w.Z)(this,"scenesList",[]),(0,w.Z)(this,"dataDetailModel",new F.$lU),(0,w.Z)(this,"privateDataModel",void 0),(0,w.Z)(this,"dataModelChange",new t.vpe),(0,w.Z)(this,"privateDataImageModel",void 0),(0,w.Z)(this,"formInfo",new F.LEF),(0,w.Z)(this,"loading",new U.O),(0,w.Z)(this,"loadingOption",new U.O),(0,w.Z)(this,"tabledataSource",new f.by),(0,w.Z)(this,"tableHotSpotdataSource",new f.by),(0,w.Z)(this,"tabledisplayedColumns",["linkFileId","panorama","Title","Action"]),(0,w.Z)(this,"tableHotspotDisplayedColumns",["sceneIdSelector","type","text","url","pitch","yaw","Action"]),(0,w.Z)(this,"selectFileTypeReport",["jpeg","jpg"]),(0,w.Z)(this,"fileManagerTree",void 0),(0,w.Z)(this,"appLanguage","fa"),(0,w.Z)(this,"showAddView360",!1),(0,w.Z)(this,"fileManagerOpenFormReport",!1),(0,w.Z)(this,"container",void 0),(0,w.Z)(this,"viewer",void 0),(0,w.Z)(this,"options",void 0),(0,w.Z)(this,"postionView",void 0),(0,w.Z)(this,"selectIndex",-1),(0,w.Z)(this,"editHotspot",void 0),(0,w.Z)(this,"oldHotspot",void 0),(0,w.Z)(this,"editdisabled",void 0),this.cmsToastrService=n,this.publicHelper=u,this.translate=L,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}getGuid(){return Math.floor(1e3*Math.random())+""}set dataModel(n){n||(n=new F.veq),n.Default||(n.Default=new F.vyA),n.scenes||(n.scenes=new Map),this.scenesList=[],Object.keys(n.scenes).map(u=>{n.scenes[u].guid=this.getGuid(),this.scenesList.push(n.scenes[u])}),this.scenesList.forEach(u=>{u.hotSpots||(u.hotSpots=[]),u.hotSpots.forEach(L=>{L.guid=this.getGuid()})}),this.privateDataModel=n,this.tabledataSource.data=this.scenesList,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}set dataImageModel(n){n||(n=[]),this.privateDataImageModel=n}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Edit")}ngAfterViewInit(){this.container.nativeElement.style.display="none"}actionPannellumImageLoad(n,u){const L={type:"equirectangular",panorama:n,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};u&&u.length>0&&(L.hotSpots=u);const j=Object.assign({},L,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,j),this.container.nativeElement.style.display="block"}actionPannellumTourLoad(){this.actionPrivateDataModelOptimaze();const n={};n.default=this.privateDataModel.Default,this.privateDataModel&&this.privateDataModel.scenes&&(n.scenes=this.privateDataModel.scenes);const u=Object.assign({},n,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,u),this.container.nativeElement.style.display="block"}onActionPannellumClick(n){if(!this.viewer)return;this.postionView=new r,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const u=this.viewer.mouseEventToCoords(n);!u||0==u.length||(this.postionView.clickGetYaw=u[1],this.postionView.clickGetPitch=u[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(n){n&&n.id&&0!==n.id?(this.dataDetailModel.linkFileId=n.id,this.dataDetailModel.panorama=n.downloadLinksrc,this.dataDetailModel.preview=n.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.scenesList||(this.scenesList=[]),this.selectIndex>=0?this.scenesList[this.selectIndex]=this.dataDetailModel:this.scenesList.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}actionPrivateDataModelOptimaze(){this.privateDataModel.Default||(this.privateDataModel.Default=new F.vyA),this.privateDataModel.scenes=new Map,this.scenesList||(this.scenesList=[]),this.scenesList.forEach(n=>{if(n.title&&n.title.length>0){const u=[];n.hotSpots||(n.hotSpots=[]),n.hotSpots.forEach(L=>{L.type&&L.type.length>0&&u.push(L)}),n.hotSpots=u,this.privateDataModel.scenes[n.linkFileId]=n,this.privateDataModel.scenes[n.linkFileId].hfov=110}}),(!this.privateDataModel.Default.firstScene||0==this.privateDataModel.Default.firstScene.length)&&(this.privateDataModel.scenes&&this.scenesList&&this.scenesList.length>0&&(this.privateDataModel.Default.firstScene=this.scenesList[0].linkFileId+""),this.privateDataModel.Default.sceneFadeDuration=1e3)}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new F.$lU,this.showAddView360=!this.showAddView360,this.tableHotSpotdataSource.data=[]}onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new F.$lU),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new F.aCC;const n=new F.aCC;n.guid=this.getGuid(),this.dataDetailModel.hotSpots.push(n),this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots,this.editROw(n),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(n){n<0||!this.scenesList||0===this.scenesList.length||(this.scenesList.splice(n,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}onActionOptionEditView360(n){n<0||!this.scenesList||0===this.scenesList.length||(this.dataDetailModel=this.scenesList[n],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new F.aCC,this.editHotspot=new F.aCC,this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots,this.selectIndex=n,this.showAddView360=!this.showAddView360)}editROw(n){this.editHotspot=n&&n.guid?n:new F.aCC,this.oldHotspot={...this.editHotspot}}removeROw(n){const u=this.dataDetailModel.hotSpots.findIndex(L=>L.guid==n.guid);u>=0&&(this.dataDetailModel.hotSpots.splice(u,1),this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots)}updateEdit(){this.editdisabled=!0;const n=this.dataDetailModel.hotSpots.findIndex(u=>u.guid==this.oldHotspot.guid);n>=0&&(this.dataDetailModel.hotSpots[n]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new F.aCC,this.editHotspot=new F.aCC}cancelEdit(){this.editHotspot=new F.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.dataDetailModel.hotSpots)}onActionImportFile360View(){this.privateDataImageModel&&this.privateDataImageModel.length>0&&(this.actionPrivateDataModelOptimaze(),this.privateDataImageModel.forEach(n=>{if(!this.privateDataModel.scenes[n.linkFileId]&&n.linkFileId>0){const u=new F.$lU;u.guid=this.getGuid(),u.linkFileId=n.linkFileId,u.title=n.title,u.hotSpots=n.hotSpots,u.panorama=n.panorama,u.preview=n.preview,u.hfov=110,this.privateDataModel.scenes[n.linkFileId]=u}}),this.dataModel=this.privateDataModel)}}return(0,w.Z)(l,"nextId",0),(0,w.Z)(l,"\u0275fac",function(n){return new(n||l)(t.Y36(v.e),t.Y36(o.i),t.Y36(ot.sK))}),(0,w.Z)(l,"\u0275cmp",t.Xpm({type:l,selectors:[["app-cms-360-tour-list"]],viewQuery:function(n,u){if(1&n&&t.Gf(zt,5),2&n){let L;t.iGM(L=t.CRH())&&(u.container=L.first)}},inputs:{dataModel:"dataModel",dataImageModel:"dataImageModel"},outputs:{dataModelChange:"dataModelChange"},decls:10,vars:8,consts:[[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","grid-row-ltr-center",4,"ngIf"],["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px;",3,"click",4,"ngIf"],["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px ",3,"click",4,"ngIf"],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],[1,"grid-row-ltr-center"],["type","button","mat-button","",1,"btn","btn-primary","font-size-h6","px-3","py-2",2,"margin","10px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"ntk-full-width","mb-1"],["matInput","","name","dataDetailModel.title","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],[1,"ntk-full-width"],["matInput","","name","dataDetailModel.linkFileId","type","text",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","type"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sceneId"],["matColumnDef","sceneIdSelector"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[4,"ngIf"],[1,"text-truncate","grid-row-ltr-center"],["appearance","outline",2,"width","100%"],["placeholder","Select","name","type",3,"disabled","ngModel","ngModelChange"],[3,"value"],[1,"text-truncate"],["matInput","","placeholder","sceneId","name","sceneId",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","sceneId",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","placeholder","pitch","name","pitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","placeholder","yaw","name","yaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetYaw","name","targetYaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetPitch","name","targetPitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","text","name","text",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","mat-raised-button","","color","accent",1,"mb-2",3,"disabled","click"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","linkFileId"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red",3,"click"]],template:function(n,u){1&n&&(t.TgZ(0,"div",0,1),t.NdJ("click",function(j){return u.onActionPannellumClick(j)}),t.qZA(),t.YNc(2,dt,19,4,"table",2),t._UZ(3,"br"),t.YNc(4,Et,3,3,"button",3),t.YNc(5,C,2,0,"button",4),t.YNc(6,Z,2,0,"button",4),t.YNc(7,Bt,75,36,"div",5),t._UZ(8,"app-progress-spinner",6),t.YNc(9,E,16,3,"div",5)),2&n&&(t.Q6J("id",u.id),t.xp6(2),t.Q6J("ngIf",u.postionView),t.xp6(2),t.Q6J("ngIf",!u.showAddView360),t.xp6(1),t.Q6J("ngIf",u.privateDataImageModel&&u.privateDataImageModel.length>0),t.xp6(1),t.Q6J("ngIf",u.privateDataModel&&u.privateDataModel&&u.privateDataModel.scenes&&u.scenesList&&u.scenesList.length>0),t.xp6(1),t.Q6J("ngIf",u.showAddView360),t.xp6(1),t.Q6J("options",u.loadingOption),t.xp6(1),t.Q6J("ngIf",!u.showAddView360))},dependencies:[rt.sg,rt.O5,tt.Fj,tt.wV,tt.JJ,tt.Q7,tt.wO,tt.nD,tt.On,I.ey,Ft.lW,X.KE,X.hX,X.R9,A.Hw,st.Nt,qt.gD,Ct.YE,f.BZ,f.fO,f.as,f.w1,f.Dz,f.nj,f.ge,f.ev,f.XQ,f.Gk,bt.gM,R.HG,Gt.O,ot.X$,It.v],encapsulation:2})),l})()},76609:(Zt,T,d)=>{"use strict";d.d(T,{D:()=>zt});var w=d(8239),t=d(86889),f=d(64537),F=d(20092),e=d(34511),et=d(57445),Ut=d(51927),vt=d(83151),U=d(42147),v=d(61528),o=d(27969),ot=d(60656),rt=d(56707),tt=d(88692),I=d(61637),Ft=d(1379),X=d(88659),A=d(83331),st=d(39665),qt=d(75738),Ct=d(81418);function bt(dt,Et){if(1&dt&&(f._UZ(0,"img",9),f.ALo(1,"cmsthumbnail")),2&dt){const C=f.oxw().$implicit;f.s9C("src",f.lcZ(1,1,C.linkImageIdSrc),f.LSH)}}function R(dt,Et){if(1&dt&&(f.TgZ(0,"mat-option",7),f.YNc(1,bt,2,3,"img",8),f.TgZ(2,"span"),f._uU(3),f.qZA()()),2&dt){const C=Et.$implicit,Z=f.oxw();f.Q6J("value",C)("disabled",Z.optionDisabled),f.xp6(1),f.Q6J("ngIf",C.linkImageIdSrc),f.xp6(2),f.Oqu(Z.displayOption(C))}}function Gt(dt,Et){if(1&dt){const C=f.EpF();f.TgZ(0,"mat-icon",10),f.NdJ("click",function(){f.CHM(C);const z=f.oxw();return f.KtG(z.onActionSelectClear())}),f._uU(1,"close"),f.qZA()}}const It=["*"];let zt=(()=>{class dt{constructor(C,Z,z,ht){(0,t.Z)(this,"coreEnumService",void 0),(0,t.Z)(this,"translate",void 0),(0,t.Z)(this,"cdr",void 0),(0,t.Z)(this,"categoryService",void 0),(0,t.Z)(this,"id",++dt.nextId),(0,t.Z)(this,"dataModelResult",new e.y$4),(0,t.Z)(this,"dataModelSelect",new e.Dp$),(0,t.Z)(this,"formControl",new F.NI),(0,t.Z)(this,"filteredOptions",void 0),(0,t.Z)(this,"optionDisabled",!1),(0,t.Z)(this,"optionSelectFirstItem",!1),(0,t.Z)(this,"optionPlaceholder",""),(0,t.Z)(this,"optionChange",new f.vpe),(0,t.Z)(this,"optionReload",()=>this.onActionReload()),(0,t.Z)(this,"loading",new ot.O),this.coreEnumService=C,this.translate=Z,this.cdr=z,this.categoryService=ht,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(C){this.onActionSelectForce(C)}get optionLoading(){return this.loading}set optionLoading(C){this.loading=C}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,Ut.O)(""),(0,vt.b)(1500),(0,U.x)(),(0,v.w)(C=>this.DataGetAll("string"==typeof C||"number"==typeof C?C:"")))}displayFn(C){return C&&C.virtual_Parent&&C.virtual_Parent.title.length>0&&C.virtual_Parent.virtual_Parent&&C.virtual_Parent.virtual_Parent.title.length>0&&C.virtual_Parent.virtual_Parent.virtual_Parent&&C.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?C.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+C.virtual_Parent.virtual_Parent.titleML+" > "+C.virtual_Parent.titleML+" > "+C.titleML:C&&C.virtual_Parent&&C.virtual_Parent.title.length>0&&C.virtual_Parent.virtual_Parent&&C.virtual_Parent.virtual_Parent.title.length>0?C.virtual_Parent.virtual_Parent.titleML+" > "+C.virtual_Parent.titleML+" > "+C.titleML:C&&C.virtual_Parent&&C.virtual_Parent.title.length>0?C.virtual_Parent.titleML+" > "+C.titleML:C?C.titleML:void 0}displayOption(C){return C&&C.virtual_Parent&&C.virtual_Parent.title.length>0&&C.virtual_Parent.virtual_Parent&&C.virtual_Parent.virtual_Parent.title.length>0&&C.virtual_Parent.virtual_Parent.virtual_Parent&&C.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?C.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+C.virtual_Parent.virtual_Parent.titleML+" > "+C.virtual_Parent.titleML+" > "+C.titleML:C&&C.virtual_Parent&&C.virtual_Parent.title.length>0&&C.virtual_Parent.virtual_Parent&&C.virtual_Parent.virtual_Parent.title.length>0?C.virtual_Parent.virtual_Parent.titleML+" > "+C.virtual_Parent.titleML+" > "+C.titleML:C&&C.virtual_Parent&&C.virtual_Parent.title.length>0?C.virtual_Parent.titleML+" > "+C.titleML:C?C.titleML:void 0}DataGetAll(C){var Z=this;return(0,w.Z)(function*(){const z=new e.Hay;if(z.rowPerPage=20,z.accessLoad=!0,C&&C.length>0){let $=new e.AO3;$=new e.AO3,$.propertyName="Symbol",$.value=C,$.searchType=e.b3P.Contains,$.clauseType=e.KT6.Or,z.filters.push($),$=new e.AO3,$.propertyName="Title",$.value=C,$.searchType=e.b3P.Contains,$.clauseType=e.KT6.Or,z.filters.push($),C&&"number"==typeof+C&&+C>0&&($=new e.AO3,$.propertyName="Id",$.value=C,$.searchType=e.b3P.Equal,$.clauseType=e.KT6.Or,z.filters.push($))}const ht=Z.constructor.name+"main";return Z.loading.Start(ht),yield(0,et.z)(Z.categoryService.ServiceGetAll(z)).then($=>(Z.dataModelResult=$,Z.optionSelectFirstItem&&(!Z.dataModelSelect||!Z.dataModelSelect.id||Z.dataModelSelect.id<=0)&&Z.dataModelResult.listItems.length>0&&(Z.optionSelectFirstItem=!1,setTimeout(()=>{Z.formControl.setValue(Z.dataModelResult.listItems[0])},1e3),Z.onActionSelect(Z.dataModelResult.listItems[0])),Z.loading.Stop(ht),$.listItems))})()}onActionSelect(C){this.optionDisabled||(this.dataModelSelect=C,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(C){return this.filteredOptions.pipe((0,o.U)(Z=>(Z.find(z=>z.id===C.id)||Z.push(C),Z)))}onActionSelectForce(C){if("number"==typeof C&&C>0){if(this.dataModelSelect&&this.dataModelSelect.id===C)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(Z=>Z.id===C)){const Z=this.dataModelResult.listItems.find(z=>z.id===C);return this.dataModelSelect=Z,void this.formControl.setValue(Z)}this.categoryService.ServiceGetOneIncludeParent(C).subscribe(Z=>{Z.isSuccess&&(this.filteredOptions=this.push(Z.item),this.dataModelSelect=Z.item,this.formControl.setValue(Z.item),this.optionChange.emit(Z.item))})}else{if(typeof C==typeof e.Dp$)return this.filteredOptions=this.push(C),this.dataModelSelect=C,void this.formControl.setValue(C);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new e.Dp$,this.loadOptions()}}return(0,t.Z)(dt,"nextId",0),(0,t.Z)(dt,"\u0275fac",function(C){return new(C||dt)(f.Y36(e.FLW),f.Y36(rt.sK),f.Y36(f.sBO),f.Y36(e.XRW))}),(0,t.Z)(dt,"\u0275cmp",f.Xpm({type:dt,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:It,decls:9,vars:10,consts:[[1,"ntk-full-width"],[3,"options"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(C,Z){if(1&C&&(f.F$t(),f.TgZ(0,"mat-form-field",0),f._UZ(1,"app-progress-spinner",1)(2,"input",2),f.TgZ(3,"mat-autocomplete",3,4),f.NdJ("optionSelected",function(ht){return Z.onActionSelect(ht.option.value)}),f.YNc(5,R,4,4,"mat-option",5),f.ALo(6,"async"),f.qZA(),f.YNc(7,Gt,2,0,"mat-icon",6),f.Hsn(8),f.qZA()),2&C){const z=f.MAs(4);f.xp6(1),f.Q6J("options",Z.loading),f.xp6(1),f.s9C("placeholder",Z.optionPlaceholder),f.Q6J("formControl",Z.formControl)("matAutocomplete",z),f.uIk("disabled",!!Z.optionDisabled||null),f.xp6(1),f.Q6J("displayWith",Z.displayFn),f.xp6(2),f.Q6J("ngForOf",f.lcZ(6,8,Z.filteredOptions)),f.xp6(2),f.Q6J("ngIf",Z.dataModelSelect.id)}},dependencies:[tt.sg,tt.O5,F.Fj,F.JJ,F.oH,I.XC,Ft.ey,I.ZL,X.KE,X.R9,A.Hw,st.Nt,qt.O,tt.Ov,Ct.v],encapsulation:2})),dt})()},17407:(Zt,T,d)=>{"use strict";d.d(T,{r:()=>vt});var w=d(86889),t=d(64537),f=d(64216),e=d(92340),et=d(32607),Ut=d(27128);let vt=(()=>{class U{set optonCenter(o){this.map&&o&&o.lat&&o.lon&&0!==o.lat&&0!==o.lon&&this.map.setView(new f.LatLng(o.lat,o.lon),this.zoom)}set optionCurrentPoint(o){this.onActionCurrentPoint(o)}constructor(o){(0,w.Z)(this,"cmsToastrService",void 0),(0,w.Z)(this,"id",++U.nextId),(0,w.Z)(this,"map$",new t.vpe),(0,w.Z)(this,"zoom$",new t.vpe),(0,w.Z)(this,"options",{layers:[(0,f.tileLayer)(e.N.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]}),(0,w.Z)(this,"map",void 0),(0,w.Z)(this,"zoom",void 0),(0,w.Z)(this,"destroy",!1),this.cmsToastrService=o}ngOnInit(){const tt=f.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});f.Marker.prototype.options.icon=tt}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(o){setTimeout(()=>{this.map&&!this.destroy&&o.invalidateSize()},500),this.map=o,this.map$.emit(o),this.zoom=o.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(o){this.zoom=o.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(o=!0){this.getPosition().then(ot=>{this.map.setView(new f.LatLng(ot.lat,ot.lon),this.zoom)})}getPosition(){return new Promise((o,ot)=>{navigator.geolocation.getCurrentPosition(rt=>{o({lon:rt.coords.longitude,lat:rt.coords.latitude})},rt=>{this.cmsToastrService.typeErrorGetPosition()})})}}return(0,w.Z)(U,"nextId",0),(0,w.Z)(U,"\u0275fac",function(o){return new(o||U)(t.Y36(et.e))}),(0,w.Z)(U,"\u0275cmp",t.Xpm({type:U,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletOptions","leafletMapReady","leafletMapZoomEnd"]],template:function(o,ot){1&o&&(t.TgZ(0,"div",0),t.NdJ("leafletMapReady",function(tt){return ot.onMapReady(tt)})("leafletMapZoomEnd",function(tt){return ot.onMapZoomEnd(tt)}),t.qZA()),2&o&&t.Q6J("leafletOptions",ot.options)},dependencies:[Ut.je],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})),U})()}}]);