"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[642],{30643:(Q,v,s)=>{s.d(v,{K:()=>se});var D=s(8239),i=s(54536),C=s(34511),p=s(60656),e=s(64537),T=s(94032),A=s(32607),S=s(56707),P=s(50727),U=s(88692),h=s(20092),L=s(1379),O=s(9638),E=s(83704),M=s(88659),x=s(83331),Z=s(39665),R=s(18033),y=s(64639),k=s(99482),F=s(56599),J=s(63181),N=s(75738),K=s(56014),b=s(81418);const G=["vform"];function u(l,c){if(1&l&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&l){const t=c.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.description)}}function I(l,c){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function a(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-select",32,33),e.NdJ("ngModelChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.dataModel.recordStatus=n)}),e.YNc(3,u,2,2,"mat-option",34),e.qZA(),e.TgZ(4,"mat-hint",11),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,I,5,3,"mat-error",12),e.qZA()}if(2&l){const t=e.MAs(2),o=e.oxw();e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.recordStatus?null:o.fieldsInfo.recordStatus.fieldTitle),e.MGl("ngClass","cms-RecordStatusEnum-selector-",o.dataModel.recordStatus,""),e.Q6J("ngModel",o.dataModel.recordStatus),e.xp6(2),e.Q6J("ngForOf",o.dataModelEnumRecordStatusResult.listItems),e.xp6(2),e.Oqu(e.lcZ(6,6,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function r(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.dataModel.title="")}),e._uU(1,"close"),e.qZA()}}function d(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.fieldsInfo.title?null:t.fieldsInfo.title.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function g(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",36,37),e.NdJ("ngModelChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.dataModel.title=n)}),e.qZA(),e.YNc(5,r,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,d,5,4,"mat-error",12),e.qZA()}if(2&l){const t=e.MAs(4),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.title?null:o.fieldsInfo.title.fieldTitle),e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.title?null:o.fieldsInfo.title.fieldTitle),e.Q6J("ngModel",o.dataModel.title),e.xp6(2),e.Q6J("ngIf",o.dataModel.title),e.xp6(4),e.hij("",t.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function m(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.dataModel.titleResourceLanguage="")}),e._uU(1,"close"),e.qZA()}}function w(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.titleResourceLanguage?null:t.fieldsInfo.titleResourceLanguage.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function B(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"app-cms-user-selector",39),e.NdJ("optionChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.onActionSelectUser(n))})("optionLoadingChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.loading=n)}),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("optionLoading",t.loading)("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",t.translate.instant("TITLE.USER"))("optionDisabled",!(null!=t.fieldsInfo.linkUserId&&t.fieldsInfo.linkUserId.accessAddField))}}function Y(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"app-cms-site-selector",39),e.NdJ("optionChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.onActionSelectSite(n))})("optionLoadingChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.loading=n)}),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("optionLoading",t.loading)("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",t.translate.instant("TITLE.SITE"))("optionDisabled",!(null!=t.fieldsInfo.linkSiteId&&t.fieldsInfo.linkSiteId.accessAddField))}}function H(l,c){if(1&l&&(e._UZ(0,"img",40),e.ALo(1,"cmsthumbnail")),2&l){const t=e.oxw();e.s9C("src",e.lcZ(1,1,t.dataModel.linkFileContentIdSrc),e.LSH)}}function j(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.dataModel.linkFileContentId=null)}),e._uU(1,"close"),e.qZA()}}function V(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.dataModel.description="")}),e._uU(1,"close"),e.qZA()}}function $(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function z(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-slide-toggle",41),e.NdJ("ngModelChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.dataModel.isApproved=n)}),e._uU(1),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("ngModel",t.dataModel.isApproved)("disabled",!(null!=t.fieldsInfo.isApproved&&t.fieldsInfo.isApproved.accessAddField)),e.xp6(1),e.hij(" ",null==t.fieldsInfo.isApproved?null:t.fieldsInfo.isApproved.fieldTitle," ")}}function X(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.dataModel.approvedResult="")}),e._uU(1,"close"),e.qZA()}}function ee(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.fieldsInfo.approvedResult?null:t.fieldsInfo.approvedResult.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function te(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",42,43),e.NdJ("ngModelChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.dataModel.approvedResult=n)}),e.qZA(),e.YNc(5,X,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,ee,5,4,"mat-error",12),e.qZA()}if(2&l){const t=e.MAs(4),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.approvedResult?null:o.fieldsInfo.approvedResult.fieldTitle),e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.description?null:o.fieldsInfo.description.fieldTitle),e.Q6J("ngModel",o.dataModel.approvedResult),e.xp6(2),e.Q6J("ngIf",o.dataModel.approvedResult),e.xp6(4),e.hij("",t.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function ne(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function oe(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function ie(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",44),e.NdJ("ngModelChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.dataModel.approveCheckDate=n)}),e.qZA(),e.YNc(4,ne,2,0,"mat-icon",9),e.YNc(5,oe,2,0,"mat-icon",9),e._UZ(6,"mat-datepicker-toggle",45)(7,"mat-datepicker",46,47),e.qZA()}if(2&l){const t=e.MAs(8),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.approveCheckDate?null:o.fieldsInfo.approveCheckDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",t)("ngModel",o.dataModel.approveCheckDate),e.xp6(1),e.Q6J("ngIf",o.dataModel.approveCheckDate&&(null==o.fieldsInfo.approveCheckDate?null:o.fieldsInfo.approveCheckDate.accessAddField)),e.xp6(1),e.Q6J("ngIf",o.dataModel.approveCheckDate&&(null==o.fieldsInfo.approveCheckDate?null:o.fieldsInfo.approveCheckDate.accessAddField)),e.xp6(1),e.Q6J("for",t)}}function le(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.dataModel.expireDate=null)}),e._uU(1,"close"),e.qZA()}}function ae(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",48),e.NdJ("ngModelChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.dataModel.expireDate=n)}),e.qZA(),e.YNc(4,le,2,0,"mat-icon",9),e._UZ(5,"mat-datepicker-toggle",45)(6,"mat-datepicker",46,49),e.qZA()}if(2&l){const t=e.MAs(7),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.expireDate?null:o.fieldsInfo.expireDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",t)("ngModel",o.dataModel.expireDate),e.xp6(1),e.Q6J("ngIf",o.dataModel.expireDate&&(null==o.fieldsInfo.expireDate?null:o.fieldsInfo.expireDate.accessAddField)),e.xp6(1),e.Q6J("for",t)}}function re(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"div",27)(1,"button",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onFormCancel())}),e._UZ(2,"i",51),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onFormSubmit())}),e._UZ(6,"i",53),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&l){e.oxw();const t=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!t.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let se=(()=>{class l{data;dialogRef;coreEnumService;coreUserClaimContentService;publicHelper;cmsToastrService;cdr;translate;tokenHelper;requestLinkUserClaimTypeId=0;constructor(t,o,n,_,f,W,_e,de,ce){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreUserClaimContentService=_,this.publicHelper=f,this.cmsToastrService=W,this.cdr=_e,this.translate=de,this.tokenHelper=ce,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),t&&(this.requestLinkUserClaimTypeId=+t.linkUserClaimTypeId||0),this.requestLinkUserClaimTypeId>0&&(this.dataModel.linkUserClaimTypeId=this.requestLinkUserClaimTypeId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(q=>{this.tokenInfo=q,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(q=>{this.tokenInfo=q,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1})}formGroup;fieldsInfo=new Map;selectFileTypeMainImage=["jpg","jpeg","png"];fileManagerTree;appLanguage="fa";loading=new p.O;dataModelResult=new C.y$4;dataModel=new C.NQc;tokenInfo=new C.OdC;ProfessionalData=!1;cmsApiStoreSubscribe;formInfo=new C.LEF;dataModelEnumRecordStatusResult=new C.y$4;fileManagerOpenForm=!1;ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.ADD"),this.getEnumRecordStatus(),this.DataGetAccess()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAccess(){const t=this.constructor.name+"DataGetAccess";this.loading.Start(t),this.coreUserClaimContentService.ServiceViewModel().subscribe({next:o=>{o.isSuccess?this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.access):this.cmsToastrService.typeErrorGetAccess(o.errorMessage),this.loading.Stop(t)},error:o=>{this.cmsToastrService.typeErrorGetAccess(o),this.loading.Stop(t)}})}getEnumRecordStatus(){var t=this;return(0,D.Z)(function*(){t.dataModelEnumRecordStatusResult=yield t.publicHelper.getEnumRecordStatus()})()}DataAddContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreUserClaimContentService.ServiceAdd(this.dataModel).subscribe({next:o=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=o,o.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=o.errorMessage,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.loading.Stop(t)},error:o=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(o),this.loading.Stop(t)}})}onActionFileSelected(t){this.dataModel.linkFileContentId=t.id,this.dataModel.linkFileContentIdSrc=t.downloadLinksrc}onActionSelectUser(t){!t||t.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_user"),this.translate.instant("MESSAGE.Information_user_is_not_clear")):this.dataModel.linkUserId=t.id}onActionSelectSite(t){!t||t.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_site"),this.translate.instant("MESSAGE.Information_site_is_not_clear")):this.dataModel.linkSiteId=t.id}onActionSelectClaimType(t){!t||t.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_category"),this.translate.instant("MESSAGE.type_of_information_documents_is_not_clear")):this.dataModel.linkUserClaimTypeId=t.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}static \u0275fac=function(o){return new(o||l)(e.Y36(i.WI),e.Y36(i.so),e.Y36(C.FLW),e.Y36(C.qlG),e.Y36(T.i),e.Y36(A.e),e.Y36(e.sBO),e.Y36(S.sK),e.Y36(P.v))};static \u0275cmp=e.Xpm({type:l,selectors:[["app-core-userclaimcontent-add"]],viewQuery:function(o,n){if(1&o&&e.Gf(G,5),2&o){let _;e.iGM(_=e.CRH())&&(n.formGroup=_.first)}},decls:61,vars:47,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.titleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","end"],[4,"ngIf"],[3,"optionLoading","optionSelectForce","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange",4,"ngIf"],[3,"optionSelectForce","optionLoading","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name","dataModel.linkFileContentId","type","text","autocomplete","off",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","0",3,"ngModel","placeholder","ngModelChange"],["Description",""],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.recordStatus",3,"placeholder","ngModel","ngClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"optionLoading","optionSelectForce","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.approvedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],["matInput","","name","dataModel.approveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.expireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit","mat-raised-button","",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(o,n){if(1&o&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return n.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.YNc(6,a,8,8,"mat-form-field",5),e.YNc(7,g,11,6,"mat-form-field",5),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10),e.qZA(),e.TgZ(11,"input",7,8),e.NdJ("ngModelChange",function(f){return n.dataModel.titleResourceLanguage=f}),e.qZA(),e.YNc(13,m,2,0,"mat-icon",9),e.TgZ(14,"mat-icon",10),e._uU(15,"mode_edit"),e.qZA(),e.TgZ(16,"mat-hint",11),e._uU(17),e.qZA(),e.YNc(18,w,5,4,"mat-error",12),e.qZA(),e.YNc(19,B,1,4,"app-cms-user-selector",13),e.YNc(20,Y,1,4,"app-cms-site-selector",13),e.TgZ(21,"app-core-userclaimtype-selector",14),e.NdJ("optionChange",function(f){return n.onActionSelectClaimType(f)})("optionLoadingChange",function(f){return n.loading=f}),e.qZA(),e.TgZ(22,"div",15),e.YNc(23,H,2,3,"img",16),e.qZA(),e.TgZ(24,"div",17)(25,"mat-form-field",6)(26,"mat-label",18),e.NdJ("click",function(){return n.fileManagerOpenForm=!0}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"input",19,20),e.NdJ("ngModelChange",function(f){return n.dataModel.linkFileContentId=f})("click",function(){return n.fileManagerOpenForm=!0}),e.ALo(31,"translate"),e.qZA(),e.YNc(32,j,2,0,"mat-icon",9),e.TgZ(33,"mat-icon",21),e.NdJ("click",function(){return n.fileManagerOpenForm=!0}),e._uU(34,"mode_edit"),e.qZA()(),e.TgZ(35,"cms-file-manager",22),e.NdJ("itemSelected",function(f){return n.onActionFileSelected(f)})("openFormChange",function(f){return n.fileManagerOpenForm=f}),e.qZA()(),e.TgZ(36,"mat-form-field",6)(37,"mat-label"),e._uU(38),e.qZA(),e.TgZ(39,"textarea",23,24),e.NdJ("ngModelChange",function(f){return n.dataModel.description=f}),e.qZA(),e.YNc(41,V,2,0,"mat-icon",9),e.TgZ(42,"mat-icon",10),e._uU(43,"mode_edit"),e.qZA(),e.TgZ(44,"mat-hint",11),e._uU(45),e.qZA(),e.YNc(46,$,5,4,"mat-error",12),e.qZA(),e._UZ(47,"hr"),e.TgZ(48,"div",6),e.YNc(49,z,2,3,"mat-slide-toggle",25),e.qZA(),e.YNc(50,te,11,6,"mat-form-field",5),e.YNc(51,ie,9,6,"mat-form-field",5),e.YNc(52,ae,8,5,"mat-form-field",5),e.qZA(),e.TgZ(53,"div",26)(54,"div",27)(55,"small",28),e._uU(56),e.qZA(),e.TgZ(57,"small",29),e._uU(58),e.qZA()()(),e.TgZ(59,"div",30),e.YNc(60,re,9,7,"div",31),e.qZA()()),2&o){const _=e.MAs(12),f=e.MAs(40);e.xp6(3),e.hij(" ",n.formInfo.formTitle," "),e.xp6(2),e.Q6J("options",n.loading),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(3),e.Oqu(null==n.fieldsInfo.titleResourceLanguage?null:n.fieldsInfo.titleResourceLanguage.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.title?null:n.fieldsInfo.title.fieldTitle),e.Q6J("ngModel",n.dataModel.titleResourceLanguage)("disabled",!(null!=n.fieldsInfo.titleResourceLanguage&&n.fieldsInfo.titleResourceLanguage.accessAddField)),e.xp6(2),e.Q6J("ngIf",n.dataModel.titleResourceLanguage),e.xp6(4),e.hij("",_.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==_.errors?null:_.errors.required),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("optionSelectForce",n.dataModel.linkUserClaimTypeId)("optionLoading",n.loading)("optionPlaceholder",n.translate.instant("TITLE.DOCUMENT_CATEGORY"))("optionDisabled",!(null!=n.fieldsInfo.linkUserClaimTypeId&&n.fieldsInfo.linkUserClaimTypeId.accessAddField)||n.requestLinkUserClaimTypeId&&n.requestLinkUserClaimTypeId>0),e.xp6(2),e.Q6J("ngIf",(null==n.dataModel||null==n.dataModel.linkFileContentIdSrc?null:n.dataModel.linkFileContentIdSrc.length)>0),e.xp6(4),e.hij("",e.lcZ(28,43,"TITLE.Document_File")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(31,45,"TITLE.Original_File_ID")),e.Q6J("ngModel",n.dataModel.linkFileContentId),e.xp6(3),e.Q6J("ngIf",n.dataModel.linkFileContentId),e.xp6(3),e.Q6J("language",n.appLanguage)("isPopup",!0)("openForm",n.fileManagerOpenForm)("tree",n.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",n.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(3),e.Oqu(null==n.fieldsInfo.description?null:n.fieldsInfo.description.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.description?null:n.fieldsInfo.description.fieldTitle),e.Q6J("ngModel",n.dataModel.description),e.xp6(2),e.Q6J("ngIf",n.dataModel.description),e.xp6(4),e.hij("",f.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==f.errors?null:f.errors.required),e.xp6(3),e.Q6J("ngIf",null==n.fieldsInfo.isApproved?null:n.fieldsInfo.isApproved.accessWatchField),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",(null==n.fieldsInfo.approveCheckDate?null:n.fieldsInfo.approveCheckDate.accessWatchField)&&n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",(null==n.fieldsInfo.expireDate?null:n.fieldsInfo.expireDate.accessWatchField)&&n.ProfessionalData),e.xp6(4),e.hij("",n.formInfo.formAlert," "),e.xp6(2),e.hij("",n.formInfo.formError," "),e.xp6(2),e.Q6J("ngIf",n.formInfo.formSubmitAllow&&!(null!=n.loading&&n.loading.display))}},dependencies:[U.mk,U.sg,U.O5,h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.wO,h.nD,h.On,h.F,L.ey,O.lW,E.Mq,E.hl,E.nW,M.KE,M.hX,M.bx,M.TO,M.R9,x.Hw,Z.Nt,R.gD,y.Rr,k.HG,F.P,J.g,N.O,K.b,S.X$,b.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})}return l})()},3193:(Q,v,s)=>{s.d(v,{D:()=>se});var D=s(8239),i=s(54536),C=s(34511),p=s(60656),e=s(64537),T=s(94032),A=s(32607),S=s(56707),P=s(50727),U=s(88692),h=s(20092),L=s(1379),O=s(9638),E=s(83704),M=s(88659),x=s(83331),Z=s(39665),R=s(18033),y=s(64639),k=s(99482),F=s(56599),J=s(63181),N=s(75738),K=s(56014),b=s(81418);const G=["vform"];function u(l,c){if(1&l&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&l){const t=c.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.description)}}function I(l,c){1&l&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function a(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-select",34,35),e.NdJ("ngModelChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.dataModel.recordStatus=n)}),e.YNc(3,u,2,2,"mat-option",36),e.qZA(),e.TgZ(4,"mat-hint",11),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,I,5,3,"mat-error",12),e.qZA()}if(2&l){const t=e.MAs(2),o=e.oxw();e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.recordStatus?null:o.fieldsInfo.recordStatus.fieldTitle),e.MGl("ngClass","cms-RecordStatusEnum-selector-",o.dataModel.recordStatus,""),e.Q6J("ngModel",o.dataModel.recordStatus),e.xp6(2),e.Q6J("ngForOf",o.dataModelEnumRecordStatusResult.listItems),e.xp6(2),e.Oqu(e.lcZ(6,6,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function r(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.dataModel.title="")}),e._uU(1,"close"),e.qZA()}}function d(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.fieldsInfo.title?null:t.fieldsInfo.title.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function g(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",38,39),e.NdJ("ngModelChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.dataModel.title=n)}),e.qZA(),e.YNc(5,r,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,d,5,4,"mat-error",12),e.qZA()}if(2&l){const t=e.MAs(4),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.title?null:o.fieldsInfo.title.fieldTitle),e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.title?null:o.fieldsInfo.title.fieldTitle),e.Q6J("ngModel",o.dataModel.title),e.xp6(2),e.Q6J("ngIf",o.dataModel.title),e.xp6(4),e.hij("",t.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function m(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.dataModel.titleResourceLanguage="")}),e._uU(1,"close"),e.qZA()}}function w(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.titleResourceLanguage?null:t.fieldsInfo.titleResourceLanguage.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function B(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"app-cms-user-selector",41),e.NdJ("optionChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.onActionSelectUser(n))})("optionLoadingChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.loading=n)}),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",t.translate.instant("TITLE.USER"))("optionLoading",t.loading)("optionDisabled",!(null!=t.fieldsInfo.linkUserId&&t.fieldsInfo.linkUserId.accessEditField))}}function Y(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"app-cms-site-selector",41),e.NdJ("optionChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.onActionSelectSite(n))})("optionLoadingChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.loading=n)}),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",t.translate.instant("TITLE.SITE"))("optionLoading",t.loading)("optionDisabled",!(null!=t.fieldsInfo.linkSiteId&&t.fieldsInfo.linkSiteId.accessEditField))}}function H(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"app-core-userclaimtype-selector",42),e.NdJ("optionChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.onActionSelectClaimType(n))})("optionLoadingChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.loading=n)}),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.linkUserClaimTypeId)("optionLoading",t.loading)("optionPlaceholder",t.translate.instant("TITLE.DOCUMENT_CATEGORY"))("optionDisabled",!(null!=t.fieldsInfo.linkUserClaimTypeId&&t.fieldsInfo.linkUserClaimTypeId.accessEditField))}}function j(l,c){if(1&l&&(e._UZ(0,"img",43),e.ALo(1,"cmsthumbnail")),2&l){const t=e.oxw();e.s9C("src",e.lcZ(1,1,t.dataModel.linkFileContentIdSrc),e.LSH)}}function V(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.dataModel.linkFileContentId=null)}),e._uU(1,"close"),e.qZA()}}function $(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.dataModel.description="")}),e._uU(1,"close"),e.qZA()}}function z(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function X(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-slide-toggle",44),e.NdJ("ngModelChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.dataModel.isApproved=n)}),e._uU(1),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("ngModel",t.dataModel.isApproved)("disabled",!(null!=t.fieldsInfo.isApproved&&t.fieldsInfo.isApproved.accessEditField)),e.xp6(1),e.hij(" ",null==t.fieldsInfo.isApproved?null:t.fieldsInfo.isApproved.fieldTitle," ")}}function ee(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.dataModel.approvedResult="")}),e._uU(1,"close"),e.qZA()}}function te(l,c){if(1&l&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&l){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.approvedResult?null:t.fieldsInfo.approvedResult.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function ne(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function oe(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function ie(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",45),e.NdJ("ngModelChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.dataModel.approveCheckDate=n)}),e.qZA(),e.YNc(4,ne,2,0,"mat-icon",9),e.YNc(5,oe,2,0,"mat-icon",9),e._UZ(6,"mat-datepicker-toggle",46)(7,"mat-datepicker",47,48),e.qZA()}if(2&l){const t=e.MAs(8),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.approveCheckDate?null:o.fieldsInfo.approveCheckDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",t)("ngModel",o.dataModel.approveCheckDate),e.xp6(1),e.Q6J("ngIf",o.dataModel.approveCheckDate&&(null==o.fieldsInfo.approveCheckDate?null:o.fieldsInfo.approveCheckDate.accessEditField)),e.xp6(1),e.Q6J("ngIf",o.dataModel.approveCheckDate&&(null==o.fieldsInfo.approveCheckDate?null:o.fieldsInfo.approveCheckDate.accessEditField)),e.xp6(1),e.Q6J("for",t)}}function le(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.dataModel.expireDate=null)}),e._uU(1,"close"),e.qZA()}}function ae(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",49),e.NdJ("ngModelChange",function(n){e.CHM(t);const _=e.oxw();return e.KtG(_.dataModel.expireDate=n)}),e.qZA(),e.YNc(4,le,2,0,"mat-icon",9),e._UZ(5,"mat-datepicker-toggle",46)(6,"mat-datepicker",47,50),e.qZA()}if(2&l){const t=e.MAs(7),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.expireDate?null:o.fieldsInfo.expireDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",t)("ngModel",o.dataModel.expireDate),e.xp6(1),e.Q6J("ngIf",o.dataModel.expireDate&&(null==o.fieldsInfo.expireDate?null:o.fieldsInfo.expireDate.accessEditField)),e.xp6(1),e.Q6J("for",t)}}function re(l,c){if(1&l){const t=e.EpF();e.TgZ(0,"div",29)(1,"button",51),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onFormCancel())}),e._UZ(2,"i",52),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",53),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onFormSubmit())}),e._UZ(6,"i",54),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&l){e.oxw();const t=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!t.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let se=(()=>{class l{data;dialogRef;coreEnumService;coreUserClaimContentService;publicHelper;cmsToastrService;cdr;translate;tokenHelper;requestId=0;constructor(t,o,n,_,f,W,_e,de,ce){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreUserClaimContentService=_,this.publicHelper=f,this.cmsToastrService=W,this.cdr=_e,this.translate=de,this.tokenHelper=ce,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),t&&(this.requestId=+t.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(q=>{this.tokenInfo=q,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:q=>{this.tokenInfo=q,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1}})}formGroup;fieldsInfo=new Map;selectFileTypeMainImage=["jpg","jpeg","png"];cmsApiStoreSubscribe;tokenInfo=new C.OdC;ProfessionalData=!1;fileManagerTree;appLanguage="fa";loading=new p.O;dataModelResult=new C.ODe;dataModel=new C.NQc;formInfo=new C.LEF;dataModelEnumRecordStatusResult=new C.y$4;fileManagerOpenForm=!1;ngOnInit(){if(!(this.requestId>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.formTitle=this.translate.instant("TITLE.Edit"),this.DataGetOneContent(),this.getEnumRecordStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumRecordStatus(){var t=this;return(0,D.Z)(function*(){t.dataModelEnumRecordStatusResult=yield t.publicHelper.getEnumRecordStatus()})()}DataGetOneContent(){if(this.requestId<=0)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.formAlert=this.translate.instant("MESSAGE.Receiving_Information_From_The_Server"),this.formInfo.formError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreUserClaimContentService.setAccessLoad(),this.coreUserClaimContentService.setAccessDataType(C.dR.Editor),this.coreUserClaimContentService.ServiceGetOneById(this.requestId).subscribe({next:o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.access),this.dataModel=o.item,o.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+o.item.id,this.formInfo.formAlert=""):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=o.errorMessage,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.loading.Stop(t)},error:o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)}})}DataEditContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const t=this.constructor.name+"main";this.loading.Start(t,this.translate.instant("MESSAGE.sending_information_to_the_server")),this.coreUserClaimContentService.ServiceEdit(this.dataModel).subscribe({next:o=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=o,o.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=o.errorMessage,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.loading.Stop(t)},error:o=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(o),this.loading.Stop(t)}})}onActionFileSelected(t){this.dataModel.linkFileContentId=t.id,this.dataModel.linkFileContentIdSrc=t.downloadLinksrc}onActionSelectUser(t){!t||t.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_user"),this.translate.instant("MESSAGE.Information_user_is_not_clear")):this.dataModel.linkUserId=t.id}onActionSelectSite(t){!t||t.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_site"),this.translate.instant("MESSAGE.Information_site_is_not_clear")):this.dataModel.linkSiteId=t.id}onActionSelectClaimType(t){!t||t.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_category"),this.translate.instant("MESSAGE.type_of_information_documents_is_not_clear")):this.dataModel.linkUserClaimTypeId=t.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}static \u0275fac=function(o){return new(o||l)(e.Y36(i.WI),e.Y36(i.so),e.Y36(C.FLW),e.Y36(C.qlG),e.Y36(T.i),e.Y36(A.e),e.Y36(e.sBO),e.Y36(S.sK),e.Y36(P.v))};static \u0275cmp=e.Xpm({type:l,selectors:[["app-core-userclaim-edit"]],viewQuery:function(o,n){if(1&o&&e.Gf(G,5),2&o){let _;e.iGM(_=e.CRH())&&(n.formGroup=_.first)}},decls:71,vars:49,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.titleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","end"],[4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionLoading","optionDisabled","optionChange","optionLoadingChange",4,"ngIf"],[3,"optionSelectForce","optionLoading","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange",4,"ngIf"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name"," dataModel.linkFileContentId","type","text","autocomplete","off",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.description","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["Description",""],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["matInput","","name","dataModel.approvedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.recordStatus",3,"placeholder","ngModel","ngClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"optionSelectForce","optionPlaceholder","optionLoading","optionDisabled","optionChange","optionLoadingChange"],[3,"optionSelectForce","optionLoading","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.approveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.expireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit","mat-raised-button","",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(o,n){if(1&o&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return n.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.YNc(6,a,8,8,"mat-form-field",5),e.YNc(7,g,11,6,"mat-form-field",5),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10),e.qZA(),e.TgZ(11,"input",7,8),e.NdJ("ngModelChange",function(f){return n.dataModel.titleResourceLanguage=f}),e.qZA(),e.YNc(13,m,2,0,"mat-icon",9),e.TgZ(14,"mat-icon",10),e._uU(15,"mode_edit"),e.qZA(),e.TgZ(16,"mat-hint",11),e._uU(17),e.qZA(),e.YNc(18,w,5,4,"mat-error",12),e.qZA(),e.YNc(19,B,1,4,"app-cms-user-selector",13),e.YNc(20,Y,1,4,"app-cms-site-selector",13),e.YNc(21,H,1,4,"app-core-userclaimtype-selector",14),e.TgZ(22,"div",15),e.YNc(23,j,2,3,"img",16),e.qZA(),e.TgZ(24,"div",17)(25,"mat-form-field",6)(26,"mat-label",18),e.NdJ("click",function(){return n.fileManagerOpenForm=!0}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"input",19,20),e.NdJ("ngModelChange",function(f){return n.dataModel.linkFileContentId=f})("click",function(){return n.fileManagerOpenForm=!0}),e.ALo(31,"translate"),e.qZA(),e.YNc(32,V,2,0,"mat-icon",9),e.TgZ(33,"mat-icon",21),e.NdJ("click",function(){return n.fileManagerOpenForm=!0}),e._uU(34,"mode_edit"),e.qZA()(),e.TgZ(35,"cms-file-manager",22),e.NdJ("itemSelected",function(f){return n.onActionFileSelected(f)})("openFormChange",function(f){return n.fileManagerOpenForm=f}),e.qZA()(),e.TgZ(36,"mat-form-field",6)(37,"mat-label"),e._uU(38),e.qZA(),e.TgZ(39,"textarea",23,24),e.NdJ("ngModelChange",function(f){return n.dataModel.description=f}),e.qZA(),e.YNc(41,$,2,0,"mat-icon",9),e.TgZ(42,"mat-icon",10),e._uU(43,"mode_edit"),e.qZA(),e.TgZ(44,"mat-hint",11),e._uU(45),e.qZA(),e.YNc(46,z,5,4,"mat-error",12),e.qZA(),e._UZ(47,"hr"),e.TgZ(48,"div",6),e.YNc(49,X,2,3,"mat-slide-toggle",25),e.qZA(),e.TgZ(50,"mat-form-field",6)(51,"mat-label"),e._uU(52),e.qZA(),e.TgZ(53,"textarea",26,27),e.NdJ("ngModelChange",function(f){return n.dataModel.approvedResult=f}),e.qZA(),e.YNc(55,ee,2,0,"mat-icon",9),e.TgZ(56,"mat-icon",10),e._uU(57,"mode_edit"),e.qZA(),e.TgZ(58,"mat-hint",11),e._uU(59),e.qZA(),e.YNc(60,te,5,4,"mat-error",12),e.qZA(),e.YNc(61,ie,9,6,"mat-form-field",5),e.YNc(62,ae,8,5,"mat-form-field",5),e.qZA(),e.TgZ(63,"div",28)(64,"div",29)(65,"small",30),e._uU(66),e.qZA(),e.TgZ(67,"small",31),e._uU(68),e.qZA()()(),e.TgZ(69,"div",32),e.YNc(70,re,9,7,"div",33),e.qZA()()),2&o){const _=e.MAs(12),f=e.MAs(40),W=e.MAs(54);e.xp6(3),e.hij(" ",n.formInfo.formTitle," "),e.xp6(2),e.Q6J("options",n.loading),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(3),e.Oqu(null==n.fieldsInfo.titleResourceLanguage?null:n.fieldsInfo.titleResourceLanguage.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.titleResourceLanguage?null:n.fieldsInfo.titleResourceLanguage.fieldTitle),e.Q6J("ngModel",n.dataModel.titleResourceLanguage)("disabled",!(null!=n.fieldsInfo.titleResourceLanguage&&n.fieldsInfo.titleResourceLanguage.accessEditField)),e.xp6(2),e.Q6J("ngIf",n.dataModel.titleResourceLanguage),e.xp6(4),e.hij("",_.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==_.errors?null:_.errors.required),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(2),e.Q6J("ngIf",(null==n.dataModel||null==n.dataModel.linkFileContentIdSrc?null:n.dataModel.linkFileContentIdSrc.length)>0),e.xp6(4),e.hij("",e.lcZ(28,45,"TITLE.Document_File")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(31,47,"TITLE.Original_File_ID")),e.Q6J("ngModel",n.dataModel.linkFileContentId),e.xp6(3),e.Q6J("ngIf",n.dataModel.linkFileContentId),e.xp6(3),e.Q6J("language",n.appLanguage)("isPopup",!0)("openForm",n.fileManagerOpenForm)("tree",n.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",n.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(3),e.Oqu(null==n.fieldsInfo.description?null:n.fieldsInfo.description.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.description?null:n.fieldsInfo.description.fieldTitle),e.Q6J("ngModel",n.dataModel.description),e.xp6(2),e.Q6J("ngIf",n.dataModel.description),e.xp6(4),e.hij("",f.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==f.errors?null:f.errors.required),e.xp6(3),e.Q6J("ngIf",null==n.fieldsInfo.isApproved?null:n.fieldsInfo.isApproved.accessWatchField),e.xp6(3),e.Oqu(null==n.fieldsInfo.approvedResult?null:n.fieldsInfo.approvedResult.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.description?null:n.fieldsInfo.description.fieldTitle),e.Q6J("ngModel",n.dataModel.approvedResult),e.xp6(2),e.Q6J("ngIf",n.dataModel.approvedResult),e.xp6(4),e.hij("",W.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==W.errors?null:W.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.fieldsInfo.approveCheckDate?null:n.fieldsInfo.approveCheckDate.accessWatchField),e.xp6(1),e.Q6J("ngIf",null==n.fieldsInfo.expireDate?null:n.fieldsInfo.expireDate.accessWatchField),e.xp6(4),e.hij("",n.formInfo.formAlert," "),e.xp6(2),e.hij("",n.formInfo.formError," "),e.xp6(2),e.Q6J("ngIf",n.formInfo.formSubmitAllow&&!(null!=n.loading&&n.loading.display))}},dependencies:[U.mk,U.sg,U.O5,h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.wO,h.nD,h.On,h.F,L.ey,O.lW,E.Mq,E.hl,E.nW,M.KE,M.hX,M.bx,M.TO,M.R9,x.Hw,Z.Nt,R.gD,y.Rr,k.HG,F.P,J.g,N.O,K.b,S.X$,b.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})}return l})()},56014:(Q,v,s)=>{s.d(v,{b:()=>G});var D=s(8239),i=s(64537),C=s(20092),p=s(34511),e=s(57445),T=s(51927),A=s(83151),S=s(42147),P=s(61528),U=s(27969),h=s(60656),L=s(32607),O=s(56707),E=s(88692),M=s(61637),x=s(1379),Z=s(88659),R=s(83331),y=s(39665),k=s(81418);function F(u,I){if(1&u&&(i._UZ(0,"img",8),i.ALo(1,"cmsthumbnail")),2&u){const a=i.oxw();i.s9C("src",i.lcZ(1,1,a.dataModelSelect.linkMainImageIdSrc),i.LSH)}}function J(u,I){if(1&u&&(i._UZ(0,"img",8),i.ALo(1,"cmsthumbnail")),2&u){const a=i.oxw().$implicit;i.s9C("src",i.lcZ(1,1,a.linkMainImageIdSrc),i.LSH)}}function N(u,I){if(1&u&&(i.TgZ(0,"mat-option",9),i.YNc(1,J,2,3,"img",2),i.TgZ(2,"span"),i._uU(3),i.qZA()()),2&u){const a=I.$implicit,r=i.oxw();i.Q6J("value",a)("disabled",r.optionDisabled),i.xp6(1),i.Q6J("ngIf",a.linkMainImageIdSrc),i.xp6(2),i.Oqu(r.displayOption(a))}}function K(u,I){if(1&u){const a=i.EpF();i.TgZ(0,"mat-icon",10),i.NdJ("click",function(){i.CHM(a);const d=i.oxw();return i.KtG(d.onActionSelectClear())}),i._uU(1,"close"),i.qZA()}}const b=["*"];let G=(()=>{class u{coreEnumService;cmsToastrService;cdr;translate;categoryService;constructor(a,r,d,g,m){this.coreEnumService=a,this.cmsToastrService=r,this.cdr=d,this.translate=g,this.categoryService=m,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}dataModelResult=new p.y$4;dataModelSelect=new p.OoK;formControl=new C.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionChange=new i.vpe;optionReload=()=>this.onActionReload();set optionSelectForce(a){this.onActionSelectForce(a)}loading=new h.O;get optionLoading(){return this.loading}set optionLoading(a){this.loading=a}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,T.O)(""),(0,A.b)(1500),(0,S.x)(),(0,P.w)(a=>"string"==typeof a||"number"==typeof a?this.DataGetAll(a||""):[]))}displayFn(a){return a?a.titleML:void 0}displayOption(a){return a?a.titleML:void 0}DataGetAll(a){var r=this;return(0,D.Z)(function*(){const d=new p.Hay;d.rowPerPage=20,d.accessLoad=!0;let g=new p.AO3;g.propertyName="Title",g.value=a,g.searchType=p.J6G.Contains,g.clauseType=p.ppe.Or,d.filters.push(g),a&&"number"==typeof+a&&+a>0&&(g=new p.AO3,g.propertyName="Id",g.value=a,g.searchType=p.J6G.Equal,g.clauseType=p.ppe.Or,d.filters.push(g));const m=r.constructor.name+"main";return r.loading.Start(m),yield(0,e.z)(r.categoryService.ServiceGetAll(d)).then(w=>(r.dataModelResult=w,r.optionSelectFirstItem&&(!r.dataModelSelect||!r.dataModelSelect.id||r.dataModelSelect.id<=0)&&r.dataModelResult.listItems.length>0&&(r.optionSelectFirstItem=!1,setTimeout(()=>{r.formControl.setValue(r.dataModelResult.listItems[0])},1e3),r.onActionSelect(r.dataModelResult.listItems[0])),r.loading.Stop(m),w.listItems))})()}onActionSelect(a){this.optionDisabled||(this.dataModelSelect=a,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(a){return this.filteredOptions.pipe((0,U.U)(r=>(r.find(d=>d.id===a.id)||r.push(a),r)))}onActionSelectForce(a){if("number"==typeof a&&a>0){if(this.dataModelSelect&&this.dataModelSelect.id===a)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(r=>r.id===a)){const r=this.dataModelResult.listItems.find(d=>d.id===a);return this.dataModelSelect=r,void this.formControl.setValue(r)}this.categoryService.ServiceGetOneById(a).subscribe({next:r=>{r.isSuccess?(this.filteredOptions=this.push(r.item),this.dataModelSelect=r.item,this.formControl.setValue(r.item),this.optionChange.emit(r.item)):this.cmsToastrService.typeErrorMessage(r.errorMessage)}})}else{if(typeof a==typeof p.OoK)return this.filteredOptions=this.push(a),this.dataModelSelect=a,void this.formControl.setValue(a);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new p.OoK,this.loadOptions()}static \u0275fac=function(r){return new(r||u)(i.Y36(p.FLW),i.Y36(L.e),i.Y36(i.sBO),i.Y36(O.sK),i.Y36(p.kf3))};static \u0275cmp=i.Xpm({type:u,selectors:[["app-core-userclaimtype-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:b,decls:11,vars:10,consts:[[1,"ntk-full-width"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(r,d){if(1&r&&(i.F$t(),i.TgZ(0,"mat-form-field",0)(1,"span",1),i.YNc(2,F,2,3,"img",2),i._uU(3," \xa0"),i.qZA(),i._UZ(4,"input",3),i.TgZ(5,"mat-autocomplete",4,5),i.NdJ("optionSelected",function(m){return d.onActionSelect(m.option.value)}),i.YNc(7,N,4,4,"mat-option",6),i.ALo(8,"async"),i.qZA(),i.YNc(9,K,2,0,"mat-icon",7),i.Hsn(10),i.qZA()),2&r){const g=i.MAs(6);i.xp6(2),i.Q6J("ngIf",d.dataModelSelect&&(null==d.dataModelSelect?null:d.dataModelSelect.linkMainImageIdSrc)),i.xp6(2),i.s9C("placeholder",d.optionPlaceholder),i.Q6J("formControl",d.formControl)("matAutocomplete",g),i.uIk("disabled",!!d.optionDisabled||null),i.xp6(1),i.Q6J("displayWith",d.displayFn),i.xp6(2),i.Q6J("ngForOf",i.lcZ(8,8,d.filteredOptions)),i.xp6(2),i.Q6J("ngIf",null==d.dataModelSelect?null:d.dataModelSelect.id)}},dependencies:[E.sg,E.O5,C.Fj,C.JJ,C.oH,M.XC,x.ey,M.ZL,Z.KE,Z.qo,Z.R9,R.Hw,y.Nt,E.Ov,k.v]})}return u})()},56939:(Q,v,s)=>{s.d(v,{V:()=>i});var D=s(64537);let i=(()=>{class C{transform(e,T){if(!e||!T||0===T.length)return"";const A=T.find(S=>S.id===e);return A?A.titleML&&0!==A.titleML.length?A.titleML:A.title:e}static \u0275fac=function(T){return new(T||C)};static \u0275pipe=D.Yjl({name:"cmstitle",type:C,pure:!0})}return C})()},63181:(Q,v,s)=>{s.d(v,{g:()=>G});var D=s(8239),i=s(64537),C=s(20092),p=s(34511),e=s(57445),T=s(51927),A=s(83151),S=s(42147),P=s(61528),U=s(27969),h=s(60656),L=s(56707),O=s(88692),E=s(61637),M=s(1379),x=s(88659),Z=s(83331),R=s(39665),y=s(75738),k=s(81418);function F(u,I){if(1&u&&(i._UZ(0,"img",9),i.ALo(1,"cmsthumbnail")),2&u){const a=i.oxw();i.s9C("src",i.lcZ(1,1,null==a.dataModelSelect?null:a.dataModelSelect.linkMainImageIdSrc),i.LSH)}}function J(u,I){if(1&u&&(i._UZ(0,"img",9),i.ALo(1,"cmsthumbnail")),2&u){const a=i.oxw().$implicit;i.s9C("src",i.lcZ(1,1,a.linkMainImageIdSrc),i.LSH)}}function N(u,I){if(1&u&&(i.TgZ(0,"mat-option",10),i.YNc(1,J,2,3,"img",11),i.TgZ(2,"span"),i._uU(3),i.qZA()()),2&u){const a=I.$implicit,r=i.oxw();i.Q6J("value",a)("disabled",r.optionDisabled),i.xp6(1),i.Q6J("ngIf",a.linkMainImageIdSrc),i.xp6(2),i.Oqu(r.displayOption(a))}}function K(u,I){if(1&u){const a=i.EpF();i.TgZ(0,"mat-icon",12),i.NdJ("click",function(){i.CHM(a);const d=i.oxw();return i.KtG(d.onActionSelectClear())}),i._uU(1,"close"),i.qZA()}}const b=["*"];let G=(()=>{class u{coreEnumService;cdr;translate;categoryService;static nextId=0;id=++u.nextId;constructor(a,r,d,g){this.coreEnumService=a,this.cdr=r,this.translate=d,this.categoryService=g,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}dataModelResult=new p.y$4;dataModelSelect=new p.NCo;loading=new h.O;get optionLoading(){return this.loading}set optionLoading(a){this.loading=a}formControl=new C.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionChange=new i.vpe;optionReload=()=>this.onActionReload();set optionSelectForce(a){this.onActionSelectForce(a)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,T.O)(""),(0,A.b)(1500),(0,S.x)(),(0,P.w)(a=>this.DataGetAll("string"==typeof a||"number"==typeof a?a:"")))}displayFn(a){let r="";return a&&(a.username&&a.username.length>0&&(r=r+" "+a.username),a.name&&a.name.length>0&&(r=r+" "+a.name),a.lastName&&a.lastName.length>0&&(r=r+" "+a.lastName),r=r+"#:"+a.id),r}displayOption(a){let r="";return a&&(a.username&&a.username.length>0&&(r=r+" "+a.username),a.name&&a.name.length>0&&(r=r+" "+a.name),a.lastName&&a.lastName.length>0&&(r=r+" "+a.lastName),r=r+"#:"+a.id),r}DataGetAll(a){var r=this;return(0,D.Z)(function*(){const d=new p.Hay;if(d.rowPerPage=20,d.accessLoad=!0,a&&a.length>0){let m=new p.AO3;m=new p.AO3,m.propertyName="username",m.value=a,m.searchType=p.J6G.Contains,m.clauseType=p.ppe.Or,d.filters.push(m),m=new p.AO3,m.propertyName="name",m.value=a,m.searchType=p.J6G.Contains,m.clauseType=p.ppe.Or,d.filters.push(m),m=new p.AO3,m.propertyName="email",m.value=a,m.searchType=p.J6G.Contains,m.clauseType=p.ppe.Or,d.filters.push(m),m=new p.AO3,m.propertyName="lastname",m.value=a,m.searchType=p.J6G.Contains,m.clauseType=p.ppe.Or,d.filters.push(m),a&&"number"==typeof+a&&+a>0&&(m=new p.AO3,m.propertyName="Id",m.value=a,m.searchType=p.J6G.Equal,m.clauseType=p.ppe.Or,d.filters.push(m))}const g=r.constructor.name+"main";return r.loading.Start(g),yield(0,e.z)(r.categoryService.ServiceGetAll(d)).then(m=>(r.dataModelResult=m,r.optionSelectFirstItem&&(!r.dataModelSelect||!r.dataModelSelect.id||r.dataModelSelect.id<=0)&&r.dataModelResult.listItems.length>0&&(r.optionSelectFirstItem=!1,setTimeout(()=>{r.formControl.setValue(r.dataModelResult.listItems[0])},1e3),r.onActionSelect(r.dataModelResult.listItems[0])),r.loading.Stop(g),m.listItems))})()}onActionSelect(a){this.optionDisabled||(this.dataModelSelect=a,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(a){return this.filteredOptions.pipe((0,U.U)(r=>(r.find(d=>d.id===a.id)||r.push(a),r)))}onActionSelectForce(a){if("number"==typeof a&&a>0){if(this.dataModelSelect&&this.dataModelSelect.id===a)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(r=>r.id===a)){const r=this.dataModelResult.listItems.find(d=>d.id===a);return this.dataModelSelect=r,void this.formControl.setValue(r)}this.categoryService.ServiceGetOneById(a).subscribe(r=>{r.isSuccess&&(this.filteredOptions=this.push(r.item),this.dataModelSelect=r.item,this.formControl.setValue(r.item),this.optionChange.emit(r.item))})}else{if(typeof a==typeof p.NCo)return this.filteredOptions=this.push(a),this.dataModelSelect=a,void this.formControl.setValue(a);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new p.NCo,this.loadOptions()}static \u0275fac=function(r){return new(r||u)(i.Y36(p.FLW),i.Y36(i.sBO),i.Y36(L.sK),i.Y36(p.k$Z))};static \u0275cmp=i.Xpm({type:u,selectors:[["app-cms-user-selector"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:b,decls:12,vars:11,consts:[[1,"ntk-full-width"],[3,"options"],["matPrefix",""],["class","ntk-hover-zoom","style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(r,d){if(1&r&&(i.F$t(),i.TgZ(0,"mat-form-field",0),i._UZ(1,"app-progress-spinner",1),i.TgZ(2,"span",2),i.YNc(3,F,2,3,"img",3),i._uU(4," \xa0"),i.qZA(),i._UZ(5,"input",4),i.TgZ(6,"mat-autocomplete",5,6),i.NdJ("optionSelected",function(m){return d.onActionSelect(m.option.value)}),i.YNc(8,N,4,4,"mat-option",7),i.ALo(9,"async"),i.qZA(),i.YNc(10,K,2,0,"mat-icon",8),i.Hsn(11),i.qZA()),2&r){const g=i.MAs(7);i.xp6(1),i.Q6J("options",d.loading),i.xp6(2),i.Q6J("ngIf",d.dataModelSelect&&(null==d.dataModelSelect?null:d.dataModelSelect.linkMainImageIdSrc)),i.xp6(2),i.s9C("placeholder",d.optionPlaceholder),i.Q6J("formControl",d.formControl)("matAutocomplete",g),i.uIk("disabled",!!d.optionDisabled||null),i.xp6(1),i.Q6J("displayWith",d.displayFn),i.xp6(2),i.Q6J("ngForOf",i.lcZ(9,9,d.filteredOptions)),i.xp6(2),i.Q6J("ngIf",null==d.dataModelSelect?null:d.dataModelSelect.id)}},dependencies:[O.sg,O.O5,C.Fj,C.JJ,C.oH,E.XC,M.ey,E.ZL,x.KE,x.qo,x.R9,Z.Hw,R.Nt,y.O,O.Ov,k.v],encapsulation:2})}return u})()}}]);