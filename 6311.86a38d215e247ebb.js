"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[6311],{39084:(W,R,a)=>{a.d(R,{Y:()=>U});var r=a(86889),t=a(87241),e=a(27969),C=a(64537),l=a(34511);let U=(()=>{var T;class L{constructor(P){(0,r.Z)(this,"service",void 0),this.service=P}transform(P){return!P||P<=0?new t.y:this.service.ServiceGetOneById(P,1e6).pipe((0,e.U)(g=>{var u="";return g.isSuccess&&(g.item.title&&g.item.title.length>0&&(u=g.item.title),g.item.id&&g.item.id>0&&(u.length>0&&(u+=" | "),u+=g.item.id),g.item.domain&&g.item.domain.length>0&&g.item.subDomain&&g.item.subDomain.length>0?(u.length>0&&(u+=" | "),u=u+g.item.subDomain+"."+g.item.domain):g.item.domain&&g.item.domain.length>0&&(u.length>0&&(u+=" | "),u+=g.item.domain)),0===u.length&&(u=P.toString()),u},g=>P.toString()))}}return T=L,(0,r.Z)(L,"\u0275fac",function(P){return new(P||T)(C.Y36(l._0e,16))}),(0,r.Z)(L,"\u0275pipe",C.Yjl({name:"cmssiteinfo",type:T,pure:!0})),L})()},42370:(W,R,a)=>{a.d(R,{v:()=>A});var r=a(86889),t=a(64537),e=a(88692),C=a(56707);let l=(()=>{var s;class d{transform(m,Z){if(!m)return[];let F=Object.keys(m);return F=F.filter(y=>y&&y.length>0&&y.toLowerCase().indexOf("antiinjection")<0),Z&&Z.size>0&&(F=F.filter(y=>y&&y.length>0&&Z.has(y))),F}}return s=d,(0,r.Z)(d,"\u0275fac",function(m){return new(m||s)}),(0,r.Z)(d,"\u0275pipe",t.Yjl({name:"keys",type:s,pure:!0})),d})();function U(s,d){1&s&&(t.TgZ(0,"div",4)(1,"div",5),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",5),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"div",6),t.qZA()),2&s&&(t.xp6(2),t.Oqu(t.lcZ(3,2,"TITLE.parameter")),t.xp6(3),t.Oqu(t.lcZ(6,4,"TITLE.Values")))}function T(s,d){if(1&s&&(t.TgZ(0,"div",7)(1,"div",5),t._uU(2),t.qZA(),t.TgZ(3,"div",5),t._uU(4),t.qZA(),t._UZ(5,"div",8),t.qZA()),2&s){const _=d.$implicit,m=t.oxw(2);t.xp6(2),t.Oqu(m.optionFields&&m.optionFields.size>0?m.optionFields.get(_):_),t.xp6(2),t.Oqu(m.dataModel[_])}}function L(s,d){if(1&s&&(t.TgZ(0,"div",1),t.YNc(1,U,8,6,"div",2),t.YNc(2,T,6,2,"div",3),t.ALo(3,"keys"),t.qZA()),2&s){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",_.optionViewHead),t.xp6(1),t.Q6J("ngForOf",t.xi3(3,2,_.dataModel,_.optionFields))}}function x(s,d){if(1&s&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&s){const _=d.$implicit,m=t.oxw(3);t.xp6(1),t.Oqu(m.optionFields&&m.optionFields.size>0?m.optionFields.get(_):_)}}function P(s,d){if(1&s&&(t.TgZ(0,"div",4),t.YNc(1,x,2,1,"div",9),t.ALo(2,"keys"),t._UZ(3,"div",6),t.qZA()),2&s){const _=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,_.dataModel[0],_.optionFields))}}function g(s,d){if(1&s&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&s){const _=d.$implicit,m=t.oxw().$implicit;t.xp6(1),t.Oqu(m[_])}}function u(s,d){if(1&s&&(t.TgZ(0,"div",7),t.YNc(1,g,2,1,"div",9),t.ALo(2,"keys"),t._UZ(3,"div",8),t.qZA()),2&s){const _=d.$implicit,m=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,_,m.optionFields))}}function I(s,d){if(1&s&&(t.TgZ(0,"div",1),t.YNc(1,P,4,4,"div",2),t.YNc(2,u,4,4,"div",3),t.qZA()),2&s){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",_.optionViewHead),t.xp6(1),t.Q6J("ngForOf",_.dataModel)}}function E(s,d){if(1&s&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&s){const _=d.$implicit,m=t.oxw(3);t.xp6(1),t.Oqu(m.optionFields&&m.optionFields.size>0?m.optionFields.get(_):_)}}function c(s,d){if(1&s&&(t.TgZ(0,"div",4),t.YNc(1,E,2,1,"div",9),t.ALo(2,"keys"),t._UZ(3,"div",6),t.qZA()),2&s){const _=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.xi3(2,1,_.dataModel[0],_.optionFields))}}function O(s,d){if(1&s&&(t.TgZ(0,"div",5),t._uU(1),t.qZA()),2&s){const _=d.$implicit,m=t.oxw(2);t.xp6(1),t.Oqu(m.dataModel[_])}}function S(s,d){if(1&s&&(t.TgZ(0,"div",1),t.YNc(1,c,4,4,"div",2),t.TgZ(2,"div",7),t.YNc(3,O,2,1,"div",9),t.ALo(4,"keys"),t._UZ(5,"div",8),t.qZA()()),2&s){const _=t.oxw();t.xp6(1),t.Q6J("ngIf",_.optionViewHead),t.xp6(2),t.Q6J("ngForOf",t.xi3(4,2,_.dataModel,_.optionFields))}}let A=(()=>{var s;class d{constructor(){(0,r.Z)(this,"id",++d.nextId),(0,r.Z)(this,"optionMethod",1),(0,r.Z)(this,"dataModel",void 0),(0,r.Z)(this,"optionFields",void 0),(0,r.Z)(this,"optionViewHead",!0)}ngOnInit(){}}return s=d,(0,r.Z)(d,"nextId",0),(0,r.Z)(d,"\u0275fac",function(m){return new(m||s)}),(0,r.Z)(d,"\u0275cmp",t.Xpm({type:s,selectors:[["app-cms-json-list"]],inputs:{optionMethod:"optionMethod",dataModel:"dataModel",optionFields:"optionFields",optionViewHead:"optionViewHead"},decls:3,vars:3,consts:[["class","table",4,"ngIf"],[1,"table"],["class","th",4,"ngIf"],["class","tr",4,"ngFor","ngForOf"],[1,"th"],[1,"td"],[1,"clear"],[1,"tr"],[2,"clear","both"],["class","td",4,"ngFor","ngForOf"]],template:function(m,Z){1&m&&(t.YNc(0,L,4,5,"div",0),t.YNc(1,I,3,2,"div",0),t.YNc(2,S,6,5,"div",0)),2&m&&(t.Q6J("ngIf",1===Z.optionMethod&&Z.dataModel),t.xp6(1),t.Q6J("ngIf",2===Z.optionMethod&&Z.dataModel),t.xp6(1),t.Q6J("ngIf",3===Z.optionMethod&&Z.dataModel))},dependencies:[e.sg,e.O5,C.X$,l],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f5;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.clear[_ngcontent-%COMP%]{clear:both}"]})),d})()},76609:(W,R,a)=>{a.d(R,{D:()=>K});var r=a(8239),t=a(86889),e=a(64537),C=a(20092),l=a(34511),U=a(57445),T=a(51927),L=a(83151),x=a(42147),P=a(61528),g=a(27969),u=a(60656),I=a(56707),E=a(88692),c=a(61637),O=a(1379),S=a(88659),A=a(83331),s=a(39665),d=a(75738),_=a(81418);function m(D,f){if(1&D&&(e._UZ(0,"img",9),e.ALo(1,"cmsthumbnail")),2&D){const M=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,M.linkImageIdSrc),e.LSH)}}function Z(D,f){if(1&D&&(e.TgZ(0,"mat-option",7),e.YNc(1,m,2,3,"img",8),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&D){const M=f.$implicit,o=e.oxw();e.Q6J("value",M)("disabled",o.optionDisabled),e.xp6(1),e.Q6J("ngIf",M.linkImageIdSrc),e.xp6(2),e.Oqu(o.displayOption(M))}}function F(D,f){if(1&D){const M=e.EpF();e.TgZ(0,"mat-icon",10),e.NdJ("click",function(){e.CHM(M);const i=e.oxw();return e.KtG(i.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const y=["*"];let K=(()=>{var D;class f{constructor(o,i,n,v){(0,t.Z)(this,"coreEnumService",void 0),(0,t.Z)(this,"translate",void 0),(0,t.Z)(this,"cdr",void 0),(0,t.Z)(this,"categoryService",void 0),(0,t.Z)(this,"id",++f.nextId),(0,t.Z)(this,"dataModelResult",new l.y$4),(0,t.Z)(this,"dataModelSelect",new l.Dp$),(0,t.Z)(this,"formControl",new C.NI),(0,t.Z)(this,"filteredOptions",void 0),(0,t.Z)(this,"optionDisabled",!1),(0,t.Z)(this,"optionSelectFirstItem",!1),(0,t.Z)(this,"optionPlaceholder",""),(0,t.Z)(this,"optionChange",new e.vpe),(0,t.Z)(this,"optionReload",()=>this.onActionReload()),(0,t.Z)(this,"loading",new u.O),this.coreEnumService=o,this.translate=i,this.cdr=n,this.categoryService=v,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(o){this.onActionSelectForce(o)}get optionLoading(){return this.loading}set optionLoading(o){this.loading=o}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,T.O)(""),(0,L.b)(1500),(0,x.x)(),(0,P.w)(o=>this.DataGetAll("string"==typeof o||"number"==typeof o?o:"")))}displayFn(o){return o&&o.virtual_Parent&&o.virtual_Parent.title.length>0&&o.virtual_Parent.virtual_Parent&&o.virtual_Parent.virtual_Parent.title.length>0&&o.virtual_Parent.virtual_Parent.virtual_Parent&&o.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?o.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+o.virtual_Parent.virtual_Parent.titleML+" > "+o.virtual_Parent.titleML+" > "+o.titleML:o&&o.virtual_Parent&&o.virtual_Parent.title.length>0&&o.virtual_Parent.virtual_Parent&&o.virtual_Parent.virtual_Parent.title.length>0?o.virtual_Parent.virtual_Parent.titleML+" > "+o.virtual_Parent.titleML+" > "+o.titleML:o&&o.virtual_Parent&&o.virtual_Parent.title.length>0?o.virtual_Parent.titleML+" > "+o.titleML:o?o.titleML:void 0}displayOption(o){return o&&o.virtual_Parent&&o.virtual_Parent.title.length>0&&o.virtual_Parent.virtual_Parent&&o.virtual_Parent.virtual_Parent.title.length>0&&o.virtual_Parent.virtual_Parent.virtual_Parent&&o.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?o.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+o.virtual_Parent.virtual_Parent.titleML+" > "+o.virtual_Parent.titleML+" > "+o.titleML:o&&o.virtual_Parent&&o.virtual_Parent.title.length>0&&o.virtual_Parent.virtual_Parent&&o.virtual_Parent.virtual_Parent.title.length>0?o.virtual_Parent.virtual_Parent.titleML+" > "+o.virtual_Parent.titleML+" > "+o.titleML:o&&o.virtual_Parent&&o.virtual_Parent.title.length>0?o.virtual_Parent.titleML+" > "+o.titleML:o?o.titleML:void 0}DataGetAll(o){var i=this;return(0,r.Z)(function*(){const n=new l.Hay;if(n.rowPerPage=20,n.accessLoad=!0,o&&o.length>0){let h=new l.AO3;h=new l.AO3,h.propertyName="Symbol",h.value=o,h.searchType=l.J6G.Contains,h.clauseType=l.ppe.Or,n.filters.push(h),h=new l.AO3,h.propertyName="Title",h.value=o,h.searchType=l.J6G.Contains,h.clauseType=l.ppe.Or,n.filters.push(h),o&&"number"==typeof+o&&+o>0&&(h=new l.AO3,h.propertyName="Id",h.value=o,h.searchType=l.J6G.Equal,h.clauseType=l.ppe.Or,n.filters.push(h))}const v=i.constructor.name+"main";return i.loading.Start(v),yield(0,U.z)(i.categoryService.ServiceGetAll(n)).then(h=>(i.dataModelResult=h,i.optionSelectFirstItem&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0)&&i.dataModelResult.listItems.length>0&&(i.optionSelectFirstItem=!1,setTimeout(()=>{i.formControl.setValue(i.dataModelResult.listItems[0])},1e3),i.onActionSelect(i.dataModelResult.listItems[0])),i.loading.Stop(v),h.listItems))})()}onActionSelect(o){this.optionDisabled||(this.dataModelSelect=o,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(o){return this.filteredOptions.pipe((0,g.U)(i=>(i.find(n=>n.id===o.id)||i.push(o),i)))}onActionSelectForce(o){if("number"==typeof o&&o>0){if(this.dataModelSelect&&this.dataModelSelect.id===o)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===o)){const i=this.dataModelResult.listItems.find(n=>n.id===o);return this.dataModelSelect=i,void this.formControl.setValue(i)}this.categoryService.ServiceGetOneIncludeParent(o).subscribe(i=>{i.isSuccess&&(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item))})}else{if(typeof o==typeof l.Dp$)return this.filteredOptions=this.push(o),this.dataModelSelect=o,void this.formControl.setValue(o);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new l.Dp$,this.loadOptions()}}return D=f,(0,t.Z)(f,"nextId",0),(0,t.Z)(f,"\u0275fac",function(o){return new(o||D)(e.Y36(l.FLW),e.Y36(I.sK),e.Y36(e.sBO),e.Y36(l.XRW))}),(0,t.Z)(f,"\u0275cmp",e.Xpm({type:D,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:y,decls:9,vars:10,consts:[[1,"ntk-full-width"],[3,"options"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,i){if(1&o&&(e.F$t(),e.TgZ(0,"mat-form-field",0),e._UZ(1,"app-progress-spinner",1)(2,"input",2),e.TgZ(3,"mat-autocomplete",3,4),e.NdJ("optionSelected",function(v){return i.onActionSelect(v.option.value)}),e.YNc(5,Z,4,4,"mat-option",5),e.ALo(6,"async"),e.qZA(),e.YNc(7,F,2,0,"mat-icon",6),e.Hsn(8),e.qZA()),2&o){const n=e.MAs(4);e.xp6(1),e.Q6J("options",i.loading),e.xp6(1),e.s9C("placeholder",i.optionPlaceholder),e.Q6J("formControl",i.formControl)("matAutocomplete",n),e.uIk("disabled",!!i.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",i.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(6,8,i.filteredOptions)),e.xp6(2),e.Q6J("ngIf",null==i.dataModelSelect?null:i.dataModelSelect.id)}},dependencies:[E.sg,E.O5,C.Fj,C.JJ,C.oH,c.XC,O.ey,c.ZL,S.KE,S.R9,A.Hw,s.Nt,d.O,E.Ov,_.v],encapsulation:2})),f})()},64370:(W,R,a)=>{a.d(R,{a:()=>g});var r=a(86889),t=a(64537),e=a(20092),C=a(34511),l=a(60656),U=a(32607),T=a(56707),L=a(88692),x=a(71561);function P(u,I){if(1&u){const E=t.EpF();t.TgZ(0,"li")(1,"mat-checkbox",1),t.NdJ("change",function(){const S=t.CHM(E).$implicit,A=t.oxw();return t.KtG(A.onActionSelect(S))}),t._uU(2),t.qZA()()}if(2&u){const E=I.$implicit,c=t.oxw();t.xp6(1),t.Q6J("checked",c.fieldsStatus.get(E.id))("disabled",c.optionDisabled),t.xp6(1),t.hij(" ",E.title," ")}}let g=(()=>{var u;class I{constructor(c,O,S,A,s){(0,r.Z)(this,"coreEnumService",void 0),(0,r.Z)(this,"categoryService",void 0),(0,r.Z)(this,"cdr",void 0),(0,r.Z)(this,"cmsToastrService",void 0),(0,r.Z)(this,"translate",void 0),(0,r.Z)(this,"id",++I.nextId),(0,r.Z)(this,"dataModelResult",new C.y$4),(0,r.Z)(this,"dataModelSelect",[]),(0,r.Z)(this,"dataIdsSelect",[]),(0,r.Z)(this,"loading",new l.O),(0,r.Z)(this,"formControl",new e.NI),(0,r.Z)(this,"fieldsStatus",new Map),(0,r.Z)(this,"optionDisabled",!1),(0,r.Z)(this,"optionSelectFirstItem",!1),(0,r.Z)(this,"optionPlaceholder",new t.vpe),(0,r.Z)(this,"optionChange",new t.vpe),(0,r.Z)(this,"optionSelectAdded",new t.vpe),(0,r.Z)(this,"optionSelectRemoved",new t.vpe),(0,r.Z)(this,"optionReload",()=>this.onActionReload()),this.coreEnumService=c,this.categoryService=O,this.cdr=S,this.cmsToastrService=A,this.translate=s,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}get optionLoading(){return this.loading}set optionLoading(c){this.loading=c}set optionSelectForce(c){this.onActionSelectForce(c)}ngOnInit(){this.DataGetAll()}DataGetAll(){const c=new C.Hay;c.rowPerPage=50,c.accessLoad=!0;const O=this.constructor.name+"main";this.loading.Start(O),this.categoryService.ServiceGetAll(c).subscribe(S=>{S.isSuccess&&(this.dataModelResult=S,this.dataModelResult.listItems.forEach(A=>this.fieldsStatus.set(A.id,!1)),this.dataIdsSelect.forEach(A=>this.fieldsStatus.set(A,!0)),this.dataModelResult.listItems.forEach(A=>{this.fieldsStatus.get(A.id)&&this.dataModelSelect.push(A)})),this.loading.Stop(O)},S=>{this.cmsToastrService.typeError(S),this.loading.Stop(O)})}onActionSelect(c){this.fieldsStatus.get(c.id)?(this.fieldsStatus.set(c.id,!1),this.optionSelectRemoved.emit(c),this.dataModelSelect.splice(this.dataModelSelect.indexOf(c),1)):(this.fieldsStatus.set(c.id,!0),this.optionSelectAdded.emit(c),this.dataModelSelect.push(c)),this.optionChange.emit(this.dataModelSelect)}onActionSelectForce(c){typeof c==typeof Array(Number)?c.forEach(O=>{this.dataIdsSelect.push(O)}):typeof c==typeof Array(C.MCb)&&c.forEach(O=>{this.dataIdsSelect.push(O.id)}),this.dataIdsSelect.forEach(O=>this.fieldsStatus.set(O,!0))}onActionReload(){this.DataGetAll()}}return u=I,(0,r.Z)(I,"nextId",0),(0,r.Z)(I,"\u0275fac",function(c){return new(c||u)(t.Y36(C.FLW),t.Y36(C.PwI),t.Y36(t.sBO),t.Y36(U.e),t.Y36(T.sK))}),(0,r.Z)(I,"\u0275cmp",t.Xpm({type:u,selectors:[["app-cms-sitecategory-selectionlist"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange",optionSelectAdded:"optionSelectAdded",optionSelectRemoved:"optionSelectRemoved"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"checked","disabled","change"]],template:function(c,O){1&c&&(t.TgZ(0,"ul"),t.YNc(1,P,3,3,"li",0),t.qZA()),2&c&&(t.xp6(1),t.Q6J("ngForOf",O.dataModelResult.listItems))},dependencies:[L.sg,x.oG],encapsulation:2})),I})()},63181:(W,R,a)=>{a.d(R,{g:()=>D});var r=a(8239),t=a(86889),e=a(64537),C=a(20092),l=a(34511),U=a(57445),T=a(51927),L=a(83151),x=a(42147),P=a(61528),g=a(27969),u=a(60656),I=a(56707),E=a(88692),c=a(61637),O=a(1379),S=a(88659),A=a(83331),s=a(39665),d=a(75738),_=a(81418);function m(f,M){if(1&f&&(e._UZ(0,"img",9),e.ALo(1,"cmsthumbnail")),2&f){const o=e.oxw();e.s9C("src",e.lcZ(1,1,null==o.dataModelSelect?null:o.dataModelSelect.linkMainImageIdSrc),e.LSH)}}function Z(f,M){if(1&f&&(e._UZ(0,"img",9),e.ALo(1,"cmsthumbnail")),2&f){const o=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,o.linkMainImageIdSrc),e.LSH)}}function F(f,M){if(1&f&&(e.TgZ(0,"mat-option",10),e.YNc(1,Z,2,3,"img",11),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&f){const o=M.$implicit,i=e.oxw();e.Q6J("value",o)("disabled",i.optionDisabled),e.xp6(1),e.Q6J("ngIf",o.linkMainImageIdSrc),e.xp6(2),e.Oqu(i.displayOption(o))}}function y(f,M){if(1&f){const o=e.EpF();e.TgZ(0,"mat-icon",12),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const K=["*"];let D=(()=>{var f;class M{constructor(i,n,v,h){(0,t.Z)(this,"coreEnumService",void 0),(0,t.Z)(this,"cdr",void 0),(0,t.Z)(this,"translate",void 0),(0,t.Z)(this,"categoryService",void 0),(0,t.Z)(this,"id",++M.nextId),(0,t.Z)(this,"dataModelResult",new l.y$4),(0,t.Z)(this,"dataModelSelect",new l.NCo),(0,t.Z)(this,"loading",new u.O),(0,t.Z)(this,"formControl",new C.NI),(0,t.Z)(this,"filteredOptions",void 0),(0,t.Z)(this,"optionDisabled",!1),(0,t.Z)(this,"optionSelectFirstItem",!1),(0,t.Z)(this,"optionPlaceholder",""),(0,t.Z)(this,"optionChange",new e.vpe),(0,t.Z)(this,"optionReload",()=>this.onActionReload()),this.coreEnumService=i,this.cdr=n,this.translate=v,this.categoryService=h,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}get optionLoading(){return this.loading}set optionLoading(i){this.loading=i}set optionSelectForce(i){this.onActionSelectForce(i)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,T.O)(""),(0,L.b)(1500),(0,x.x)(),(0,P.w)(i=>this.DataGetAll("string"==typeof i||"number"==typeof i?i:"")))}displayFn(i){let n="";return i&&(i.username&&i.username.length>0&&(n=n+" "+i.username),i.name&&i.name.length>0&&(n=n+" "+i.name),i.lastName&&i.lastName.length>0&&(n=n+" "+i.lastName),n=n+"#:"+i.id),n}displayOption(i){let n="";return i&&(i.username&&i.username.length>0&&(n=n+" "+i.username),i.name&&i.name.length>0&&(n=n+" "+i.name),i.lastName&&i.lastName.length>0&&(n=n+" "+i.lastName),n=n+"#:"+i.id),n}DataGetAll(i){var n=this;return(0,r.Z)(function*(){const v=new l.Hay;if(v.rowPerPage=20,v.accessLoad=!0,i&&i.length>0){let p=new l.AO3;p=new l.AO3,p.propertyName="username",p.value=i,p.searchType=l.J6G.Contains,p.clauseType=l.ppe.Or,v.filters.push(p),p=new l.AO3,p.propertyName="name",p.value=i,p.searchType=l.J6G.Contains,p.clauseType=l.ppe.Or,v.filters.push(p),p=new l.AO3,p.propertyName="email",p.value=i,p.searchType=l.J6G.Contains,p.clauseType=l.ppe.Or,v.filters.push(p),p=new l.AO3,p.propertyName="lastname",p.value=i,p.searchType=l.J6G.Contains,p.clauseType=l.ppe.Or,v.filters.push(p),i&&"number"==typeof+i&&+i>0&&(p=new l.AO3,p.propertyName="Id",p.value=i,p.searchType=l.J6G.Equal,p.clauseType=l.ppe.Or,v.filters.push(p))}const h=n.constructor.name+"main";return n.loading.Start(h),yield(0,U.z)(n.categoryService.ServiceGetAll(v)).then(p=>(n.dataModelResult=p,n.optionSelectFirstItem&&(!n.dataModelSelect||!n.dataModelSelect.id||n.dataModelSelect.id<=0)&&n.dataModelResult.listItems.length>0&&(n.optionSelectFirstItem=!1,setTimeout(()=>{n.formControl.setValue(n.dataModelResult.listItems[0])},1e3),n.onActionSelect(n.dataModelResult.listItems[0])),n.loading.Stop(h),p.listItems))})()}onActionSelect(i){this.optionDisabled||(this.dataModelSelect=i,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(i){return this.filteredOptions.pipe((0,g.U)(n=>(n.find(v=>v.id===i.id)||n.push(i),n)))}onActionSelectForce(i){if("number"==typeof i&&i>0){if(this.dataModelSelect&&this.dataModelSelect.id===i)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(n=>n.id===i)){const n=this.dataModelResult.listItems.find(v=>v.id===i);return this.dataModelSelect=n,void this.formControl.setValue(n)}this.categoryService.ServiceGetOneById(i).subscribe(n=>{n.isSuccess&&(this.filteredOptions=this.push(n.item),this.dataModelSelect=n.item,this.formControl.setValue(n.item),this.optionChange.emit(n.item))})}else{if(typeof i==typeof l.NCo)return this.filteredOptions=this.push(i),this.dataModelSelect=i,void this.formControl.setValue(i);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new l.NCo,this.loadOptions()}}return f=M,(0,t.Z)(M,"nextId",0),(0,t.Z)(M,"\u0275fac",function(i){return new(i||f)(e.Y36(l.FLW),e.Y36(e.sBO),e.Y36(I.sK),e.Y36(l.k$Z))}),(0,t.Z)(M,"\u0275cmp",e.Xpm({type:f,selectors:[["app-cms-user-selector"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:K,decls:12,vars:11,consts:[[1,"ntk-full-width"],[3,"options"],["matPrefix",""],["class","ntk-hover-zoom","style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(i,n){if(1&i&&(e.F$t(),e.TgZ(0,"mat-form-field",0),e._UZ(1,"app-progress-spinner",1),e.TgZ(2,"span",2),e.YNc(3,m,2,3,"img",3),e._uU(4," \xa0"),e.qZA(),e._UZ(5,"input",4),e.TgZ(6,"mat-autocomplete",5,6),e.NdJ("optionSelected",function(h){return n.onActionSelect(h.option.value)}),e.YNc(8,F,4,4,"mat-option",7),e.ALo(9,"async"),e.qZA(),e.YNc(10,y,2,0,"mat-icon",8),e.Hsn(11),e.qZA()),2&i){const v=e.MAs(7);e.xp6(1),e.Q6J("options",n.loading),e.xp6(2),e.Q6J("ngIf",n.dataModelSelect&&(null==n.dataModelSelect?null:n.dataModelSelect.linkMainImageIdSrc)),e.xp6(2),e.s9C("placeholder",n.optionPlaceholder),e.Q6J("formControl",n.formControl)("matAutocomplete",v),e.uIk("disabled",!!n.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(9,9,n.filteredOptions)),e.xp6(2),e.Q6J("ngIf",null==n.dataModelSelect?null:n.dataModelSelect.id)}},dependencies:[E.sg,E.O5,C.Fj,C.JJ,C.oH,c.XC,O.ey,c.ZL,S.KE,S.qo,S.R9,A.Hw,s.Nt,d.O,E.Ov,_.v],encapsulation:2})),M})()}}]);