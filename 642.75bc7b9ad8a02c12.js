"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[642],{30643:(Q,U,s)=>{s.d(U,{K:()=>re});var Z=s(8239),_=s(86889),n=s(54536),C=s(34511),m=s(60656),e=s(64537),I=s(13987),T=s(32607),S=s(56707),P=s(50727),v=s(88692),h=s(20092),L=s(1379),A=s(83704),M=s(88659),x=s(83331),D=s(39665),O=s(18033),R=s(64639),y=s(99482),F=s(56599),k=s(63181),b=s(75738),K=s(56014),J=s(81418);const N=["vform"];function G(i,c){if(1&i&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&i){const o=c.$implicit;e.Q6J("value",o.value),e.xp6(1),e.Oqu(o.description)}}function f(i,c){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function E(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-select",32,33),e.NdJ("ngModelChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.recordStatus=r)}),e.YNc(3,G,2,2,"mat-option",34),e.qZA(),e.TgZ(4,"mat-hint",11),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,f,5,3,"mat-error",12),e.qZA()}if(2&i){const o=e.MAs(2),t=e.oxw();e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.recordStatus?null:t.fieldsInfo.recordStatus.fieldTitle),e.MGl("panelClass","recordStatus-",t.dataModel.recordStatus,""),e.Q6J("ngModel",t.dataModel.recordStatus),e.xp6(2),e.Q6J("ngForOf",t.dataModelEnumRecordStatusResult.listItems),e.xp6(2),e.Oqu(e.lcZ(6,6,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function l(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(2);return e.KtG(r.dataModel.title="")}),e._uU(1,"close"),e.qZA()}}function a(i,c){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.fieldsInfo.title?null:o.fieldsInfo.title.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function u(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",36,37),e.NdJ("ngModelChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.title=r)}),e.qZA(),e.YNc(5,l,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,a,5,4,"mat-error",12),e.qZA()}if(2&i){const o=e.MAs(4),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.title?null:t.fieldsInfo.title.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.title?null:t.fieldsInfo.title.fieldTitle),e.Q6J("ngModel",t.dataModel.title),e.xp6(2),e.Q6J("ngIf",t.dataModel.title),e.xp6(4),e.hij("",o.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function g(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.dataModel.titleResourceLanguage="")}),e._uU(1,"close"),e.qZA()}}function p(i,c){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.titleResourceLanguage?null:o.fieldsInfo.titleResourceLanguage.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function q(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"app-cms-user-selector",39),e.NdJ("optionChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.onActionSelectUser(r))})("optionLoadingChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.loading=r)}),e.qZA()}if(2&i){const o=e.oxw();e.Q6J("optionLoading",o.loading)("optionSelectForce",o.dataModel.linkUserId)("optionPlaceholder",o.translate.instant("TITLE.USER"))("optionDisabled",!(null!=o.fieldsInfo.linkUserId&&o.fieldsInfo.linkUserId.accessAddField))}}function w(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"app-cms-site-selector",39),e.NdJ("optionChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.onActionSelectSite(r))})("optionLoadingChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.loading=r)}),e.qZA()}if(2&i){const o=e.oxw();e.Q6J("optionLoading",o.loading)("optionSelectForce",o.dataModel.linkSiteId)("optionPlaceholder",o.translate.instant("TITLE.SITE"))("optionDisabled",!(null!=o.fieldsInfo.linkSiteId&&o.fieldsInfo.linkSiteId.accessAddField))}}function H(i,c){if(1&i&&(e._UZ(0,"img",40),e.ALo(1,"cmsthumbnail")),2&i){const o=e.oxw();e.s9C("src",e.lcZ(1,1,o.dataModel.linkFileContentIdSrc),e.LSH)}}function Y(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.dataModel.linkFileContentId=null)}),e._uU(1,"close"),e.qZA()}}function j(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.dataModel.description="")}),e._uU(1,"close"),e.qZA()}}function V(i,c){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.description?null:o.fieldsInfo.description.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function $(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-slide-toggle",41),e.NdJ("ngModelChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.isApproved=r)}),e._uU(1),e.qZA()}if(2&i){const o=e.oxw();e.Q6J("ngModel",o.dataModel.isApproved)("disabled",!(null!=o.fieldsInfo.isApproved&&o.fieldsInfo.isApproved.accessAddField)),e.xp6(1),e.hij(" ",null==o.fieldsInfo.isApproved?null:o.fieldsInfo.isApproved.fieldTitle," ")}}function z(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(2);return e.KtG(r.dataModel.approvedResult="")}),e._uU(1,"close"),e.qZA()}}function X(i,c){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.fieldsInfo.approvedResult?null:o.fieldsInfo.approvedResult.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function ee(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",42,43),e.NdJ("ngModelChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.approvedResult=r)}),e.qZA(),e.YNc(5,z,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,X,5,4,"mat-error",12),e.qZA()}if(2&i){const o=e.MAs(4),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.approvedResult?null:t.fieldsInfo.approvedResult.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle),e.Q6J("ngModel",t.dataModel.approvedResult),e.xp6(2),e.Q6J("ngIf",t.dataModel.approvedResult),e.xp6(4),e.hij("",o.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function te(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(2);return e.KtG(r.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function oe(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(2);return e.KtG(r.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function ne(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",44),e.NdJ("ngModelChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.approveCheckDate=r)}),e.qZA(),e.YNc(4,te,2,0,"mat-icon",9),e.YNc(5,oe,2,0,"mat-icon",9),e._UZ(6,"mat-datepicker-toggle",45)(7,"mat-datepicker",46,47),e.qZA()}if(2&i){const o=e.MAs(8),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.approveCheckDate?null:t.fieldsInfo.approveCheckDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",o)("ngModel",t.dataModel.approveCheckDate),e.xp6(1),e.Q6J("ngIf",t.dataModel.approveCheckDate&&(null==t.fieldsInfo.approveCheckDate?null:t.fieldsInfo.approveCheckDate.accessAddField)),e.xp6(1),e.Q6J("ngIf",t.dataModel.approveCheckDate&&(null==t.fieldsInfo.approveCheckDate?null:t.fieldsInfo.approveCheckDate.accessAddField)),e.xp6(1),e.Q6J("for",o)}}function ie(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(2);return e.KtG(r.dataModel.expireDate=null)}),e._uU(1,"close"),e.qZA()}}function le(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",48),e.NdJ("ngModelChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.expireDate=r)}),e.qZA(),e.YNc(4,ie,2,0,"mat-icon",9),e._UZ(5,"mat-datepicker-toggle",45)(6,"mat-datepicker",46,49),e.qZA()}if(2&i){const o=e.MAs(7),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.expireDate?null:t.fieldsInfo.expireDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",o)("ngModel",t.dataModel.expireDate),e.xp6(1),e.Q6J("ngIf",t.dataModel.expireDate&&(null==t.fieldsInfo.expireDate?null:t.fieldsInfo.expireDate.accessAddField)),e.xp6(1),e.Q6J("for",o)}}function ae(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"div",27)(1,"button",50),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.onFormCancel())}),e._UZ(2,"i",51),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",52),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.onFormSubmit())}),e._UZ(6,"i",53),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&i){e.oxw();const o=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!o.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let re=(()=>{class i{constructor(o,t,r,d,W,se,_e,de,ce){(0,_.Z)(this,"data",void 0),(0,_.Z)(this,"dialogRef",void 0),(0,_.Z)(this,"coreEnumService",void 0),(0,_.Z)(this,"coreUserClaimContentService",void 0),(0,_.Z)(this,"publicHelper",void 0),(0,_.Z)(this,"cmsToastrService",void 0),(0,_.Z)(this,"cdr",void 0),(0,_.Z)(this,"translate",void 0),(0,_.Z)(this,"tokenHelper",void 0),(0,_.Z)(this,"requestLinkUserClaimTypeId",0),(0,_.Z)(this,"formGroup",void 0),(0,_.Z)(this,"fieldsInfo",new Map),(0,_.Z)(this,"selectFileTypeMainImage",["jpg","jpeg","png"]),(0,_.Z)(this,"fileManagerTree",void 0),(0,_.Z)(this,"appLanguage","fa"),(0,_.Z)(this,"loading",new m.O),(0,_.Z)(this,"dataModelResult",new C.y$4),(0,_.Z)(this,"dataModel",new C.NQc),(0,_.Z)(this,"tokenInfo",new C.OdC),(0,_.Z)(this,"ProfessionalData",!1),(0,_.Z)(this,"cmsApiStoreSubscribe",void 0),(0,_.Z)(this,"formInfo",new C.LEF),(0,_.Z)(this,"dataModelEnumRecordStatusResult",new C.y$4),(0,_.Z)(this,"fileManagerOpenForm",!1),this.data=o,this.dialogRef=t,this.coreEnumService=r,this.coreUserClaimContentService=d,this.publicHelper=W,this.cmsToastrService=se,this.cdr=_e,this.translate=de,this.tokenHelper=ce,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),o&&(this.requestLinkUserClaimTypeId=+o.linkUserClaimTypeId||0),this.requestLinkUserClaimTypeId>0&&(this.dataModel.linkUserClaimTypeId=this.requestLinkUserClaimTypeId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(B=>{this.tokenInfo=B,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(B=>{this.tokenInfo=B,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1})}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.ADD"),this.getEnumRecordStatus(),this.DataGetAccess()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAccess(){const o=this.constructor.name+"DataGetAccess";this.loading.Start(o),this.coreUserClaimContentService.ServiceViewModel().subscribe({next:t=>{t.isSuccess?this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access):this.cmsToastrService.typeErrorGetAccess(t.errorMessage),this.loading.Stop(o)},error:t=>{this.cmsToastrService.typeErrorGetAccess(t),this.loading.Stop(o)}})}getEnumRecordStatus(){var o=this;return(0,Z.Z)(function*(){o.dataModelEnumRecordStatusResult=yield o.publicHelper.getEnumRecordStatus()})()}DataAddContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const o=this.constructor.name+"main";this.loading.Start(o),this.coreUserClaimContentService.ServiceAdd(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.loading.Stop(o)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.loading.Stop(o)}})}onActionFileSelected(o){this.dataModel.linkFileContentId=o.id,this.dataModel.linkFileContentIdSrc=o.downloadLinksrc}onActionSelectUser(o){!o||o.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_user"),this.translate.instant("MESSAGE.Information_user_is_not_clear")):this.dataModel.linkUserId=o.id}onActionSelectSite(o){!o||o.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_site"),this.translate.instant("MESSAGE.Information_site_is_not_clear")):this.dataModel.linkSiteId=o.id}onActionSelectClaimType(o){!o||o.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_category"),this.translate.instant("MESSAGE.type_of_information_documents_is_not_clear")):this.dataModel.linkUserClaimTypeId=o.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return(0,_.Z)(i,"\u0275fac",function(o){return new(o||i)(e.Y36(n.WI),e.Y36(n.so),e.Y36(C.FLW),e.Y36(C.qlG),e.Y36(I.i),e.Y36(T.e),e.Y36(e.sBO),e.Y36(S.sK),e.Y36(P.v))}),(0,_.Z)(i,"\u0275cmp",e.Xpm({type:i,selectors:[["app-core-userclaimcontent-add"]],viewQuery:function(o,t){if(1&o&&e.Gf(N,5),2&o){let r;e.iGM(r=e.CRH())&&(t.formGroup=r.first)}},decls:61,vars:47,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.titleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","end"],[4,"ngIf"],[3,"optionLoading","optionSelectForce","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange",4,"ngIf"],[3,"optionSelectForce","optionLoading","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name","dataModel.linkFileContentId","type","text","autocomplete","off",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","0",3,"ngModel","placeholder","ngModelChange"],["Description",""],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.recordStatus",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"optionLoading","optionSelectForce","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.approvedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],["matInput","","name","dataModel.approveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.expireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(o,t){if(1&o&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.YNc(6,E,8,8,"mat-form-field",5),e.YNc(7,u,11,6,"mat-form-field",5),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10),e.qZA(),e.TgZ(11,"input",7,8),e.NdJ("ngModelChange",function(d){return t.dataModel.titleResourceLanguage=d}),e.qZA(),e.YNc(13,g,2,0,"mat-icon",9),e.TgZ(14,"mat-icon",10),e._uU(15,"mode_edit"),e.qZA(),e.TgZ(16,"mat-hint",11),e._uU(17),e.qZA(),e.YNc(18,p,5,4,"mat-error",12),e.qZA(),e.YNc(19,q,1,4,"app-cms-user-selector",13),e.YNc(20,w,1,4,"app-cms-site-selector",13),e.TgZ(21,"app-core-userclaimtype-selector",14),e.NdJ("optionChange",function(d){return t.onActionSelectClaimType(d)})("optionLoadingChange",function(d){return t.loading=d}),e.qZA(),e.TgZ(22,"div",15),e.YNc(23,H,2,3,"img",16),e.qZA(),e.TgZ(24,"div",17)(25,"mat-form-field",6)(26,"mat-label",18),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"input",19,20),e.NdJ("ngModelChange",function(d){return t.dataModel.linkFileContentId=d})("click",function(){return t.fileManagerOpenForm=!0}),e.ALo(31,"translate"),e.qZA(),e.YNc(32,Y,2,0,"mat-icon",9),e.TgZ(33,"mat-icon",21),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(34,"mode_edit"),e.qZA()(),e.TgZ(35,"cms-file-manager",22),e.NdJ("itemSelected",function(d){return t.onActionFileSelected(d)})("openFormChange",function(d){return t.fileManagerOpenForm=d}),e.qZA()(),e.TgZ(36,"mat-form-field",6)(37,"mat-label"),e._uU(38),e.qZA(),e.TgZ(39,"textarea",23,24),e.NdJ("ngModelChange",function(d){return t.dataModel.description=d}),e.qZA(),e.YNc(41,j,2,0,"mat-icon",9),e.TgZ(42,"mat-icon",10),e._uU(43,"mode_edit"),e.qZA(),e.TgZ(44,"mat-hint",11),e._uU(45),e.qZA(),e.YNc(46,V,5,4,"mat-error",12),e.qZA(),e._UZ(47,"hr"),e.TgZ(48,"div",6),e.YNc(49,$,2,3,"mat-slide-toggle",25),e.qZA(),e.YNc(50,ee,11,6,"mat-form-field",5),e.YNc(51,ne,9,6,"mat-form-field",5),e.YNc(52,le,8,5,"mat-form-field",5),e.qZA(),e.TgZ(53,"div",26)(54,"div",27)(55,"small",28),e._uU(56),e.qZA(),e.TgZ(57,"small",29),e._uU(58),e.qZA()()(),e.TgZ(59,"div",30),e.YNc(60,ae,9,7,"div",31),e.qZA()()),2&o){const r=e.MAs(12),d=e.MAs(40);e.xp6(3),e.hij(" ",t.formInfo.formTitle," "),e.xp6(2),e.Q6J("options",t.loading),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(3),e.Oqu(null==t.fieldsInfo.titleResourceLanguage?null:t.fieldsInfo.titleResourceLanguage.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.title?null:t.fieldsInfo.title.fieldTitle),e.Q6J("ngModel",t.dataModel.titleResourceLanguage)("disabled",!(null!=t.fieldsInfo.titleResourceLanguage&&t.fieldsInfo.titleResourceLanguage.accessAddField)),e.xp6(2),e.Q6J("ngIf",t.dataModel.titleResourceLanguage),e.xp6(4),e.hij("",r.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("optionSelectForce",t.dataModel.linkUserClaimTypeId)("optionLoading",t.loading)("optionPlaceholder",t.translate.instant("TITLE.DOCUMENT_CATEGORY"))("optionDisabled",!(null!=t.fieldsInfo.linkUserClaimTypeId&&t.fieldsInfo.linkUserClaimTypeId.accessAddField)||t.requestLinkUserClaimTypeId&&t.requestLinkUserClaimTypeId>0),e.xp6(2),e.Q6J("ngIf",(null==t.dataModel||null==t.dataModel.linkFileContentIdSrc?null:t.dataModel.linkFileContentIdSrc.length)>0),e.xp6(4),e.hij("",e.lcZ(28,43,"TITLE.Document_File")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(31,45,"TITLE.Original_File_ID")),e.Q6J("ngModel",t.dataModel.linkFileContentId),e.xp6(3),e.Q6J("ngIf",t.dataModel.linkFileContentId),e.xp6(3),e.Q6J("language",t.appLanguage)("isPopup",!0)("openForm",t.fileManagerOpenForm)("tree",t.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(3),e.Oqu(null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle),e.Q6J("ngModel",t.dataModel.description),e.xp6(2),e.Q6J("ngIf",t.dataModel.description),e.xp6(4),e.hij("",d.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==d.errors?null:d.errors.required),e.xp6(3),e.Q6J("ngIf",null==t.fieldsInfo.isApproved?null:t.fieldsInfo.isApproved.accessWatchField),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",(null==t.fieldsInfo.approveCheckDate?null:t.fieldsInfo.approveCheckDate.accessWatchField)&&t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",(null==t.fieldsInfo.expireDate?null:t.fieldsInfo.expireDate.accessWatchField)&&t.ProfessionalData),e.xp6(4),e.hij("",t.formInfo.formAlert," "),e.xp6(2),e.hij("",t.formInfo.formError," "),e.xp6(2),e.Q6J("ngIf",t.formInfo.formSubmitAllow&&!t.loading.display)}},dependencies:[v.sg,v.O5,h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.wO,h.nD,h.On,h.F,L.ey,A.Mq,A.hl,A.nW,M.KE,M.hX,M.bx,M.TO,M.R9,x.Hw,D.Nt,O.gD,R.Rr,y.HG,F.P,k.g,b.O,K.b,S.X$,J.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})),i})()},3193:(Q,U,s)=>{s.d(U,{D:()=>re});var Z=s(8239),_=s(86889),n=s(54536),C=s(34511),m=s(60656),e=s(64537),I=s(13987),T=s(32607),S=s(56707),P=s(50727),v=s(88692),h=s(20092),L=s(1379),A=s(83704),M=s(88659),x=s(83331),D=s(39665),O=s(18033),R=s(64639),y=s(99482),F=s(56599),k=s(63181),b=s(75738),K=s(56014),J=s(81418);const N=["vform"];function G(i,c){if(1&i&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&i){const o=c.$implicit;e.Q6J("value",o.value),e.xp6(1),e.Oqu(o.description)}}function f(i,c){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function E(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-select",34,35),e.NdJ("ngModelChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.recordStatus=r)}),e.YNc(3,G,2,2,"mat-option",36),e.qZA(),e.TgZ(4,"mat-hint",11),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,f,5,3,"mat-error",12),e.qZA()}if(2&i){const o=e.MAs(2),t=e.oxw();e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.recordStatus?null:t.fieldsInfo.recordStatus.fieldTitle),e.MGl("panelClass","recordStatus-",t.dataModel.recordStatus,""),e.Q6J("ngModel",t.dataModel.recordStatus),e.xp6(2),e.Q6J("ngForOf",t.dataModelEnumRecordStatusResult.listItems),e.xp6(2),e.Oqu(e.lcZ(6,6,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function l(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(2);return e.KtG(r.dataModel.title="")}),e._uU(1,"close"),e.qZA()}}function a(i,c){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i){const o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.fieldsInfo.title?null:o.fieldsInfo.title.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function u(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",38,39),e.NdJ("ngModelChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.title=r)}),e.qZA(),e.YNc(5,l,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,a,5,4,"mat-error",12),e.qZA()}if(2&i){const o=e.MAs(4),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.title?null:t.fieldsInfo.title.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.title?null:t.fieldsInfo.title.fieldTitle),e.Q6J("ngModel",t.dataModel.title),e.xp6(2),e.Q6J("ngIf",t.dataModel.title),e.xp6(4),e.hij("",o.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function g(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.dataModel.titleResourceLanguage="")}),e._uU(1,"close"),e.qZA()}}function p(i,c){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.titleResourceLanguage?null:o.fieldsInfo.titleResourceLanguage.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function q(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"app-cms-user-selector",41),e.NdJ("optionChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.onActionSelectUser(r))})("optionLoadingChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.loading=r)}),e.qZA()}if(2&i){const o=e.oxw();e.Q6J("optionSelectForce",o.dataModel.linkUserId)("optionPlaceholder",o.translate.instant("TITLE.USER"))("optionLoading",o.loading)("optionDisabled",!(null!=o.fieldsInfo.linkUserId&&o.fieldsInfo.linkUserId.accessEditField))}}function w(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"app-cms-site-selector",41),e.NdJ("optionChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.onActionSelectSite(r))})("optionLoadingChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.loading=r)}),e.qZA()}if(2&i){const o=e.oxw();e.Q6J("optionSelectForce",o.dataModel.linkSiteId)("optionPlaceholder",o.translate.instant("TITLE.SITE"))("optionLoading",o.loading)("optionDisabled",!(null!=o.fieldsInfo.linkSiteId&&o.fieldsInfo.linkSiteId.accessEditField))}}function H(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"app-core-userclaimtype-selector",42),e.NdJ("optionChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.onActionSelectClaimType(r))})("optionLoadingChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.loading=r)}),e.qZA()}if(2&i){const o=e.oxw();e.Q6J("optionSelectForce",o.dataModel.linkUserClaimTypeId)("optionLoading",o.loading)("optionPlaceholder",o.translate.instant("TITLE.DOCUMENT_CATEGORY"))("optionDisabled",!(null!=o.fieldsInfo.linkUserClaimTypeId&&o.fieldsInfo.linkUserClaimTypeId.accessEditField))}}function Y(i,c){if(1&i&&(e._UZ(0,"img",43),e.ALo(1,"cmsthumbnail")),2&i){const o=e.oxw();e.s9C("src",e.lcZ(1,1,o.dataModel.linkFileContentIdSrc),e.LSH)}}function j(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.dataModel.linkFileContentId=null)}),e._uU(1,"close"),e.qZA()}}function V(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.dataModel.description="")}),e._uU(1,"close"),e.qZA()}}function $(i,c){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.description?null:o.fieldsInfo.description.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function z(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-slide-toggle",44),e.NdJ("ngModelChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.isApproved=r)}),e._uU(1),e.qZA()}if(2&i){const o=e.oxw();e.Q6J("ngModel",o.dataModel.isApproved)("disabled",!(null!=o.fieldsInfo.isApproved&&o.fieldsInfo.isApproved.accessEditField)),e.xp6(1),e.hij(" ",null==o.fieldsInfo.isApproved?null:o.fieldsInfo.isApproved.fieldTitle," ")}}function X(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.dataModel.approvedResult="")}),e._uU(1,"close"),e.qZA()}}function ee(i,c){if(1&i&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.approvedResult?null:o.fieldsInfo.approvedResult.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function te(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(2);return e.KtG(r.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function oe(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(2);return e.KtG(r.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function ne(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",45),e.NdJ("ngModelChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.approveCheckDate=r)}),e.qZA(),e.YNc(4,te,2,0,"mat-icon",9),e.YNc(5,oe,2,0,"mat-icon",9),e._UZ(6,"mat-datepicker-toggle",46)(7,"mat-datepicker",47,48),e.qZA()}if(2&i){const o=e.MAs(8),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.approveCheckDate?null:t.fieldsInfo.approveCheckDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",o)("ngModel",t.dataModel.approveCheckDate),e.xp6(1),e.Q6J("ngIf",t.dataModel.approveCheckDate&&(null==t.fieldsInfo.approveCheckDate?null:t.fieldsInfo.approveCheckDate.accessEditField)),e.xp6(1),e.Q6J("ngIf",t.dataModel.approveCheckDate&&(null==t.fieldsInfo.approveCheckDate?null:t.fieldsInfo.approveCheckDate.accessEditField)),e.xp6(1),e.Q6J("for",o)}}function ie(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(o);const r=e.oxw(2);return e.KtG(r.dataModel.expireDate=null)}),e._uU(1,"close"),e.qZA()}}function le(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",49),e.NdJ("ngModelChange",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.dataModel.expireDate=r)}),e.qZA(),e.YNc(4,ie,2,0,"mat-icon",9),e._UZ(5,"mat-datepicker-toggle",46)(6,"mat-datepicker",47,50),e.qZA()}if(2&i){const o=e.MAs(7),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.expireDate?null:t.fieldsInfo.expireDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",o)("ngModel",t.dataModel.expireDate),e.xp6(1),e.Q6J("ngIf",t.dataModel.expireDate&&(null==t.fieldsInfo.expireDate?null:t.fieldsInfo.expireDate.accessEditField)),e.xp6(1),e.Q6J("for",o)}}function ae(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"div",29)(1,"button",51),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.onFormCancel())}),e._UZ(2,"i",52),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",53),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.onFormSubmit())}),e._UZ(6,"i",54),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&i){e.oxw();const o=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!o.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let re=(()=>{class i{constructor(o,t,r,d,W,se,_e,de,ce){(0,_.Z)(this,"data",void 0),(0,_.Z)(this,"dialogRef",void 0),(0,_.Z)(this,"coreEnumService",void 0),(0,_.Z)(this,"coreUserClaimContentService",void 0),(0,_.Z)(this,"publicHelper",void 0),(0,_.Z)(this,"cmsToastrService",void 0),(0,_.Z)(this,"cdr",void 0),(0,_.Z)(this,"translate",void 0),(0,_.Z)(this,"tokenHelper",void 0),(0,_.Z)(this,"requestId",0),(0,_.Z)(this,"formGroup",void 0),(0,_.Z)(this,"fieldsInfo",new Map),(0,_.Z)(this,"selectFileTypeMainImage",["jpg","jpeg","png"]),(0,_.Z)(this,"cmsApiStoreSubscribe",void 0),(0,_.Z)(this,"tokenInfo",new C.OdC),(0,_.Z)(this,"ProfessionalData",!1),(0,_.Z)(this,"fileManagerTree",void 0),(0,_.Z)(this,"appLanguage","fa"),(0,_.Z)(this,"loading",new m.O),(0,_.Z)(this,"dataModelResult",new C.y$4),(0,_.Z)(this,"dataModel",new C.NQc),(0,_.Z)(this,"formInfo",new C.LEF),(0,_.Z)(this,"dataModelEnumRecordStatusResult",new C.y$4),(0,_.Z)(this,"fileManagerOpenForm",!1),this.data=o,this.dialogRef=t,this.coreEnumService=r,this.coreUserClaimContentService=d,this.publicHelper=W,this.cmsToastrService=se,this.cdr=_e,this.translate=de,this.tokenHelper=ce,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),o&&(this.requestId=+o.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(B=>{this.tokenInfo=B,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:B=>{this.tokenInfo=B,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1}})}ngOnInit(){if(!(this.requestId>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.formTitle=this.translate.instant("TITLE.Edit"),this.DataGetOneContent(),this.getEnumRecordStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumRecordStatus(){var o=this;return(0,Z.Z)(function*(){o.dataModelEnumRecordStatusResult=yield o.publicHelper.getEnumRecordStatus()})()}DataGetOneContent(){if(this.requestId<=0)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.formAlert=this.translate.instant("MESSAGE.Receiving_Information_From_The_Server"),this.formInfo.formError="";const o=this.constructor.name+"main";this.loading.Start(o),this.coreUserClaimContentService.setAccessLoad(),this.coreUserClaimContentService.setAccessDataType(C.MZK.Editor),this.coreUserClaimContentService.ServiceGetOneById(this.requestId).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModel=t.item,t.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+t.item.id,this.formInfo.formAlert=""):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.loading.Stop(o)},error:t=>{this.cmsToastrService.typeError(t),this.loading.Stop(o)}})}DataEditContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const o=this.constructor.name+"main";this.loading.Start(o,this.translate.instant("MESSAGE.sending_information_to_the_server")),this.coreUserClaimContentService.ServiceEdit(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.loading.Stop(o)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.loading.Stop(o)}})}onActionFileSelected(o){this.dataModel.linkFileContentId=o.id,this.dataModel.linkFileContentIdSrc=o.downloadLinksrc}onActionSelectUser(o){!o||o.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_user"),this.translate.instant("MESSAGE.Information_user_is_not_clear")):this.dataModel.linkUserId=o.id}onActionSelectSite(o){!o||o.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_site"),this.translate.instant("MESSAGE.Information_site_is_not_clear")):this.dataModel.linkSiteId=o.id}onActionSelectClaimType(o){!o||o.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_category"),this.translate.instant("MESSAGE.type_of_information_documents_is_not_clear")):this.dataModel.linkUserClaimTypeId=o.id}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return(0,_.Z)(i,"\u0275fac",function(o){return new(o||i)(e.Y36(n.WI),e.Y36(n.so),e.Y36(C.FLW),e.Y36(C.qlG),e.Y36(I.i),e.Y36(T.e),e.Y36(e.sBO),e.Y36(S.sK),e.Y36(P.v))}),(0,_.Z)(i,"\u0275cmp",e.Xpm({type:i,selectors:[["app-core-userclaim-edit"]],viewQuery:function(o,t){if(1&o&&e.Gf(N,5),2&o){let r;e.iGM(r=e.CRH())&&(t.formGroup=r.first)}},decls:71,vars:49,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.titleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","end"],[4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionLoading","optionDisabled","optionChange","optionLoadingChange",4,"ngIf"],[3,"optionSelectForce","optionLoading","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange",4,"ngIf"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name"," dataModel.linkFileContentId","type","text","autocomplete","off",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.description","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["Description",""],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["matInput","","name","dataModel.approvedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.recordStatus",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"optionSelectForce","optionPlaceholder","optionLoading","optionDisabled","optionChange","optionLoadingChange"],[3,"optionSelectForce","optionLoading","optionPlaceholder","optionDisabled","optionChange","optionLoadingChange"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.approveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.expireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(o,t){if(1&o&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.YNc(6,E,8,8,"mat-form-field",5),e.YNc(7,u,11,6,"mat-form-field",5),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10),e.qZA(),e.TgZ(11,"input",7,8),e.NdJ("ngModelChange",function(d){return t.dataModel.titleResourceLanguage=d}),e.qZA(),e.YNc(13,g,2,0,"mat-icon",9),e.TgZ(14,"mat-icon",10),e._uU(15,"mode_edit"),e.qZA(),e.TgZ(16,"mat-hint",11),e._uU(17),e.qZA(),e.YNc(18,p,5,4,"mat-error",12),e.qZA(),e.YNc(19,q,1,4,"app-cms-user-selector",13),e.YNc(20,w,1,4,"app-cms-site-selector",13),e.YNc(21,H,1,4,"app-core-userclaimtype-selector",14),e.TgZ(22,"div",15),e.YNc(23,Y,2,3,"img",16),e.qZA(),e.TgZ(24,"div",17)(25,"mat-form-field",6)(26,"mat-label",18),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"input",19,20),e.NdJ("ngModelChange",function(d){return t.dataModel.linkFileContentId=d})("click",function(){return t.fileManagerOpenForm=!0}),e.ALo(31,"translate"),e.qZA(),e.YNc(32,j,2,0,"mat-icon",9),e.TgZ(33,"mat-icon",21),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(34,"mode_edit"),e.qZA()(),e.TgZ(35,"cms-file-manager",22),e.NdJ("itemSelected",function(d){return t.onActionFileSelected(d)})("openFormChange",function(d){return t.fileManagerOpenForm=d}),e.qZA()(),e.TgZ(36,"mat-form-field",6)(37,"mat-label"),e._uU(38),e.qZA(),e.TgZ(39,"textarea",23,24),e.NdJ("ngModelChange",function(d){return t.dataModel.description=d}),e.qZA(),e.YNc(41,V,2,0,"mat-icon",9),e.TgZ(42,"mat-icon",10),e._uU(43,"mode_edit"),e.qZA(),e.TgZ(44,"mat-hint",11),e._uU(45),e.qZA(),e.YNc(46,$,5,4,"mat-error",12),e.qZA(),e._UZ(47,"hr"),e.TgZ(48,"div",6),e.YNc(49,z,2,3,"mat-slide-toggle",25),e.qZA(),e.TgZ(50,"mat-form-field",6)(51,"mat-label"),e._uU(52),e.qZA(),e.TgZ(53,"textarea",26,27),e.NdJ("ngModelChange",function(d){return t.dataModel.approvedResult=d}),e.qZA(),e.YNc(55,X,2,0,"mat-icon",9),e.TgZ(56,"mat-icon",10),e._uU(57,"mode_edit"),e.qZA(),e.TgZ(58,"mat-hint",11),e._uU(59),e.qZA(),e.YNc(60,ee,5,4,"mat-error",12),e.qZA(),e.YNc(61,ne,9,6,"mat-form-field",5),e.YNc(62,le,8,5,"mat-form-field",5),e.qZA(),e.TgZ(63,"div",28)(64,"div",29)(65,"small",30),e._uU(66),e.qZA(),e.TgZ(67,"small",31),e._uU(68),e.qZA()()(),e.TgZ(69,"div",32),e.YNc(70,ae,9,7,"div",33),e.qZA()()),2&o){const r=e.MAs(12),d=e.MAs(40),W=e.MAs(54);e.xp6(3),e.hij(" ",t.formInfo.formTitle," "),e.xp6(2),e.Q6J("options",t.loading),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(3),e.Oqu(null==t.fieldsInfo.titleResourceLanguage?null:t.fieldsInfo.titleResourceLanguage.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.titleResourceLanguage?null:t.fieldsInfo.titleResourceLanguage.fieldTitle),e.Q6J("ngModel",t.dataModel.titleResourceLanguage)("disabled",!(null!=t.fieldsInfo.titleResourceLanguage&&t.fieldsInfo.titleResourceLanguage.accessEditField)),e.xp6(2),e.Q6J("ngIf",t.dataModel.titleResourceLanguage),e.xp6(4),e.hij("",r.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(2),e.Q6J("ngIf",(null==t.dataModel||null==t.dataModel.linkFileContentIdSrc?null:t.dataModel.linkFileContentIdSrc.length)>0),e.xp6(4),e.hij("",e.lcZ(28,45,"TITLE.Document_File")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(31,47,"TITLE.Original_File_ID")),e.Q6J("ngModel",t.dataModel.linkFileContentId),e.xp6(3),e.Q6J("ngIf",t.dataModel.linkFileContentId),e.xp6(3),e.Q6J("language",t.appLanguage)("isPopup",!0)("openForm",t.fileManagerOpenForm)("tree",t.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(3),e.Oqu(null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle),e.Q6J("ngModel",t.dataModel.description),e.xp6(2),e.Q6J("ngIf",t.dataModel.description),e.xp6(4),e.hij("",d.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==d.errors?null:d.errors.required),e.xp6(3),e.Q6J("ngIf",null==t.fieldsInfo.isApproved?null:t.fieldsInfo.isApproved.accessWatchField),e.xp6(3),e.Oqu(null==t.fieldsInfo.approvedResult?null:t.fieldsInfo.approvedResult.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.description?null:t.fieldsInfo.description.fieldTitle),e.Q6J("ngModel",t.dataModel.approvedResult),e.xp6(2),e.Q6J("ngIf",t.dataModel.approvedResult),e.xp6(4),e.hij("",W.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==W.errors?null:W.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.fieldsInfo.approveCheckDate?null:t.fieldsInfo.approveCheckDate.accessWatchField),e.xp6(1),e.Q6J("ngIf",null==t.fieldsInfo.expireDate?null:t.fieldsInfo.expireDate.accessWatchField),e.xp6(4),e.hij("",t.formInfo.formAlert," "),e.xp6(2),e.hij("",t.formInfo.formError," "),e.xp6(2),e.Q6J("ngIf",t.formInfo.formSubmitAllow&&!t.loading.display)}},dependencies:[v.sg,v.O5,h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.wO,h.nD,h.On,h.F,L.ey,A.Mq,A.hl,A.nW,M.KE,M.hX,M.bx,M.TO,M.R9,x.Hw,D.Nt,O.gD,R.Rr,y.HG,F.P,k.g,b.O,K.b,S.X$,J.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})),i})()},56014:(Q,U,s)=>{s.d(U,{b:()=>G});var Z=s(8239),_=s(86889),n=s(64537),C=s(20092),m=s(34511),e=s(57445),I=s(51927),T=s(83151),S=s(42147),P=s(61528),v=s(27969),h=s(60656),L=s(32607),A=s(56707),M=s(88692),x=s(61637),D=s(1379),O=s(88659),R=s(83331),y=s(39665),F=s(81418);function k(f,E){if(1&f&&(n._UZ(0,"img",8),n.ALo(1,"cmsthumbnail")),2&f){const l=n.oxw();n.s9C("src",n.lcZ(1,1,l.dataModelSelect.linkMainImageIdSrc),n.LSH)}}function b(f,E){if(1&f&&(n._UZ(0,"img",8),n.ALo(1,"cmsthumbnail")),2&f){const l=n.oxw().$implicit;n.s9C("src",n.lcZ(1,1,l.linkMainImageIdSrc),n.LSH)}}function K(f,E){if(1&f&&(n.TgZ(0,"mat-option",9),n.YNc(1,b,2,3,"img",2),n.TgZ(2,"span"),n._uU(3),n.qZA()()),2&f){const l=E.$implicit,a=n.oxw();n.Q6J("value",l)("disabled",a.optionDisabled),n.xp6(1),n.Q6J("ngIf",l.linkMainImageIdSrc),n.xp6(2),n.Oqu(a.displayOption(l))}}function J(f,E){if(1&f){const l=n.EpF();n.TgZ(0,"mat-icon",10),n.NdJ("click",function(){n.CHM(l);const u=n.oxw();return n.KtG(u.onActionSelectClear())}),n._uU(1,"close"),n.qZA()}}const N=["*"];let G=(()=>{class f{constructor(l,a,u,g,p){(0,_.Z)(this,"coreEnumService",void 0),(0,_.Z)(this,"cmsToastrService",void 0),(0,_.Z)(this,"cdr",void 0),(0,_.Z)(this,"translate",void 0),(0,_.Z)(this,"categoryService",void 0),(0,_.Z)(this,"dataModelResult",new m.y$4),(0,_.Z)(this,"dataModelSelect",new m.OoK),(0,_.Z)(this,"formControl",new C.NI),(0,_.Z)(this,"filteredOptions",void 0),(0,_.Z)(this,"optionDisabled",!1),(0,_.Z)(this,"optionSelectFirstItem",!1),(0,_.Z)(this,"optionPlaceholder",""),(0,_.Z)(this,"optionChange",new n.vpe),(0,_.Z)(this,"optionReload",()=>this.onActionReload()),(0,_.Z)(this,"loading",new h.O),this.coreEnumService=l,this.cmsToastrService=a,this.cdr=u,this.translate=g,this.categoryService=p,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(l){this.onActionSelectForce(l)}get optionLoading(){return this.loading}set optionLoading(l){this.loading=l}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,I.O)(""),(0,T.b)(1500),(0,S.x)(),(0,P.w)(l=>"string"==typeof l||"number"==typeof l?this.DataGetAll(l||""):[]))}displayFn(l){return l?l.titleML:void 0}displayOption(l){return l?l.titleML:void 0}DataGetAll(l){var a=this;return(0,Z.Z)(function*(){const u=new m.Hay;u.rowPerPage=20,u.accessLoad=!0;let g=new m.AO3;g.propertyName="Title",g.value=l,g.searchType=m.b3P.Contains,g.clauseType=m.KT6.Or,u.filters.push(g),l&&"number"==typeof+l&&+l>0&&(g=new m.AO3,g.propertyName="Id",g.value=l,g.searchType=m.b3P.Equal,g.clauseType=m.KT6.Or,u.filters.push(g));const p=a.constructor.name+"main";return a.loading.Start(p),yield(0,e.z)(a.categoryService.ServiceGetAll(u)).then(q=>(a.dataModelResult=q,a.optionSelectFirstItem&&(!a.dataModelSelect||!a.dataModelSelect.id||a.dataModelSelect.id<=0)&&a.dataModelResult.listItems.length>0&&(a.optionSelectFirstItem=!1,setTimeout(()=>{a.formControl.setValue(a.dataModelResult.listItems[0])},1e3),a.onActionSelect(a.dataModelResult.listItems[0])),a.loading.Stop(p),q.listItems))})()}onActionSelect(l){this.optionDisabled||(this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(l){return this.filteredOptions.pipe((0,v.U)(a=>(a.find(u=>u.id===l.id)||a.push(l),a)))}onActionSelectForce(l){if("number"==typeof l&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(a=>a.id===l)){const a=this.dataModelResult.listItems.find(u=>u.id===l);return this.dataModelSelect=a,void this.formControl.setValue(a)}this.categoryService.ServiceGetOneById(l).subscribe({next:a=>{a.isSuccess?(this.filteredOptions=this.push(a.item),this.dataModelSelect=a.item,this.formControl.setValue(a.item),this.optionChange.emit(a.item)):this.cmsToastrService.typeErrorMessage(a.errorMessage)}})}else{if(typeof l==typeof m.OoK)return this.filteredOptions=this.push(l),this.dataModelSelect=l,void this.formControl.setValue(l);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new m.OoK,this.loadOptions()}}return(0,_.Z)(f,"\u0275fac",function(l){return new(l||f)(n.Y36(m.FLW),n.Y36(L.e),n.Y36(n.sBO),n.Y36(A.sK),n.Y36(m.kf3))}),(0,_.Z)(f,"\u0275cmp",n.Xpm({type:f,selectors:[["app-core-userclaimtype-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:N,decls:11,vars:10,consts:[[1,"ntk-full-width"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto17","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(l,a){if(1&l&&(n.F$t(),n.TgZ(0,"mat-form-field",0)(1,"span",1),n.YNc(2,k,2,3,"img",2),n._uU(3," \xa0"),n.qZA(),n._UZ(4,"input",3),n.TgZ(5,"mat-autocomplete",4,5),n.NdJ("optionSelected",function(g){return a.onActionSelect(g.option.value)}),n.YNc(7,K,4,4,"mat-option",6),n.ALo(8,"async"),n.qZA(),n.YNc(9,J,2,0,"mat-icon",7),n.Hsn(10),n.qZA()),2&l){const u=n.MAs(6);n.xp6(2),n.Q6J("ngIf",a.dataModelSelect&&a.dataModelSelect.linkMainImageIdSrc),n.xp6(2),n.s9C("placeholder",a.optionPlaceholder),n.Q6J("formControl",a.formControl)("matAutocomplete",u),n.uIk("disabled",!!a.optionDisabled||null),n.xp6(1),n.Q6J("displayWith",a.displayFn),n.xp6(2),n.Q6J("ngForOf",n.lcZ(8,8,a.filteredOptions)),n.xp6(2),n.Q6J("ngIf",a.dataModelSelect.id)}},dependencies:[M.sg,M.O5,C.Fj,C.JJ,C.oH,x.XC,D.ey,x.ZL,O.KE,O.qo,O.R9,R.Hw,y.Nt,M.Ov,F.v]})),f})()},56939:(Q,U,s)=>{s.d(U,{V:()=>n});var Z=s(86889),_=s(64537);let n=(()=>{class C{transform(e,I){if(!e||!I||0===I.length)return"";const T=I.find(S=>S.id===e);return T?T.titleML&&0!==T.titleML.length?T.titleML:T.title:e}}return(0,Z.Z)(C,"\u0275fac",function(e){return new(e||C)}),(0,Z.Z)(C,"\u0275pipe",_.Yjl({name:"cmstitle",type:C,pure:!0})),C})()},63181:(Q,U,s)=>{s.d(U,{g:()=>G});var Z=s(8239),_=s(86889),n=s(64537),C=s(20092),m=s(34511),e=s(57445),I=s(51927),T=s(83151),S=s(42147),P=s(61528),v=s(27969),h=s(60656),L=s(56707),A=s(88692),M=s(61637),x=s(1379),D=s(88659),O=s(83331),R=s(39665),y=s(75738),F=s(81418);function k(f,E){if(1&f&&(n._UZ(0,"img",9),n.ALo(1,"cmsthumbnail")),2&f){const l=n.oxw();n.s9C("src",n.lcZ(1,1,l.dataModelSelect.linkMainImageIdSrc),n.LSH)}}function b(f,E){if(1&f&&(n._UZ(0,"img",9),n.ALo(1,"cmsthumbnail")),2&f){const l=n.oxw().$implicit;n.s9C("src",n.lcZ(1,1,l.linkMainImageIdSrc),n.LSH)}}function K(f,E){if(1&f&&(n.TgZ(0,"mat-option",10),n.YNc(1,b,2,3,"img",11),n.TgZ(2,"span"),n._uU(3),n.qZA()()),2&f){const l=E.$implicit,a=n.oxw();n.Q6J("value",l)("disabled",a.optionDisabled),n.xp6(1),n.Q6J("ngIf",l.linkMainImageIdSrc),n.xp6(2),n.Oqu(a.displayOption(l))}}function J(f,E){if(1&f){const l=n.EpF();n.TgZ(0,"mat-icon",12),n.NdJ("click",function(){n.CHM(l);const u=n.oxw();return n.KtG(u.onActionSelectClear())}),n._uU(1,"close"),n.qZA()}}const N=["*"];let G=(()=>{class f{constructor(l,a,u,g){(0,_.Z)(this,"coreEnumService",void 0),(0,_.Z)(this,"cdr",void 0),(0,_.Z)(this,"translate",void 0),(0,_.Z)(this,"categoryService",void 0),(0,_.Z)(this,"id",++f.nextId),(0,_.Z)(this,"dataModelResult",new m.y$4),(0,_.Z)(this,"dataModelSelect",new m.NCo),(0,_.Z)(this,"loading",new h.O),(0,_.Z)(this,"formControl",new C.NI),(0,_.Z)(this,"filteredOptions",void 0),(0,_.Z)(this,"optionDisabled",!1),(0,_.Z)(this,"optionSelectFirstItem",!1),(0,_.Z)(this,"optionPlaceholder",""),(0,_.Z)(this,"optionChange",new n.vpe),(0,_.Z)(this,"optionReload",()=>this.onActionReload()),this.coreEnumService=l,this.cdr=a,this.translate=u,this.categoryService=g,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}get optionLoading(){return this.loading}set optionLoading(l){this.loading=l}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,I.O)(""),(0,T.b)(1500),(0,S.x)(),(0,P.w)(l=>this.DataGetAll("string"==typeof l||"number"==typeof l?l:"")))}displayFn(l){let a="";return l&&(l.username&&l.username.length>0&&(a=a+" "+l.username),l.name&&l.name.length>0&&(a=a+" "+l.name),l.lastName&&l.lastName.length>0&&(a=a+" "+l.lastName),a=a+"#:"+l.id),a}displayOption(l){let a="";return l&&(l.username&&l.username.length>0&&(a=a+" "+l.username),l.name&&l.name.length>0&&(a=a+" "+l.name),l.lastName&&l.lastName.length>0&&(a=a+" "+l.lastName),a=a+"#:"+l.id),a}DataGetAll(l){var a=this;return(0,Z.Z)(function*(){const u=new m.Hay;if(u.rowPerPage=20,u.accessLoad=!0,l&&l.length>0){let p=new m.AO3;p=new m.AO3,p.propertyName="username",p.value=l,p.searchType=m.b3P.Contains,p.clauseType=m.KT6.Or,u.filters.push(p),p=new m.AO3,p.propertyName="name",p.value=l,p.searchType=m.b3P.Contains,p.clauseType=m.KT6.Or,u.filters.push(p),p=new m.AO3,p.propertyName="email",p.value=l,p.searchType=m.b3P.Contains,p.clauseType=m.KT6.Or,u.filters.push(p),p=new m.AO3,p.propertyName="lastname",p.value=l,p.searchType=m.b3P.Contains,p.clauseType=m.KT6.Or,u.filters.push(p),l&&"number"==typeof+l&&+l>0&&(p=new m.AO3,p.propertyName="Id",p.value=l,p.searchType=m.b3P.Equal,p.clauseType=m.KT6.Or,u.filters.push(p))}const g=a.constructor.name+"main";return a.loading.Start(g),yield(0,e.z)(a.categoryService.ServiceGetAll(u)).then(p=>(a.dataModelResult=p,a.optionSelectFirstItem&&(!a.dataModelSelect||!a.dataModelSelect.id||a.dataModelSelect.id<=0)&&a.dataModelResult.listItems.length>0&&(a.optionSelectFirstItem=!1,setTimeout(()=>{a.formControl.setValue(a.dataModelResult.listItems[0])},1e3),a.onActionSelect(a.dataModelResult.listItems[0])),a.loading.Stop(g),p.listItems))})()}onActionSelect(l){this.optionDisabled||(this.dataModelSelect=l,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(l){return this.filteredOptions.pipe((0,v.U)(a=>(a.find(u=>u.id===l.id)||a.push(l),a)))}onActionSelectForce(l){if("number"==typeof l&&l>0){if(this.dataModelSelect&&this.dataModelSelect.id===l)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(a=>a.id===l)){const a=this.dataModelResult.listItems.find(u=>u.id===l);return this.dataModelSelect=a,void this.formControl.setValue(a)}this.categoryService.ServiceGetOneById(l).subscribe(a=>{a.isSuccess&&(this.filteredOptions=this.push(a.item),this.dataModelSelect=a.item,this.formControl.setValue(a.item),this.optionChange.emit(a.item))})}else{if(typeof l==typeof m.NCo)return this.filteredOptions=this.push(l),this.dataModelSelect=l,void this.formControl.setValue(l);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new m.NCo,this.loadOptions()}}return(0,_.Z)(f,"nextId",0),(0,_.Z)(f,"\u0275fac",function(l){return new(l||f)(n.Y36(m.FLW),n.Y36(n.sBO),n.Y36(L.sK),n.Y36(m.k$Z))}),(0,_.Z)(f,"\u0275cmp",n.Xpm({type:f,selectors:[["app-cms-user-selector"]],inputs:{optionLoading:"optionLoading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:N,decls:12,vars:11,consts:[[1,"ntk-full-width"],[3,"options"],["matPrefix",""],["class","ntk-hover-zoom","style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto35","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(l,a){if(1&l&&(n.F$t(),n.TgZ(0,"mat-form-field",0),n._UZ(1,"app-progress-spinner",1),n.TgZ(2,"span",2),n.YNc(3,k,2,3,"img",3),n._uU(4," \xa0"),n.qZA(),n._UZ(5,"input",4),n.TgZ(6,"mat-autocomplete",5,6),n.NdJ("optionSelected",function(g){return a.onActionSelect(g.option.value)}),n.YNc(8,K,4,4,"mat-option",7),n.ALo(9,"async"),n.qZA(),n.YNc(10,J,2,0,"mat-icon",8),n.Hsn(11),n.qZA()),2&l){const u=n.MAs(7);n.xp6(1),n.Q6J("options",a.loading),n.xp6(2),n.Q6J("ngIf",a.dataModelSelect&&a.dataModelSelect.linkMainImageIdSrc),n.xp6(2),n.s9C("placeholder",a.optionPlaceholder),n.Q6J("formControl",a.formControl)("matAutocomplete",u),n.uIk("disabled",!!a.optionDisabled||null),n.xp6(1),n.Q6J("displayWith",a.displayFn),n.xp6(2),n.Q6J("ngForOf",n.lcZ(9,9,a.filteredOptions)),n.xp6(2),n.Q6J("ngIf",a.dataModelSelect.id)}},dependencies:[A.sg,A.O5,C.Fj,C.JJ,C.oH,M.XC,x.ey,M.ZL,D.KE,D.qo,D.R9,O.Hw,R.Nt,y.O,A.Ov,F.v],encapsulation:2})),f})()}}]);