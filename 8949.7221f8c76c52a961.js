"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[8949,4891],{38949:(w,v,l)=>{l.r(v),l.d(v,{FileManagerModule:()=>Se});var s=l(86889),m=l(88692),b=l(26114),t=l(64537),g=l(94032),M=l(99482);let A=(()=>{var n;class a{constructor(o){(0,s.Z)(this,"publicHelper",void 0),(0,s.Z)(this,"appLanguage","fa"),(0,s.Z)(this,"fileManagerOpenForm",!0),(0,s.Z)(this,"fileManagerTree",void 0),(0,s.Z)(this,"selectFileType",[]),this.publicHelper=o,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){}}return n=a,(0,s.Z)(a,"\u0275fac",function(o){return new(o||n)(t.Y36(g.i))}),(0,s.Z)(a,"\u0275cmp",t.Xpm({type:n,selectors:[["app-file-content-explorer"]],decls:1,vars:7,consts:[[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","openFormChange"]],template:function(o,e){1&o&&(t.TgZ(0,"cms-file-manager",0),t.NdJ("openFormChange",function(c){return e.fileManagerOpenForm=c}),t.qZA()),2&o&&t.Q6J("language",e.appLanguage)("isPopup",!1)("openForm",e.fileManagerOpenForm)("tree",e.fileManagerTree)("openFilemanagerButtonLabelKey","select")("selectFileType",e.selectFileType)("openFilemanagerButtonView",!1)},dependencies:[M.HG]})),a})();var _=l(80418),d=l(34511),E=l(8918),T=l(97147),S=l(76997),O=l(57154),I=l(60656),u=l(54536),h=l(56707),C=l(32607),p=l(20092),y=l(88659),F=l(39665),k=l(75738);const j=["vform"];function W(n,a){if(1&n){const i=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",10)(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"input",11,12),t.NdJ("ngModelChange",function(e){t.CHM(i);const r=t.oxw();return t.KtG(r.dataModelResultContent.item.fileName=e)}),t.qZA()(),t.TgZ(6,"mat-form-field",10)(7,"mat-label"),t._uU(8),t.qZA(),t.TgZ(9,"textarea",13,14),t.NdJ("ngModelChange",function(e){t.CHM(i);const r=t.oxw();return t.KtG(r.dataModelResultContent.item.description=e)}),t.qZA()(),t.BQk()}if(2&n){const i=t.oxw();t.xp6(3),t.Oqu(null==i.fieldsInfo.title?null:i.fieldsInfo.title.fieldTitle),t.xp6(1),t.s9C("placeholder",null==i.fieldsInfo.title?null:i.fieldsInfo.title.fieldTitle),t.Q6J("ngModel",i.dataModelResultContent.item.fileName),t.xp6(4),t.Oqu(null==i.fieldsInfo.description?null:i.fieldsInfo.description.fieldTitle),t.xp6(1),t.s9C("placeholder",null==i.fieldsInfo.description?null:i.fieldsInfo.description.fieldTitle),t.Q6J("ngModel",i.dataModelResultContent.item.description)}}function $(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"div",5)(1,"button",15),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onFormDelete())}),t._UZ(2,"i",16),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",17),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onFormCancel())}),t._UZ(6,"i",18),t._uU(7),t.ALo(8,"translate"),t.qZA()()}if(2&n){const i=t.oxw();t.xp6(1),t.Q6J("disabled",!i.formInfo.buttonSubmittedEnabled),t.xp6(2),t.hij(" ",t.lcZ(4,3,"ACTION.DELETE")," "),t.xp6(4),t.hij(" ",t.lcZ(8,5,"ACTION.CANCEL")," ")}}let z=(()=>{var n;class a{constructor(o,e,r,c,f,Z,R){(0,s.Z)(this,"data",void 0),(0,s.Z)(this,"dialogRef",void 0),(0,s.Z)(this,"publicHelper",void 0),(0,s.Z)(this,"fileContentService",void 0),(0,s.Z)(this,"cdr",void 0),(0,s.Z)(this,"translate",void 0),(0,s.Z)(this,"cmsToastrService",void 0),(0,s.Z)(this,"requestId",0),(0,s.Z)(this,"formGroup",void 0),(0,s.Z)(this,"fieldsInfo",new Map),(0,s.Z)(this,"loading",new I.O),(0,s.Z)(this,"dataModelResultContent",new d.y$4),(0,s.Z)(this,"formInfo",new d.LEF),this.data=o,this.dialogRef=e,this.publicHelper=r,this.fileContentService=c,this.cdr=f,this.translate=Z,this.cmsToastrService=R,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),o&&(this.requestId=+o.id||0)}ngOnInit(){if(this.requestId<=0)return this.cmsToastrService.typeErrorDeleteRowIsNull(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGetOne()}DataGetOne(){if(0===this.requestId)return void this.cmsToastrService.typeErrorDeleteRowIsNull();this.formInfo.formAlert=this.translate.instant("TITLE.Loading_Information");const o=this.constructor.name+"main";this.loading.Start(o),this.fileContentService.setAccessLoad(),this.fileContentService.setAccessDataType(d.dR.Editor),this.fileContentService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResultContent=e,e.isSuccess?this.formInfo.formAlert="":(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=e.errorMessage,this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorGetOne()),this.loading.Stop(o)},error:e=>{this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeError(e),this.loading.Stop(o)}})}onFormDelete(){if(0===this.requestId)return void this.cmsToastrService.typeErrorDeleteRowIsNull();this.formInfo.formSubmitAllow=!1,this.formInfo.buttonSubmittedEnabled=!1;const o=this.constructor.name+"main";this.loading.Start(o),this.fileContentService.ServiceDelete(this.requestId).subscribe({next:e=>{this.formInfo.formSubmitAllow=!e.isSuccess,e.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.Deletion_Was_Successful"),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.buttonSubmittedEnabled=!0,this.loading.Stop(o)},error:e=>{this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(e),this.formInfo.buttonSubmittedEnabled=!0,this.loading.Stop(o)}})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return n=a,(0,s.Z)(a,"\u0275fac",function(o){return new(o||n)(t.Y36(u.WI),t.Y36(u.so),t.Y36(g.i),t.Y36(d.aKP),t.Y36(t.sBO),t.Y36(h.sK),t.Y36(C.e))}),(0,s.Z)(a,"\u0275cmp",t.Xpm({type:n,selectors:[["app-file-content-delete"]],viewQuery:function(o,e){if(1&o&&t.Gf(j,5),2&o){let r;t.iGM(r=t.CRH())&&(e.formGroup=r.first)}},decls:13,vars:6,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModelResultContent.item.title","type","text","required","","readonly","",3,"ngModel","placeholder","ngModelChange"],["Writer",""],["matInput","","name","dataModelResultContent.item.description","type","text","minlength","1","maxlength","100","readonly","","required","","rows","5",3,"ngModel","placeholder","ngModelChange"],["Content",""],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t._UZ(3,"app-progress-spinner",2),t.YNc(4,W,11,6,"ng-container",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"small",6),t._uU(8),t.qZA(),t.TgZ(9,"small",7),t._uU(10),t.qZA()()(),t.TgZ(11,"div",8),t.YNc(12,$,9,7,"div",9),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",e.formInfo.formTitle," "),t.xp6(2),t.Q6J("options",e.loading),t.xp6(1),t.Q6J("ngIf",null==e.dataModelResultContent?null:e.dataModelResultContent.item),t.xp6(4),t.hij("",e.formInfo.formAlert," "),t.xp6(2),t.hij("",e.formInfo.formError," "),t.xp6(2),t.Q6J("ngIf",e.formInfo.formSubmitAllow&&!(null!=e.loading&&e.loading.display)))},dependencies:[m.O5,p.Fj,p.JJ,p.Q7,p.wO,p.nD,p.On,y.KE,y.hX,F.Nt,k.O,h.X$]})),a})();var U=l(50727),Y=l(9638),G=l(83331),J=l(83319),V=l(53538),X=l(64639),P=l(56558),tt=l(43014),et=l(10626),ot=l(37980),nt=l(13673),it=l(55211),x=l(18849),q=l(8239),st=l(57445),at=l(51927),rt=l(83151),lt=l(42147),ct=l(61528),dt=l(27969),H=l(61637),Q=l(1379),mt=l(81418);function ut(n,a){if(1&n&&(t._UZ(0,"img",8),t.ALo(1,"cmsthumbnail")),2&n){const i=t.oxw();t.s9C("src",t.lcZ(1,1,i.dataModelSelect.linkMainImageIdSrc),t.LSH)}}function ft(n,a){if(1&n&&(t._UZ(0,"img",8),t.ALo(1,"cmsthumbnail")),2&n){const i=t.oxw().$implicit;t.s9C("src",t.lcZ(1,1,i.linkMainImageIdSrc),t.LSH)}}function ht(n,a){if(1&n&&(t.TgZ(0,"mat-option",9),t.YNc(1,ft,2,3,"img",2),t.TgZ(2,"span"),t._uU(3),t.qZA()()),2&n){const i=a.$implicit,o=t.oxw();t.Q6J("value",i),t.xp6(1),t.Q6J("ngIf",i.linkMainImageIdSrc),t.xp6(2),t.Oqu(o.displayOption(i))}}function pt(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"mat-icon",10),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onActionSelectClear())}),t._uU(1,"close"),t.qZA()}}const gt=["*"];let _t=(()=>{var n;class a{constructor(o,e,r,c,f){(0,s.Z)(this,"coreEnumService",void 0),(0,s.Z)(this,"cmsToastrService",void 0),(0,s.Z)(this,"translate",void 0),(0,s.Z)(this,"cdr",void 0),(0,s.Z)(this,"categoryService",void 0),(0,s.Z)(this,"dataModelResult",new d.y$4),(0,s.Z)(this,"dataModelSelect",new d.gzV),(0,s.Z)(this,"formControl",new p.NI),(0,s.Z)(this,"filteredOptions",void 0),(0,s.Z)(this,"optionPlaceholder",""),(0,s.Z)(this,"optionSelectFirstItem",!1),(0,s.Z)(this,"optionChange",new t.vpe),(0,s.Z)(this,"optionReload",()=>this.onActionReload()),(0,s.Z)(this,"loading",new I.O),this.coreEnumService=o,this.cmsToastrService=e,this.translate=r,this.cdr=c,this.categoryService=f,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(o){this.onActionSelectForce(o)}get optionLoading(){return this.loading}set optionLoading(o){this.loading=o}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,at.O)(""),(0,rt.b)(1500),(0,lt.x)(),(0,ct.w)(o=>"string"==typeof o||"number"==typeof o?this.DataGetAll(o||""):[]))}displayFn(o){return o?o.title:void 0}displayOption(o){return o?o.title:void 0}DataGetAll(o){var e=this;return(0,q.Z)(function*(){const r=new d.Hay;r.rowPerPage=20,r.accessLoad=!0;let c=new d.AO3;c.propertyName="Title",c.value=o,c.searchType=d.J6G.Contains,c.clauseType=d.ppe.Or,r.filters.push(c),o&&"number"==typeof+o&&+o>0&&(c=new d.AO3,c.propertyName="Id",c.value=o,c.searchType=d.J6G.Equal,c.clauseType=d.ppe.Or,r.filters.push(c));const f=e.constructor.name+"main";return e.loading.Start(f),yield(0,st.z)(e.categoryService.ServiceGetAll(r)).then(Z=>(e.dataModelResult=Z,e.optionSelectFirstItem&&(!e.dataModelSelect||!e.dataModelSelect.id||e.dataModelSelect.id<=0)&&e.dataModelResult.listItems.length>0&&(e.optionSelectFirstItem=!1,setTimeout(()=>{e.formControl.setValue(e.dataModelResult.listItems[0])},1e3),e.onActionSelect(e.dataModelResult.listItems[0])),e.loading.Stop(f),Z.listItems))})()}onActionSelect(o){this.dataModelSelect=o,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null)}push(o){return this.filteredOptions.pipe((0,dt.U)(e=>(e.find(r=>r.id===o.id)||e.push(o),e)))}onActionSelectForce(o){if("number"==typeof o&&o>0){if(this.dataModelSelect&&this.dataModelSelect.id===o)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(e=>e.id===o)){const e=this.dataModelResult.listItems.find(r=>r.id===o);return this.dataModelSelect=e,void this.formControl.setValue(e)}this.categoryService.ServiceGetOneById(o).subscribe({next:e=>{e.isSuccess?(this.filteredOptions=this.push(e.item),this.dataModelSelect=e.item,this.formControl.setValue(e.item),this.optionChange.emit(e.item)):this.cmsToastrService.typeErrorMessage(e.errorMessage)}})}else{if(typeof o==typeof d.gzV)return this.filteredOptions=this.push(o),this.dataModelSelect=o,void this.formControl.setValue(o);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new d.gzV,this.loadOptions()}}return n=a,(0,s.Z)(a,"\u0275fac",function(o){return new(o||n)(t.Y36(d.FLW),t.Y36(C.e),t.Y36(h.sK),t.Y36(t.sBO),t.Y36(d.E_H))}),(0,s.Z)(a,"\u0275cmp",t.Xpm({type:n,selectors:[["app-file-category-selector"]],inputs:{optionPlaceholder:"optionPlaceholder",optionSelectFirstItem:"optionSelectFirstItem",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:gt,decls:11,vars:9,consts:[[1,"ntk-full-width"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,e){if(1&o&&(t.F$t(),t.TgZ(0,"mat-form-field",0)(1,"span",1),t.YNc(2,ut,2,3,"img",2),t._uU(3," \xa0"),t.qZA(),t._UZ(4,"input",3),t.TgZ(5,"mat-autocomplete",4,5),t.NdJ("optionSelected",function(c){return e.onActionSelect(c.option.value)}),t.YNc(7,ht,4,3,"mat-option",6),t.ALo(8,"async"),t.qZA(),t.YNc(9,pt,2,0,"mat-icon",7),t.Hsn(10),t.qZA()),2&o){const r=t.MAs(6);t.xp6(2),t.Q6J("ngIf",e.dataModelSelect&&(null==e.dataModelSelect?null:e.dataModelSelect.linkMainImageIdSrc)),t.xp6(2),t.s9C("placeholder",e.optionPlaceholder),t.Q6J("formControl",e.formControl)("matAutocomplete",r),t.xp6(1),t.Q6J("displayWith",e.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(8,7,e.filteredOptions)),t.xp6(2),t.Q6J("ngIf",null==e.dataModelSelect?null:e.dataModelSelect.id)}},dependencies:[m.sg,m.O5,p.Fj,p.JJ,p.oH,H.XC,Q.ey,H.ZL,y.KE,y.qo,y.R9,G.Hw,F.Nt,m.Ov,mt.v]})),a})();const St=["vform"];function Ct(n,a){if(1&n){const i=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",10)(2,"mat-label"),t._uU(3),t.qZA(),t.TgZ(4,"input",11,12),t.NdJ("ngModelChange",function(e){t.CHM(i);const r=t.oxw();return t.KtG(r.dataModelResultCategory.item.title=e)}),t.qZA()(),t.TgZ(6,"mat-form-field",10)(7,"mat-label"),t._uU(8),t.qZA(),t.TgZ(9,"textarea",13,14),t.NdJ("ngModelChange",function(e){t.CHM(i);const r=t.oxw();return t.KtG(r.dataModelResultCategory.item.description=e)}),t.qZA()(),t.TgZ(11,"app-file-category-selector",15),t.NdJ("optionLoadingChange",function(e){t.CHM(i);const r=t.oxw();return t.KtG(r.loading=e)}),t.qZA(),t.BQk()}if(2&n){const i=t.oxw();t.xp6(3),t.Oqu(null==i.fieldsInfo.title?null:i.fieldsInfo.title.fieldTitle),t.xp6(1),t.s9C("placeholder",null==i.fieldsInfo.title?null:i.fieldsInfo.title.fieldTitle),t.Q6J("ngModel",i.dataModelResultCategory.item.title),t.xp6(4),t.Oqu(null==i.fieldsInfo.description?null:i.fieldsInfo.description.fieldTitle),t.xp6(1),t.s9C("placeholder",null==i.fieldsInfo.description?null:i.fieldsInfo.description.fieldTitle),t.Q6J("ngModel",i.dataModelResultCategory.item.description),t.xp6(2),t.Q6J("optionLoading",i.loading)("optionPlaceholder",i.translate.instant("TITLE.Alternative_classification_to_move_information_to_this_branchy"))}}function Et(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"div",5)(1,"button",16),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onFormMove())}),t._UZ(2,"i",17),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",18),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onFormDelete())}),t._UZ(6,"i",19),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"button",20),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onFormCancel())}),t._UZ(10,"i",17),t._uU(11),t.ALo(12,"translate"),t.qZA()()}if(2&n){const i=t.oxw();t.xp6(1),t.Q6J("disabled",!i.formInfo.buttonSubmittedEnabled),t.xp6(2),t.hij(" ",t.lcZ(4,5,"TITLE.MOVE_DATA")," "),t.xp6(2),t.Q6J("disabled",!i.formInfo.buttonSubmittedEnabled),t.xp6(2),t.hij(" ",t.lcZ(8,7,"ACTION.DELETE")," "),t.xp6(4),t.hij(" ",t.lcZ(12,9,"ACTION.CANCEL")," ")}}let Tt=(()=>{var n;class a{constructor(o,e,r,c,f,Z,R){(0,s.Z)(this,"data",void 0),(0,s.Z)(this,"dialogRef",void 0),(0,s.Z)(this,"publicHelper",void 0),(0,s.Z)(this,"fileCategoryService",void 0),(0,s.Z)(this,"cdr",void 0),(0,s.Z)(this,"translate",void 0),(0,s.Z)(this,"cmsToastrService",void 0),(0,s.Z)(this,"requestId",0),(0,s.Z)(this,"formGroup",void 0),(0,s.Z)(this,"fieldsInfo",new Map),(0,s.Z)(this,"loading",new I.O),(0,s.Z)(this,"dataModelResultCategory",new d.y$4),(0,s.Z)(this,"dataModelResultCategoryAllData",new d.y$4),(0,s.Z)(this,"dataModel",{}),(0,s.Z)(this,"formInfo",new d.LEF),this.data=o,this.dialogRef=e,this.publicHelper=r,this.fileCategoryService=c,this.cdr=f,this.translate=Z,this.cmsToastrService=R,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),o&&(this.requestId=+o.id||0)}ngOnInit(){if(this.requestId<=0)return this.cmsToastrService.typeErrorDeleteRowIsNull(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGetOne(),this.DataGetAll()}DataGetOne(){if(0===this.requestId)return void this.cmsToastrService.typeErrorDeleteRowIsNull();this.formInfo.formAlert=this.translate.instant("TITLE.Loading_Information");const o=this.constructor.name+"main";this.loading.Start(o),this.fileCategoryService.setAccessLoad(),this.fileCategoryService.setAccessDataType(d.dR.Editor),this.fileCategoryService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModelResultCategory=e,e.isSuccess?this.formInfo.formAlert="":(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=e.errorMessage,this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorGetOne()),this.loading.Stop(o)},error:e=>{this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeError(e),this.loading.Stop(o)}})}DataGetAll(){this.formInfo.formAlert=this.translate.instant("TITLE.Loading_Information");const o=new d.Hay;o.rowPerPage=100;const e=this.constructor.name+"main";this.loading.Start(e),this.fileCategoryService.ServiceGetAll(o).subscribe({next:r=>{this.dataModelResultCategoryAllData=r,r.isSuccess?this.formInfo.formAlert="":(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=r.errorMessage,this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeErrorGetAll()),this.loading.Stop(e)},error:r=>{this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formErrorStatus=!0,this.cmsToastrService.typeError(r),this.loading.Stop(e)}})}onFormMove(){if(0===this.requestId)return void this.cmsToastrService.typeErrorDeleteRowIsNull();if(!this.formGroup.valid)return;this.formInfo.formSubmitAllow=!0,this.dataModel.newCatId===this.requestId&&(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=this.translate.instant("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category"),this.formInfo.buttonSubmittedEnabled=!0),this.formInfo.buttonSubmittedEnabled=!1;const o=this.constructor.name+"main";this.loading.Start(o),this.fileCategoryService.ServiceMove(this.requestId,this.dataModel.newCatId).subscribe({next:e=>{e.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.The_Transfer_Was_Successful"),this.cmsToastrService.typeSuccessMove()):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMove()),this.formInfo.formSubmitAllow=!0,this.formInfo.buttonSubmittedEnabled=!0,this.loading.Stop(o)},error:e=>{this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.cmsToastrService.typeError(e),this.formInfo.buttonSubmittedEnabled=!0,this.formInfo.formSubmitAllow=!0,this.loading.Stop(o)}})}onFormDelete(){if(0===this.requestId)return void this.cmsToastrService.typeErrorDeleteRowIsNull();this.formInfo.formSubmitAllow=!1,this.formInfo.buttonSubmittedEnabled=!1;const o=this.constructor.name+"main";this.loading.Start(o),this.fileCategoryService.ServiceDelete(this.requestId).subscribe({next:e=>{this.formInfo.formSubmitAllow=!e.isSuccess,e.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.Deletion_Was_Successful"),this.cmsToastrService.typeSuccessRemove(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorRemove()),this.formInfo.buttonSubmittedEnabled=!0,this.loading.Stop(o)},error:e=>{this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(e),this.formInfo.buttonSubmittedEnabled=!0,this.loading.Stop(o)}})}onFormChangeNewCatId(o){this.formInfo.formAlert="",0===this.requestId||!o||o.id<=0?this.cmsToastrService.typeErrorDeleteRowIsNull():(this.dataModel.newCatId=o.id,this.dataModel.newCatId===this.requestId?(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=this.translate.instant("ERRORMESSAGE.MESSAGE.The_delete_category_ID_is_the_same_as_the_alternate_category"),this.formInfo.buttonSubmittedEnabled=!1):(this.formInfo.buttonSubmittedEnabled=!0,this.formInfo.formError=""))}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return n=a,(0,s.Z)(a,"\u0275fac",function(o){return new(o||n)(t.Y36(u.WI),t.Y36(u.so),t.Y36(g.i),t.Y36(d.E_H),t.Y36(t.sBO),t.Y36(h.sK),t.Y36(C.e))}),(0,s.Z)(a,"\u0275cmp",t.Xpm({type:n,selectors:[["app-file-category-delete"]],viewQuery:function(o,e){if(1&o&&t.Gf(St,5),2&o){let r;t.iGM(r=t.CRH())&&(e.formGroup=r.first)}},decls:13,vars:6,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModelResultCategory.item.title","type","text","minlength","3","maxlength","50","required","","readonly","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matInput","","name","dataModelResultCategory.item.description","type","text","minlength","1","maxlength","100","readonly","","required","","rows","5",3,"ngModel","placeholder","ngModelChange"],["Description",""],[3,"optionLoading","optionPlaceholder","optionLoadingChange"],["type","button",1,"btn","btn-raised","btn-primary",3,"disabled","click"],[1,"ft-x"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-light",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t._UZ(3,"app-progress-spinner",2),t.YNc(4,Ct,12,8,"ng-container",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"small",6),t._uU(8),t.qZA(),t.TgZ(9,"small",7),t._uU(10),t.qZA()()(),t.TgZ(11,"div",8),t.YNc(12,Et,13,11,"div",9),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",e.formInfo.formTitle," "),t.xp6(2),t.Q6J("options",e.loading),t.xp6(1),t.Q6J("ngIf",null==e.dataModelResultCategory?null:e.dataModelResultCategory.item),t.xp6(4),t.hij("",e.formInfo.formAlert," "),t.xp6(2),t.hij("",e.formInfo.formError," "),t.xp6(2),t.Q6J("ngIf",e.formInfo.formSubmitAllow&&!(null!=e.loading&&e.loading.display)))},dependencies:[m.O5,p.Fj,p.JJ,p.Q7,p.wO,p.nD,p.On,y.KE,y.hX,F.Nt,k.O,_t,h.X$]})),a})();var D=l(70532),Mt=l(18033);const At=["vform"];function vt(n,a){if(1&n&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&n){const i=a.$implicit;t.Q6J("value",i.value),t.xp6(1),t.Oqu(i.description)}}function bt(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," RecordStatus is "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function yt(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"mat-icon",24),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.dataModel.title="")}),t._uU(1,"close"),t.qZA()}}function Zt(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Title is "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function It(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"mat-icon",24),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.dataModel.description="")}),t._uU(1,"close"),t.qZA()}}function Rt(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Description is "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function xt(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"div",18)(1,"button",25),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onFormCancel())}),t._UZ(2,"i",26),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",27),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onFormSubmit())}),t._UZ(6,"i",28),t._uU(7),t.ALo(8,"translate"),t.qZA()()}if(2&n){t.oxw();const i=t.MAs(1);t.xp6(3),t.hij(" ",t.lcZ(4,3,"ACTION.CANCEL")," "),t.xp6(2),t.Q6J("disabled",!i.form.valid),t.xp6(2),t.hij(" ",t.lcZ(8,5,"ACTION.SAVE")," ")}}let B=(()=>{var n;class a{constructor(o,e,r,c,f,Z,R,N){(0,s.Z)(this,"data",void 0),(0,s.Z)(this,"dialogRef",void 0),(0,s.Z)(this,"publicHelper",void 0),(0,s.Z)(this,"coreEnumService",void 0),(0,s.Z)(this,"fileCategoryService",void 0),(0,s.Z)(this,"cmsToastrService",void 0),(0,s.Z)(this,"cdr",void 0),(0,s.Z)(this,"translate",void 0),(0,s.Z)(this,"requestId",0),(0,s.Z)(this,"requestParentId",0),(0,s.Z)(this,"formGroup",void 0),(0,s.Z)(this,"fieldsInfo",new Map),(0,s.Z)(this,"selectFileTypeMainImage",["jpg","jpeg","png"]),(0,s.Z)(this,"fileManagerTree",void 0),(0,s.Z)(this,"appLanguage","fa"),(0,s.Z)(this,"loading",new I.O),(0,s.Z)(this,"dataModelResult",new d.y$4),(0,s.Z)(this,"dataModel",new d.gzV),(0,s.Z)(this,"ComponentAction",D.t.none),(0,s.Z)(this,"formInfo",new d.LEF),(0,s.Z)(this,"dataModelEnumRecordStatusResult",new d.y$4),(0,s.Z)(this,"fileManagerOpenForm",!1),this.data=o,this.dialogRef=e,this.publicHelper=r,this.coreEnumService=c,this.fileCategoryService=f,this.cmsToastrService=Z,this.cdr=R,this.translate=N,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),o&&(this.requestId=+o.id||0,this.requestParentId=+o.parentId||0),this.requestParentId>0&&(this.dataModel.linkParentId=this.requestParentId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}onActionFileSelected(o){this.dataModel.linkMainImageId=o.id}ngOnInit(){if(this.requestId>0?(this.ComponentAction=D.t.edit,this.formInfo.formTitle=this.translate.instant("TITLE.Edit_Categories"),this.DataGetOneContent()):0===this.requestId&&(this.ComponentAction=D.t.add,this.formInfo.formTitle=this.translate.instant("TITLE.Register_New_Categories")),this.ComponentAction===D.t.none)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.getEnumRecordStatus()}getEnumRecordStatus(){var o=this;return(0,q.Z)(function*(){o.dataModelEnumRecordStatusResult=yield o.publicHelper.getEnumRecordStatus()})()}DataGetOneContent(){if(this.requestId<=0)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.formAlert=this.translate.instant("MESSAGE.Receiving_Information_From_The_Server"),this.formInfo.formError="";const o=this.constructor.name+"main";this.loading.Start(o),this.fileCategoryService.setAccessLoad(),this.fileCategoryService.setAccessDataType(d.dR.Editor),this.fileCategoryService.ServiceGetOneById(this.requestId).subscribe({next:e=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(e.access),this.dataModel=e.item,e.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+e.item.title,this.formInfo.formAlert=""):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.loading.Stop(o)},error:e=>{this.cmsToastrService.typeError(e),this.loading.Stop(o)}})}DataAddContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const o=this.constructor.name+"main";this.loading.Start(o,this.translate.instant("MESSAGE.sending_information_to_the_server")),this.fileCategoryService.ServiceAdd(this.dataModel).subscribe({next:e=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=e,e.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.loading.Stop(o)},error:e=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(e),this.loading.Stop(o)}})}DataEditContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const o=this.constructor.name+"main";this.loading.Start(o,this.translate.instant("MESSAGE.sending_information_to_the_server")),this.fileCategoryService.ServiceEdit(this.dataModel).subscribe({next:e=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=e,e.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=e.errorMessage,this.cmsToastrService.typeErrorMessage(e.errorMessage)),this.loading.Stop(o)},error:e=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(e),this.loading.Stop(o)}})}onFormSubmit(){this.formGroup.valid&&(this.formInfo.formSubmitAllow=!1,this.ComponentAction===D.t.add&&this.DataAddContent(),this.ComponentAction===D.t.edit&&this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return n=a,(0,s.Z)(a,"\u0275fac",function(o){return new(o||n)(t.Y36(u.WI),t.Y36(u.so),t.Y36(g.i),t.Y36(d.FLW),t.Y36(d.E_H),t.Y36(C.e),t.Y36(t.sBO),t.Y36(h.sK))}),(0,s.Z)(a,"\u0275cmp",t.Xpm({type:n,selectors:[["app-file-category-edit"]],viewQuery:function(o,e){if(1&o&&t.Gf(At,5),2&o){let r;t.iGM(r=t.CRH())&&(e.formGroup=r.first)}},decls:44,vars:25,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[1,"ntk-full-width"],["name","dataModel.recordStatus","required","",3,"placeholder","ngModel","ngClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],["align","end"],[4,"ngIf"],["matInput","","name","dataModel.title","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["Description",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[3,"value"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(o,e){if(1&o&&(t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){return e.onFormSubmit()}),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"app-progress-spinner",4),t.TgZ(6,"mat-form-field",5)(7,"mat-select",6,7),t.NdJ("ngModelChange",function(c){return e.dataModel.recordStatus=c}),t.YNc(9,vt,2,2,"mat-option",8),t.qZA(),t.TgZ(10,"mat-hint",9),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,bt,5,3,"mat-error",10),t.qZA(),t.TgZ(14,"mat-form-field",5)(15,"mat-label"),t._uU(16),t.qZA(),t.TgZ(17,"input",11,12),t.NdJ("ngModelChange",function(c){return e.dataModel.title=c}),t.qZA(),t.YNc(19,yt,2,0,"mat-icon",13),t.TgZ(20,"mat-icon",14),t._uU(21,"mode_edit"),t.qZA(),t.TgZ(22,"mat-hint",9),t._uU(23),t.qZA(),t.YNc(24,Zt,5,3,"mat-error",10),t.qZA(),t.TgZ(25,"mat-form-field",5)(26,"mat-label"),t._uU(27),t.qZA(),t.TgZ(28,"textarea",15,16),t.NdJ("ngModelChange",function(c){return e.dataModel.description=c}),t.qZA(),t.YNc(30,It,2,0,"mat-icon",13),t.TgZ(31,"mat-icon",14),t._uU(32,"mode_edit"),t.qZA(),t.TgZ(33,"mat-hint",9),t._uU(34),t.qZA(),t.YNc(35,Rt,5,3,"mat-error",10),t.qZA()(),t.TgZ(36,"div",17)(37,"div",18)(38,"small",19),t._uU(39),t.qZA(),t.TgZ(40,"small",20),t._uU(41),t.qZA()()(),t.TgZ(42,"div",21),t.YNc(43,xt,9,7,"div",22),t.qZA()()),2&o){const r=t.MAs(8),c=t.MAs(18),f=t.MAs(29);t.xp6(3),t.hij(" ",e.formInfo.formTitle," "),t.xp6(2),t.Q6J("options",e.loading),t.xp6(2),t.s9C("placeholder",null==e.fieldsInfo.recordStatus?null:e.fieldsInfo.recordStatus.fieldTitle),t.MGl("ngClass","cms-RecordStatusEnum-selector-",e.dataModel.recordStatus,""),t.Q6J("ngModel",e.dataModel.recordStatus),t.xp6(2),t.Q6J("ngForOf",e.dataModelEnumRecordStatusResult.listItems),t.xp6(2),t.Oqu(t.lcZ(12,23,"TITLE.SELECT_STATUS")),t.xp6(2),t.Q6J("ngIf",null==r.errors?null:r.errors.required),t.xp6(3),t.Oqu(null==e.fieldsInfo.title?null:e.fieldsInfo.title.fieldTitle),t.xp6(1),t.s9C("placeholder",null==e.fieldsInfo.title?null:e.fieldsInfo.title.fieldTitle),t.Q6J("ngModel",e.dataModel.title),t.xp6(2),t.Q6J("ngIf",e.dataModel.title),t.xp6(4),t.hij("",c.value.length," / 100"),t.xp6(1),t.Q6J("ngIf",null==c.errors?null:c.errors.required),t.xp6(3),t.Oqu(null==e.fieldsInfo.description?null:e.fieldsInfo.description.fieldTitle),t.xp6(1),t.s9C("placeholder",null==e.fieldsInfo.description?null:e.fieldsInfo.description.fieldTitle),t.Q6J("ngModel",e.dataModel.description),t.xp6(2),t.Q6J("ngIf",e.dataModel.description),t.xp6(4),t.hij("",f.value.length," / 500"),t.xp6(1),t.Q6J("ngIf",null==f.errors?null:f.errors.required),t.xp6(4),t.hij("",e.formInfo.formAlert," "),t.xp6(2),t.hij("",e.formInfo.formError," "),t.xp6(2),t.Q6J("ngIf",e.formInfo.formSubmitAllow&&!(null!=e.loading&&e.loading.display))}},dependencies:[m.mk,m.sg,m.O5,p._Y,p.Fj,p.JJ,p.JL,p.Q7,p.wO,p.nD,p.On,p.F,Q.ey,y.KE,y.hX,y.bx,y.TO,y.R9,G.Hw,F.Nt,Mt.gD,k.O,h.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]})),a})();function Ft(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onActionAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ACTION.ADD")))}function wt(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onActionEdit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ACTION.EDIT")))}function Ot(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onActionDelete())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ACTION.DELETE")))}function Dt(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onActionReload())}),t.TgZ(1,"mat-icon",14),t.ALo(2,"translate"),t._uU(3,"refresh"),t.qZA()()}2&n&&(t.xp6(1),t.s9C("title",t.lcZ(2,1,"ACTION.RELOAD")))}const K=function(n){return{background:n}};function Nt(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"mat-tree-node",15),t.NdJ("click",function(){const r=t.CHM(i).$implicit,c=t.oxw();return t.KtG(c.onActionSelect(r))}),t._UZ(1,"button",16),t._uU(2),t.qZA()}if(2&n){const i=a.$implicit,o=t.oxw();t.Q6J("ngStyle",t.VKq(2,K,o.dataModelSelect.id>0&&o.dataModelSelect.id===i.id?"#d3d3da":"")),t.xp6(2),t.hij(" ",i.title," ")}}function Gt(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"mat-nested-tree-node")(1,"li")(2,"div",17),t.NdJ("click",function(){const r=t.CHM(i).$implicit,c=t.oxw();return t.KtG(c.onActionSelect(r))}),t.TgZ(3,"button",18),t.NdJ("click",function(){const r=t.CHM(i).$implicit,c=t.oxw();return t.KtG(c.onActionSelect(r))}),t.TgZ(4,"mat-icon",19),t._uU(5),t.qZA()(),t._uU(6),t.qZA(),t.TgZ(7,"ul"),t.GkF(8,20),t.qZA()()()}if(2&n){const i=a.$implicit,o=t.oxw();t.xp6(2),t.Q6J("ngStyle",t.VKq(6,K,o.dataModelSelect.id>0&&o.dataModelSelect.id===i.id?"#d3d3da":"")),t.xp6(1),t.uIk("aria-label","Toggle "+i.title),t.xp6(2),t.hij(" ",o.treeControl.isExpanded(i)?"expand_more":"chevron_right"," "),t.xp6(1),t.hij(" ",i.title," "),t.xp6(1),t.ekj("category-tree-invisible",!o.treeControl.isExpanded(i))}}let Lt=(()=>{var n;class a{constructor(o,e,r,c,f,Z,R){(0,s.Z)(this,"cmsToastrService",void 0),(0,s.Z)(this,"coreEnumService",void 0),(0,s.Z)(this,"categoryService",void 0),(0,s.Z)(this,"dialog",void 0),(0,s.Z)(this,"cdr",void 0),(0,s.Z)(this,"tokenHelper",void 0),(0,s.Z)(this,"translate",void 0),(0,s.Z)(this,"dataModelSelect",new d.gzV),(0,s.Z)(this,"dataModelResult",new d.y$4),(0,s.Z)(this,"filterModel",new d.Hay),(0,s.Z)(this,"loading",new I.O),(0,s.Z)(this,"treeControl",new it.VY(N=>N.children)),(0,s.Z)(this,"dataSource",new x.WX),(0,s.Z)(this,"optionChange",new t.vpe),(0,s.Z)(this,"cmsApiStoreSubscribe",void 0),(0,s.Z)(this,"optionReload",()=>this.onActionReload()),(0,s.Z)(this,"hasChild",(N,L)=>!!L.children&&L.children.length>0),this.cmsToastrService=o,this.coreEnumService=e,this.categoryService=r,this.dialog=c,this.cdr=f,this.tokenHelper=Z,this.translate=R,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(o){this.onActionSelectForce(o)}get optionLoading(){return this.loading}set optionLoading(o){this.loading=o}ngOnInit(){this.DataGetAll(),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(o=>{this.DataGetAll()})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.filterModel.rowPerPage=200,this.filterModel.accessLoad=!0;const o=this.constructor.name+"main";this.loading.Start(o),this.categoryService.ServiceGetAll(this.filterModel).subscribe({next:e=>{e.isSuccess?(this.dataModelResult=e,this.dataSource.data=this.dataModelResult.listItems):this.cmsToastrService.typeErrorMessage(e.errorMessage),this.loading.Stop(o)},error:e=>{this.cmsToastrService.typeError(e),this.loading.Stop(o)}})}onActionSelect(o){this.dataModelSelect=o,this.optionChange.emit(this.dataModelSelect)}onActionReload(){this.onActionSelect(this.dataModelSelect&&this.dataModelSelect.id>0?this.dataModelSelect:null),this.dataModelSelect=new d.gzV,this.DataGetAll()}onActionSelectForce(o){}onActionAdd(){let o=0;this.dataModelSelect&&this.dataModelSelect.id>0&&(o=this.dataModelSelect.id);const e=new u.vA;e.disableClose=!0,e.autoFocus=!0,e.data={parentId:o},this.dialog.open(B,e).afterClosed().subscribe(c=>{c&&c.dialogChangedDate&&this.DataGetAll()})}onActionEdit(){let o=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(o=this.dataModelSelect.id),0!==o)this.dialog.open(B,{height:"90%",data:{id:o}}).afterClosed().subscribe(r=>{r&&r.dialogChangedDate&&this.DataGetAll()});else{const r=this.translate.instant("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected");this.cmsToastrService.typeErrorSelected(r)}}onActionDelete(){let o=0;if(this.dataModelSelect&&this.dataModelSelect.id>0&&(o=this.dataModelSelect.id),0!==o)this.dialog.open(Tt,{height:"90%",data:{id:o}}).afterClosed().subscribe(r=>{r&&r.dialogChangedDate&&this.DataGetAll()});else{const r=this.translate.instant("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected");this.cmsToastrService.typeErrorSelected(r)}}}return n=a,(0,s.Z)(a,"\u0275fac",function(o){return new(o||n)(t.Y36(C.e),t.Y36(d.FLW),t.Y36(d.E_H),t.Y36(u.uw),t.Y36(t.sBO),t.Y36(U.v),t.Y36(h.sK))}),(0,s.Z)(a,"\u0275cmp",t.Xpm({type:n,selectors:[["app-file-category-tree"]],inputs:{optionSelectForce:"optionSelectForce",optionLoading:"optionLoading",optionReload:"optionReload"},outputs:{optionChange:"optionChange"},decls:10,vars:7,consts:[[1,"ntk-cms-html-tree-header"],["type","button","class","btn btn-outline-primary",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-warning",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-secondary BTN-icon",3,"click",4,"ngIf"],[1,"ntk-cms-html-tree-body"],[1,"category-tree","cursor-pointer",3,"dataSource","treeControl"],["matTreeNodePadding","",3,"ngStyle","click",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"ntk-cms-html-tree-footer"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-warning",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-secondary","BTN-icon",3,"click"],[2,"font-size","20px","margin","-6px",3,"title"],["matTreeNodePadding","",3,"ngStyle","click"],["mat-icon-button","","disabled",""],[1,"mat-tree-node",3,"ngStyle","click"],["mat-icon-button","","matTreeNodeToggle","",3,"click"],[1,"mat-icon-rtl-mirror"],["matTreeNodeOutlet",""]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t.YNc(1,Ft,3,3,"button",1),t.YNc(2,wt,3,3,"button",2),t.YNc(3,Ot,3,3,"button",3),t.YNc(4,Dt,4,3,"button",4),t.qZA(),t.TgZ(5,"div",5)(6,"mat-tree",6),t.YNc(7,Nt,3,4,"mat-tree-node",7),t.YNc(8,Gt,9,8,"mat-nested-tree-node",8),t.qZA()(),t._UZ(9,"div",9)),2&o&&(t.xp6(1),t.Q6J("ngIf",e.dataModelResult.access.accessAddRow),t.xp6(1),t.Q6J("ngIf",e.dataModelResult.access.accessEditRow&&(null==e.dataModelSelect?null:e.dataModelSelect.id)>0),t.xp6(1),t.Q6J("ngIf",e.dataModelResult.access.accessDeleteRow&&(null==e.dataModelSelect?null:e.dataModelSelect.id)>0),t.xp6(1),t.Q6J("ngIf",e.dataModelResult.access.accessWatchRow),t.xp6(2),t.Q6J("dataSource",e.dataSource)("treeControl",e.treeControl),t.xp6(2),t.Q6J("matTreeNodeDefWhen",e.hasChild))},dependencies:[m.O5,m.PC,Y.RK,G.Hw,x.GZ,x.fQ,x.ah,x.eu,x.gi,x.uo,x.Ar,h.X$]})),a})();var kt=l(39084),Jt=l(86639),Ut=l(25897);function Yt(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onActionbuttonNewRow())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ACTION.ADD")))}function Pt(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onActionbuttonEditRow())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ACTION.EDIT")))}function qt(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onActionbuttonDeleteRow())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"ACTION.DELETE")))}function Ht(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(i);const e=t.oxw();return t.KtG(e.onActionButtonPrintEntity())}),t.TgZ(1,"mat-icon",12),t.ALo(2,"translate"),t._uU(3,"print"),t.qZA()()}2&n&&(t.xp6(1),t.s9C("title",t.lcZ(2,1,"ACTION.PRINT")))}function Qt(n,a){if(1&n&&(t.TgZ(0,"mat-header-cell",40),t._uU(1),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.hij(" ",null==i.fieldsInfo.id?null:i.fieldsInfo.id.fieldTitle," ")}}function Bt(n,a){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const i=a.$implicit;t.xp6(1),t.hij(" ",i.id," ")}}function Kt(n,a){if(1&n&&(t.TgZ(0,"mat-header-cell",40),t._uU(1),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.hij(" ",null==i.fieldsInfo.linkSiteId?null:i.fieldsInfo.linkSiteId.fieldTitle," ")}}function jt(n,a){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"async"),t.ALo(3,"cmssiteinfo"),t.qZA()),2&n){const i=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,t.lcZ(3,3,i.linkSiteId))," ")}}function Wt(n,a){if(1&n&&(t.TgZ(0,"mat-header-cell",40),t._uU(1),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.hij(" ",null==i.fieldsInfo.recordStatus?null:i.fieldsInfo.recordStatus.fieldTitle," ")}}const $t=function(n){return{display:n}};function zt(n,a){if(1&n&&(t.TgZ(0,"mat-cell",41),t.ALo(1,"statusCellClass"),t._UZ(2,"i",41),t.ALo(3,"statusIconClass"),t._UZ(4,"select",42),t.qZA()),2&n){const i=a.$implicit,o=t.oxw();t.Q6J("ngClass",t.lcZ(1,5,i.recordStatus)),t.xp6(2),t.Q6J("ngClass",t.lcZ(3,7,i.recordStatus)),t.xp6(2),t.Q6J("contentService",o.contentService)("row",i)("ngStyle",t.VKq(9,$t,i.id===o.tableRowSelected.id?"":"none"))}}function Vt(n,a){if(1&n&&(t.TgZ(0,"mat-header-cell",40),t._uU(1),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.hij(" ",null==i.fieldsInfo.fileName?null:i.fieldsInfo.fileName.fieldTitle," ")}}function Xt(n,a){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const i=a.$implicit;t.xp6(1),t.hij(" ",i.fileName," ")}}function te(n,a){if(1&n&&(t.TgZ(0,"mat-header-cell",40),t._uU(1),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.hij(" ",null==i.fieldsInfo.extension?null:i.fieldsInfo.extension.fieldTitle," ")}}function ee(n,a){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const i=a.$implicit;t.xp6(1),t.hij(" ",i.extension," ")}}function oe(n,a){if(1&n&&(t.TgZ(0,"mat-header-cell",40),t._uU(1),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.hij(" ",null==i.fieldsInfo.createdDate?null:i.fieldsInfo.createdDate.fieldTitle," ")}}function ne(n,a){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const i=a.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.publicHelper.LocaleDate(i.createdDate)," ")}}function ie(n,a){if(1&n&&(t.TgZ(0,"mat-header-cell",40),t._uU(1),t.qZA()),2&n){const i=t.oxw();t.xp6(1),t.hij(" ",null==i.fieldsInfo.updatedDate?null:i.fieldsInfo.updatedDate.fieldTitle," ")}}function se(n,a){if(1&n&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&n){const i=a.$implicit,o=t.oxw();t.xp6(1),t.hij(" ",o.publicHelper.LocaleDate(i.updatedDate)," ")}}function ae(n,a){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.OPTION")," "))}function re(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,r=t.oxw();return t.KtG(r.onActionbuttonEditRow(e))}),t.TgZ(1,"mat-icon"),t._uU(2,"mode_edit"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"ACTION.EDIT")))}function le(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){t.CHM(i);const e=t.oxw().$implicit,r=t.oxw();return t.KtG(r.onActionbuttonDeleteRow(e))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete_forever"),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()}2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"ACTION.DELETE")))}function ce(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"mat-cell",43)(1,"button",44)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,45),t.YNc(6,re,6,3,"button",46),t.YNc(7,le,6,3,"button",46),t.TgZ(8,"button",47),t.NdJ("click",function(){const r=t.CHM(i).$implicit,c=t.oxw();return t.KtG(c.onClickDownload(r))}),t.TgZ(9,"mat-icon"),t._uU(10,"download"),t.qZA(),t.TgZ(11,"span"),t._uU(12),t.ALo(13,"translate"),t.qZA()()()()}if(2&n){const i=t.MAs(5),o=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",i),t.xp6(5),t.Q6J("ngIf",o.dataModelResult.access.accessEditRow),t.xp6(1),t.Q6J("ngIf",o.dataModelResult.access.accessDeleteRow),t.xp6(5),t.Oqu(t.lcZ(13,4,"ACTION.DOWNLOAD"))}}function de(n,a){1&n&&t._UZ(0,"mat-header-row")}const me=function(n){return{background:n}};function ue(n,a){if(1&n){const i=t.EpF();t.TgZ(0,"mat-row",48),t.NdJ("click",function(){const r=t.CHM(i).$implicit,c=t.oxw();return t.KtG(c.onActionTableRowSelect(r))}),t.qZA()}if(2&n){const i=a.$implicit,o=t.oxw();t.Q6J("ngStyle",t.VKq(1,me,i.id===o.tableRowSelected.id?"#d3d3da":""))}}const fe=function(){return[5,10,20,100]},he=[{path:"",component:(()=>{var n;class a{constructor(){}ngOnInit(){}}return n=a,(0,s.Z)(a,"\u0275fac",function(o){return new(o||n)}),(0,s.Z)(a,"\u0275cmp",t.Xpm({type:n,selectors:[["app-filemanager"]],decls:1,vars:0,template:function(o,e){1&o&&t._UZ(0,"router-outlet")},dependencies:[b.lC],encapsulation:2})),a})(),data:{title:"ROUTE.FILEMANAGER"},children:[{path:"content",component:(()=>{var n;class a{constructor(o,e,r,c,f,Z,R,N){(0,s.Z)(this,"publicHelper",void 0),(0,s.Z)(this,"contentService",void 0),(0,s.Z)(this,"cmsToastrService",void 0),(0,s.Z)(this,"router",void 0),(0,s.Z)(this,"tokenHelper",void 0),(0,s.Z)(this,"cdr",void 0),(0,s.Z)(this,"dialog",void 0),(0,s.Z)(this,"translate",void 0),(0,s.Z)(this,"filteModelContent",new d.Hay),(0,s.Z)(this,"categoryModelSelected",void 0),(0,s.Z)(this,"dataModelResult",new d.y$4),(0,s.Z)(this,"optionsSearch",new E.dj),(0,s.Z)(this,"optionsStatist",new T.TV),(0,s.Z)(this,"tokenInfo",new d.OdC),(0,s.Z)(this,"loading",new I.O),(0,s.Z)(this,"tableRowsSelected",[]),(0,s.Z)(this,"tableRowSelected",new d.azP),(0,s.Z)(this,"tableSource",new _.by),(0,s.Z)(this,"tabledisplayedColumns",[]),(0,s.Z)(this,"tabledisplayedColumnsSource",["Id","RecordStatus","fileName","Extension","CreatedDate","UpdatedDate","Action"]),(0,s.Z)(this,"fieldsInfo",new Map),(0,s.Z)(this,"cmsApiStoreSubscribe",void 0),this.publicHelper=o,this.contentService=e,this.cmsToastrService=r,this.router=c,this.tokenHelper=f,this.cdr=Z,this.dialog=R,this.translate=N,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),this.optionsSearch.parentMethods={onSubmit:L=>this.onSubmitOptionsSearch(L)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=d.oYR.Descending}ngOnInit(){this.tokenHelper.getCurrentToken().then(o=>{this.tokenInfo=o,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(o=>{this.tokenInfo=o,this.DataGetAll()})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tabledisplayedColumns=this.publicHelper.TabledisplayedColumnsCheckByAllDataAccess(this.tabledisplayedColumnsSource,[],this.tokenInfo),this.tableRowsSelected=[],this.onActionTableRowSelect(new d.azP);const o=this.constructor.name+"main";this.loading.Start(o,this.translate.instant("MESSAGE.get_information_list")),this.filteModelContent.accessLoad=!0;const e=JSON.parse(JSON.stringify(this.filteModelContent));if(this.categoryModelSelected&&this.categoryModelSelected.id>0){const r=new d.AO3;r.propertyName="LinkCategoryId",r.value=this.categoryModelSelected.id,e.filters.push(r)}this.contentService.ServiceGetAllEditor(e).subscribe({next:r=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(r.access),r.isSuccess?(this.dataModelResult=r,this.tableSource.data=r.listItems,this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(r.access)):this.cmsToastrService.typeErrorMessage(r.errorMessage),this.loading.Stop(o)},error:r=>{this.cmsToastrService.typeError(r),this.loading.Stop(o)}})}onTableSortData(o){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===o.active?"asc"===this.tableSource.sort.start?(o.start="desc",this.filteModelContent.sortColumn=o.active,this.filteModelContent.sortType=d.oYR.Descending):"desc"===this.tableSource.sort.start?(o.start="asc",this.filteModelContent.sortColumn="",this.filteModelContent.sortType=d.oYR.Ascending):o.start="desc":(this.filteModelContent.sortColumn=o.active,this.filteModelContent.sortType=d.oYR.Ascending),this.tableSource.sort=o,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(o){this.filteModelContent.currentPageNumber=o.pageIndex+1,this.filteModelContent.rowPerPage=o.pageSize,this.DataGetAll()}onActionSelectorSelect(o){var e=this.filteModelContent.sortColumn,r=this.filteModelContent.sortType;this.filteModelContent=new d.Hay,this.filteModelContent.sortColumn=e,this.filteModelContent.sortType=r,this.categoryModelSelected=o,this.DataGetAll()}onActionbuttonNewRow(){if(null!=this.categoryModelSelected&&0!==this.categoryModelSelected.id)null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessAddRow?this.router.navigate(["/file/content/add",this.categoryModelSelected.id]):this.cmsToastrService.typeErrorAccessAdd();else{const o=this.translate.instant("ERRORMESSAGE.MESSAGE.typeErrorCategoryNotSelected");this.cmsToastrService.typeErrorSelected(o)}}onActionbuttonEditRow(o=this.tableRowSelected){o&&o.id&&0!==o.id?(this.onActionTableRowSelect(o),null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessEditRow?this.router.navigate(["/file/content/edit",this.tableRowSelected.id]):this.cmsToastrService.typeErrorAccessEdit()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonDeleteRow(o=this.tableRowSelected){if(o&&o.id&&0!==o.id)this.onActionTableRowSelect(o),null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessDeleteRow?this.dialog.open(z,{height:"90%",data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(r=>{r&&r.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessDelete();else{const r=this.translate.instant("MESSAGE.no_row_selected_to_delete");this.cmsToastrService.typeErrorSelected(r)}}onActionbuttonStatist(){if(this.optionsStatist.data.show=!this.optionsStatist.data.show,!this.optionsStatist.data.show)return;const o=new Map;o.set(this.translate.instant("MESSAGE.Active"),0),o.set(this.translate.instant("MESSAGE.All"),0);const e=this.constructor.name+".ServiceStatist";this.loading.Start(e,this.translate.instant("MESSAGE.Get_the_statist")),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:f=>{f.isSuccess?(o.set(this.translate.instant("MESSAGE.All"),f.totalRowCount),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(f.errorMessage),this.loading.Stop(e)},error:f=>{this.cmsToastrService.typeError(f),this.loading.Stop(e)}});const r=JSON.parse(JSON.stringify(this.filteModelContent)),c=new d.AO3;c.propertyName="RecordStatus",c.value=d.Anr.Available,r.filters.push(c),this.contentService.ServiceGetCount(r).subscribe({next:f=>{f.isSuccess?(o.set(this.translate.instant("MESSAGE.Active"),f.totalRowCount),this.optionsStatist.childMethods.setStatistValue(o)):this.cmsToastrService.typeErrorMessage(f.errorMessage),this.loading.Stop(e)},error:f=>{this.cmsToastrService.typeError(f),this.loading.Stop(e)}})}onActionbuttonExport(){this.dialog.open(O.Z,{height:"50%",width:"50%",data:{service:this.contentService,filterModel:this.filteModelContent,title:""}}).afterClosed().subscribe(e=>{})}onActionButtonPrintEntity(o=this.tableRowSelected){o&&o.id&&0!==o.id.length?(this.onActionTableRowSelect(o),null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessEditRow?this.dialog.open(S.r,{height:"50%",width:"50%",data:{service:this.contentService,id:this.tableRowSelected.id,title:""}}).afterClosed().subscribe(r=>{}):this.cmsToastrService.typeErrorAccessWatch()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonReload(){this.DataGetAll()}onSubmitOptionsSearch(o){this.filteModelContent.filters=o,this.DataGetAll()}onActionTableRowSelect(o){this.tableRowSelected=o,o.expanded||(o.expanded=!1),o.expanded=!o.expanded}onClickDownload(o){this.router.navigate(["/file/comment/"])}}return n=a,(0,s.Z)(a,"\u0275fac",function(o){return new(o||n)(t.Y36(g.i),t.Y36(d.aKP),t.Y36(C.e),t.Y36(b.F0),t.Y36(U.v),t.Y36(t.sBO),t.Y36(u.uw),t.Y36(h.sK))}),(0,s.Z)(a,"\u0275cmp",t.Xpm({type:n,selectors:[["app-file-content-list"]],decls:56,vars:26,consts:[[3,"optionLoading","optionTreeDisplay"],["cms-tree",""],[3,"optionChange"],["cms-header",""],["cms-action",""],["type","button","class","btn box-shadow-button btn-outline-primary","id","openModalButton","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn box-shadow-button btn-outline-warning","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn box-shadow-button btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","box-shadow-button","btn-outline-info","btn-sm","BTN-text"],[3,"ngModel","ngModelChange"],[3,"click"],["type","button",1,"btn","box-shadow-button","btn-outline-secondary","BTN-icon",3,"click"],[2,"font-size","20px","margin","-11px",3,"title"],["type","button","class","btn box-shadow-button btn-outline-secondary BTN-icon",3,"click",4,"ngIf"],["cms-action-area",""],[3,"options","optionsChange"],["cms-body",""],["matSort","",3,"dataSource","matSortChange"],["tableSort","matSort"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","LinkSiteId"],["matColumnDef","RecordStatus"],[3,"ngClass",4,"matCellDef"],["matColumnDef","fileName"],["matColumnDef","Extension"],["matColumnDef","CreatedDate"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["type","button","id","openModalButton","data-toggle","modal","data-target","#categoryModal",1,"btn","box-shadow-button","btn-outline-primary",3,"click"],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","box-shadow-button","btn-outline-warning",3,"click"],["type","button",1,"btn","box-shadow-button","btn-outline-danger",3,"click"],["mat-sort-header",""],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","",2,"background","none","border","none",3,"contentService","row","ngStyle"],[1,"Action"],["mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["actionMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[3,"ngStyle","click"]],template:function(o,e){if(1&o){const r=t.EpF();t.TgZ(0,"app-cms-html-list",0),t.ynx(1,1),t.TgZ(2,"app-file-category-tree",2),t.NdJ("optionChange",function(f){return e.onActionSelectorSelect(f)}),t.qZA(),t.BQk(),t.GkF(3,3),t.ynx(4,4),t.YNc(5,Yt,3,3,"button",5),t.YNc(6,Pt,3,3,"button",6),t.YNc(7,qt,3,3,"button",7),t.TgZ(8,"a",8)(9,"mat-slide-toggle",9),t.NdJ("ngModelChange",function(f){return e.optionsSearch.data.show=f}),t._uU(10),t.ALo(11,"translate"),t.qZA()(),t.TgZ(12,"a",8)(13,"mat-slide-toggle",10),t.NdJ("click",function(){return e.onActionbuttonStatist()}),t._uU(14),t.ALo(15,"translate"),t.qZA()(),t.TgZ(16,"button",11),t.NdJ("click",function(){return e.onActionbuttonExport()}),t.TgZ(17,"mat-icon",12),t.ALo(18,"translate"),t._uU(19,"cloud_download"),t.qZA()(),t.YNc(20,Ht,4,3,"button",13),t.BQk(),t.ynx(21,14),t.TgZ(22,"app-cms-search-list",15),t.NdJ("optionsChange",function(f){return e.optionsSearch=f}),t.qZA(),t.TgZ(23,"app-cms-statist-list",15),t.NdJ("optionsChange",function(f){return e.optionsStatist=f}),t.qZA(),t.BQk(),t.ynx(24,16),t.TgZ(25,"mat-table",17,18),t.NdJ("matSortChange",function(){t.CHM(r);const f=t.MAs(26);return t.KtG(e.onTableSortData(f))}),t.ynx(27,19),t.YNc(28,Qt,2,1,"mat-header-cell",20),t.YNc(29,Bt,2,1,"mat-cell",21),t.BQk(),t.ynx(30,22),t.YNc(31,Kt,2,1,"mat-header-cell",20),t.YNc(32,jt,4,5,"mat-cell",21),t.BQk(),t.ynx(33,23),t.YNc(34,Wt,2,1,"mat-header-cell",20),t.YNc(35,zt,5,11,"mat-cell",24),t.BQk(),t.ynx(36,25),t.YNc(37,Vt,2,1,"mat-header-cell",20),t.YNc(38,Xt,2,1,"mat-cell",21),t.BQk(),t.ynx(39,26),t.YNc(40,te,2,1,"mat-header-cell",20),t.YNc(41,ee,2,1,"mat-cell",21),t.BQk(),t.ynx(42,27),t.YNc(43,oe,2,1,"mat-header-cell",20),t.YNc(44,ne,2,1,"mat-cell",21),t.BQk(),t.ynx(45,28),t.YNc(46,ie,2,1,"mat-header-cell",20),t.YNc(47,se,2,1,"mat-cell",21),t.BQk(),t.ynx(48,29),t.YNc(49,ae,3,3,"mat-header-cell",30),t.YNc(50,ce,14,6,"mat-cell",31),t.BQk(),t.YNc(51,de,1,0,"mat-header-row",32),t.YNc(52,ue,1,3,"mat-row",33),t.qZA(),t.BQk(),t.ynx(53,34),t.TgZ(54,"mat-paginator",35,36),t.NdJ("page",function(f){return e.onTablePageingData(f)}),t.qZA(),t.BQk(),t.qZA()}2&o&&(t.Q6J("optionLoading",e.loading)("optionTreeDisplay",!0),t.xp6(5),t.Q6J("ngIf",e.dataModelResult.access.accessAddRow&&(null==e.categoryModelSelected?null:e.categoryModelSelected.id)>0),t.xp6(1),t.Q6J("ngIf",e.dataModelResult.access.accessEditRow&&e.tableRowSelected.id>0),t.xp6(1),t.Q6J("ngIf",e.dataModelResult.access.accessDeleteRow&&e.tableRowSelected.id>0),t.xp6(2),t.Q6J("ngModel",e.optionsSearch.data.show),t.xp6(1),t.Oqu(t.lcZ(11,19,"ACTION.SEARCH")),t.xp6(4),t.hij("",t.lcZ(15,21,"ACTION.STATIST")," "),t.xp6(3),t.s9C("title",t.lcZ(18,23,"ACTION.EXPORTFILE")),t.xp6(3),t.Q6J("ngIf",(null==e.tableRowSelected||null==e.tableRowSelected.id?null:e.tableRowSelected.id.length)>0),t.xp6(2),t.Q6J("options",e.optionsSearch),t.xp6(1),t.Q6J("options",e.optionsStatist),t.xp6(2),t.Q6J("dataSource",e.tableSource),t.xp6(26),t.Q6J("matHeaderRowDef",e.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.tabledisplayedColumns),t.xp6(2),t.Q6J("length",e.dataModelResult.totalRowCount)("pageIndex",e.dataModelResult.currentPageNumber-1)("pageSize",e.dataModelResult.rowPerPage)("pageSizeOptions",t.DdM(25,fe)))},dependencies:[m.mk,m.O5,m.PC,p.JJ,p.On,Y.RK,G.Hw,F.Nt,J.VK,J.OP,J.p6,V.NW,X.Rr,P.YE,P.nU,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,tt.y,et.q,ot.Z,nt.G,Lt,m.Ov,h.X$,kt.Y,Jt.G,Ut.Y],encapsulation:2})),a})(),data:{title:"ROUTE.FILEMANAGER"}},{path:"explorer",component:A,data:{title:"ROUTE.FILEMANAGER"}},{path:"",redirectTo:"explorer",pathMatch:"full"}]}];let pe=(()=>{var n;class a{}return n=a,(0,s.Z)(a,"\u0275fac",function(o){return new(o||n)}),(0,s.Z)(a,"\u0275mod",t.oAB({type:n})),(0,s.Z)(a,"\u0275inj",t.cJS({imports:[b.Bz.forChild(he),b.Bz]})),a})();var ge=l(4721),_e=l(6087);let Se=(()=>{var n;class a{}return n=a,(0,s.Z)(a,"\u0275fac",function(o){return new(o||n)}),(0,s.Z)(a,"\u0275mod",t.oAB({type:n})),(0,s.Z)(a,"\u0275inj",t.cJS({providers:[d.EAm,d.E_H,d.aKP,d.FLW,d.dF2],imports:[pe,m.ez,p.u5,p.UX.withConfig({warnOnNgModelWithFormControl:"never"}),_e.m.forRoot(),ge.UM]})),a})()},13673:(w,v,l)=>{l.d(v,{G:()=>T});var s=l(8239),m=l(86889),b=l(88692),t=l(34511),g=l(64537),M=l(94032),A=l(32607);let T=(()=>{var S;class O{constructor(u,h,C,p,y,F){(0,m.Z)(this,"elRef",void 0),(0,m.Z)(this,"renderer",void 0),(0,m.Z)(this,"publicHelper",void 0),(0,m.Z)(this,"cmsToastrService",void 0),(0,m.Z)(this,"cdr",void 0),(0,m.Z)(this,"document",void 0),(0,m.Z)(this,"row",void 0),(0,m.Z)(this,"contentService",void 0),this.elRef=u,this.renderer=h,this.publicHelper=C,this.cmsToastrService=p,this.cdr=y,this.document=F,this.getEnumRecordStatus()}getEnumRecordStatus(){var u=this;return(0,s.Z)(function*(){(yield u.publicHelper.getEnumRecordStatus()).listItems.forEach(C=>{const p=document.createElement("option");p.innerHTML=" "+C.title+' <i Class="'+u.iconStatus(C.value)+'"></i>',p.value=C.value.toString(),u.elRef.nativeElement.add(p)}),u.elRef.nativeElement.options.length>0&&u.row&&u.row.recordStatus&&u.renderer.setProperty(u.elRef.nativeElement,"value",u.row.recordStatus)})()}onChange(){const u=this.elRef.nativeElement,h=u.value;this.addLoader(u),this.contentService.setAccessDataType(t.dR.Editor),this.contentService.ServiceSetStatus(this.row.id,h).subscribe(C=>{C.isSuccess?(this.handleSuccessCase(u),this.cmsToastrService.typeSuccessSetStatus(C.errorMessage),this.row.recordStatus=0|h,this.cdr.markForCheck()):(this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeErrorSetStatus(C.errorMessage),this.handleErrorCase(u))},C=>{this.renderer.setProperty(this.elRef.nativeElement,"value",this.row.recordStatus),this.cmsToastrService.typeError(C),this.handleErrorCase(u)})}handleSuccessCase(u){this.removeBackground(u),this.addSuccess(u),setTimeout(()=>{this.removeBackground(u)},1e3)}handleErrorCase(u){this.removeBackground(u);const h=this.document.createElement("img");h.style.width="20px",h.src="https://www.seekpng.com/png/detail/334-3345964_error-icon-download-attention-symbol.png";const C=this.renderer.parentNode(this.elRef.nativeElement);this.renderer.appendChild(C,h),setTimeout(()=>{this.renderer.removeChild(C,h)},1e3)}addLoader(u){this.addBackground(u,"https://replit.com/public/images/loading_dots.gif",20)}addSuccess(u){this.addBackground(u,"https://i.pinimg.com/originals/7b/dd/1b/7bdd1bc7db7fd48025d4e39a0e2f0fd8.jpg",20)}addBackground(u,h,C){u.style.background=`#fff url("${h}") no-repeat right 20px center`,u.style.backgroundSize=`${C}px`}removeBackground(u){u.style.background="none"}iconStatus(u){let h="";switch(u){case 1:default:h="fa fa-check";break;case 2:h="fa fa-eye-slash";break;case 3:h="fa fa-times";break;case 4:h="fa fa-hourglass-half";break;case 5:h="far fa-thumbs-down";break;case 6:h="fa fa-archive"}return h}}return S=O,(0,m.Z)(O,"\u0275fac",function(u){return new(u||S)(g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(M.i),g.Y36(A.e),g.Y36(g.sBO),g.Y36(b.K0))}),(0,m.Z)(O,"\u0275dir",g.lG2({type:S,selectors:[["","cmsRecordStatusSelfSave",""]],hostBindings:function(u,h){1&u&&g.NdJ("change",function(){return h.onChange()})},inputs:{row:"row",contentService:"contentService"}})),O})()},70532:(w,v,l)=>{l.d(v,{t:()=>s});var s=(()=>{return(m=s||(s={}))[m.none=0]="none",m[m.add=1]="add",m[m.edit=2]="edit",m[m.delete=3]="delete",m[m.list=4]="list",m[m.select=5]="select",s;var m})()},81418:(w,v,l)=>{l.d(v,{v:()=>b});var s=l(86889),m=l(64537);let b=(()=>{var t;class g{transform(A){return(A+="").replace("/images/","/thumbnails/")}}return t=g,(0,s.Z)(g,"\u0275fac",function(A){return new(A||t)}),(0,s.Z)(g,"\u0275pipe",m.Yjl({name:"cmsthumbnail",type:t,pure:!0})),g})()},39084:(w,v,l)=>{l.d(v,{Y:()=>M});var s=l(86889),m=l(87241),b=l(27969),t=l(64537),g=l(34511);let M=(()=>{var A;class _{constructor(E){(0,s.Z)(this,"service",void 0),this.service=E}transform(E){return!E||E<=0?new m.y:this.service.ServiceGetOneById(E).pipe((0,b.U)(T=>{var S="";return T.isSuccess&&(T.item.title&&T.item.title.length>0&&(S=T.item.title),T.item.id&&T.item.id>0&&(S.length>0&&(S+=" | "),S+=T.item.id),T.item.domain&&T.item.domain.length>0&&T.item.subDomain&&T.item.subDomain.length>0?(S.length>0&&(S+=" | "),S=S+T.item.subDomain+"."+T.item.domain):T.item.domain&&T.item.domain.length>0&&(S.length>0&&(S+=" | "),S+=T.item.domain)),0===S.length&&(S=E.toString()),S},T=>E.toString()))}}return A=_,(0,s.Z)(_,"\u0275fac",function(E){return new(E||A)(t.Y36(g._0e,16))}),(0,s.Z)(_,"\u0275pipe",t.Yjl({name:"cmssiteinfo",type:A,pure:!0})),_})()},25897:(w,v,l)=>{l.d(v,{Y:()=>t});var s=l(86889),m=l(64537),b=l(5998);let t=(()=>{var g;class M{constructor(_){(0,s.Z)(this,"sanitizer",void 0),this.sanitizer=_}transform(_){return"cms-RecordStatusEnum-cell-"+_}}return g=M,(0,s.Z)(M,"\u0275fac",function(_){return new(_||g)(m.Y36(b.H7,16))}),(0,s.Z)(M,"\u0275pipe",m.Yjl({name:"statusCellClass",type:g,pure:!0})),M})()},86639:(w,v,l)=>{l.d(v,{G:()=>t});var s=l(86889),m=l(64537),b=l(5998);let t=(()=>{var g;class M{constructor(_){(0,s.Z)(this,"sanitizer",void 0),this.sanitizer=_}transform(_,d=!1){let E="";switch(_){case 1:default:E="fa fa-check";break;case 2:E="fa fa-times";break;case 3:E="fa fa-trash";break;case 4:E="fa fa-hourglass-half";break;case 5:E="far fa-thumbs-down";break;case 6:E="fa fa-archive"}return E}}return g=M,(0,s.Z)(M,"\u0275fac",function(_){return new(_||g)(m.Y36(b.H7,16))}),(0,s.Z)(M,"\u0275pipe",m.Yjl({name:"statusIconClass",type:g,pure:!0})),M})()}}]);