(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[108],{7226:()=>{window.libpannellum=function(mt,I,m){"use strict";function t(j,At){var Z;j&&((Z=I.createElement("canvas")).style.width=Z.style.height="100%",j.appendChild(Z));var d,i,rt,ft,U,P,ht,ct,wt,ae,St,x,it,k,Ht,ut,Bt,M,F=["f","b","u","d","l","r"],lt=["f","r","b","l","u","d"];function Lt(s,C){return 1==s.level&&1!=C.level?-1:1==C.level&&1!=s.level?1:C.timestamp-s.timestamp}function $(s,C){return s.level!=C.level?s.level-C.level:s.diff-C.diff}function vt(s,C,p,b,O,N,L){this.vertices=s,this.side=C,this.level=p,this.x=b,this.y=O;var Y="object"==typeof N?N.tileKey:N;Y=Y.replace("%s",C).replace("%l0",p-1).replace("%l",p).replace("%x",b).replace("%y",O),this.path="object"==typeof N?N[Y]:Y,this.parentPath=L}function Ft(s,C,p,b,O,N){if(function ie(s,C){var p=ee(s,C.slice(0,3)),b=ee(s,C.slice(3,6)),O=ee(s,C.slice(6,9)),N=ee(s,C.slice(9,12)),L=p[0]+b[0]+O[0]+N[0];if(-4==L||4==L)return!1;var Y=p[1]+b[1]+O[1]+N[1];return-4!=Y&&4!=Y&&4!=p[2]+b[2]+O[2]+N[2]}(s,p.vertices)){for(var L=[],Y=[],S=2,W=[],tt=0,q=0;q<4;q++){var dt=Q(C,p.vertices.slice(3*q,3*(q+1)));L.push(dt[0]*dt[3]),Y.push(dt[1]*dt[3]);var Kt=dt[2]*dt[3];S=Math.min(S,Kt),W.push(Math.abs(L[q])<=1&&Math.abs(Y[q])<=1&&Kt>0),tt+=W[q]}var Vt=x.cubeResolution*Math.pow(2,p.level-x.maxLevel),pt=Math.ceil(Vt*x.invTileResolution)-1,_t=Vt%x.tileResolution*2,gt=2*Vt%x.tileResolution;if(0===gt&&(gt=x.tileResolution),0===_t&&(_t=2*x.tileResolution),p.level>1&&S>0&&tt>0){var xt=0;for(q=0;q<4;q++){var Mt=(q+1)%4;if(W[q]||W[Mt]){var Ut=(L[Mt]-L[q])*i.drawingBufferWidth/2,at=(Y[Mt]-Y[q])*i.drawingBufferHeight/2;gt<x.tileResolution&&(p.x==pt?Ut*=x.tileResolution/gt:p.y==pt&&(at*=x.tileResolution/gt)),_t<=x.tileResolution&&(p.x==pt&&(Ut*=2),p.y==pt&&(at*=2)),xt=Math.max(xt,Math.sqrt(Ut*Ut+at*at))}}if(xt<=x.tileResolution/2)return}var v=p.vertices,Et=v[0]+v[3]+v[6]+v[9],Nt=v[1]+v[4]+v[7]+v[10],Ct=v[2]+v[5]+v[8]+v[11],Gt=Math.sqrt(Et*Et+Nt*Nt+Ct*Ct),kt=Math.asin(Ct/Gt),T=Math.atan2(Nt,Et)-O;T+=T>Math.PI?-2*Math.PI:T<-Math.PI?2*Math.PI:0,T=Math.abs(T),p.diff=Math.acos(Math.sin(b)*Math.sin(kt)+Math.cos(b)*Math.cos(kt)*Math.cos(T));for(var l=!1,h=0;h<d.nodeCache.length;h++)if(d.nodeCache[h].path==p.path){l=!0,d.nodeCache[h].timestamp=d.nodeCacheTimestamp++,d.nodeCache[h].diff=p.diff,d.currentNodes.push(d.nodeCache[h]);break}if(l||(p.timestamp=d.nodeCacheTimestamp++,d.currentNodes.push(p),d.nodeCache.push(p)),p.level<x.maxLevel){var n=.5;(p.x==pt||p.y==pt)&&(n=1-x.tileResolution/(x.tileResolution+gt));var _,f=[],w=n,y=n,B=n,H=q=1-n,yt=q,Ot=q;for(gt<x.tileResolution&&(p.x==pt&&p.y!=pt?(y=.5,yt=.5,("d"==p.side||"u"==p.side)&&(B=.5,Ot=.5)):p.x!=pt&&p.y==pt&&(w=.5,H=.5,("l"==p.side||"r"==p.side)&&(B=.5,Ot=.5))),_t<=x.tileResolution&&(p.x==pt&&(w=0,H=1,("l"==p.side||"r"==p.side)&&(B=0,Ot=1)),p.y==pt&&(y=0,yt=1,("d"==p.side||"u"==p.side)&&(B=0,Ot=1))),_=new vt(new Float32Array([v[0],v[1],v[2],v[0]*w+v[3]*H,v[1]*n+v[4]*q,v[2]*B+v[5]*Ot,v[0]*w+v[6]*H,v[1]*y+v[7]*yt,v[2]*B+v[8]*Ot,v[0]*n+v[9]*q,v[1]*y+v[10]*yt,v[2]*B+v[11]*Ot]),p.side,p.level+1,2*p.x,2*p.y,x.fullpath,p.path),f.push(_),p.x==pt&&_t<=x.tileResolution||(_=new vt(new Float32Array([v[0]*w+v[3]*H,v[1]*n+v[4]*q,v[2]*B+v[5]*Ot,v[3],v[4],v[5],v[3]*n+v[6]*q,v[4]*y+v[7]*yt,v[5]*B+v[8]*Ot,v[0]*w+v[6]*H,v[1]*y+v[7]*yt,v[2]*B+v[8]*Ot]),p.side,p.level+1,2*p.x+1,2*p.y,x.fullpath,p.path),f.push(_)),!(p.x==pt&&_t<=x.tileResolution)&&!(p.y==pt&&_t<=x.tileResolution)&&(_=new vt(new Float32Array([v[0]*w+v[6]*H,v[1]*y+v[7]*yt,v[2]*B+v[8]*Ot,v[3]*n+v[6]*q,v[4]*y+v[7]*yt,v[5]*B+v[8]*Ot,v[6],v[7],v[8],v[9]*w+v[6]*H,v[10]*n+v[7]*q,v[11]*B+v[8]*Ot]),p.side,p.level+1,2*p.x+1,2*p.y+1,x.fullpath,p.path),f.push(_)),p.y==pt&&_t<=x.tileResolution||(_=new vt(new Float32Array([v[0]*n+v[9]*q,v[1]*y+v[10]*yt,v[2]*B+v[11]*Ot,v[0]*w+v[6]*H,v[1]*y+v[7]*yt,v[2]*B+v[8]*Ot,v[9]*w+v[6]*H,v[10]*n+v[7]*q,v[11]*B+v[8]*Ot,v[9],v[10],v[11]]),p.side,p.level+1,2*p.x,2*p.y+1,x.fullpath,p.path),f.push(_)),Mt=0;Mt<f.length;Mt++)Ft(s,C,f[Mt],b,O,N)}}}function oe(){return new Float32Array([-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1])}function te(s,C,p){var b=Math.sin(C),O=Math.cos(C);return"x"==p?new Float32Array([s[0],O*s[1]+b*s[2],O*s[2]-b*s[1],s[3],O*s[4]+b*s[5],O*s[5]-b*s[4],s[6],O*s[7]+b*s[8],O*s[8]-b*s[7]]):"y"==p?new Float32Array([O*s[0]-b*s[2],s[1],O*s[2]+b*s[0],O*s[3]-b*s[5],s[4],O*s[5]+b*s[3],O*s[6]-b*s[8],s[7],O*s[8]+b*s[6]]):"z"==p?new Float32Array([O*s[0]+b*s[1],O*s[1]-b*s[0],s[2],O*s[3]+b*s[4],O*s[4]-b*s[3],s[5],O*s[6]+b*s[7],O*s[7]-b*s[6],s[8]]):void 0}function bt(s){return new Float32Array([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13],s[2],s[6],s[10],s[14],s[3],s[7],s[11],s[15]])}function de(s,C,p,b){var O=2*Math.atan(Math.tan(s/2)*i.drawingBufferHeight/i.drawingBufferWidth),N=1/Math.tan(O/2);return new Float32Array([N/C,0,0,0,0,N,0,0,0,0,(b+p)/(p-b),2*b*p/(p-b),0,0,-1,0])}function ne(s,C){i.bindTexture(i.TEXTURE_2D,C),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,s),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.bindTexture(i.TEXTURE_2D,null)}At&&(i=At),this.init=function(s,C,p,b,O,N,L){if(C===m&&(C="equirectangular"),"equirectangular"!=C&&"cubemap"!=C&&"multires"!=C)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(it=C,x=s,M=L||{},d){if(rt&&(i.detachShader(d,rt),i.deleteShader(rt)),ft&&(i.detachShader(d,ft),i.deleteShader(ft)),i.bindBuffer(i.ARRAY_BUFFER,null),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null),d.texture&&i.deleteTexture(d.texture),d.nodeCache)for(var Y=0;Y<d.nodeCache.length;Y++)i.deleteTexture(d.nodeCache[Y].texture);if(d.textureLoads)for(et=[];d.textureLoads.length>0;)d.textureLoads.shift()(!1);i.deleteProgram(d),d=m}U&&(P&&(i.detachShader(U,P),i.deleteShader(P)),ht&&(i.detachShader(U,ht),i.deleteShader(ht)),i.deleteProgram(U),U=m),St=m;var S,tt,W=!1;if("cubemap"==it)for(S=0;S<6;S++)x[S].width>0?(tt===m&&(tt=x[S].width),tt!=x[S].width&&console.log("Cube faces have inconsistent widths: "+tt+" vs. "+x[S].width)):W=!0;function q(o){if(W){var _=o*o*4,w=new Uint8ClampedArray(_),y=L.backgroundColor?L.backgroundColor:[0,0,0];y[0]*=255,y[1]*=255,y[2]*=255;for(var B=0;B<_;B++)w[B++]=y[0],w[B++]=y[1],w[B++]=y[2];var H=new ImageData(w,o,o);for(S=0;S<6;S++)0==x[S].width&&(x[S]=H)}}if("cubemap"==it&&tt&tt-1&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(i||(i=Z.getContext("experimental-webgl",{alpha:!1,depth:!1})),i&&1286==i.getError()&&pe()),i||!("multires"==it&&x.hasOwnProperty("fallbackPath")||"cubemap"==it)||!("WebkitAppearance"in I.documentElement.style)&&!navigator.userAgent.match(/Trident.*rv[ :]*11\./)&&-1===navigator.appVersion.indexOf("MSIE 10")){if(!i)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};"cubemap"==it&&q(tt),x.fullpath=x.basePath?x.basePath+x.path:x.path,x.invTileResolution=1/x.tileResolution;var gt=oe();for(ae=[],S=0;S<6;S++)ae[S]=gt.slice(12*S,12*S+12),gt=oe();var xt=0;if("equirectangular"==it){if(xt=i.getParameter(i.MAX_TEXTURE_SIZE),Math.max(x.width/2,x.height)>xt)throw console.log("Error: The image is too big; it's "+x.width+"px wide, but this device's maximum supported size is "+2*xt+"px."),{type:"webgl size error",width:x.width,maxWidth:2*xt}}else if("cubemap"==it&&tt>i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE))throw console.log("Error: The image is too big; it's "+tt+"px wide, but this device's maximum supported size is "+xt+"px."),{type:"webgl size error",width:tt,maxWidth:xt};if(L!==m){var Mt=isNaN(L.horizonPitch)?0:Number(L.horizonPitch),Ut=isNaN(L.horizonRoll)?0:Number(L.horizonRoll);(0!=Mt||0!=Ut)&&(St=[Mt,Ut])}var at=i.TEXTURE_2D;if(i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.getShaderPrecisionFormat){var v=i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT);v&&v.precision<1&&(ot=ot.replace("highp","mediump"))}rt=i.createShader(i.VERTEX_SHADER);var Et=g;"multires"==it&&(Et=V),i.shaderSource(rt,Et),i.compileShader(rt),ft=i.createShader(i.FRAGMENT_SHADER);var Nt=nt;if("cubemap"==it?(at=i.TEXTURE_CUBE_MAP,Nt=e):"multires"==it&&(Nt=z),i.shaderSource(ft,Nt),i.compileShader(ft),d=i.createProgram(),i.attachShader(d,rt),i.attachShader(d,ft),i.linkProgram(d),i.getShaderParameter(rt,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(rt)),i.getShaderParameter(ft,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(ft)),i.getProgramParameter(d,i.LINK_STATUS)||console.log(i.getProgramInfoLog(d)),i.useProgram(d),d.drawInProgress=!1,null!==L.backgroundColor){var Ct=L.backgroundColor?L.backgroundColor:[0,0,0];i.clearColor(Ct[0],Ct[1],Ct[2],1),i.clear(i.COLOR_BUFFER_BIT)}if(d.texCoordLocation=i.getAttribLocation(d,"a_texCoord"),i.enableVertexAttribArray(d.texCoordLocation),"multires"!=it){if(k||(k=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,k),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i.STATIC_DRAW),i.vertexAttribPointer(d.texCoordLocation,2,i.FLOAT,!1,0,0),d.aspectRatio=i.getUniformLocation(d,"u_aspectRatio"),i.uniform1f(d.aspectRatio,i.drawingBufferWidth/i.drawingBufferHeight),d.psi=i.getUniformLocation(d,"u_psi"),d.theta=i.getUniformLocation(d,"u_theta"),d.f=i.getUniformLocation(d,"u_f"),d.h=i.getUniformLocation(d,"u_h"),d.v=i.getUniformLocation(d,"u_v"),d.vo=i.getUniformLocation(d,"u_vo"),d.rot=i.getUniformLocation(d,"u_rot"),i.uniform1f(d.h,p/(2*Math.PI)),i.uniform1f(d.v,b/Math.PI),i.uniform1f(d.vo,O/Math.PI*2),"equirectangular"==it&&(d.backgroundColor=i.getUniformLocation(d,"u_backgroundColor"),i.uniform4fv(d.backgroundColor,Ct.concat([1]))),d.texture=i.createTexture(),i.bindTexture(at,d.texture),"cubemap"==it)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x[1]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_X,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x[3]),i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_Y,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x[4]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x[5]),i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_Z,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x[0]),i.texImage2D(i.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x[2]);else if(x.width<=xt)i.uniform1i(i.getUniformLocation(d,"u_splitImage"),0),i.texImage2D(at,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x);else{i.uniform1i(i.getUniformLocation(d,"u_splitImage"),1);var Gt=I.createElement("canvas");Gt.width=x.width/2,Gt.height=x.height;var kt=Gt.getContext("2d");kt.drawImage(x,0,0);var u=kt.getImageData(0,0,x.width/2,x.height);i.texImage2D(at,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,u),d.texture2=i.createTexture(),i.activeTexture(i.TEXTURE1),i.bindTexture(at,d.texture2),i.uniform1i(i.getUniformLocation(d,"u_image1"),1),kt.drawImage(x,-x.width/2,0),u=kt.getImageData(0,0,x.width/2,x.height),i.texImage2D(at,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,u),i.texParameteri(at,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(at,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(at,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(at,i.TEXTURE_MAG_FILTER,i.LINEAR),i.activeTexture(i.TEXTURE0)}"cubemap"!=it&&x.width&&x.width<=xt&&p==2*Math.PI&&!(x.width&x.width-1)?i.texParameteri(at,i.TEXTURE_WRAP_S,i.REPEAT):i.texParameteri(at,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(at,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(at,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(at,i.TEXTURE_MAG_FILTER,i.LINEAR)}else if(d.vertPosLocation=i.getAttribLocation(d,"a_vertCoord"),i.enableVertexAttribArray(d.vertPosLocation),Ht||(Ht=i.createBuffer()),ut||(ut=i.createBuffer()),Bt||(Bt=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,ut),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),i.STATIC_DRAW),i.vertexAttribPointer(d.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,Bt),i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,Ht),i.vertexAttribPointer(d.vertPosLocation,3,i.FLOAT,!1,0,0),d.perspUniform=i.getUniformLocation(d,"u_perspMatrix"),d.cubeUniform=i.getUniformLocation(d,"u_cubeMatrix"),d.currentNodes=[],d.nodeCache=[],d.nodeCacheTimestamp=0,d.textureLoads=[],x.shtHash||x.equirectangularThumbnail){P=i.createShader(i.VERTEX_SHADER),i.shaderSource(P,g),i.compileShader(P),ht=i.createShader(i.FRAGMENT_SHADER),i.shaderSource(ht,nt),i.compileShader(ht),U=i.createProgram(),i.attachShader(U,P),i.attachShader(U,ht),i.linkProgram(U),i.getShaderParameter(P,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(P)),i.getShaderParameter(ht,i.COMPILE_STATUS)||console.log(i.getShaderInfoLog(ht)),i.getProgramParameter(U,i.LINK_STATUS)||console.log(i.getProgramInfoLog(U)),i.useProgram(U),U.texCoordLocation=i.getAttribLocation(U,"a_texCoord"),i.enableVertexAttribArray(U.texCoordLocation),k||(k=i.createBuffer()),i.bindBuffer(i.ARRAY_BUFFER,k),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),i.STATIC_DRAW),i.vertexAttribPointer(U.texCoordLocation,2,i.FLOAT,!1,0,0),U.aspectRatio=i.getUniformLocation(U,"u_aspectRatio"),i.uniform1f(U.aspectRatio,i.drawingBufferWidth/i.drawingBufferHeight),U.psi=i.getUniformLocation(U,"u_psi"),U.theta=i.getUniformLocation(U,"u_theta"),U.f=i.getUniformLocation(U,"u_f"),U.h=i.getUniformLocation(U,"u_h"),U.v=i.getUniformLocation(U,"u_v"),U.vo=i.getUniformLocation(U,"u_vo"),U.rot=i.getUniformLocation(U,"u_rot"),i.uniform1f(U.h,1),U.texture=i.createTexture(),i.bindTexture(at,U.texture);var T,l,h,n=function(){i.useProgram(U),i.uniform1i(i.getUniformLocation(U,"u_splitImage"),0),i.texImage2D(at,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,T),i.texParameteri(at,i.TEXTURE_WRAP_S,i.REPEAT),i.texParameteri(at,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(at,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(at,i.TEXTURE_MAG_FILTER,i.LINEAR),i.uniform1f(U.v,l),i.uniform1f(U.vo,h),i.useProgram(d)};if(x.shtHash&&(T=function qt(s){if(Tt.length<1)for(var C=Jt.length/32,p=0;p<32;p++){Tt.push([]);for(var b=0;b<C;b++)Tt[p].push(ce(Qt(Jt[p*C+b],1),41)*fe)}Qt(s[0],1);var N=255*(ce(Qt(s[1],1),41)+1)/2,L=Qt(s.slice(2),2),Y=[],S=[],W=[];for(p=0;p<L.length;p++){var tt=ue(L[p],N);Y.push(tt[0]),S.push(tt[1]),W.push(tt[2])}var q=.03125*Math.PI,dt=[];for(p=31;p>=0;p--)for(b=0;b<64;b++)dt.push($t(Y,Tt[p],(b+.5)*q)),dt.push($t(S,Tt[p],(b+.5)*q)),dt.push($t(W,Tt[p],(b+.5)*q)),dt.push(255);return new ImageData(new Uint8ClampedArray(dt),64,32)}(x.shtHash),l=(2+1/31)/2,h=1-(2+1/31)/2,n()),x.equirectangularThumbnail)if("string"==typeof x.equirectangularThumbnail){if("data:"!=x.equirectangularThumbnail.slice(0,5))throw console.log("Error: thumbnail string is not a data URI!"),{type:"config error"};(T=new Image).onload=function(){l=1,h=0,n()},T.src=x.equirectangularThumbnail}else T=x.equirectangularThumbnail,l=1,h=0,n();i.bindBuffer(i.ARRAY_BUFFER,Ht),i.vertexAttribPointer(d.vertPosLocation,3,i.FLOAT,!1,0,0),i.useProgram(d)}var f=i.getError();if(0!==f)throw console.log("Error: Something went wrong with WebGL!",f),{type:"webgl error"};N()}else{var dt;wt&&j.removeChild(wt),(wt=I.createElement("div")).className="pnlm-world",dt=x.basePath?x.basePath+x.fallbackPath:x.fallbackPath;var Kt=0,Vt=function(){var o=I.createElement("canvas");o.className="pnlm-face pnlm-"+lt[this.side]+"face",wt.appendChild(o);var _=o.getContext("2d");o.style.width=this.width+4+"px",o.style.height=this.height+4+"px",o.width=this.width+4,o.height=this.height+4,_.drawImage(this,2,2);var B,H,w=_.getImageData(0,0,o.width,o.height),y=w.data;for(B=2;B<o.width-2;B++)for(H=0;H<4;H++)y[4*(B+o.width)+H]=y[4*(B+2*o.width)+H],y[4*(B+o.width*(o.height-2))+H]=y[4*(B+o.width*(o.height-3))+H];for(B=2;B<o.height-2;B++)for(H=0;H<4;H++)y[4*(B*o.width+1)+H]=y[4*(B*o.width+2)+H],y[4*((B+1)*o.width-2)+H]=y[4*((B+1)*o.width-3)+H];for(H=0;H<4;H++)y[4*(o.width+1)+H]=y[4*(2*o.width+2)+H],y[4*(2*o.width-2)+H]=y[4*(3*o.width-3)+H],y[4*(o.width*(o.height-2)+1)+H]=y[4*(o.width*(o.height-3)+2)+H],y[4*(o.width*(o.height-1)-2)+H]=y[4*(o.width*(o.height-2)-3)+H];for(B=1;B<o.width-1;B++)for(H=0;H<4;H++)y[4*B+H]=y[4*(B+o.width)+H],y[4*(B+o.width*(o.height-1))+H]=y[4*(B+o.width*(o.height-2))+H];for(B=1;B<o.height-1;B++)for(H=0;H<4;H++)y[B*o.width*4+H]=y[4*(B*o.width+1)+H],y[4*((B+1)*o.width-1)+H]=y[4*((B+1)*o.width-2)+H];for(H=0;H<4;H++)y[H]=y[4*(o.width+1)+H],y[4*(o.width-1)+H]=y[4*(2*o.width-2)+H],y[o.width*(o.height-1)*4+H]=y[4*(o.width*(o.height-2)+1)+H],y[4*(o.width*o.height-1)+H]=y[4*(o.width*(o.height-1)-2)+H];_.putImageData(w,0,0),pt.call(this)},pt=function(){this.width>0?(ct===m&&(ct=this.width),ct!=this.width&&console.log("Fallback faces have inconsistent widths: "+ct+" vs. "+this.width)):W=!0,6==++Kt&&(ct=this.width,j.appendChild(wt),N())};for(W=!1,S=0;S<6;S++){var _t=new Image;_t.crossOrigin=M.crossOrigin?M.crossOrigin:"anonymous",_t.side=S,_t.onload=Vt,_t.onerror=pt,_t.src="multires"==it?dt.replace("%s",lt[S])+(x.extension?"."+x.extension:""):x[S].src}q(ct)}},this.destroy=function(){if(j!==m&&(Z!==m&&j.contains(Z)&&j.removeChild(Z),wt!==m&&j.contains(wt)&&j.removeChild(wt)),i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}},this.resize=function(){var s=mt.devicePixelRatio||1;Z.width=Z.clientWidth*s,Z.height=Z.clientHeight*s,i&&(1286==i.getError()&&pe(),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),"multires"!=it?i.uniform1f(d.aspectRatio,Z.clientWidth/Z.clientHeight):x.shtHash&&(i.useProgram(U),i.uniform1f(U.aspectRatio,Z.clientWidth/Z.clientHeight),i.useProgram(d)))},Z&&this.resize(),this.setPose=function(s,C){s=isNaN(s)?0:Number(s),C=isNaN(C)?0:Number(C),St=0==s&&0==C?m:[s,C]},this.render=function(s,C,p,b){var O,L,Y=0;if(b===m&&(b={}),b.roll&&(Y=b.roll),b.dynamic)var S=b.dynamic;if(St!==m){var W=St[0],tt=St[1],q=s,dt=C,Kt=Math.cos(tt)*Math.sin(s)*Math.sin(W)+Math.cos(s)*(Math.cos(W)*Math.cos(C)+Math.sin(tt)*Math.sin(W)*Math.sin(C)),Vt=-Math.sin(s)*Math.sin(tt)+Math.cos(s)*Math.cos(tt)*Math.sin(C),pt=Math.cos(tt)*Math.cos(W)*Math.sin(s)+Math.cos(s)*(-Math.cos(C)*Math.sin(W)+Math.cos(W)*Math.sin(tt)*Math.sin(C));s=Math.asin(Math.max(Math.min(pt,1),-1)),C=Math.atan2(Vt,Kt);var _t=[Math.cos(q)*(Math.sin(tt)*Math.sin(W)*Math.cos(dt)-Math.cos(W)*Math.sin(dt)),Math.cos(q)*Math.cos(tt)*Math.cos(dt),Math.cos(q)*(Math.cos(W)*Math.sin(tt)*Math.cos(dt)+Math.sin(dt)*Math.sin(W))],gt=[-Math.cos(s)*Math.sin(C),Math.cos(s)*Math.cos(C)],xt=Math.acos(Math.max(Math.min((_t[0]*gt[0]+_t[1]*gt[1])/(Math.sqrt(_t[0]*_t[0]+_t[1]*_t[1]+_t[2]*_t[2])*Math.sqrt(gt[0]*gt[0]+gt[1]*gt[1])),1),-1));_t[2]<0&&(xt=2*Math.PI-xt),Y+=xt}if(b.hook&&b.hook({gl:i,program:d,previewProgram:U,imageType:it,texCoordBuffer:k,cubeVertBuf:Ht,cubeVertTexCoordBuf:ut,cubeVertIndBuf:Bt}),i||"multires"!=it&&"cubemap"!=it){if("multires"!=it){var Nt=2*Math.atan(Math.tan(.5*p)/(i.drawingBufferWidth/i.drawingBufferHeight));O=1/Math.tan(.5*Nt),i.uniform1f(d.psi,C),i.uniform1f(d.theta,s),i.uniform1f(d.rot,Y),i.uniform1f(d.f,O),!0===S&&"equirectangular"==it&&(i.bindTexture(i.TEXTURE_2D,d.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGB,i.RGB,i.UNSIGNED_BYTE,x)),i.drawArrays(i.TRIANGLES,0,6)}else{var Ct=typeof x.shtHash<"u"||typeof x.equirectangularThumbnail<"u",Gt=Ct;if(Ct&&d.currentNodes.length>=6){Gt=!1;for(var N=0;N<6;N++)if(!d.currentNodes[N].textureLoaded){Gt=!0;break}}Gt&&(i.useProgram(U),i.bindBuffer(i.ARRAY_BUFFER,k),i.vertexAttribPointer(U.texCoordLocation,2,i.FLOAT,!1,0,0),i.bindTexture(i.TEXTURE_2D,U.texture),Nt=2*Math.atan(Math.tan(.5*p)/(i.drawingBufferWidth/i.drawingBufferHeight)),O=1/Math.tan(.5*Nt),i.uniform1f(U.psi,C),i.uniform1f(U.theta,s),i.uniform1f(U.rot,Y),i.uniform1f(U.f,O),i.drawArrays(i.TRIANGLES,0,6),i.bindBuffer(i.ARRAY_BUFFER,Ht),i.vertexAttribPointer(d.vertPosLocation,3,i.FLOAT,!1,0,0),i.useProgram(d));var kt=de(p,i.drawingBufferWidth/i.drawingBufferHeight,.1,100),u=de(p,i.drawingBufferWidth/i.drawingBufferHeight,-100,100),T=function Xt(){return new Float32Array([1,0,0,0,1,0,0,0,1])}();T=te(T,-Y,"z"),T=te(T,-s,"x"),T=function _e(s){return new Float32Array([s[0],s[1],s[2],0,s[3],s[4],s[5],0,s[6],s[7],s[8],0,0,0,0,1])}(T=te(T,C,"y")),i.uniformMatrix4fv(d.perspUniform,!1,bt(kt)),i.uniformMatrix4fv(d.cubeUniform,!1,bt(T));var l=le(kt,T),h=le(u,T);if(d.nodeCache.sort(Lt),d.nodeCache.length>200&&d.nodeCache.length>d.currentNodes.length+50)for(var n=d.nodeCache.splice(200,d.nodeCache.length-200),f=0;f<n.length;f++)i.deleteTexture(n[f].texture);for(d.currentNodes=[],L=0;L<6;L++)Ft(l,h,new vt(ae[L],F[L],1,0,0,x.fullpath,null),s,C,p);for(d.currentNodes.sort($),N=et.length-1;N>=0;N--)-1===d.currentNodes.indexOf(et[N].node)&&(et[N].node.textureLoad=!1,et.splice(N,1));if(0===et.length)for(N=0;N<d.currentNodes.length;N++){var _=d.currentNodes[N];if(!_.texture&&!_.textureLoad){_.textureLoad=!0,setTimeout(Rt,0,_);break}}d.textureLoads.length>0&&d.textureLoads.shift()(!0),function It(s){if(!d.drawInProgress){d.drawInProgress=!0,s&&i.clear(i.COLOR_BUFFER_BIT);for(var C={},p=0;p<d.currentNodes.length;p++)C[d.currentNodes[p].parentPath]===m&&(C[d.currentNodes[p].parentPath]=0),C[d.currentNodes[p].parentPath]+=!(d.currentNodes[p].textureLoaded>1);for(p=0;p<d.currentNodes.length;p++)d.currentNodes[p].textureLoaded>1&&4!=C[d.currentNodes[p].path]&&(i.bufferData(i.ARRAY_BUFFER,d.currentNodes[p].vertices,i.STATIC_DRAW),i.bindTexture(i.TEXTURE_2D,d.currentNodes[p].texture),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0));d.drawInProgress=!1}}(!Ct)}if(b.returnImage!==m)return mt.createImageBitmap&&"ImageBitmap"==b.returnImage?createImageBitmap(Z):0==b.returnImage.toString().indexOf("image/")?Z.toDataURL(b.returnImage):Z.toDataURL("image/png")}else{var Mt={f:"translate3d(-"+(2+(L=ct/2))+"px, -"+(L+2)+"px, -"+L+"px)",b:"translate3d("+(L+2)+"px, -"+(L+2)+"px, "+L+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(L+2)+"px, -"+L+"px, "+(L+2)+"px) rotateX(270deg)",d:"translate3d(-"+(L+2)+"px, "+L+"px, -"+(L+2)+"px) rotateX(90deg)",l:"translate3d(-"+L+"px, -"+(L+2)+"px, "+(L+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+L+"px, -"+(L+2)+"px, -"+(L+2)+"px) rotateY(270deg)"},Ut=(O=1/Math.tan(p/2))*Z.clientWidth/2+"px",at="perspective("+Ut+") translateZ("+Ut+") rotateX("+s+"rad) rotateY("+C+"rad) ",v=Object.keys(Mt);for(N=0;N<6;N++){var Et=wt.querySelector(".pnlm-"+v[N]+"face");Et&&(Et.style.webkitTransform=at+Mt[v[N]],Et.style.transform=at+Mt[v[N]])}}},this.isLoading=function(){if(i&&"multires"==it)for(var s=0;s<d.currentNodes.length;s++)if(!d.currentNodes[s].textureLoaded)return!0;return!1},this.isBaseLoaded=function(){if(d.currentNodes.length>=6){for(var s=0;s<6;s++)if(!d.currentNodes[s].textureLoaded)return!1;return!0}return!1},this.getCanvas=function(){return Z};var Rt,et=[],Yt=function(){var p,s=4,C={};function b(){var Y=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=p||"anonymous";var S=function(){d.textureLoads.push(function(W){W&&(Y.image.width>0&&Y.image.height>0?(ne(Y.image,Y.texture),Y.callback(Y.texture,!0)):Y.callback(Y.texture,!1)),function N(Y){if(et.length){var S=et.shift();Y.loadTexture(S.src,S.texture,S.callback)}else C[s++]=Y}(Y)})};this.image.addEventListener("load",S),this.image.addEventListener("error",S)}function O(Y,S,W,tt){this.node=Y,this.src=S,this.texture=W,this.callback=tt}b.prototype.loadTexture=function(Y,S,W){this.texture=S,this.callback=W,this.image.src=Y};for(var L=0;L<s;L++)C[L]=new b;return function(Y,S,W,tt){p=tt;var q=i.createTexture();return s?C[--s].loadTexture(S,q,W):et.push(new O(Y,S,q,W)),q}}();if(mt.Worker&&mt.createImageBitmap){var re=new Blob(["("+function(){self.onmessage=function(C){var p=C.data[0];fetch(p,{mode:"cors",credentials:"use-credentials"==C.data[1]?"include":"same-origin"}).then(function(O){return O.blob()}).then(function(O){return createImageBitmap(O)}).then(function(O){postMessage([p,!0,O],[O])}).catch(function(){postMessage([p,!1])})}}.toString()+")()"],{type:"application/javascript"}),me=new Worker(URL.createObjectURL(re)),D={};me.onmessage=function(C){var p=C.data[0],b=C.data[1],O=C.data[2];d.textureLoads.push(function(N){var L,Y=!1;b&&N&&(L=i.createTexture(),ne(O,L),Y=!0);var S=D[p];delete D[p],S!==m&&(S.texture=L,S.textureLoaded=Y?2:1)})},Rt=function(C){var p=new URL(C.path+(x.extension?"."+x.extension:""),mt.location).href;D[p]=C,me.postMessage([p,M.crossOrigin])}}else Rt=function Dt(s){Yt(s,s.path+(x.extension?"."+x.extension:""),function(C,p){s.texture=C,s.textureLoaded=p?2:1},M.crossOrigin)};function le(s,C){return new Float32Array([s[0]*C[0],s[0]*C[1],s[0]*C[2],0,s[5]*C[4],s[5]*C[5],s[5]*C[6],0,s[10]*C[8],s[10]*C[9],s[10]*C[10],s[11],-C[8],-C[9],-C[10],0])}function Q(s,C){return new Float32Array([s[0]*C[0]+s[1]*C[1]+s[2]*C[2],s[4]*C[0]+s[5]*C[1]+s[6]*C[2],s[11]+s[8]*C[0]+s[9]*C[1]+s[10]*C[2],1/(s[12]*C[0]+s[13]*C[1]+s[14]*C[2])])}function ee(s,C){var p=Q(s,C),b=p[0]*p[3],O=p[1]*p[3],N=p[2]*p[3],L=[0,0,0];return b<-1&&(L[0]=-1),b>1&&(L[0]=1),O<-1&&(L[1]=-1),O>1&&(L[1]=1),(N<-1||N>1)&&(L[2]=1),L}function pe(){console.log("Reducing canvas size due to error 1286!"),Z.width=Math.round(Z.width/2),Z.height=Math.round(Z.height/2)}var se="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~",Jt="Bf[ff4fff|ffff0fffffBo@Ri5xag{Jmdf2+WiefCs@Ll7+Vi]Btag6[NmdgCv=Ho9;Qk;7zWiF_GsahDy:ErE?Mn$5+SkS_AyWiD#-CuJ[Iqp6;Nnx?7*SlE$*BxR@FtPA?Jq+%7:NnF*zAzn?CwIG@Ft-Y9?IrG+vA%w:AzGR?Cx*IF@EuI,nA+$*9%Gu:A#xCR?ByJ-VB-*wA+J**9*ZBv:9%L.QD.*aB.O.v9-MF+$8,O:MG:*OD;a:UB:IO:n9:Q:KJ;#IG=u-KE=Hs:MC?T:IO=wEL?#%FJ@K**FI@Y;HV=pDU?*sCS@S.uCR[m;Hp=VDq?*SCs@s.QCt[r:Iw=OEz?#IF$@#*HF%@u:K$;KI+=uEK-=*sCM:?w:M+:HO.;aCU;:%OCn?:z.Q..Ha;.ODv?-yFG$@,$-V;-Hw=+JH*?*lBP:?%%,n=+J*?%GQ:=#NCt?;y++v=%O:=zGt?:xHI,@-u,*z=zX?:wI+@,tEY??%r-$*;xt@,tP=?$qG%[:xn.#-:u$[%qp];xnN?[*sl.y:-r-?yn$^+sks_=yoi:v=*o?;uk;[zoi,_+skh:s@zl[+pi];tkg][xmhg;o@ti^xkg{$mhf|+oigf;f[ff_fff|ffff~fffff",fe=3.317,Tt=[];function ce(s,C){return Math.pow((Math.abs(s)-C)/C,2)*(s-C>0?1:-1)}function ue(s,C){var p=Math.floor(s/361),b=Math.floor(s/19)%19,O=s%19;return[ce(p,9)*C,ce(b,9)*C,ce(O,9)*C]}function Qt(s,C){for(var p=Math.floor(s.length/C),b=[],O=0;O<p;O++){for(var N=0,L=0;L<C;L++)N=83*N+se.indexOf(s[O*C+L]);b.push(N)}return b}function $t(s,C,p){var b=Math.floor(Math.sqrt(s.length))-1,O=Array(b+1),N=Array(b+1);N[0]=0,O[0]=1,N[1]=Math.sin(p),O[1]=Math.cos(p);for(var L=2;L<=b;L++)N[L]=2*N[L-1]*O[1]-N[L-2],O[L]=2*O[L-1]*O[1]-O[L-2];for(var Y=0,S=0,W=1;W<=b+1;W++)S+=W;for(var tt=b;tt>=0;tt--){var q=Math.floor((tt+1)*tt/2);for(Y+=0!=q?s[q]*C[q-1]:s[q],L=1;L<=tt;L++)Y+=(s[++q]*O[L]+s[q+S-tt-1]*N[L])*C[q-1]}return Math.round(Y)}}var g=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),V=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),ot=["precision highp float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image0;","uniform sampler2D u_image1;","uniform bool u_splitImage;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join("\n"),e=ot+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join("\n"),nt=ot+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else {","if(u_splitImage) {","if(coord.x < 0.0)","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / u_h, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","else","gl_FragColor = texture2D(u_image1, vec2((coord.x + u_h) / u_h - 1.0, (-coord.y + u_v + u_vo) / (u_v * 2.0)));","} else {","gl_FragColor = texture2D(u_image0, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}","}","}"].join("\n"),z=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function(j,At,Z){return new t(j,At,Z)}}}(window,document)},32647:()=>{window.pannellum=function(mt,I,m){"use strict";function t(g,V){var e,nt,z,j,ct,x,it,M,lt,Lt,te,bt,ot=this,At=!1,Z=Date.now(),d=0,i=0,rt=-1,ft=0,U=0,P=new Array(10),ht=!1,wt=!1,St=!1,k={yaw:0,pitch:0,hfov:0},Ht=!1,ut=!1,Bt=0,F=0,$={},It={},vt=[],Ft=!1,oe=!1,Xt=1e-6,_e=!1,de=!1,ne={hfov:100,minHfov:50,multiResMinHfov:!1,maxHfov:120,pitch:0,minPitch:m,maxPitch:m,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:m,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,dynamicUpdate:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function Ut(a){return a<.5?2*a*a:(4-2*a)*a-1},draggable:!0,dragConfirm:!1,disableKeyboardCtrl:!1,crossOrigin:"anonymous",targetBlank:!1,touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],friction:.15,strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console.",twoTouchActivate:"Use two fingers together to pan the panorama.",twoTouchXActivate:"Use two fingers together to pan the panorama horizontally.",twoTouchYActivate:"Use two fingers together to pan the panorama vertically.",ctrlZoomActivate:"Use %s + scroll to zoom the panorama."}};(g="string"==typeof g?I.getElementById(g):g).classList.add("pnlm-container"),g.tabIndex=0;var et=I.createElement("div");et.className="pnlm-ui",g.appendChild(et);var Yt=I.createElement("div");Yt.className="pnlm-render-container",g.appendChild(Yt);var Dt=I.createElement("div");Dt.className="pnlm-dragfix",et.appendChild(Dt);var Rt=I.createElement("span");Rt.className="pnlm-about-msg";var re=I.createElement("a");re.href="https://pannellum.org/",re.textContent="Pannellum",Rt.appendChild(re);var me=I.createElement("span");Rt.appendChild(me),et.appendChild(Rt),Dt.addEventListener("contextmenu",function $t(a){var r=qt(a);Rt.style.left=r.x+"px",Rt.style.top=r.y+"px",clearTimeout($t.t1),clearTimeout($t.t2),Rt.style.display="block",Rt.style.opacity=1,$t.t1=setTimeout(function(){Rt.style.opacity=0},2e3),$t.t2=setTimeout(function(){Rt.style.display="none"},2500),a.preventDefault()});var D={},le=I.createElement("div");le.className="pnlm-sprite pnlm-hot-spot-debug-indicator",et.appendChild(le),D.container=I.createElement("div"),D.container.className="pnlm-panorama-info",D.title=I.createElement("div"),D.title.className="pnlm-title-box",D.container.appendChild(D.title),D.author=I.createElement("div"),D.author.className="pnlm-author-box",D.container.appendChild(D.author),et.appendChild(D.container),D.load={},D.load.box=I.createElement("div"),D.load.box.className="pnlm-load-box",D.load.boxp=I.createElement("p"),D.load.box.appendChild(D.load.boxp),D.load.lbox=I.createElement("div"),D.load.lbox.className="pnlm-lbox",D.load.lbox.innerHTML='<div class="pnlm-loading"></div>',D.load.box.appendChild(D.load.lbox),D.load.lbar=I.createElement("div"),D.load.lbar.className="pnlm-lbar",D.load.lbarFill=I.createElement("div"),D.load.lbarFill.className="pnlm-lbar-fill",D.load.lbar.appendChild(D.load.lbarFill),D.load.box.appendChild(D.load.lbar),D.load.msg=I.createElement("p"),D.load.msg.className="pnlm-lmsg",D.load.box.appendChild(D.load.msg),et.appendChild(D.load.box),D.errorMsg=I.createElement("div"),D.errorMsg.className="pnlm-error-msg pnlm-info-box",et.appendChild(D.errorMsg),D.interactionMsg=I.createElement("div"),D.interactionMsg.className="pnlm-interaction-msg pnlm-info-box",et.appendChild(D.interactionMsg);var Q={};Q.container=I.createElement("div"),Q.container.className="pnlm-controls-container",et.appendChild(Q.container),Q.load=I.createElement("button"),Q.load.className="pnlm-load-button",Q.load.addEventListener("click",function(){B(),Ee()}),et.appendChild(Q.load),Q.zoom=I.createElement("div"),Q.zoom.className="pnlm-zoom-controls pnlm-controls",Q.zoomIn=I.createElement("div"),Q.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",Q.zoomIn.addEventListener("click",function Ot(){ct&&(zt(e.hfov-5),v())}),Q.zoom.appendChild(Q.zoomIn),Q.zoomOut=I.createElement("div"),Q.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",Q.zoomOut.addEventListener("click",function Ae(){ct&&(zt(e.hfov+5),v())}),Q.zoom.appendChild(Q.zoomOut),Q.container.appendChild(Q.zoom),Q.fullscreen=I.createElement("div"),Q.fullscreen.addEventListener("click",H),Q.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(I.fullscreenEnabled||I.mozFullScreenEnabled||I.webkitFullscreenEnabled||I.msFullscreenEnabled)&&Q.container.appendChild(Q.fullscreen),Q.orientation=I.createElement("div"),Q.orientation.addEventListener("click",function(a){ut?Ce():we()}),Q.orientation.addEventListener("mousedown",function(a){a.stopPropagation()}),Q.orientation.addEventListener("touchstart",function(a){a.stopPropagation()}),Q.orientation.addEventListener("pointerdown",function(a){a.stopPropagation()}),Q.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var ee=!1;mt.DeviceOrientationEvent&&"https:"==location.protocol&&(navigator.userAgent.toLowerCase().indexOf("mobi")>=0||navigator.userAgent.indexOf("Mac")>=0&&navigator.maxTouchPoints&&navigator.maxTouchPoints>0)&&(Q.container.appendChild(Q.orientation),ee=!0);var ie=I.createElement("div");function pe(){var a=I.createElement("div");if(a.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1!=a.getElementsByTagName("i").length){var r,c;if(lt=e.hfov,Lt=e.pitch,"cubemap"==e.type){for(x=[],r=0;r<6;r++)x.push(new Image),x[r].crossOrigin=e.crossOrigin;D.load.lbox.style.display="block",D.load.lbar.style.display="none"}else if("multires"==e.type){var E=JSON.parse(JSON.stringify(e.multiRes));e.basePath&&e.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(e.multiRes.basePath)?E.basePath=e.basePath+e.multiRes.basePath:e.multiRes.basePath?E.basePath=e.multiRes.basePath:e.basePath&&(E.basePath=e.basePath),x=E}else if(!0===e.dynamic)x=e.panorama;else{if(e.panorama===m)return void Tt(e.strings.noPanoramaError);x=new Image}if("cubemap"==e.type){var A=6,R=function(){0==--A&&Jt()},X=function(G){var J=I.createElement("a");J.href=G.target.src,J.textContent=J.href,Tt(e.strings.fileAccessError.replace("%s",J.outerHTML))};for(r=0;r<x.length;r++)"null"==(c=e.cubeMap[r])?(console.log("Will use background instead of missing cubemap face "+r),R()):(e.basePath&&!se(c)&&(c=e.basePath+c),x[r].onload=R,x[r].onerror=X,x[r].src=ge(c))}else if("multires"==e.type)Jt();else if(c="",e.basePath&&(c=e.basePath),!0!==e.dynamic){if(e.panorama instanceof Image||e.panorama instanceof ImageData||mt.ImageBitmap&&e.panorama instanceof ImageBitmap)return x=e.panorama,void Jt();c=se(e.panorama)?e.panorama:c+e.panorama,x.onload=function(){mt.URL.revokeObjectURL(this.src),Jt()},(bt=new XMLHttpRequest).onloadend=function(){if(200!=bt.status){var G=I.createElement("a");return G.href=c,G.textContent=G.href,void Tt(e.strings.fileAccessError.replace("%s",G.outerHTML))}(function fe(a,r){var c=new FileReader;c.addEventListener("loadend",function(){var E=c.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var A=E.indexOf("\xff\xc2");(A<0||A>65536)&&Tt(e.strings.iOS8WebGLError)}var R=E.indexOf("<x:xmpmeta");if(R>-1&&!0!==e.ignoreGPanoXMP){var X=E.substring(R,E.indexOf("</x:xmpmeta>")+12),G=function(K){var st;return X.indexOf(K+'="')>=0?st=(st=X.substring(X.indexOf(K+'="')+K.length+2)).substring(0,st.indexOf('"')):X.indexOf(K+">")>=0&&(st=(st=X.substring(X.indexOf(K+">")+K.length+1)).substring(0,st.indexOf("<"))),st!==m?Number(st):null},J={fullWidth:G("GPano:FullPanoWidthPixels"),croppedWidth:G("GPano:CroppedAreaImageWidthPixels"),fullHeight:G("GPano:FullPanoHeightPixels"),croppedHeight:G("GPano:CroppedAreaImageHeightPixels"),topPixels:G("GPano:CroppedAreaTopPixels"),heading:G("GPano:PoseHeadingDegrees"),horizonPitch:G("GPano:PosePitchDegrees"),horizonRoll:G("GPano:PoseRollDegrees"),pitch:G("GPano:InitialViewPitchDegrees"),yaw:G("GPano:InitialViewHeadingDegrees"),hfov:G("GPano:InitialHorizontalFOVDegrees")};null!==J.fullWidth&&null!==J.croppedWidth&&null!==J.fullHeight&&null!==J.croppedHeight&&null!==J.topPixels&&(vt.indexOf("haov")<0&&(e.haov=J.croppedWidth/J.fullWidth*360),vt.indexOf("vaov")<0&&(e.vaov=J.croppedHeight/J.fullHeight*180),vt.indexOf("vOffset")<0&&(e.vOffset=-180*((J.topPixels+J.croppedHeight/2)/J.fullHeight-.5)),null!==J.heading&&vt.indexOf("northOffset")<0&&(e.northOffset=J.heading,!1!==e.compass&&(e.compass=!0)),null!==J.horizonPitch&&null!==J.horizonRoll&&(vt.indexOf("horizonPitch")<0&&(e.horizonPitch=J.horizonPitch),vt.indexOf("horizonRoll")<0&&(e.horizonRoll=J.horizonRoll)),null!=J.pitch&&vt.indexOf("pitch")<0&&(e.pitch=J.pitch),null!=J.yaw&&vt.indexOf("yaw")<0&&(e.yaw=J.yaw),null!=J.hfov&&vt.indexOf("hfov")<0&&(e.hfov=J.hfov))}x.src=mt.URL.createObjectURL(a),x.onerror=function(){(function K(){return mt.fetch?mt.fetch(I.location.href).then(function(st){return st.headers.get("Content-Security-Policy")}):null})().then(function(st){st&&st.split(";").find(function(Pt){var jt=Pt.match(/img-src(.*)/);if(jt)return!jt[1].includes("blob")})&&(console.log("CSP blocks blobs; reverting to URL."),x.crossOrigin=e.crossOrigin,x.src=r)})}}),c.readAsBinaryString!==m?c.readAsBinaryString(a):c.readAsText(a)})(this.response,c),D.load.msg.innerHTML=""},bt.onprogress=function(G){var K,st,Zt;G.lengthComputable?(D.load.lbarFill.style.width=G.loaded/G.total*100+"%",G.total>1e6?(K="MB",st=(G.loaded/1e6).toFixed(2),Zt=(G.total/1e6).toFixed(2)):G.total>1e3?(K="kB",st=(G.loaded/1e3).toFixed(1),Zt=(G.total/1e3).toFixed(1)):(K="B",st=G.loaded,Zt=G.total),D.load.msg.innerHTML=st+" / "+Zt+" "+K):(D.load.lbox.style.display="block",D.load.lbar.style.display="none")};try{bt.open("GET",c,!0)}catch{Tt(e.strings.malformedURLError)}bt.responseType="blob",bt.setRequestHeader("Accept","image/*,*/*;q=0.9"),bt.setRequestHeader("cache-control","no-cache"),bt.withCredentials="use-credentials"===e.crossOrigin,bt.send()}e.draggable&&et.classList.add("pnlm-grab"),et.classList.remove("pnlm-grabbing"),Ft=!0===e.dynamicUpdate,e.dynamic&&Ft&&(x=e.panorama,Jt())}else Tt()}function se(a){return new RegExp("^(?:[a-z]+:)?//","i").test(a)||"/"==a[0]||"blob:"==a.slice(0,5)}function Jt(){nt||(nt=new libpannellum.renderer(Yt)),St||(St=!0,Dt.addEventListener("mousedown",s,!1),I.addEventListener("mousemove",b,!1),I.addEventListener("mouseup",O,!1),e.mouseZoom&&(et.addEventListener("mousewheel",Kt,!1),et.addEventListener("DOMMouseScroll",Kt,!1)),e.doubleClickZoom&&Dt.addEventListener("dblclick",C,!1),g.addEventListener("mozfullscreenchange",yt,!1),g.addEventListener("webkitfullscreenchange",yt,!1),g.addEventListener("msfullscreenchange",yt,!1),g.addEventListener("fullscreenchange",yt,!1),"function"==typeof ResizeObserver?(te=new ResizeObserver(at)).observe(g):(mt.addEventListener("resize",at,!1),mt.addEventListener("orientationchange",at,!1)),e.disableKeyboardCtrl||(g.addEventListener("keydown",Vt,!1),g.addEventListener("keyup",_t,!1),g.addEventListener("blur",pt,!1)),I.addEventListener("mouseleave",O,!1),""===I.documentElement.style.pointerAction&&""===I.documentElement.style.touchAction?(Dt.addEventListener("pointerdown",tt,!1),Dt.addEventListener("pointermove",q,!1),Dt.addEventListener("pointerup",dt,!1),Dt.addEventListener("pointerleave",dt,!1)):(Dt.addEventListener("touchstart",N,!1),Dt.addEventListener("touchmove",L,!1),Dt.addEventListener("touchend",Y,!1)),mt.navigator.pointerEnabled&&(g.style.touchAction="none")),function T(){try{var a={};e.horizonPitch!==m&&(a.horizonPitch=e.horizonPitch*Math.PI/180),e.horizonRoll!==m&&(a.horizonRoll=e.horizonRoll*Math.PI/180),e.backgroundColor!==m&&(a.backgroundColor=e.backgroundColor),nt.init(x,e.type,e.haov*Math.PI/180,e.vaov*Math.PI/180,e.vOffset*Math.PI/180,l,a)}catch(r){if(!0!==e.dynamic&&(x=m),"webgl error"==r.type||"no webgl"==r.type)Tt();else{if("webgl size error"!=r.type)throw Tt(e.strings.unknownError),r;Tt(e.strings.textureSizeError.replace("%s",r.width).replace("%s",r.maxWidth))}}}(),zt(e.hfov),setTimeout(function(){},500)}function Tt(a){a===m&&(a=e.strings.genericWebGLError),D.errorMsg.innerHTML="<p>"+a+"</p>",Q.load.style.display="none",D.load.box.style.display="none",D.errorMsg.style.display="table",wt=!0,ct=m,Yt.style.display="none",Wt("error",a)}function ue(a){D.interactionMsg.style.opacity=1,D.interactionMsg.innerHTML="<p>"+a+"</p>",D.interactionMsg.style.display="table",Wt("messageshown"),clearTimeout(D.interactionMsg.timeout),D.interactionMsg.removeEventListener("transitionend",Qt),D.interactionMsg.timeout=setTimeout(function(){D.interactionMsg.style.opacity=0,D.interactionMsg.addEventListener("transitionend",Qt)},2e3)}function Qt(){D.interactionMsg.style.opacity=0,D.interactionMsg.style.display="none",Wt("messagecleared")}function qt(a){var r=g.getBoundingClientRect(),c={};return c.x=(a.clientX||a.pageX)-r.left,c.y=(a.clientY||a.pageY)-r.top,c}function s(a){if(a.preventDefault(),g.focus(),ct&&e.draggable&&!e.draggingHotSpot){var r=qt(a);if(e.hotSpotDebug){var c=p(a);console.log("Pitch: "+c[0]+", Yaw: "+c[1]+", Center Pitch: "+e.pitch+", Center Yaw: "+e.yaw+", HFOV: "+e.hfov)}ve(),Ce(),e.roll=0,k.hfov=0,At=!0,Z=Date.now(),d=r.x,i=r.y,ft=e.yaw,U=e.pitch,et.classList.add("pnlm-grabbing"),et.classList.remove("pnlm-grab"),Wt("mousedown",a),v()}}function C(a){if(e.minHfov===e.hfov)ot.setHfov(lt,1e3);else{var r=p(a);ot.lookAt(r[0],r[1],e.minHfov,1e3)}}function p(a){var r=qt(a),c=nt.getCanvas(),E=c.clientWidth,A=c.clientHeight,R=r.x/E*2-1,X=(1-r.y/A*2)*A/E,G=1/Math.tan(e.hfov*Math.PI/360),J=Math.sin(e.pitch*Math.PI/180),K=Math.cos(e.pitch*Math.PI/180),st=G*K-X*J,Zt=Math.sqrt(R*R+st*st),Pt=180*Math.atan((X*K+G*J)/Zt)/Math.PI,jt=180*Math.atan2(R/Zt,st/Zt)/Math.PI+e.yaw;return jt<-180&&(jt+=360),jt>180&&(jt-=360),[Pt,jt]}function b(a){if(j)n(j,a);else if(At&&ct){Z=Date.now();var r=nt.getCanvas(),c=r.clientWidth,E=r.clientHeight,A=qt(a),R=180*(Math.atan(d/c*2-1)-Math.atan(A.x/c*2-1))/Math.PI*e.hfov/90+ft;k.yaw=(R-e.yaw)%360*.2,e.yaw=R;var X=2*Math.atan(Math.tan(e.hfov/360*Math.PI)*E/c)*180/Math.PI,G=180*(Math.atan(A.y/E*2-1)-Math.atan(i/E*2-1))/Math.PI*X/90+U;k.pitch=.2*(G-e.pitch),e.pitch=G}}function O(a){j&&j.dragHandlerFunc&&j.dragHandlerFunc(a,j.dragHandlerArgs),j=null,At&&(At=!1,Date.now()-Z>15&&(k.pitch=k.yaw=0),et.classList.add("pnlm-grab"),et.classList.remove("pnlm-grabbing"),Z=Date.now(),Wt("mouseup",a))}function N(a){if(ct&&e.draggable&&!j){ve(),Ce(),e.roll=0,k.hfov=0;var r=qt(a.targetTouches[0]);if(d=r.x,i=r.y,2==a.targetTouches.length){var c=qt(a.targetTouches[1]);d+=.5*(c.x-r.x),i+=.5*(c.y-r.y),rt=Math.sqrt((r.x-c.x)*(r.x-c.x)+(r.y-c.y)*(r.y-c.y))}At=!0,Z=Date.now(),ft=e.yaw,U=e.pitch,Wt("touchstart",a),v()}}function L(a){if(e.draggable&&(e.dragConfirm||a.preventDefault(),ct&&(Z=Date.now()),At&&ct)){var r=qt(a.targetTouches[0]),c=r.x,E=r.y;if(2==a.targetTouches.length&&-1!=rt){var A=qt(a.targetTouches[1]);c+=.5*(A.x-r.x),E+=.5*(A.y-r.y);var R=Math.sqrt((r.x-A.x)*(r.x-A.x)+(r.y-A.y)*(r.y-A.y));zt(e.hfov+.1*(rt-R)),rt=R}var X=e.hfov/360*e.touchPanSpeedCoeffFactor;if(ht||"both"!=e.dragConfirm&&"yaw"!=e.dragConfirm||2==a.targetTouches.length){var G=(d-c)*X+ft;k.yaw=(G-e.yaw)%360*.2,e.yaw=G}else d!=c&&ue("yaw"==e.dragConfirm?e.strings.twoTouchXActivate:e.strings.twoTouchActivate);if(ht||"both"!=e.dragConfirm&&"pitch"!=e.dragConfirm||2==a.targetTouches.length){var J=(E-i)*X+U;k.pitch=.2*(J-e.pitch),e.pitch=J}else i!=E&&ue("pitch"==e.dragConfirm?e.strings.twoTouchYActivate:e.strings.twoTouchActivate);("yaw"==e.dragConfirm||"pitch"==e.dragConfirm||"both"==e.dragConfirm)&&2==a.targetTouches.length&&(Qt(),a.preventDefault())}}function Y(){j=null,At=!1,Date.now()-Z>150&&(k.pitch=k.yaw=0),rt=-1,Z=Date.now(),Wt("touchend",event)}ie.className="pnlm-compass pnlm-controls pnlm-control",et.appendChild(ie),y(V.firstScene?V.firstScene:V.default&&V.default.firstScene?V.default.firstScene:null),B(!0);var S=[],W=[];function tt(a){if("touch"==a.pointerType){if(!ct||!e.draggable)return;S.push(a.pointerId),W.push({clientX:a.clientX,clientY:a.clientY}),a.targetTouches=W,N(a),a.preventDefault()}}function q(a){if("touch"==a.pointerType){if(j)return void n(j,a);if(!e.draggable)return;for(var r=0;r<S.length;r++)if(a.pointerId==S[r])return W[r].clientX=a.clientX,W[r].clientY=a.clientY,a.targetTouches=W,L(a),void a.preventDefault()}}function dt(a){if(j&&j.dragHandlerFunc&&j.dragHandlerFunc(a,j.dragHandlerArgs),j=null,"touch"==a.pointerType){for(var r=!1,c=0;c<S.length;c++)a.pointerId==S[c]&&(S[c]=m),S[c]&&(r=!0);r||(S=[],W=[],Y()),a.preventDefault()}}function Kt(a){if(ct&&("fullscreenonly"!=e.mouseZoom||ht)){if(!ht&&"ctrl"==e.mouseZoom&&!a.ctrlKey){var r=-1!=navigator.platform.indexOf("Mac")?"control":"ctrl";return void ue(e.strings.ctrlZoomActivate.replace("%s",'<kbd class="pnlm-outline">'+r+"</kbd>"))}Qt(),a.preventDefault(),ve(),Z=Date.now(),a.wheelDeltaY?(zt(e.hfov-.05*a.wheelDeltaY),k.hfov=a.wheelDelta<0?1:-1):a.wheelDelta?(zt(e.hfov-.05*a.wheelDelta),k.hfov=a.wheelDelta<0?1:-1):a.detail&&(zt(e.hfov+1.5*a.detail),k.hfov=a.detail>0?1:-1),v()}}function Vt(a){ve(),Z=Date.now(),Ce(),e.roll=0;var r=a.which||a.keycode;e.capturedKeyNumbers.indexOf(r)<0||!ht&&(16==r||17==r)&&"ctrl"==e.mouseZoom||(a.preventDefault(),27==r?ht&&H():gt(r,!0))}function pt(){for(var a=0;a<10;a++)P[a]=!1}function _t(a){var r=a.which||a.keycode;e.capturedKeyNumbers.indexOf(r)<0||(a.preventDefault(),gt(r,!1))}function gt(a,r){var c=!1;switch(a){case 109:case 189:case 17:case 173:P[0]!=r&&(c=!0),P[0]=r;break;case 107:case 187:case 16:case 61:P[1]!=r&&(c=!0),P[1]=r;break;case 38:P[2]!=r&&(c=!0),P[2]=r;break;case 87:P[6]!=r&&(c=!0),P[6]=r;break;case 40:P[3]!=r&&(c=!0),P[3]=r;break;case 83:P[7]!=r&&(c=!0),P[7]=r;break;case 37:P[4]!=r&&(c=!0),P[4]=r;break;case 65:P[8]!=r&&(c=!0),P[8]=r;break;case 39:P[5]!=r&&(c=!0),P[5]=r;break;case 68:P[9]!=r&&(c=!0),P[9]=r}c&&r&&(it=typeof performance<"u"&&performance.now()?performance.now():Date.now(),v())}function Mt(a){var r=$[a],c=Math.min(1,Math.max((Date.now()-r.startTime)/1e3/(r.duration/1e3),0)),E=r.startPosition+e.animationTimingFunction(c)*(r.endPosition-r.startPosition);(r.endPosition>r.startPosition&&E>=r.endPosition||r.endPosition<r.startPosition&&E<=r.endPosition||r.endPosition===r.startPosition)&&(E=r.endPosition,k[a]=0,delete $[a]),e[a]=E}function at(){yt("resize")}function v(){Ht||(Ht=!0,Et())}function Et(){if(!de)if(function Nt(){var a;if(ct){var r=nt.getCanvas();!1!==e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),a=e.yaw;var c=0;if(e.avoidShowingBackground){var A=e.hfov/2,R=180*Math.atan2(Math.tan(A/180*Math.PI),r.width/r.height)/Math.PI;e.vaov>e.haov?Math.min(Math.cos((e.pitch-A)/180*Math.PI),Math.cos((e.pitch+A)/180*Math.PI)):c=A*(1-Math.min(Math.cos((e.pitch-R)/180*Math.PI),Math.cos((e.pitch+R)/180*Math.PI)))}var G=e.maxYaw-e.minYaw,J=-180,K=180;G<360&&(J=e.minYaw+e.hfov/2+c,K=e.maxYaw-e.hfov/2-c,G<e.hfov&&(J=K=(J+K)/2),e.yaw=Math.max(J,Math.min(K,e.yaw))),!1===e.autoRotate&&(e.yaw>360?e.yaw-=360:e.yaw<-360&&(e.yaw+=360)),!1!==e.autoRotate&&a!=e.yaw&&it!==m&&(e.autoRotate*=-1);var st=2*Math.atan(Math.tan(e.hfov/180*Math.PI*.5)/(r.width/r.height))/Math.PI*180,Zt=e.minPitch+st/2,Pt=e.maxPitch-st/2;e.maxPitch-e.minPitch<st&&(Zt=Pt=(Zt+Pt)/2),isNaN(Zt)&&(Zt=-90),isNaN(Pt)&&(Pt=90),e.pitch=Math.max(Zt,Math.min(Pt,e.pitch)),nt.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{roll:e.roll*Math.PI/180,dynamic:Ft}),oe&&(oe=Ft=!1),w(),e.compass&&(ie.style.transform="rotate("+(-e.yaw-e.northOffset)+"deg)",ie.style.webkitTransform="rotate("+(-e.yaw-e.northOffset)+"deg)")}}(),M&&clearTimeout(M),At||!0===ut)requestAnimationFrame(Et);else if(P[0]||P[1]||P[2]||P[3]||P[4]||P[5]||P[6]||P[7]||P[8]||P[9]||e.autoRotate||$.pitch||$.yaw||$.hfov||Math.abs(k.yaw)>.01||Math.abs(k.pitch)>.01||Math.abs(k.hfov)>.01)(function xt(){if(ct){var A,a=!1,r=e.pitch,c=e.yaw,E=e.hfov;A=typeof performance<"u"&&performance.now()?performance.now():Date.now(),it===m&&(it=A);var R=(A-it)*e.hfov/1200;if(R=Math.min(R,10),P[0]&&!0===e.keyboardZoom&&(zt(e.hfov+(.8*k.hfov+.4)*R),a=!0),P[1]&&!0===e.keyboardZoom&&(zt(e.hfov+(.8*k.hfov-.2)*R),a=!0),(P[2]||P[6])&&(e.pitch+=(.8*k.pitch+.2)*R,a=!0),(P[3]||P[7])&&(e.pitch+=(.8*k.pitch-.2)*R,a=!0),(P[4]||P[8])&&(e.yaw+=(.8*k.yaw-.2)*R,a=!0),(P[5]||P[9])&&(e.yaw+=(.8*k.yaw+.2)*R,a=!0),a&&(Z=Date.now()),e.autoRotate){if(A-it>.001){var X=(A-it)/1e3,G=(k.yaw/X*R-.2*e.autoRotate)*X;G=(-e.autoRotate>0?1:-1)*Math.min(Math.abs(e.autoRotate*X),Math.abs(G)),e.yaw+=G}e.autoRotateStopDelay&&(e.autoRotateStopDelay-=A-it,e.autoRotateStopDelay<=0&&(e.autoRotateStopDelay=!1,F=e.autoRotate,e.autoRotate=0))}if($.pitch&&(Mt("pitch"),r=e.pitch),$.yaw&&(Mt("yaw"),c=e.yaw),$.hfov&&(Mt("hfov"),E=e.hfov),R>0&&!e.autoRotate){var J=1-e.friction;!P[4]&&!P[5]&&!P[8]&&!P[9]&&!$.yaw&&(e.yaw+=k.yaw*R*J),!P[2]&&!P[3]&&!P[6]&&!P[7]&&!$.pitch&&(e.pitch+=k.pitch*R*J),!P[0]&&!P[1]&&!$.hfov&&(e.hfov>90&&(J*=1-(e.hfov-90)/90),zt(e.hfov+k.hfov*R*J))}if(it=A,R>0){k.yaw=.8*k.yaw+(e.yaw-c)/R*.2,k.pitch=.8*k.pitch+(e.pitch-r)/R*.2,k.hfov=.8*k.hfov+(e.hfov-E)/R*.2;var K=e.autoRotate?Math.abs(e.autoRotate):5;k.yaw=Math.min(K,Math.max(k.yaw,-K)),k.pitch=Math.min(K,Math.max(k.pitch,-K)),k.hfov=Math.min(K,Math.max(k.hfov,-K))}P[0]&&P[1]&&(k.hfov=0),(P[2]||P[6])&&(P[3]||P[7])&&(k.pitch=0),(P[4]||P[8])&&(P[5]||P[9])&&(k.yaw=0)}})(),e.autoRotateInactivityDelay>=0&&F&&Date.now()-Z>e.autoRotateInactivityDelay&&!e.autoRotate&&(e.autoRotate=F,ot.lookAt(Lt,m,lt,3e3)),requestAnimationFrame(Et);else if(nt&&(nt.isLoading()||!0===e.dynamic&&Ft))requestAnimationFrame(Et);else{ot.getPitch&&ot.getYaw&&ot.getHfov&&Wt("animatefinished",{pitch:ot.getPitch(),yaw:ot.getYaw(),hfov:ot.getHfov()}),Ht=!1,it=m;var a=e.autoRotateInactivityDelay-(Date.now()-Z);a>0?M=setTimeout(function(){e.autoRotate=F,ot.lookAt(Lt,m,lt,3e3),v()},a):e.autoRotateInactivityDelay>=0&&F&&(e.autoRotate=F,ot.lookAt(Lt,m,lt,3e3),v())}}function Ct(a,r,c,E){this.w=a,this.x=r,this.y=c,this.z=E}function u(a){var r=function kt(a,r,c){var E=function Gt(a,r,c){var E=[r?r*Math.PI/180/2:0,c?c*Math.PI/180/2:0,a?a*Math.PI/180/2:0],A=[Math.cos(E[0]),Math.cos(E[1]),Math.cos(E[2])],R=[Math.sin(E[0]),Math.sin(E[1]),Math.sin(E[2])];return new Ct(A[0]*A[1]*A[2]-R[0]*R[1]*R[2],R[0]*A[1]*A[2]-A[0]*R[1]*R[2],A[0]*R[1]*A[2]+R[0]*A[1]*R[2],A[0]*A[1]*R[2]+R[0]*R[1]*A[2])}(a,r,c);E=E.multiply(new Ct(Math.sqrt(.5),-Math.sqrt(.5),0,0));var A=mt.orientation?-mt.orientation*Math.PI/180/2:0;return E.multiply(new Ct(Math.cos(A),0,-Math.sin(A),0))}(a.alpha,a.beta,a.gamma).toEulerAngles();"number"==typeof ut&&ut<10?ut+=1:10===ut?(Bt=r[2]/Math.PI*180+e.yaw,ut=!0,requestAnimationFrame(Et)):(e.pitch=r[0]/Math.PI*180,e.roll=-r[1]/Math.PI*180,e.yaw=-r[2]/Math.PI*180+Bt)}function l(){if(e.sceneFadeDuration&&nt.fadeImg!==m){nt.fadeImg.style.opacity=0;var a=nt.fadeImg;delete nt.fadeImg,setTimeout(function(){Yt.removeChild(a),Wt("scenechangefadedone")},e.sceneFadeDuration)}ie.style.display=e.compass?"inline":"none",function f(){_e||(e.hotSpots?(e.hotSpots=e.hotSpots.sort(function(a,r){return a.pitch<r.pitch}),e.hotSpots.forEach(h)):e.hotSpots=[],_e=!0,w())}(),D.load.box.style.display="none",z!==m&&(Yt.removeChild(z),z=m),ct=!0,!0!==e.dynamic&&(x=m),v(),Wt("load")}function h(a){a.pitch=Number(a.pitch)||0,a.yaw=Number(a.yaw)||0;var r=I.createElement("div");r.tabIndex=-1,r.className="pnlm-hotspot-base",r.className+=a.cssClass?" "+a.cssClass:" pnlm-hotspot pnlm-sprite pnlm-"+he(a.type);var E,c=I.createElement("span");if(a.text&&(c.innerHTML=he(a.text)),a.video){var A=I.createElement("video"),R=a.video;e.basePath&&!se(R)&&(R=e.basePath+R),A.src=ge(R),A.controls=!0,A.style.width=a.width+"px",et.appendChild(r),c.appendChild(A)}else if(a.image){var X=a.image;e.basePath&&!se(X)&&(X=e.basePath+X),(E=I.createElement("a")).href=ge(a.URL?a.URL:X,!0),e.targetBlank&&(E.target="_blank",E.rel="noopener"),c.appendChild(E);var G=I.createElement("img");G.src=ge(X),G.style.width=a.width+"px",G.style.paddingTop="5px",et.appendChild(r),E.appendChild(G),c.style.maxWidth="initial"}else if(a.URL){if((E=I.createElement("a")).href=ge(a.URL,!0),a.attributes)for(var J in a.attributes)E.setAttribute(J,a.attributes[J]);else e.targetBlank&&(E.target="_blank",E.rel="noopener");et.appendChild(E),r.className+=" pnlm-pointer",c.className+=" pnlm-pointer",E.appendChild(r)}else a.sceneId&&(r.onclick=r.ontouchend=function(){return r.clicked||(r.clicked=!0,xe(a.sceneId,a.targetPitch,a.targetYaw,a.targetHfov)),!1},r.className+=" pnlm-pointer",c.className+=" pnlm-pointer"),et.appendChild(r);a.createTooltipFunc?a.createTooltipFunc(r,a.createTooltipArgs):(a.text||a.video||a.image)&&(r.classList.add("pnlm-tooltip"),r.appendChild(c),c.style.width=c.scrollWidth-20+"px",c.style.marginLeft=-(c.scrollWidth-r.offsetWidth)/2+"px",c.style.marginTop=-c.scrollHeight-12+"px"),a.clickHandlerFunc&&(r.addEventListener("click",function(K){a.clickHandlerFunc(K,a.clickHandlerArgs)},"false"),r.addEventListener(""===I.documentElement.style.pointerAction&&""===I.documentElement.style.touchAction?"pointerup":"touchend",function(K){a.clickHandlerFunc(K,a.clickHandlerArgs)},!1),r.className+=" pnlm-pointer",c.className+=" pnlm-pointer"),a.draggable&&(r.addEventListener("mousedown",function(K){a.dragHandlerFunc&&a.dragHandlerFunc(K,a.dragHandlerArgs),j=a}),""===I.documentElement.style.pointerAction&&""===I.documentElement.style.touchAction&&r.addEventListener("pointerdown",function(K){a.dragHandlerFunc&&a.dragHandlerFunc(K,a.dragHandlerArgs),j=a}),r.addEventListener("touchmove",function(K){n(a,K.targetTouches[0])}),r.addEventListener("touchend",function(K){a.dragHandlerFunc&&a.dragHandlerFunc(K,a.dragHandlerArgs),j=null})),a.div=r}function n(a,r){var c=p(r);a.pitch=c[0],a.yaw=c[1],_(a)}function _(a){var r=Math.sin(a.pitch*Math.PI/180),c=Math.cos(a.pitch*Math.PI/180),E=Math.sin(e.pitch*Math.PI/180),A=Math.cos(e.pitch*Math.PI/180),R=Math.cos((-a.yaw+e.yaw)*Math.PI/180),X=r*E+c*R*A;if(a.yaw<=90&&a.yaw>-90&&X<=0||(a.yaw>90||a.yaw<=-90)&&X<=0)a.div.style.visibility="hidden";else{var G=Math.sin((-a.yaw+e.yaw)*Math.PI/180),J=Math.tan(e.hfov*Math.PI/360);a.div.style.visibility="visible";var K=nt.getCanvas(),st=K.clientWidth,Zt=K.clientHeight,Pt=[-st/J*G*c/X/2,-st/J*(r*A-c*R*E)/X/2],jt=Math.sin(e.roll*Math.PI/180),ye=Math.cos(e.roll*Math.PI/180);(Pt=[Pt[0]*ye-Pt[1]*jt,Pt[0]*jt+Pt[1]*ye])[0]+=(st-a.div.offsetWidth)/2,Pt[1]+=(Zt-a.div.offsetHeight)/2;var Me="translate("+Pt[0]+"px, "+Pt[1]+"px) translateZ(9999px) rotate("+e.roll+"deg)";a.scale&&(Me+=" scale("+lt/e.hfov/X+")"),a.div.style.webkitTransform=Me,a.div.style.MozTransform=Me,a.div.style.transform=Me}}function w(){e.hotSpots.forEach(_)}function y(a){e={};var r,c,E=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];for(r in vt=[],ne)ne.hasOwnProperty(r)&&(e[r]=ne[r]);for(r in V.default)if(V.default.hasOwnProperty(r))if("strings"==r)for(c in V.default.strings)V.default.strings.hasOwnProperty(c)&&(e.strings[c]=he(V.default.strings[c]));else e[r]=V.default[r],E.indexOf(r)>=0&&vt.push(r);if(null!==a&&""!==a&&V.scenes&&V.scenes[a]){var A=V.scenes[a];for(r in A)if(A.hasOwnProperty(r))if("strings"==r)for(c in A.strings)A.strings.hasOwnProperty(c)&&(e.strings[c]=he(A.strings[c]));else e[r]=A[r],E.indexOf(r)>=0&&vt.push(r);e.scene=a}for(r in V)if(V.hasOwnProperty(r))if("strings"==r)for(c in V.strings)V.strings.hasOwnProperty(c)&&(e.strings[c]=he(V.strings[c]));else e[r]=V[r],E.indexOf(r)>=0&&vt.push(r)}function B(a){if((a=a||!1)&&"preview"in e){var r=e.preview;e.basePath&&!se(r)&&(r=e.basePath+r),(z=I.createElement("div")).className="pnlm-preview-img",z.style.backgroundImage="url('"+function Ie(a){return ge(a).replace(/"/g,"%22").replace(/'/g,"%27")}(r)+"')",Yt.appendChild(z)}var c=e.title,E=e.author;for(var A in a&&("previewTitle"in e&&(e.title=e.previewTitle),"previewAuthor"in e&&(e.author=e.previewAuthor)),e.hasOwnProperty("title")||(D.title.innerHTML=""),e.hasOwnProperty("author")||(D.author.innerHTML=""),!e.hasOwnProperty("title")&&!e.hasOwnProperty("author")&&(D.container.style.display="none"),e.targetBlank&&(re.rel="noopener",re.target="_blank"),Q.load.innerHTML="<div><p>"+e.strings.loadButtonLabel+"</p></div>",D.load.boxp.innerHTML=e.strings.loadingLabel,e)if(e.hasOwnProperty(A))switch(A){case"title":D.title.innerHTML=he(e[A]),D.container.style.display="inline";break;case"author":var R=he(e[A]);if(e.authorURL){var X=I.createElement("a");X.href=ge(e.authorURL,!0),e.targetBlank&&(X.target="_blank",X.rel="noopener"),X.innerHTML=he(e[A]),R=X.outerHTML}D.author.innerHTML=e.strings.bylineLabel.replace("%s",R),D.container.style.display="inline";break;case"hfov":zt(Number(e[A]));break;case"autoLoad":!0===e[A]&&nt===m&&(D.load.box.style.display="inline",Q.load.style.display="none",pe());break;case"showZoomCtrl":Q.zoom.style.display=e[A]&&0!=e.showControls?"block":"none";break;case"showFullscreenCtrl":Q.fullscreen.style.display=e[A]&&0!=e.showControls&&("fullscreen"in I||"mozFullScreen"in I||"webkitIsFullScreen"in I||"msFullscreenElement"in I)?"block":"none";break;case"hotSpotDebug":le.style.display=e[A]?"block":"none";break;case"showControls":e[A]||(Q.orientation.style.display="none",Q.zoom.style.display="none",Q.fullscreen.style.display="none");break;case"orientationOnByDefault":e[A]&&we()}a&&(c?e.title=c:delete e.title,E?e.author=E:delete e.author)}function H(){if(ct&&!wt)if(ht)I.exitFullscreen?I.exitFullscreen():I.mozCancelFullScreen?I.mozCancelFullScreen():I.webkitCancelFullScreen?I.webkitCancelFullScreen():I.msExitFullscreen&&I.msExitFullscreen();else try{g.requestFullscreen?g.requestFullscreen():g.mozRequestFullScreen?g.mozRequestFullScreen():g.msRequestFullscreen?g.msRequestFullscreen():g.webkitRequestFullScreen()}catch{}}function yt(a){I.fullscreenElement||I.fullscreen||I.mozFullScreen||I.webkitIsFullScreen||I.msFullscreenElement?(Q.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),ht=!0):(Q.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),ht=!1),"resize"!==a&&Wt("fullscreenchange",ht),nt.resize(),zt(e.hfov),v()}function Te(a){var r=e.minHfov;if("multires"==e.type&&nt&&!e.multiResMinHfov&&(r=Math.min(r,nt.getCanvas().width/(e.multiRes.cubeResolution/90*.9))),r>e.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),e.hfov;var c=e.hfov;if(c=a<r?r:a>e.maxHfov?e.maxHfov:a,e.avoidShowingBackground&&nt&&!isNaN(e.maxPitch-e.minPitch)){var E=nt.getCanvas();c=Math.min(c,360*Math.atan(Math.tan((e.maxPitch-e.minPitch)/360*Math.PI)/E.height*E.width)/Math.PI)}return c}function zt(a){e.hfov=Te(a),Wt("zoomchange",e.hfov)}function ve(){$={},F=e.autoRotate?e.autoRotate:F,e.autoRotate=!1}function Ee(){(function ce(){wt&&(D.load.box.style.display="none",D.errorMsg.style.display="none",wt=!1,Yt.style.display="block",Wt("errorcleared"))})(),ct=!1,Qt(),Q.load.style.display="none",D.load.box.style.display="inline",pe()}function xe(a,r,c,E,A){var R,X,G,J;if(ct||(A=!0),ct=!1,$={},e.sceneFadeDuration&&!A){var K=nt.render(e.pitch*Math.PI/180,e.yaw*Math.PI/180,e.hfov*Math.PI/180,{returnImage:"ImageBitmap"});if(K!==m)return(R=K.then?I.createElement("canvas"):new Image).className="pnlm-fade-img",R.style.transition="opacity "+e.sceneFadeDuration/1e3+"s",R.style.width="100%",R.style.height="100%",K.then?K.then(function(st){R.width=st.width,R.height=st.height,R.getContext("2d").drawImage(st,0,0),xe(a,r,c,E,!0)}):(R.onload=function(){xe(a,r,c,E,!0)},R.src=K),Yt.appendChild(R),void(nt.fadeImg=R)}X="same"===r?e.pitch:r,G="same"===c?e.yaw:"sameAzimuth"===c?e.yaw+(e.northOffset||0)-(V.scenes[a].northOffset||0):c,J="same"===E?e.hfov:E,function o(){var a=e.hotSpots;if(_e=!1,delete e.hotSpots,a)for(var r=0;r<a.length;r++){var c=a[r].div;if(c){for(;c.parentNode&&c.parentNode!=et;)c=c.parentNode;et.removeChild(c)}delete a[r].div}}(),y(a),k.yaw=k.pitch=k.hfov=0,B(),X!==m&&(e.pitch=X),G!==m&&(e.yaw=G),J!==m&&(e.hfov=J),Wt("scenechange",a),Ee()}function Ce(){mt.removeEventListener("deviceorientation",u),Q.orientation.classList.remove("pnlm-orientation-button-active"),ut=!1}function we(){ee&&(typeof DeviceMotionEvent<"u"&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(function(a){"granted"==a&&(ut=1,mt.addEventListener("deviceorientation",u),Q.orientation.classList.add("pnlm-orientation-button-active"))}):(ut=1,mt.addEventListener("deviceorientation",u),Q.orientation.classList.add("pnlm-orientation-button-active")))}function he(a){return V.escapeHTML?String(a).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(a).split("\n").join("<br>")}function ge(a,r){try{var c=decodeURIComponent(function Le(a){return a.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(r,c){return"colon"===(c=c.toLowerCase())?":":"#"===c.charAt(0)?"x"===c.charAt(1)?String.fromCharCode(parseInt(c.substring(2),16)):String.fromCharCode(+c.substring(1)):""})}(a)).replace(/[^\w:]/g,"").toLowerCase()}catch{return"about:blank"}return 0===c.indexOf("javascript:")||0===c.indexOf("vbscript:")?(console.log("Script URL removed."),"about:blank"):r&&0===c.indexOf("data:")?(console.log("Data URI removed from link."),"about:blank"):a}function Wt(a){if(a in It)for(var r=It[a].length;r>0;r--)It[a][It[a].length-r].apply(null,[].slice.call(arguments,1))}Ct.prototype.multiply=function(a){return new Ct(this.w*a.w-this.x*a.x-this.y*a.y-this.z*a.z,this.x*a.w+this.w*a.x+this.y*a.z-this.z*a.y,this.y*a.w+this.w*a.y+this.z*a.x-this.x*a.z,this.z*a.w+this.w*a.z+this.x*a.y-this.y*a.x)},Ct.prototype.toEulerAngles=function(){return[Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Math.asin(2*(this.w*this.y-this.z*this.x)),Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z))]},this.isLoaded=function(){return Boolean(ct)},this.getPitch=function(){return e.pitch},this.setPitch=function(a,r,c,E){return Z=Date.now(),Math.abs(a-e.pitch)<=Xt?("function"==typeof c&&c(E),this):((r=r==m?1e3:Number(r))?($.pitch={startTime:Date.now(),startPosition:e.pitch,endPosition:a,duration:r},"function"==typeof c&&setTimeout(function(){c(E)},r)):e.pitch=a,v(),this)},this.getPitchBounds=function(){return[e.minPitch,e.maxPitch]},this.setPitchBounds=function(a){return e.minPitch=Math.max(-90,Math.min(a[0],90)),e.maxPitch=Math.max(-90,Math.min(a[1],90)),this},this.getYaw=function(){return(e.yaw+540)%360-180},this.setYaw=function(a,r,c,E){return Z=Date.now(),Math.abs(a-e.yaw)<=Xt?("function"==typeof c&&c(E),this):(a=(a+180)%360-180,(r=r==m?1e3:Number(r))?(e.yaw-a>180?a+=360:a-e.yaw>180&&(a-=360),$.yaw={startTime:Date.now(),startPosition:e.yaw,endPosition:a,duration:r},"function"==typeof c&&setTimeout(function(){c(E)},r)):e.yaw=a,v(),this)},this.getYawBounds=function(){return[e.minYaw,e.maxYaw]},this.setYawBounds=function(a){return e.minYaw=Math.max(-360,Math.min(a[0],360)),e.maxYaw=Math.max(-360,Math.min(a[1],360)),this},this.getHfov=function(){return e.hfov},this.setHfov=function(a,r,c,E){return Z=Date.now(),Math.abs(a-e.hfov)<=Xt?("function"==typeof c&&c(E),this):((r=r==m?1e3:Number(r))?($.hfov={startTime:Date.now(),startPosition:e.hfov,endPosition:Te(a),duration:r},"function"==typeof c&&setTimeout(function(){c(E)},r)):zt(a),v(),this)},this.getHfovBounds=function(){return[e.minHfov,e.maxHfov]},this.setHfovBounds=function(a){return e.minHfov=Math.max(0,a[0]),e.maxHfov=Math.max(0,a[1]),this},this.lookAt=function(a,r,c,E,A,R){return E=E==m?1e3:Number(E),a!==m&&Math.abs(a-e.pitch)>Xt&&(this.setPitch(a,E,A,R),A=m),r!==m&&Math.abs(r-e.yaw)>Xt&&(this.setYaw(r,E,A,R),A=m),c!==m&&Math.abs(c-e.hfov)>Xt&&(this.setHfov(c,E,A,R),A=m),"function"==typeof A&&A(R),this},this.getNorthOffset=function(){return e.northOffset},this.setNorthOffset=function(a){return e.northOffset=Math.min(360,Math.max(0,a)),v(),this},this.getHorizonRoll=function(){return e.horizonRoll},this.setHorizonRoll=function(a){return e.horizonRoll=Math.min(90,Math.max(-90,a)),nt.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),v(),this},this.getHorizonPitch=function(){return e.horizonPitch},this.setHorizonPitch=function(a){return e.horizonPitch=Math.min(90,Math.max(-90,a)),nt.setPose(e.horizonPitch*Math.PI/180,e.horizonRoll*Math.PI/180),v(),this},this.startAutoRotate=function(a,r,c,E){return r=r===m?Lt:r,c=c===m?lt:c,e.autoRotate=a=a||F||1,E!==m&&(e.autoRotateInactivityDelay=E),ot.lookAt(r,m,c,3e3),v(),this},this.stopAutoRotate=function(){return F=e.autoRotate?e.autoRotate:F,e.autoRotate=!1,e.autoRotateInactivityDelay=-1,this},this.stopMovement=function(){ve(),k={yaw:0,pitch:0,hfov:0}},this.getRenderer=function(){return nt},this.setUpdate=function(a){return(Ft=!0===a)&&(oe=!1,nt===m?Jt():v()),this},this.updateOnce=function(){return Ft=oe=!0,nt===m?Jt():v(),this},this.mouseEventToCoords=function(a){return p(a)},this.loadScene=function(a,r,c,E){return!1!==ct&&xe(a,r,c,E),this},this.getScene=function(){return e.scene},this.addScene=function(a,r){return V.scenes[a]=r,this},this.removeScene=function(a){return!(e.scene==a||!V.scenes.hasOwnProperty(a)||(delete V.scenes[a],0))},this.toggleFullscreen=function(){return H(),this},this.getConfig=function(){return e},this.getContainer=function(){return g},this.addHotSpot=function(a,r){if(r===m&&e.scene===m)e.hotSpots.push(a);else{var c=r!==m?r:e.scene;if(!V.scenes.hasOwnProperty(c))throw"Invalid scene ID!";V.scenes[c].hasOwnProperty("hotSpots")||(V.scenes[c].hotSpots=[],c==e.scene&&(e.hotSpots=V.scenes[c].hotSpots)),V.scenes[c].hotSpots.push(a)}return(r===m||e.scene==r)&&(h(a),ct&&_(a)),this},this.removeHotSpot=function(a,r){if(r===m||e.scene==r){if(!e.hotSpots)return!1;for(var c=0;c<e.hotSpots.length;c++)if(e.hotSpots[c].hasOwnProperty("id")&&e.hotSpots[c].id==a){for(var E=e.hotSpots[c].div;E.parentNode!=et;)E=E.parentNode;return et.removeChild(E),delete e.hotSpots[c].div,e.hotSpots.splice(c,1),!0}}else{if(!V.scenes.hasOwnProperty(r))return!1;if(!V.scenes[r].hasOwnProperty("hotSpots"))return!1;for(var A=0;A<V.scenes[r].hotSpots.length;A++)if(V.scenes[r].hotSpots[A].hasOwnProperty("id")&&V.scenes[r].hotSpots[A].id==a)return V.scenes[r].hotSpots.splice(A,1),!0}},this.resize=function(){nt&&at()},this.isOrientationSupported=function(){return ee||!1},this.stopOrientation=function(){Ce()},this.startOrientation=function(){we()},this.isOrientationActive=function(){return Boolean(ut)},this.on=function(a,r){return It[a]=It[a]||[],It[a].push(r),this},this.off=function(a,r){if(!a)return It={},this;if(r){var c=It[a].indexOf(r);c>=0&&It[a].splice(c,1),0==It[a].length&&delete It[a]}else delete It[a];return this},this.destroy=function(){if(de=!0,clearTimeout(M),bt&&bt.abort(),Array.isArray(x))for(var a=0;a<6;a++)x[a].src="";nt&&nt.destroy(),St&&(I.removeEventListener("mousemove",b,!1),I.removeEventListener("mouseup",O,!1),g.removeEventListener("mozfullscreenchange",yt,!1),g.removeEventListener("webkitfullscreenchange",yt,!1),g.removeEventListener("msfullscreenchange",yt,!1),g.removeEventListener("fullscreenchange",yt,!1),te?te.disconnect():(mt.removeEventListener("resize",at,!1),mt.removeEventListener("orientationchange",at,!1)),g.removeEventListener("keydown",Vt,!1),g.removeEventListener("keyup",_t,!1),g.removeEventListener("blur",pt,!1),I.removeEventListener("mouseleave",O,!1)),g.innerHTML="",g.classList.remove("pnlm-container")}}return{viewer:function(g,V){return new t(g,V)}}}(window,document)},81447:(mt,I,m)=>{"use strict";m.d(I,{t:()=>t});class t{lat;lon}},87753:(mt,I,m)=>{"use strict";m.d(I,{H:()=>kt});var t=m(64537),g=m(80418),z=(m(7226),m(32647),m(34511)),j=m(60656),At=m(32607),Z=m(94032),d=m(56707),i=m(88692),rt=m(20092),ft=m(1379),U=m(9638),P=m(88659),ht=m(83331),ct=m(39665),wt=m(18033),ae=m(56558),St=m(2940),x=m(99482),it=m(75738),k=m(81418);const Ht=["container"];function ut(u,T){if(1&u){const l=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function Bt(u,T){if(1&u){const l=t.EpF();t.TgZ(0,"mat-icon",48),t.NdJ("click",function(){t.CHM(l);const n=t.oxw(2);return t.KtG(n.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function M(u,T){if(1&u){const l=t.EpF();t.TgZ(0,"mat-icon",48),t.NdJ("click",function(){t.CHM(l);const n=t.oxw(2);return t.KtG(n.dataDetailModel.description="")}),t._uU(1,"close"),t.qZA()}}function F(u,T){if(1&u){const l=t.EpF();t.TgZ(0,"mat-icon",49),t.NdJ("click",function(){t.CHM(l);const n=t.oxw(2);return t.KtG(n.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function lt(u,T){if(1&u&&(t._UZ(0,"img",50),t.ALo(1,"cmsthumbnail")),2&u){const l=t.oxw(2);t.s9C("src",t.lcZ(1,1,l.dataDetailModel.panorama),t.LSH)}}function Lt(u,T){if(1&u&&(t.TgZ(0,"table",51)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&u){const l=t.oxw(2);t.xp6(12),t.Oqu(l.postionView.viewerGetYaw),t.xp6(2),t.Oqu(l.postionView.viewerGetPitch),t.xp6(2),t.Oqu(l.postionView.clickGetYaw),t.xp6(2),t.Oqu(l.postionView.clickGetPitch)}}function $(u,T){if(1&u){const l=t.EpF();t.TgZ(0,"button",44),t.NdJ("click",function(){t.CHM(l);const n=t.oxw(2);return t.KtG(n.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function It(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function vt(u,T){if(1&u&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&u){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.sceneId||"N/A"," ")}}function Ft(u,T){if(1&u){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",55),t.NdJ("ngModelChange",function(n){t.CHM(l);const f=t.oxw().$implicit;return t.KtG(f.sceneId=n)}),t.qZA()(),t.BQk()}if(2&u){const l=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",l.sceneId)}}function oe(u,T){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,vt,3,1,"ng-container",52),t.YNc(2,Ft,3,2,"ng-container",52),t.qZA()),2&u){const l=T.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!l.guid||l.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&l.guid&&l.guid===h.editHotspot.guid)}}function Xt(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function te(u,T){if(1&u&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&u){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.pitch||"N/A"," ")}}function _e(u,T){if(1&u){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",56),t.NdJ("ngModelChange",function(n){t.CHM(l);const f=t.oxw().$implicit;return t.KtG(f.pitch=n)}),t.qZA()(),t.BQk()}if(2&u){const l=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",l.pitch)}}function bt(u,T){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,te,3,1,"ng-container",52),t.YNc(2,_e,3,2,"ng-container",52),t.qZA()),2&u){const l=T.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!l.guid||l.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&l.guid&&l.guid===h.editHotspot.guid)}}function de(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function ne(u,T){if(1&u&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&u){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.yaw||"N/A"," ")}}function et(u,T){if(1&u){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",58),t.NdJ("ngModelChange",function(n){t.CHM(l);const f=t.oxw().$implicit;return t.KtG(f.yaw=n)}),t.qZA()(),t.BQk()}if(2&u){const l=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",l.yaw)}}function Yt(u,T){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,ne,3,1,"ng-container",52),t.YNc(2,et,3,2,"ng-container",52),t.qZA()),2&u){const l=T.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!l.guid||l.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&l.guid&&l.guid===h.editHotspot.guid)}}function Dt(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function Rt(u,T){if(1&u&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&u){const l=t.oxw().$implicit;t.xp6(2),t.Oqu(l.type)}}function re(u,T){if(1&u){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"mat-select",59),t.NdJ("ngModelChange",function(n){t.CHM(l);const f=t.oxw().$implicit;return t.KtG(f.type=n)}),t.TgZ(3,"mat-option",60),t._uU(4,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&u){const l=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",l.type),t.xp6(1),t.Q6J("value","info")}}function me(u,T){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,Rt,3,1,"ng-container",52),t.YNc(2,re,5,3,"ng-container",52),t.qZA()),2&u){const l=T.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!l.guid||l.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&l.guid&&l.guid===h.editHotspot.guid)}}function D(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function le(u,T){if(1&u&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&u){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.targetYaw||"N/A"," ")}}function Q(u,T){if(1&u){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",61),t.NdJ("ngModelChange",function(n){t.CHM(l);const f=t.oxw().$implicit;return t.KtG(f.targetYaw=n)}),t.qZA()(),t.BQk()}if(2&u){const l=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",l.targetYaw)}}function ee(u,T){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,le,3,1,"ng-container",52),t.YNc(2,Q,3,2,"ng-container",52),t.qZA()),2&u){const l=T.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!l.guid||l.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&l.guid&&l.guid===h.editHotspot.guid)}}function ie(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function pe(u,T){if(1&u&&(t.ynx(0),t.TgZ(1,"p",57),t._uU(2),t.qZA(),t.BQk()),2&u){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.targetPitch||"N/A"," ")}}function se(u,T){if(1&u){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",62),t.NdJ("ngModelChange",function(n){t.CHM(l);const f=t.oxw().$implicit;return t.KtG(f.targetPitch=n)}),t.qZA()(),t.BQk()}if(2&u){const l=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",l.targetPitch)}}function Jt(u,T){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,pe,3,1,"ng-container",52),t.YNc(2,se,3,2,"ng-container",52),t.qZA()),2&u){const l=T.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!l.guid||l.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&l.guid&&l.guid===h.editHotspot.guid)}}function fe(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function Tt(u,T){if(1&u&&(t.ynx(0),t.TgZ(1,"p",53),t._uU(2),t.qZA(),t.BQk()),2&u){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.text||"N/A"," ")}}function ce(u,T){if(1&u){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",63),t.NdJ("ngModelChange",function(n){t.CHM(l);const f=t.oxw().$implicit;return t.KtG(f.text=n)}),t.qZA()(),t.BQk()}if(2&u){const l=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",l.text)}}function ue(u,T){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,Tt,3,1,"ng-container",52),t.YNc(2,ce,3,2,"ng-container",52),t.qZA()),2&u){const l=T.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!l.guid||l.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&l.guid&&l.guid===h.editHotspot.guid)}}function Qt(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function $t(u,T){if(1&u&&(t.ynx(0),t.TgZ(1,"p",64),t._uU(2),t.qZA(),t.BQk()),2&u){const l=t.oxw().$implicit;t.xp6(2),t.hij("",l.url||"N/A"," ")}}function qt(u,T){if(1&u){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",54)(2,"input",65),t.NdJ("ngModelChange",function(n){t.CHM(l);const f=t.oxw().$implicit;return t.KtG(f.url=n)}),t.qZA()(),t.BQk()}if(2&u){const l=t.oxw().$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("disabled",h.editdisabled)("ngModel",l.url)}}function s(u,T){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,$t,3,1,"ng-container",52),t.YNc(2,qt,3,2,"ng-container",52),t.qZA()),2&u){const l=T.$implicit,h=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!h.editHotspot.guid||!l.guid||l.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&l.guid&&l.guid===h.editHotspot.guid)}}function C(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function p(u,T){if(1&u){const l=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",67),t.NdJ("click",function(){t.CHM(l);const n=t.oxw().$implicit,f=t.oxw(2);return t.KtG(f.editROw(n))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",67),t.NdJ("click",function(){t.CHM(l);const n=t.oxw().$implicit,f=t.oxw(2);return t.KtG(f.removeROw(n))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function b(u,T){if(1&u){const l=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(l);const n=t.oxw(4);return t.KtG(n.updateEdit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&u){const l=t.oxw(4);t.Q6J("disabled",l.editdisabled||!l.editHotspot.text||0==l.editHotspot.text.length),t.xp6(1),t.Oqu(t.lcZ(2,2,"ACTION.Update"))}}function O(u,T){if(1&u){const l=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(l);const n=t.oxw(4);return t.KtG(n.onActionPannellumClickLastPoint())}),t._uU(1,"\u0646\u0642\u0637\u0647"),t.qZA()}if(2&u){const l=t.oxw(4);t.Q6J("disabled",l.editdisabled)}}function N(u,T){if(1&u){const l=t.EpF();t.ynx(0),t.YNc(1,b,3,4,"button",68),t.TgZ(2,"button",69),t.NdJ("click",function(){t.CHM(l);const n=t.oxw(3);return t.KtG(n.cancelEdit())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,O,2,1,"button",70),t.BQk()}if(2&u){const l=t.oxw(3);t.xp6(1),t.Q6J("ngIf",l.postionView),t.xp6(1),t.Q6J("disabled",l.editdisabled),t.xp6(1),t.Oqu(t.lcZ(4,4,"ACTION.CANCEL")),t.xp6(2),t.Q6J("ngIf",l.editHotspot.pitch!==(null==l.postionView?null:l.postionView.clickGetPitch)&&l.editHotspot.yaw!==(null==l.postionView?null:l.postionView.clickGetYaw))}}function L(u,T){if(1&u&&(t.TgZ(0,"mat-cell")(1,"span",66),t.YNc(2,p,5,0,"ng-container",52),t.YNc(3,N,6,6,"ng-container",52),t.qZA()()),2&u){const l=T.$implicit,h=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!h.editHotspot.guid||!l.guid||l.guid!==h.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",h.editHotspot.guid&&l.guid&&l.guid===h.editHotspot.guid)}}function Y(u,T){1&u&&t._UZ(0,"mat-header-row")}function S(u,T){1&u&&t._UZ(0,"mat-row")}function W(u,T){if(1&u){const l=t.EpF();t.TgZ(0,"mat-icon",48),t.NdJ("click",function(){t.CHM(l);const n=t.oxw(2);return t.KtG(n.dataDetailModel.configDataJson="")}),t._uU(1,"close"),t.qZA()}}function tt(u,T){if(1&u){const l=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",9,10),t.NdJ("ngModelChange",function(n){t.CHM(l);const f=t.oxw();return t.KtG(f.dataDetailModel.title=n)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,Bt,2,0,"mat-icon",11),t.TgZ(10,"mat-icon",12),t._uU(11,"mode_edit"),t.qZA()(),t.TgZ(12,"mat-form-field",8)(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"input",13,14),t.NdJ("ngModelChange",function(n){t.CHM(l);const f=t.oxw();return t.KtG(f.dataDetailModel.description=n)}),t.ALo(18,"translate"),t.qZA(),t.YNc(19,M,2,0,"mat-icon",11),t.TgZ(20,"mat-icon",12),t._uU(21,"mode_edit"),t.qZA()(),t.TgZ(22,"mat-form-field",15)(23,"input",16,17),t.NdJ("ngModelChange",function(n){t.CHM(l);const f=t.oxw();return t.KtG(f.dataDetailModel.linkFileId=n)})("click",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.fileManagerOpenFormReport=!0)}),t.ALo(25,"translate"),t.qZA(),t.YNc(26,F,2,0,"mat-icon",18),t.TgZ(27,"mat-icon",19),t.NdJ("click",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.fileManagerOpenFormReport=!0)}),t._uU(28,"mode_edit"),t.qZA()(),t.TgZ(29,"cms-file-manager",20),t.NdJ("itemSelected",function(n){t.CHM(l);const f=t.oxw();return t.KtG(f.onActionFileSelect(n))})("openFormChange",function(n){t.CHM(l);const f=t.oxw();return t.KtG(f.fileManagerOpenFormReport=n)}),t.qZA(),t.TgZ(30,"a",21),t.ALo(31,"cmsthumbnail"),t.YNc(32,lt,2,3,"img",22),t.qZA(),t._UZ(33,"hr"),t.YNc(34,Lt,19,4,"table",23),t._UZ(35,"hr"),t.TgZ(36,"h5"),t._uU(37,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a "),t.qZA(),t.TgZ(38,"p"),t._uU(39,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(40,"div",24)(41,"div",25),t.YNc(42,$,3,3,"button",26),t.qZA(),t.TgZ(43,"mat-table",27,28),t.ynx(45,29),t.YNc(46,It,2,0,"mat-header-cell",30),t.YNc(47,oe,3,2,"mat-cell",31),t.BQk(),t.ynx(48,32),t.YNc(49,Xt,2,0,"mat-header-cell",30),t.YNc(50,bt,3,2,"mat-cell",31),t.BQk(),t.ynx(51,33),t.YNc(52,de,2,0,"mat-header-cell",30),t.YNc(53,Yt,3,2,"mat-cell",31),t.BQk(),t.ynx(54,34),t.YNc(55,Dt,2,0,"mat-header-cell",30),t.YNc(56,me,3,2,"mat-cell",31),t.BQk(),t.ynx(57,35),t.YNc(58,D,2,0,"mat-header-cell",30),t.YNc(59,ee,3,2,"mat-cell",31),t.BQk(),t.ynx(60,36),t.YNc(61,ie,2,0,"mat-header-cell",30),t.YNc(62,Jt,3,2,"mat-cell",31),t.BQk(),t.ynx(63,37),t.YNc(64,fe,2,0,"mat-header-cell",30),t.YNc(65,ue,3,2,"mat-cell",31),t.BQk(),t.ynx(66,38),t.YNc(67,Qt,2,0,"mat-header-cell",30),t.YNc(68,s,3,2,"mat-cell",31),t.BQk(),t.ynx(69,39),t.YNc(70,C,2,0,"mat-header-cell",30),t.YNc(71,L,4,2,"mat-cell",31),t.BQk(),t.YNc(72,Y,1,0,"mat-header-row",40),t.YNc(73,S,1,0,"mat-row",41),t.qZA()(),t.TgZ(74,"mat-form-field",42)(75,"mat-label"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"input",43,14),t.NdJ("ngModelChange",function(n){t.CHM(l);const f=t.oxw();return t.KtG(f.dataDetailModel.configDataJson=n)}),t.ALo(80,"translate"),t.qZA(),t.YNc(81,W,2,0,"mat-icon",11),t.TgZ(82,"mat-icon",12),t._uU(83,"mode_edit"),t.qZA()(),t.TgZ(84,"div",25)(85,"button",44),t.NdJ("click",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.onActionSubmitView360())}),t._UZ(86,"i",45),t._uU(87),t.ALo(88,"translate"),t.qZA(),t.TgZ(89,"button",46),t.NdJ("click",function(){t.CHM(l);const n=t.oxw();return t.KtG(n.onActionCancellView360())}),t._UZ(90,"i",47),t._uU(91),t.ALo(92,"translate"),t.qZA()(),t._UZ(93,"br"),t.qZA()()}if(2&u){const l=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,33,"TITLE.Photography_Place")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,35,"TITLE.Photography_Place")),t.Q6J("ngModel",l.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.title),t.xp6(5),t.Oqu(t.lcZ(15,37,"TITLE.DESCRIPTION")),t.xp6(2),t.s9C("placeholder",t.lcZ(18,39,"TITLE.DESCRIPTION")),t.Q6J("ngModel",l.dataDetailModel.description),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.description),t.xp6(4),t.s9C("placeholder",t.lcZ(25,41,"TITLE.View_360_File_ID")),t.Q6J("ngModel",l.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",l.appLanguage)("isPopup",!0)("openForm",l.fileManagerOpenFormReport)("tree",l.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",l.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(31,43,l.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==l.dataDetailModel||null==l.dataDetailModel.panorama?null:l.dataDetailModel.panorama.length)>0),t.xp6(2),t.Q6J("ngIf",l.postionView),t.xp6(8),t.Q6J("ngIf",l.postionView),t.xp6(1),t.Q6J("dataSource",l.tableHotSpotdataSource),t.xp6(29),t.Q6J("matHeaderRowDef",l.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",l.tableHotspotDisplayedColumns),t.xp6(3),t.Oqu(t.lcZ(77,45,"TITLE.configDataJson")),t.xp6(2),t.s9C("placeholder",t.lcZ(80,47,"TITLE.configDataJson")),t.Q6J("ngModel",l.dataDetailModel.configDataJson),t.xp6(3),t.Q6J("ngIf",l.dataDetailModel.configDataJson),t.xp6(6),t.hij(" ",t.lcZ(88,49,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(92,51,"ACTION.CANCEL")," ")}}function q(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function dt(u,T){if(1&u&&t._UZ(0,"img",50),2&u){const l=t.oxw(2).$implicit;t.s9C("src",l.panorama,t.LSH)}}function Kt(u,T){if(1&u&&(t.ynx(0),t.TgZ(1,"a",21),t.YNc(2,dt,1,1,"img",22),t.qZA(),t.BQk()),2&u){const l=t.oxw().$implicit;t.xp6(1),t.s9C("href",l.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==l||null==l.panorama?null:l.panorama.length)>0)}}function Vt(u,T){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,Kt,3,2,"ng-container",52),t.qZA()),2&u){const l=T.$implicit;t.xp6(1),t.Q6J("ngIf",l.panorama)}}function pt(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function _t(u,T){if(1&u&&(t.ynx(0),t._uU(1),t.BQk()),2&u){const l=t.oxw().$implicit;t.xp6(1),t.hij(" ",l.title," ")}}function gt(u,T){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,_t,2,1,"ng-container",52),t.qZA()),2&u){const l=T.$implicit;t.xp6(1),t.Q6J("ngIf",l.title)}}function xt(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&u&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.DESCRIPTION")," "))}function Mt(u,T){if(1&u&&(t.ynx(0),t._uU(1),t.BQk()),2&u){const l=t.oxw().$implicit;t.xp6(1),t.hij(" ",l.description," ")}}function Ut(u,T){if(1&u&&(t.TgZ(0,"mat-cell"),t.YNc(1,Mt,2,1,"ng-container",52),t.qZA()),2&u){const l=T.$implicit;t.xp6(1),t.Q6J("ngIf",l.description)}}function at(u,T){1&u&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&u&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function v(u,T){if(1&u){const l=t.EpF();t.TgZ(0,"mat-cell",79)(1,"small")(2,"mat-icon",80),t.NdJ("click",function(){const f=t.CHM(l).renderIndex,o=t.oxw(2);return t.KtG(o.onActionOptionEditView360(f))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",81),t.NdJ("click",function(){const f=t.CHM(l).renderIndex,o=t.oxw(2);return t.KtG(o.onActionOptionRemoveView360(f))}),t._uU(7,"delete"),t.qZA()()()}}function Et(u,T){1&u&&t._UZ(0,"mat-header-row")}function Nt(u,T){1&u&&t._UZ(0,"mat-row")}function Ct(u,T){if(1&u&&(t.TgZ(0,"div",6)(1,"mat-table",73),t.ynx(2,74),t.YNc(3,q,3,3,"mat-header-cell",30),t.YNc(4,Vt,2,1,"mat-cell",31),t.BQk(),t.ynx(5,75),t.YNc(6,pt,3,3,"mat-header-cell",30),t.YNc(7,gt,2,1,"mat-cell",31),t.BQk(),t.ynx(8,76),t.YNc(9,xt,3,3,"mat-header-cell",30),t.YNc(10,Ut,2,1,"mat-cell",31),t.BQk(),t.ynx(11,39),t.YNc(12,at,4,6,"mat-header-cell",30),t.YNc(13,v,8,0,"mat-cell",77),t.BQk(),t.YNc(14,Et,1,0,"mat-header-row",78),t.YNc(15,Nt,1,0,"mat-row",41),t.qZA()()),2&u){const l=t.oxw();t.xp6(1),t.Q6J("dataSource",l.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",l.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",l.tabledisplayedColumns)}}class Gt{viewerGetYaw;viewerGetPitch;clickGetYaw;clickGetPitch}let kt=(()=>{class u{cmsToastrService;publicHelper;translate;static nextId=0;id=++u.nextId;constructor(l,h,n){this.cmsToastrService=l,this.publicHelper=h,this.translate=n,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}privateDataModel=[];dataDetailModel=new z.zK_;dataModelChange=new t.vpe;set dataModel(l){l||(l=[]),this.privateDataModel=l,this.privateDataModel.forEach(h=>{h.hotSpots||(h.hotSpots=[]),h.hotSpots=this.uniqByReduce(h.hotSpots),h.hotSpots.forEach(n=>{n.guid=this.getGuid()})}),this.tabledataSource.data=this.privateDataModel,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}uniqByReduce(l){const h=[];return l.forEach(n=>{!h.includes(n)&&0==h.filter(f=>f.pitch==n.pitch&&f.yaw==n.yaw).length&&h.push(n)}),h}formInfo=new z.LEF;loading=new j.O;loadingOption=new j.O;tabledataSource=new g.by;tableHotSpotdataSource=new g.by;tabledisplayedColumns=["panorama","Title","Description","Action"];tableHotspotDisplayedColumns=["type","text","url","pitch","yaw","Action"];selectFileTypeReport=["jpeg","jpg"];fileManagerTree;appLanguage="fa";showAddView360=!1;fileManagerOpenFormReport=!1;ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Edit")}container;viewer;options;postionView;ngAfterViewInit(){this.container.nativeElement.style.display="none"}getGuid(){return Math.floor(Math.random()*(new Date).getTime()).toString()}actionPannellumImageLoad(l,h){const n={type:"equirectangular",panorama:l,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};h&&h.length>0&&(n.hotSpots=h);const f=Object.assign({},n,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,f),this.container.nativeElement.style.display="block"}actionPrivateDataModelOptimaze(){const l=[];this.privateDataModel||(this.privateDataModel=[]),this.privateDataModel.forEach(h=>{h.hotSpots||(h.hotSpots=[]),h.hotSpots.forEach(n=>{n.type&&n.type.length>0&&l.push(n)}),h.hotSpots=this.uniqByReduce(l)})}onActionPannellumClick(l){if(!this.viewer)return;this.postionView=new Gt,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const h=this.viewer.mouseEventToCoords(l);!h||0==h.length||(this.postionView.clickGetYaw=h[1],this.postionView.clickGetPitch=h[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(l){l&&l.id&&0!==l.id?(this.dataDetailModel.linkFileId=l.id,this.dataDetailModel.panorama=l.downloadLinksrc,this.dataDetailModel.preview=l.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.privateDataModel||(this.privateDataModel=[]),this.selectIndex>=0?this.privateDataModel[this.selectIndex]=this.dataDetailModel:this.privateDataModel.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new z.zK_,this.showAddView360=!this.showAddView360}inAddhotspotGuid="";onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new z.zK_),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new z.aCC;const l=new z.aCC;l.type="info",l.guid=this.getGuid(),this.inAddhotspotGuid=l.guid,this.dataDetailModel.hotSpots.push(l),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(l),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(l){l<0||!this.privateDataModel||0===this.privateDataModel.length||(this.privateDataModel.splice(l,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}selectIndex=-1;onActionOptionEditView360(l){l<0||!this.privateDataModel||0===this.privateDataModel.length||(this.dataDetailModel=this.privateDataModel[l],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new z.aCC,this.editHotspot=new z.aCC,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=l,this.showAddView360=!this.showAddView360)}editHotspot;oldHotspot;editdisabled;newROw(l){this.editHotspot=l&&l.guid?l:new z.aCC,this.oldHotspot={...this.editHotspot}}editROw(l){this.editHotspot=l&&l.guid?l:new z.aCC,this.oldHotspot={...this.editHotspot},this.inAddhotspotGuid=""}removeROw(l){const h=this.dataDetailModel.hotSpots.findIndex(n=>n.guid==l.guid);h>=0&&(this.dataDetailModel.hotSpots.splice(h,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;const l=this.dataDetailModel.hotSpots.findIndex(h=>h.guid==this.oldHotspot.guid);l>=0&&(this.dataDetailModel.hotSpots[l]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new z.aCC,this.editHotspot=new z.aCC}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(l=>l.guid!=this.inAddhotspotGuid)),this.editHotspot=new z.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}static \u0275fac=function(h){return new(h||u)(t.Y36(At.e),t.Y36(Z.i),t.Y36(d.sK))};static \u0275cmp=t.Xpm({type:u,selectors:[["app-cms-360-image-list"]],viewQuery:function(h,n){if(1&h&&t.Gf(Ht,5),2&h){let f;t.iGM(f=t.CRH())&&(n.container=f.first)}},inputs:{dataModel:"dataModel"},outputs:{dataModelChange:"dataModelChange"},decls:6,vars:5,consts:[["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px 0px;",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],["type","button","mat-button","",1,"btn","btn-primary","font-size-h6","px-3","py-2",2,"margin","10px 0px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"ntk-full-width","mb-1"],["matInput","","name","dataDetailModel.title","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],["matInput","","name","dataDetailModel.description","type","text","minlength","3","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Description",""],[1,"ntk-full-width"],["matInput","","name","dataDetailModel.linkFileId","type","text",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","sceneId"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","type"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"ntk-full-width","mb-1",2,"visibility","hidden"],["matInput","","name","dataDetailModel.configDataJson","type","text","minlength","0","maxlength","10000","required","",3,"ngModel","placeholder","ngModelChange"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],[4,"ngIf"],[1,"text-truncate"],["appearance","outline",2,"width","100%"],["matInput","","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647","name","sceneId",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","placeholder","pitch","name","pitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr-center"],["matInput","","type","number","placeholder","yaw","name","yaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","type",3,"disabled","ngModel","ngModelChange"],[3,"value"],["matInput","","placeholder","targetYaw","name","targetYaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetPitch","name","targetPitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","text","name","text",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","mat-raised-button","","color","accent","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","accent",1,"mb-2",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","Description"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(h,n){1&h&&(t.YNc(0,ut,3,3,"button",0),t.TgZ(1,"div",1,2),t.NdJ("click",function(o){return n.onActionPannellumClick(o)}),t.qZA(),t.YNc(3,tt,94,53,"div",3),t._UZ(4,"app-progress-spinner",4),t.YNc(5,Ct,16,3,"div",3)),2&h&&(t.Q6J("ngIf",!n.showAddView360),t.xp6(1),t.Q6J("id",n.id),t.xp6(2),t.Q6J("ngIf",n.showAddView360),t.xp6(1),t.Q6J("options",n.loadingOption),t.xp6(1),t.Q6J("ngIf",!n.showAddView360))},dependencies:[i.O5,rt.Fj,rt.wV,rt.JJ,rt.Q7,rt.wO,rt.nD,rt.On,ft.ey,U.lW,P.KE,P.hX,P.R9,ht.Hw,ct.Nt,wt.gD,ae.YE,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,St.gM,x.HG,it.O,d.X$,k.v],encapsulation:2})}return u})()},24014:(mt,I,m)=>{"use strict";m.d(I,{g:()=>h});var t=m(64537),g=m(80418),z=(m(7226),m(32647),m(34511)),j=m(60656),At=m(32607),Z=m(94032),d=m(56707),i=m(88692),rt=m(20092),ft=m(1379),U=m(9638),P=m(88659),ht=m(83331),ct=m(39665),wt=m(18033),ae=m(56558),St=m(2940),x=m(99482),it=m(75738),k=m(81418);const Ht=["container"];function ut(n,f){if(1&n){const o=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(o);const w=t.oxw();return t.KtG(w.onActionShowView360Add())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.Add_To_List"),"\n"))}function Bt(n,f){if(1&n){const o=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(o);const w=t.oxw();return t.KtG(w.onActionImportFile360View())}),t._uU(1," \u0648\u0631\u0648\u062f \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u06a9\u0633 \u0647\u0627\u06cc 360\n"),t.qZA()}}function M(n,f){if(1&n){const o=t.EpF();t.TgZ(0,"button",6),t.NdJ("click",function(){t.CHM(o);const w=t.oxw();return t.KtG(w.actionPannellumTourLoad())}),t._uU(1," \u0646\u0645\u0627\u06cc\u0634 \u062a\u0648\u0631\n"),t.qZA()}}function F(n,f){if(1&n){const o=t.EpF();t.TgZ(0,"mat-icon",46),t.NdJ("click",function(){t.CHM(o);const w=t.oxw(2);return t.KtG(w.dataDetailModel.title="")}),t._uU(1,"close"),t.qZA()}}function lt(n,f){if(1&n){const o=t.EpF();t.TgZ(0,"mat-icon",47),t.NdJ("click",function(){t.CHM(o);const w=t.oxw(2);return t.KtG(w.dataDetailModel.linkFileId=null)}),t._uU(1,"close"),t.qZA()}}function Lt(n,f){if(1&n&&(t._UZ(0,"img",48),t.ALo(1,"cmsthumbnail")),2&n){const o=t.oxw(2);t.s9C("src",t.lcZ(1,1,o.dataDetailModel.panorama),t.LSH)}}function $(n,f){if(1&n&&(t.TgZ(0,"table",49)(1,"tr")(2,"td"),t._uU(3,"viewer Yaw"),t.qZA(),t.TgZ(4,"td"),t._uU(5,"viewer Pitch"),t.qZA(),t.TgZ(6,"td"),t._uU(7,"click Yaw"),t.qZA(),t.TgZ(8,"td"),t._uU(9,"click Pitch"),t.qZA()(),t.TgZ(10,"tr")(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()()),2&n){const o=t.oxw(2);t.xp6(12),t.Oqu(o.postionView.viewerGetYaw),t.xp6(2),t.Oqu(o.postionView.viewerGetPitch),t.xp6(2),t.Oqu(o.postionView.clickGetYaw),t.xp6(2),t.Oqu(o.postionView.clickGetPitch)}}function It(n,f){if(1&n){const o=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(o);const w=t.oxw(2);return t.KtG(w.onActionShowHotspotAdd())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION.ADD")," "))}function vt(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0646\u0648\u0639"),t.qZA())}function Ft(n,f){if(1&n&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&n){const o=t.oxw().$implicit;t.xp6(2),t.Oqu(o.type)}}function oe(n,f){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"mat-select",53),t.NdJ("ngModelChange",function(w){t.CHM(o);const y=t.oxw().$implicit;return t.KtG(y.type=w)}),t.TgZ(3,"mat-option",54),t._uU(4,"\u0635\u062d\u0646\u0647"),t.qZA(),t.TgZ(5,"mat-option",54),t._uU(6,"\u0627\u0637\u0644\u0627\u0639\u0627\u062a"),t.qZA()()(),t.BQk()}if(2&n){const o=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",o.type),t.xp6(1),t.Q6J("value","scene"),t.xp6(2),t.Q6J("value","info")}}function Xt(n,f){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,Ft,3,1,"ng-container",50),t.YNc(2,oe,7,4,"ng-container",50),t.qZA()),2&n){const o=f.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!o.guid||o.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&o.guid&&o.guid===_.editHotspot.guid)}}function te(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function _e(n,f){if(1&n&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&n){const o=t.oxw().$implicit;t.xp6(2),t.hij("",o.sceneId||"N/A"," ")}}function bt(n,f){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",56),t.NdJ("ngModelChange",function(w){t.CHM(o);const y=t.oxw().$implicit;return t.KtG(y.sceneId=w)}),t.qZA()(),t.BQk()}if(2&n){const o=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",o.sceneId)}}function de(n,f){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,_e,3,1,"ng-container",50),t.YNc(2,bt,3,2,"ng-container",50),t.qZA()),2&n){const o=f.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!o.guid||o.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&o.guid&&o.guid===_.editHotspot.guid&&"scene"===o.type)}}function ne(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647"),t.qZA())}function et(n,f){if(1&n&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&n){const o=t.oxw().$implicit;t.xp6(2),t.Oqu(o.sceneId)}}function Yt(n,f){if(1&n&&(t.TgZ(0,"mat-option",54),t._uU(1),t.qZA()),2&n){const o=f.$implicit;t.Q6J("value",o.linkFileId),t.xp6(1),t.Oqu(o.title)}}function Dt(n,f){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"mat-select",57),t.NdJ("ngModelChange",function(w){t.CHM(o);const y=t.oxw().$implicit;return t.KtG(y.sceneId=w)}),t.YNc(3,Yt,2,2,"mat-option",58),t.qZA()(),t.BQk()}if(2&n){const o=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",o.sceneId),t.xp6(1),t.Q6J("ngForOf",_.scenesList)}}function Rt(n,f){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,et,3,1,"ng-container",50),t.YNc(2,Dt,4,3,"ng-container",50),t.qZA()),2&n){const o=f.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!o.guid||o.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&o.guid&&o.guid===_.editHotspot.guid&&"scene"===o.type)}}function re(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"pitch"),t.qZA())}function me(n,f){if(1&n&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&n){const o=t.oxw().$implicit;t.xp6(2),t.hij("",o.pitch||"N/A"," ")}}function D(n,f){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",59),t.NdJ("ngModelChange",function(w){t.CHM(o);const y=t.oxw().$implicit;return t.KtG(y.pitch=w)}),t.qZA()(),t.BQk()}if(2&n){const o=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",o.pitch)}}function le(n,f){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,me,3,1,"ng-container",50),t.YNc(2,D,3,2,"ng-container",50),t.qZA()),2&n){const o=f.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!o.guid||o.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&o.guid&&o.guid===_.editHotspot.guid)}}function Q(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"yaw"),t.qZA())}function ee(n,f){if(1&n&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&n){const o=t.oxw().$implicit;t.xp6(2),t.hij("",o.yaw||"N/A"," ")}}function ie(n,f){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",60),t.NdJ("ngModelChange",function(w){t.CHM(o);const y=t.oxw().$implicit;return t.KtG(y.yaw=w)}),t.qZA()(),t.BQk()}if(2&n){const o=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",o.yaw)}}function pe(n,f){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,ee,3,1,"ng-container",50),t.YNc(2,ie,3,2,"ng-container",50),t.qZA()),2&n){const o=f.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!o.guid||o.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&o.guid&&o.guid===_.editHotspot.guid)}}function se(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetYaw"),t.qZA())}function Jt(n,f){if(1&n&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&n){const o=t.oxw().$implicit;t.xp6(2),t.hij("",o.targetYaw||"N/A"," ")}}function fe(n,f){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",61),t.NdJ("ngModelChange",function(w){t.CHM(o);const y=t.oxw().$implicit;return t.KtG(y.targetYaw=w)}),t.qZA()(),t.BQk()}if(2&n){const o=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",o.targetYaw)}}function Tt(n,f){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,Jt,3,1,"ng-container",50),t.YNc(2,fe,3,2,"ng-container",50),t.qZA()),2&n){const o=f.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!o.guid||o.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&o.guid&&o.guid===_.editHotspot.guid)}}function ce(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"targetPitch"),t.qZA())}function ue(n,f){if(1&n&&(t.ynx(0),t.TgZ(1,"p",51),t._uU(2),t.qZA(),t.BQk()),2&n){const o=t.oxw().$implicit;t.xp6(2),t.hij("",o.targetPitch||"N/A"," ")}}function Qt(n,f){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",62),t.NdJ("ngModelChange",function(w){t.CHM(o);const y=t.oxw().$implicit;return t.KtG(y.targetPitch=w)}),t.qZA()(),t.BQk()}if(2&n){const o=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",o.targetPitch)}}function $t(n,f){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,ue,3,1,"ng-container",50),t.YNc(2,Qt,3,2,"ng-container",50),t.qZA()),2&n){const o=f.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!o.guid||o.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&o.guid&&o.guid===_.editHotspot.guid)}}function qt(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),t.qZA())}function s(n,f){if(1&n&&(t.ynx(0),t.TgZ(1,"p",55),t._uU(2),t.qZA(),t.BQk()),2&n){const o=t.oxw().$implicit;t.xp6(2),t.hij("",o.text||"N/A"," ")}}function C(n,f){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",63),t.NdJ("ngModelChange",function(w){t.CHM(o);const y=t.oxw().$implicit;return t.KtG(y.text=w)}),t.qZA()(),t.BQk()}if(2&n){const o=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",o.text)}}function p(n,f){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,s,3,1,"ng-container",50),t.YNc(2,C,3,2,"ng-container",50),t.qZA()),2&n){const o=f.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!o.guid||o.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&o.guid&&o.guid===_.editHotspot.guid)}}function b(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"\u0622\u062f\u0631\u0633 \u0648\u0628 \u0633\u0627\u06cc\u062a"),t.qZA())}function O(n,f){if(1&n&&(t.ynx(0),t.TgZ(1,"p",64),t._uU(2),t.qZA(),t.BQk()),2&n){const o=t.oxw().$implicit;t.xp6(2),t.hij("",o.url||"N/A"," ")}}function N(n,f){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",52)(2,"input",65),t.NdJ("ngModelChange",function(w){t.CHM(o);const y=t.oxw().$implicit;return t.KtG(y.url=w)}),t.qZA()(),t.BQk()}if(2&n){const o=t.oxw().$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("disabled",_.editdisabled)("ngModel",o.url)}}function L(n,f){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,O,3,1,"ng-container",50),t.YNc(2,N,3,2,"ng-container",50),t.qZA()),2&n){const o=f.$implicit,_=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!_.editHotspot.guid||!o.guid||o.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&o.guid&&o.guid===_.editHotspot.guid)}}function Y(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1,"Action"),t.qZA())}function S(n,f){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"mat-icon",67),t.NdJ("click",function(){t.CHM(o);const w=t.oxw().$implicit,y=t.oxw(2);return t.KtG(y.editROw(w))}),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"mat-icon",67),t.NdJ("click",function(){t.CHM(o);const w=t.oxw().$implicit,y=t.oxw(2);return t.KtG(y.removeROw(w))}),t._uU(4,"delete"),t.qZA(),t.BQk()}}function W(n,f){if(1&n){const o=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(o);const w=t.oxw(4);return t.KtG(w.updateEdit())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const o=t.oxw(4);t.Q6J("disabled",o.editdisabled||!o.editHotspot.text||0==o.editHotspot.text.length),t.xp6(1),t.Oqu(t.lcZ(2,2,"ACTION.Update"))}}function tt(n,f){if(1&n){const o=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(o);const w=t.oxw(4);return t.KtG(w.onActionPannellumClickLastPoint())}),t._uU(1,"\u0646\u0642\u0637\u0647"),t.qZA()}if(2&n){const o=t.oxw(4);t.Q6J("disabled",o.editdisabled)}}function q(n,f){if(1&n){const o=t.EpF();t.ynx(0),t.YNc(1,W,3,4,"button",68),t.TgZ(2,"button",69),t.NdJ("click",function(){t.CHM(o);const w=t.oxw(3);return t.KtG(w.cancelEdit())}),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,tt,2,1,"button",70),t.BQk()}if(2&n){const o=t.oxw(3);t.xp6(1),t.Q6J("ngIf",o.postionView),t.xp6(1),t.Q6J("disabled",o.editdisabled),t.xp6(1),t.Oqu(t.lcZ(4,4,"ACTION.CANCEL")),t.xp6(2),t.Q6J("ngIf",o.editHotspot.pitch!==(null==o.postionView?null:o.postionView.clickGetPitch)&&o.editHotspot.yaw!==(null==o.postionView?null:o.postionView.clickGetYaw))}}function dt(n,f){if(1&n&&(t.TgZ(0,"mat-cell")(1,"span",66),t.YNc(2,S,5,0,"ng-container",50),t.YNc(3,q,6,6,"ng-container",50),t.qZA()()),2&n){const o=f.$implicit,_=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!_.editHotspot.guid||!o.guid||o.guid!==_.editHotspot.guid),t.xp6(1),t.Q6J("ngIf",_.editHotspot.guid&&o.guid&&o.guid===_.editHotspot.guid)}}function Kt(n,f){1&n&&t._UZ(0,"mat-header-row")}function Vt(n,f){1&n&&t._UZ(0,"mat-row")}function pt(n,f){if(1&n){const o=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"mat-form-field",9)(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"input",10,11),t.NdJ("ngModelChange",function(w){t.CHM(o);const y=t.oxw();return t.KtG(y.dataDetailModel.title=w)}),t.ALo(8,"translate"),t.qZA(),t.YNc(9,F,2,0,"mat-icon",12),t.TgZ(10,"mat-icon",13),t._uU(11,"mode_edit"),t.qZA()(),t.TgZ(12,"mat-form-field",14)(13,"input",15,16),t.NdJ("ngModelChange",function(w){t.CHM(o);const y=t.oxw();return t.KtG(y.dataDetailModel.linkFileId=w)})("click",function(){t.CHM(o);const w=t.oxw();return t.KtG(w.fileManagerOpenFormReport=!0)}),t.ALo(15,"translate"),t.qZA(),t.YNc(16,lt,2,0,"mat-icon",17),t.TgZ(17,"mat-icon",18),t.NdJ("click",function(){t.CHM(o);const w=t.oxw();return t.KtG(w.fileManagerOpenFormReport=!0)}),t._uU(18,"mode_edit"),t.qZA()(),t.TgZ(19,"cms-file-manager",19),t.NdJ("itemSelected",function(w){t.CHM(o);const y=t.oxw();return t.KtG(y.onActionFileSelect(w))})("openFormChange",function(w){t.CHM(o);const y=t.oxw();return t.KtG(y.fileManagerOpenFormReport=w)}),t.qZA(),t.TgZ(20,"a",20),t.ALo(21,"cmsthumbnail"),t.YNc(22,Lt,2,3,"img",21),t.qZA(),t._UZ(23,"hr"),t.YNc(24,$,19,4,"table",22),t._UZ(25,"hr"),t.TgZ(26,"h5"),t._uU(27,"\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u062a\u0648\u0631"),t.qZA(),t.TgZ(28,"p"),t._uU(29,"\u062f\u0631 \u0648\u0631\u0648\u062f \u0627\u06cc\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0633\u0627\u0645\u0627\u0646\u0647 \u0647\u0645\u0627\u0647\u0646\u06af \u0628\u0627\u0634\u06cc\u062f"),t.qZA(),t.TgZ(30,"div",23)(31,"div",24),t.YNc(32,It,3,3,"button",25),t.qZA(),t.TgZ(33,"mat-table",26,27),t.ynx(35,28),t.YNc(36,vt,2,0,"mat-header-cell",29),t.YNc(37,Xt,3,2,"mat-cell",30),t.BQk(),t.ynx(38,31),t.YNc(39,te,2,0,"mat-header-cell",29),t.YNc(40,de,3,2,"mat-cell",30),t.BQk(),t.ynx(41,32),t.YNc(42,ne,2,0,"mat-header-cell",29),t.YNc(43,Rt,3,2,"mat-cell",30),t.BQk(),t.ynx(44,33),t.YNc(45,re,2,0,"mat-header-cell",29),t.YNc(46,le,3,2,"mat-cell",30),t.BQk(),t.ynx(47,34),t.YNc(48,Q,2,0,"mat-header-cell",29),t.YNc(49,pe,3,2,"mat-cell",30),t.BQk(),t.ynx(50,35),t.YNc(51,se,2,0,"mat-header-cell",29),t.YNc(52,Tt,3,2,"mat-cell",30),t.BQk(),t.ynx(53,36),t.YNc(54,ce,2,0,"mat-header-cell",29),t.YNc(55,$t,3,2,"mat-cell",30),t.BQk(),t.ynx(56,37),t.YNc(57,qt,2,0,"mat-header-cell",29),t.YNc(58,p,3,2,"mat-cell",30),t.BQk(),t.ynx(59,38),t.YNc(60,b,2,0,"mat-header-cell",29),t.YNc(61,L,3,2,"mat-cell",30),t.BQk(),t.ynx(62,39),t.YNc(63,Y,2,0,"mat-header-cell",29),t.YNc(64,dt,4,2,"mat-cell",30),t.BQk(),t.YNc(65,Kt,1,0,"mat-header-row",40),t.YNc(66,Vt,1,0,"mat-row",41),t.qZA()(),t.TgZ(67,"div",24)(68,"button",42),t.NdJ("click",function(){t.CHM(o);const w=t.oxw();return t.KtG(w.onActionSubmitView360())}),t._UZ(69,"i",43),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"button",44),t.NdJ("click",function(){t.CHM(o);const w=t.oxw();return t.KtG(w.onActionCancellView360())}),t._UZ(73,"i",45),t._uU(74),t.ALo(75,"translate"),t.qZA()(),t._UZ(76,"br"),t.qZA()()}if(2&n){const o=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,25,"TITLE.Photography_Place")),t.xp6(2),t.s9C("placeholder",t.lcZ(8,27,"TITLE.Photography_Place")),t.Q6J("ngModel",o.dataDetailModel.title),t.xp6(3),t.Q6J("ngIf",o.dataDetailModel.title),t.xp6(4),t.s9C("placeholder",t.lcZ(15,29,"TITLE.View_360_File_ID")),t.Q6J("ngModel",o.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("ngIf",o.dataDetailModel.linkFileId),t.xp6(3),t.Q6J("language",o.appLanguage)("isPopup",!0)("openForm",o.fileManagerOpenFormReport)("tree",o.fileManagerTree)("openDirectUploadView",!0)("openFilemanagerButtonLabelKey","select")("selectFileType",o.selectFileTypeReport)("openFilemanagerButtonView",!1),t.xp6(1),t.s9C("href",t.lcZ(21,31,o.dataDetailModel.panorama),t.LSH),t.xp6(2),t.Q6J("ngIf",(null==o.dataDetailModel||null==o.dataDetailModel.panorama?null:o.dataDetailModel.panorama.length)>0),t.xp6(2),t.Q6J("ngIf",o.postionView),t.xp6(8),t.Q6J("ngIf",o.postionView),t.xp6(1),t.Q6J("dataSource",o.tableHotSpotdataSource),t.xp6(32),t.Q6J("matHeaderRowDef",o.tableHotspotDisplayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.tableHotspotDisplayedColumns),t.xp6(4),t.hij(" ",t.lcZ(71,33,"ACTION.SUBMIT_BUTTON")," "),t.xp6(4),t.hij(" ",t.lcZ(75,35,"ACTION.CANCEL")," ")}}function _t(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.PHOTO")," "))}function gt(n,f){if(1&n&&t._UZ(0,"img",48),2&n){const o=t.oxw(2).$implicit;t.s9C("src",o.panorama,t.LSH)}}function xt(n,f){if(1&n&&(t.ynx(0),t.TgZ(1,"a",20),t.YNc(2,gt,1,1,"img",21),t.qZA(),t.BQk()),2&n){const o=t.oxw().$implicit;t.xp6(1),t.s9C("href",o.panorama,t.LSH),t.xp6(1),t.Q6J("ngIf",(null==o||null==o.panorama?null:o.panorama.length)>0)}}function Mt(n,f){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,xt,3,2,"ng-container",50),t.qZA()),2&n){const o=f.$implicit;t.xp6(1),t.Q6J("ngIf",o.panorama)}}function Ut(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TITLE.Photography_Place")," "))}function at(n,f){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.title," ")}}function v(n,f){if(1&n&&(t.TgZ(0,"mat-cell"),t.YNc(1,at,2,1,"ng-container",50),t.qZA()),2&n){const o=f.$implicit;t.xp6(1),t.Q6J("ngIf",o.title)}}function Et(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1," \u0634\u0646\u0627\u0633\u0647 \u0635\u062d\u0646\u0647 "),t.qZA())}function Nt(n,f){if(1&n&&(t.TgZ(0,"mat-cell"),t.ynx(1),t._uU(2),t.BQk(),t.qZA()),2&n){const o=f.$implicit;t.xp6(2),t.hij(" ",o.linkFileId," ")}}function Ct(n,f){1&n&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"translate"),t.ALo(3,"translate"),t.qZA()),2&n&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"TITLE.Edit")," | ",t.lcZ(3,4,"TITLE.Delete")," "))}function Gt(n,f){if(1&n){const o=t.EpF();t.TgZ(0,"mat-cell",79)(1,"small")(2,"mat-icon",80),t.NdJ("click",function(){const y=t.CHM(o).renderIndex,B=t.oxw(2);return t.KtG(B.onActionOptionEditView360(y))}),t._uU(3,"edit"),t.qZA()(),t._uU(4,"| "),t.TgZ(5,"small")(6,"mat-icon",81),t.NdJ("click",function(){const y=t.CHM(o).renderIndex,B=t.oxw(2);return t.KtG(B.onActionOptionRemoveView360(y))}),t._uU(7,"delete"),t.qZA()()()}}function kt(n,f){1&n&&t._UZ(0,"mat-header-row")}function u(n,f){1&n&&t._UZ(0,"mat-row")}function T(n,f){if(1&n&&(t.TgZ(0,"div",7)(1,"mat-table",73),t.ynx(2,74),t.YNc(3,_t,3,3,"mat-header-cell",29),t.YNc(4,Mt,2,1,"mat-cell",30),t.BQk(),t.ynx(5,75),t.YNc(6,Ut,3,3,"mat-header-cell",29),t.YNc(7,v,2,1,"mat-cell",30),t.BQk(),t.ynx(8,76),t.YNc(9,Et,2,0,"mat-header-cell",29),t.YNc(10,Nt,3,1,"mat-cell",30),t.BQk(),t.ynx(11,39),t.YNc(12,Ct,4,6,"mat-header-cell",29),t.YNc(13,Gt,8,0,"mat-cell",77),t.BQk(),t.YNc(14,kt,1,0,"mat-header-row",78),t.YNc(15,u,1,0,"mat-row",41),t.qZA()()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("dataSource",o.tabledataSource),t.xp6(13),t.Q6J("matHeaderRowDef",o.tabledisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.tabledisplayedColumns)}}class l{viewerGetYaw;viewerGetPitch;clickGetYaw;clickGetPitch}let h=(()=>{class n{cmsToastrService;publicHelper;translate;static nextId=0;id=++n.nextId;constructor(o,_,w){this.cmsToastrService=o,this.publicHelper=_,this.translate=w,this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}getGuid(){return Math.floor(1e3*Math.random())+""}scenesList=[];dataDetailModel=new z.$lU;privateDataModel;dataModelChange=new t.vpe;set dataModel(o){o||(o=new z.veq),o.defaultValue||(o.defaultValue=new z.vyA),o.scenes||(o.scenes=new Map),this.scenesList=[],Object.keys(o.scenes).map(_=>{o.scenes[_].guid=this.getGuid(),this.scenesList.push(o.scenes[_])}),this.scenesList.forEach(_=>{_.hotSpots||(_.hotSpots=[]),_.hotSpots.forEach(w=>{w.guid=this.getGuid()})}),this.privateDataModel=o,this.tabledataSource.data=this.scenesList,this.tableHotSpotdataSource.data=[]}get dataModel(){return this.privateDataModel}set dataImageModel(o){o||(o=[]),this.privateDataImageModel=o}privateDataImageModel;formInfo=new z.LEF;loading=new j.O;loadingOption=new j.O;tabledataSource=new g.by;tableHotSpotdataSource=new g.by;tabledisplayedColumns=["linkFileId","panorama","Title","Action"];tableHotspotDisplayedColumns=["type","sceneIdSelector","text","url","pitch","yaw","Action"];selectFileTypeReport=["jpeg","jpg"];fileManagerTree;appLanguage="fa";showAddView360=!1;fileManagerOpenFormReport=!1;ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.Edit")}container;viewer;options;postionView;ngAfterViewInit(){this.container.nativeElement.style.display="none"}uniqByReduce(o){const _=[];return o.forEach(w=>{!_.includes(w)&&0==_.filter(y=>y.pitch==w.pitch&&y.yaw==w.yaw).length&&_.push(w)}),_}actionPannellumImageLoad(o,_){const w={type:"equirectangular",panorama:o,autoLoad:!0,autoRotate:1.5,crossOrigin:"anonymous"};_&&_.length>0&&(w.hotSpots=this.uniqByReduce(_));const y=Object.assign({},w,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,y),this.container.nativeElement.style.display="block"}actionPannellumTourLoadClick=!1;actionPannellumTourLoad(){this.actionPannellumTourLoadClick=!0,this.actionPrivateDataModelOptimaze();const o={};o.default=this.privateDataModel.defaultValue,this.privateDataModel&&this.privateDataModel.scenes&&(o.scenes=this.privateDataModel.scenes);const _=Object.assign({},o,this.options);this.viewer&&this.onActionPannellumDestroy(),this.viewer=pannellum.viewer(this.container.nativeElement,_),this.container.nativeElement.style.display="block"}onActionPannellumClick(o){if(!this.viewer)return;if(this.actionPannellumTourLoadClick)return void(this.actionPannellumTourLoadClick=!1);this.postionView=new l,this.postionView.viewerGetYaw=this.viewer.getYaw(),this.postionView.viewerGetPitch=this.viewer.getPitch();const _=this.viewer.mouseEventToCoords(o);!_||0==_.length||(this.postionView.clickGetYaw=_[1],this.postionView.clickGetPitch=_[0])}onActionPannellumDestroy(){this.container.nativeElement.style.display="none",this.postionView=null,this.viewer&&this.viewer.destroy()}onActionPannellumClickLastPoint(){this.postionView&&(0!=this.postionView.clickGetYaw||0!=this.postionView.clickGetPitch)&&(this.editHotspot.yaw=this.postionView.clickGetYaw,this.editHotspot.pitch=this.postionView.clickGetPitch)}onActionFileSelect(o){o&&o.id&&0!==o.id?(this.dataDetailModel.linkFileId=o.id,this.dataDetailModel.panorama=o.downloadLinksrc,this.dataDetailModel.preview=o.downloadLinksrc,this.actionPannellumImageLoad(this.dataDetailModel.panorama,[])):this.cmsToastrService.typeErrorSelectedRow()}onActionSubmitView360(){(!this.dataDetailModel.linkFileId||this.dataDetailModel.linkFileId<=0)&&this.cmsToastrService.typeErrorMessage("\u0641\u0627\u06cc\u0644 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647"),this.scenesList||(this.scenesList=[]),this.selectIndex>=0?this.scenesList[this.selectIndex]=this.dataDetailModel:this.scenesList.push(this.dataDetailModel),this.actionPrivateDataModelOptimaze(),this.dataModelChange.emit(this.privateDataModel),this.showAddView360=!this.showAddView360,this.selectIndex=-1,this.onActionPannellumDestroy()}actionPrivateDataModelOptimaze(){this.privateDataModel.defaultValue||(this.privateDataModel.defaultValue=new z.vyA),this.privateDataModel.scenes=new Map,this.scenesList||(this.scenesList=[]),this.scenesList.forEach(o=>{if(o.title&&o.title.length>0){const _=[];o.hotSpots||(o.hotSpots=[]),o.hotSpots.forEach(w=>{w.type&&w.type.length>0&&_.push(w)}),o.hotSpots=this.uniqByReduce(_),this.privateDataModel.scenes[o.linkFileId]=o,this.privateDataModel.scenes[o.linkFileId].hfov=110}}),(!this.privateDataModel.defaultValue.firstScene||0==this.privateDataModel.defaultValue.firstScene.length)&&(this.privateDataModel.scenes&&this.scenesList&&this.scenesList.length>0&&(this.privateDataModel.defaultValue.firstScene=this.scenesList[0].linkFileId+""),this.privateDataModel.defaultValue.sceneFadeDuration=1e3)}onActionCancellView360(){this.showAddView360=!1,this.onActionPannellumDestroy()}onActionShowView360Add(){this.dataDetailModel=new z.$lU,this.showAddView360=!this.showAddView360,this.tableHotSpotdataSource.data=[]}inAddhotspotGuid="";onActionShowHotspotAdd(){this.dataDetailModel||(this.dataDetailModel=new z.$lU),this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.editHotspot=new z.aCC;const o=new z.aCC;o.guid=this.getGuid(),this.inAddhotspotGuid=o.guid,this.dataDetailModel.hotSpots.push(o),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.newROw(o),this.onActionPannellumClickLastPoint()}onActionOptionRemoveView360(o){o<0||!this.scenesList||0===this.scenesList.length||(this.scenesList.splice(o,1),this.actionPrivateDataModelOptimaze(),this.dataModel=this.privateDataModel,this.dataModelChange.emit(this.privateDataModel),this.onActionPannellumDestroy())}selectIndex=-1;onActionOptionEditView360(o){o<0||!this.scenesList||0===this.scenesList.length||(this.dataDetailModel=this.scenesList[o],this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.actionPannellumImageLoad(this.dataDetailModel.panorama,this.dataDetailModel.hotSpots),this.oldHotspot=new z.aCC,this.editHotspot=new z.aCC,this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots),this.selectIndex=o,this.showAddView360=!this.showAddView360)}editHotspot;oldHotspot;editdisabled;newROw(o){this.editHotspot=o&&o.guid?o:new z.aCC,this.oldHotspot={...this.editHotspot}}editROw(o){this.editHotspot=o&&o.guid?o:new z.aCC,this.oldHotspot={...this.editHotspot},this.inAddhotspotGuid=""}removeROw(o){const _=this.dataDetailModel.hotSpots.findIndex(w=>w.guid==o.guid);_>=0&&(this.dataDetailModel.hotSpots.splice(_,1),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}updateEdit(){this.inAddhotspotGuid="",this.editdisabled=!0;const o=this.dataDetailModel.hotSpots.findIndex(_=>_.guid==this.oldHotspot.guid);o>=0&&(this.dataDetailModel.hotSpots[o]=this.editHotspot),this.editdisabled=!1,this.oldHotspot=new z.aCC,this.editHotspot=new z.aCC}cancelEdit(){this.inAddhotspotGuid?.length>0&&(this.dataDetailModel.hotSpots=this.dataDetailModel.hotSpots.filter(o=>o.guid!=this.inAddhotspotGuid)),this.editHotspot=new z.aCC,this.oldHotspot&&this.oldHotspot.guid&&(this.dataDetailModel.hotSpots||(this.dataDetailModel.hotSpots=[]),this.tableHotSpotdataSource.data=this.uniqByReduce(this.dataDetailModel.hotSpots))}onActionImportFile360View(){this.privateDataImageModel&&this.privateDataImageModel.length>0&&(this.actionPrivateDataModelOptimaze(),this.privateDataImageModel.forEach(o=>{if(!this.privateDataModel.scenes[o.linkFileId]&&o.linkFileId>0){const _=new z.$lU;_.guid=this.getGuid(),_.linkFileId=o.linkFileId,_.title=o.title,_.hotSpots=this.uniqByReduce(o.hotSpots),_.panorama=o.panorama,_.preview=o.preview,_.hfov=110,this.privateDataModel.scenes[o.linkFileId]=_}}),this.dataModel=this.privateDataModel)}static \u0275fac=function(_){return new(_||n)(t.Y36(At.e),t.Y36(Z.i),t.Y36(d.sK))};static \u0275cmp=t.Xpm({type:n,selectors:[["app-cms-360-tour-list"]],viewQuery:function(_,w){if(1&_&&t.Gf(Ht,5),2&_){let y;t.iGM(y=t.CRH())&&(w.container=y.first)}},inputs:{dataModel:"dataModel",dataImageModel:"dataImageModel"},outputs:{dataModelChange:"dataModelChange"},decls:8,vars:7,consts:[["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px;",3,"click",4,"ngIf"],["type","button","mat-button","","class","btn btn-primary font-size-h6 px-3 py-2","style","margin: 10px ",3,"click",4,"ngIf"],[1,"container",2,"height","380px","width","100%","direction","ltr",3,"id","click"],["container",""],["class","example-container mat-elevation-z8",4,"ngIf"],[3,"options"],["type","button","mat-button","",1,"btn","btn-primary","font-size-h6","px-3","py-2",2,"margin","10px",3,"click"],[1,"example-container","mat-elevation-z8"],[1,"m-2"],[1,"ntk-full-width","mb-1"],["matInput","","name","dataDetailModel.title","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","class","pointer","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",1,"pointer"],[1,"ntk-full-width"],["matInput","","name","dataDetailModel.linkFileId","type","text",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openDirectUploadView","openFilemanagerButtonLabelKey","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["target","_blank",3,"href"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],["class","grid-row-ltr-center",4,"ngIf"],[2,"background-color","bisque","padding","5px"],[1,"form-actions",2,"direction","ltr"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","type"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sceneId"],["matColumnDef","sceneIdSelector"],["matColumnDef","pitch"],["matColumnDef","yaw"],["matColumnDef","targetYaw"],["matColumnDef","targetPitch"],["matColumnDef","text"],["matColumnDef","url"],["matColumnDef","Action"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-check-square-o"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",1,"pointer",3,"click"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[1,"grid-row-ltr-center"],[4,"ngIf"],[1,"text-truncate","grid-row-ltr-center"],["appearance","outline",2,"width","100%"],["placeholder","Select","name","type",3,"disabled","ngModel","ngModelChange"],[3,"value"],[1,"text-truncate"],["matInput","","placeholder","sceneId","name","sceneId",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["placeholder","Select","name","sceneId",3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","placeholder","pitch","name","pitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","type","number","placeholder","yaw","name","yaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetYaw","name","targetYaw",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","targetPitch","name","targetPitch",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],["matInput","","placeholder","text","name","text",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"text-truncate","grid-row-ltr"],["matInput","","placeholder","url","name","url",2,"direction","ltr","text-align","left",3,"disabled","ngModel","ngModelChange"],[1,"m-1",2,"text-align","center"],[3,"click"],["type","button","mat-raised-button","","color","accent","class","mb-2",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","warn",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click",4,"ngIf"],["type","button","mat-raised-button","","color","accent",1,"mb-2",3,"disabled","click"],["type","button","mat-raised-button","","color","warn","matTooltip","\u062b\u0628\u062a \u0622\u062e\u0631\u06cc\u0646 \u0646\u0642\u0637\u0647 \u06a9\u0644\u06cc\u06a9 \u0634\u062f\u0647",3,"disabled","click"],["multiTemplateDataRows","",3,"dataSource"],["matColumnDef","panorama"],["matColumnDef","Title"],["matColumnDef","linkFileId"],["class","Action",4,"matCellDef"],[4,"matHeaderRowDef"],[1,"Action"],["matTooltipPosition","before","aria-hidden","false",2,"color","blue","cursor","pointer",3,"click"],["matTooltipPosition","before","aria-hidden","false",2,"color","red","cursor","pointer",3,"click"]],template:function(_,w){1&_&&(t.YNc(0,ut,3,3,"button",0),t.YNc(1,Bt,2,0,"button",1),t.YNc(2,M,2,0,"button",1),t.TgZ(3,"div",2,3),t.NdJ("click",function(B){return w.onActionPannellumClick(B)}),t.qZA(),t.YNc(5,pt,77,37,"div",4),t._UZ(6,"app-progress-spinner",5),t.YNc(7,T,16,3,"div",4)),2&_&&(t.Q6J("ngIf",!w.showAddView360),t.xp6(1),t.Q6J("ngIf",w.privateDataImageModel&&w.privateDataImageModel.length>0),t.xp6(1),t.Q6J("ngIf",w.privateDataModel&&w.privateDataModel&&w.privateDataModel.scenes&&w.scenesList&&w.scenesList.length>0),t.xp6(1),t.Q6J("id",w.id),t.xp6(2),t.Q6J("ngIf",w.showAddView360),t.xp6(1),t.Q6J("options",w.loadingOption),t.xp6(1),t.Q6J("ngIf",!w.showAddView360))},dependencies:[i.sg,i.O5,rt.Fj,rt.wV,rt.JJ,rt.Q7,rt.wO,rt.nD,rt.On,ft.ey,U.lW,P.KE,P.hX,P.R9,ht.Hw,ct.Nt,wt.gD,ae.YE,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,St.gM,x.HG,it.O,d.X$,k.v],encapsulation:2})}return n})()},76609:(mt,I,m)=>{"use strict";m.d(I,{D:()=>Ht});var t=m(8239),g=m(64537),V=m(20092),ot=m(34511),e=m(57445),nt=m(51927),z=m(83151),j=m(42147),At=m(61528),Z=m(27969),d=m(60656),i=m(56707),rt=m(88692),ft=m(61637),U=m(1379),P=m(88659),ht=m(83331),ct=m(39665),wt=m(75738),ae=m(81418);function St(ut,Bt){if(1&ut&&(g._UZ(0,"img",9),g.ALo(1,"cmsthumbnail")),2&ut){const M=g.oxw().$implicit;g.s9C("src",g.lcZ(1,1,M.linkImageIdSrc),g.LSH)}}function x(ut,Bt){if(1&ut&&(g.TgZ(0,"mat-option",7),g.YNc(1,St,2,3,"img",8),g.TgZ(2,"span"),g._uU(3),g.qZA()()),2&ut){const M=Bt.$implicit,F=g.oxw();g.Q6J("value",M)("disabled",F.optionDisabled),g.xp6(1),g.Q6J("ngIf",M.linkImageIdSrc),g.xp6(2),g.Oqu(F.displayOption(M))}}function it(ut,Bt){if(1&ut){const M=g.EpF();g.TgZ(0,"mat-icon",10),g.NdJ("click",function(){g.CHM(M);const lt=g.oxw();return g.KtG(lt.onActionSelectClear())}),g._uU(1,"close"),g.qZA()}}const k=["*"];let Ht=(()=>{class ut{coreEnumService;translate;cdr;categoryService;static nextId=0;id=++ut.nextId;constructor(M,F,lt,Lt){this.coreEnumService=M,this.translate=F,this.cdr=lt,this.categoryService=Lt,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}dataModelResult=new ot.y$4;dataModelSelect=new ot.Dp$;formControl=new V.NI;filteredOptions;optionDisabled=!1;optionSelectFirstItem=!1;optionPlaceholder="";optionChange=new g.vpe;optionReload=()=>this.onActionReload();set optionSelectForce(M){this.onActionSelectForce(M)}loading=new d.O;get optionLoading(){return this.loading}set optionLoading(M){this.loading=M}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,nt.O)(""),(0,z.b)(1500),(0,j.x)(),(0,At.w)(M=>this.DataGetAll("string"==typeof M||"number"==typeof M?M:"")))}displayFn(M){return M&&M.virtual_Parent&&M.virtual_Parent.title.length>0&&M.virtual_Parent.virtual_Parent&&M.virtual_Parent.virtual_Parent.title.length>0&&M.virtual_Parent.virtual_Parent.virtual_Parent&&M.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?M.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+M.virtual_Parent.virtual_Parent.titleML+" > "+M.virtual_Parent.titleML+" > "+M.titleML:M&&M.virtual_Parent&&M.virtual_Parent.title.length>0&&M.virtual_Parent.virtual_Parent&&M.virtual_Parent.virtual_Parent.title.length>0?M.virtual_Parent.virtual_Parent.titleML+" > "+M.virtual_Parent.titleML+" > "+M.titleML:M&&M.virtual_Parent&&M.virtual_Parent.title.length>0?M.virtual_Parent.titleML+" > "+M.titleML:M?M.titleML:void 0}displayOption(M){return M&&M.virtual_Parent&&M.virtual_Parent.title.length>0&&M.virtual_Parent.virtual_Parent&&M.virtual_Parent.virtual_Parent.title.length>0&&M.virtual_Parent.virtual_Parent.virtual_Parent&&M.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?M.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+M.virtual_Parent.virtual_Parent.titleML+" > "+M.virtual_Parent.titleML+" > "+M.titleML:M&&M.virtual_Parent&&M.virtual_Parent.title.length>0&&M.virtual_Parent.virtual_Parent&&M.virtual_Parent.virtual_Parent.title.length>0?M.virtual_Parent.virtual_Parent.titleML+" > "+M.virtual_Parent.titleML+" > "+M.titleML:M&&M.virtual_Parent&&M.virtual_Parent.title.length>0?M.virtual_Parent.titleML+" > "+M.titleML:M?M.titleML:void 0}DataGetAll(M){var F=this;return(0,t.Z)(function*(){const lt=new ot.Hay;if(lt.rowPerPage=20,lt.accessLoad=!0,M&&M.length>0){let $=new ot.AO3;$=new ot.AO3,$.propertyName="Symbol",$.value=M,$.searchType=ot.J6G.Contains,$.clauseType=ot.ppe.Or,lt.filters.push($),$=new ot.AO3,$.propertyName="Title",$.value=M,$.searchType=ot.J6G.Contains,$.clauseType=ot.ppe.Or,lt.filters.push($),M&&"number"==typeof+M&&+M>0&&($=new ot.AO3,$.propertyName="Id",$.value=M,$.searchType=ot.J6G.Equal,$.clauseType=ot.ppe.Or,lt.filters.push($))}const Lt=F.constructor.name+"main";return F.loading.Start(Lt),yield(0,e.z)(F.categoryService.ServiceGetAll(lt)).then($=>(F.dataModelResult=$,F.optionSelectFirstItem&&(!F.dataModelSelect||!F.dataModelSelect.id||F.dataModelSelect.id<=0)&&F.dataModelResult.listItems.length>0&&(F.optionSelectFirstItem=!1,setTimeout(()=>{F.formControl.setValue(F.dataModelResult.listItems[0])},1e3),F.onActionSelect(F.dataModelResult.listItems[0])),F.loading.Stop(Lt),$.listItems))})()}onActionSelect(M){this.optionDisabled||(this.dataModelSelect=M,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.dataModelSelect=null,this.formControl.setValue(null),this.optionChange.emit(null))}push(M){return this.filteredOptions.pipe((0,Z.U)(F=>(F.find(lt=>lt.id===M.id)||F.push(M),F)))}onActionSelectForce(M){if("number"==typeof M&&M>0){if(this.dataModelSelect&&this.dataModelSelect.id===M)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(F=>F.id===M)){const F=this.dataModelResult.listItems.find(lt=>lt.id===M);return this.dataModelSelect=F,void this.formControl.setValue(F)}this.categoryService.ServiceGetOneIncludeParent(M).subscribe(F=>{F.isSuccess&&(this.filteredOptions=this.push(F.item),this.dataModelSelect=F.item,this.formControl.setValue(F.item),this.optionChange.emit(F.item))})}else{if(typeof M==typeof ot.Dp$)return this.filteredOptions=this.push(M),this.dataModelSelect=M,void this.formControl.setValue(M);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new ot.Dp$,this.loadOptions()}static \u0275fac=function(F){return new(F||ut)(g.Y36(ot.FLW),g.Y36(i.sK),g.Y36(g.sBO),g.Y36(ot.XRW))};static \u0275cmp=g.Xpm({type:ut,selectors:[["app-cms-location-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLoading:"optionLoading"},outputs:{optionChange:"optionChange"},ngContentSelectors:k,decls:9,vars:10,consts:[[1,"ntk-full-width"],[3,"options"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["matauto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(F,lt){if(1&F&&(g.F$t(),g.TgZ(0,"mat-form-field",0),g._UZ(1,"app-progress-spinner",1)(2,"input",2),g.TgZ(3,"mat-autocomplete",3,4),g.NdJ("optionSelected",function($){return lt.onActionSelect($.option.value)}),g.YNc(5,x,4,4,"mat-option",5),g.ALo(6,"async"),g.qZA(),g.YNc(7,it,2,0,"mat-icon",6),g.Hsn(8),g.qZA()),2&F){const Lt=g.MAs(4);g.xp6(1),g.Q6J("options",lt.loading),g.xp6(1),g.s9C("placeholder",lt.optionPlaceholder),g.Q6J("formControl",lt.formControl)("matAutocomplete",Lt),g.uIk("disabled",!!lt.optionDisabled||null),g.xp6(1),g.Q6J("displayWith",lt.displayFn),g.xp6(2),g.Q6J("ngForOf",g.lcZ(6,8,lt.filteredOptions)),g.xp6(2),g.Q6J("ngIf",null==lt.dataModelSelect?null:lt.dataModelSelect.id)}},dependencies:[rt.sg,rt.O5,V.Fj,V.JJ,V.oH,ft.XC,U.ey,ft.ZL,P.KE,P.R9,ht.Hw,ct.Nt,wt.O,rt.Ov,ae.v],encapsulation:2})}return ut})()},17407:(mt,I,m)=>{"use strict";m.d(I,{r:()=>z});var t=m(64537),g=m(64216),ot=m(92340),e=m(32607),nt=m(27128);let z=(()=>{class j{cmsToastrService;static nextId=0;id=++j.nextId;map$=new t.vpe;zoom$=new t.vpe;options={layers:[(0,g.tileLayer)(ot.N.leafletUrl,{opacity:.7,maxZoom:19,detectRetina:!0})],zoom:16,center:[32.684985,51.6359425]};set optonCenter(Z){this.map&&Z&&Z.lat&&Z.lon&&0!==Z.lat&&0!==Z.lon&&this.map.setView(new g.LatLng(Z.lat,Z.lon),this.zoom)}set optionCurrentPoint(Z){this.onActionCurrentPoint(Z)}map;zoom;destroy=!1;constructor(Z){this.cmsToastrService=Z}ngOnInit(){const rt=g.icon({iconRetinaUrl:"assets/leaflet/marker-icon-2x.png",iconUrl:"assets/leaflet/marker-icon.png",shadowUrl:"assets/leaflet/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]});g.Marker.prototype.options.icon=rt}ngAfterViewInit(){}ngOnDestroy(){this.map&&(this.map.clearAllEventListeners(),this.destroy=!0)}onMapReady(Z){setTimeout(()=>{this.map&&!this.destroy&&Z.invalidateSize()},500),this.map=Z,this.map$.emit(Z),this.zoom=Z.getZoom(),this.zoom$.emit(this.zoom)}onMapZoomEnd(Z){this.zoom=Z.target.getZoom(),this.zoom$.emit(this.zoom)}onActionCurrentPoint(Z=!0){this.getPosition().then(d=>{this.map.setView(new g.LatLng(d.lat,d.lon),this.zoom)})}getPosition(){return new Promise((Z,d)=>{navigator.geolocation.getCurrentPosition(i=>{Z({lon:i.coords.longitude,lat:i.coords.latitude})},i=>{this.cmsToastrService.typeErrorGetPosition()})})}static \u0275fac=function(d){return new(d||j)(t.Y36(e.e))};static \u0275cmp=t.Xpm({type:j,selectors:[["app-cms-map"]],inputs:{options:"options",optonCenter:"optonCenter",optionCurrentPoint:"optionCurrentPoint"},outputs:{map$:"map$",zoom$:"zoom$"},decls:1,vars:1,consts:[["leaflet","",1,"map-container",3,"leafletOptions","leafletMapReady","leafletMapZoomEnd"]],template:function(d,i){1&d&&(t.TgZ(0,"div",0),t.NdJ("leafletMapReady",function(ft){return i.onMapReady(ft)})("leafletMapZoomEnd",function(ft){return i.onMapZoomEnd(ft)}),t.qZA()),2&d&&t.Q6J("leafletOptions",i.options)},dependencies:[nt.je],styles:[".map-container[_ngcontent-%COMP%]{width:100%;height:300px}"]})}return j})()}}]);